<!DOCTYPE html>
<html lang="es"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Máster de Bioinformática • Material elaborado en colaboración con Almudena Moreno Ribera y Silvia Pineda">
  <title>Bioestadística en R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/data-science-2.jpeg" data-background-opacity="0.2" data-background-size="cover" class="quarto-title-block center">
  <h1 class="title">Bioestadística en R</h1>
  <p class="subtitle">Introducción a la estadística en R</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Máster de Bioinformática • Material elaborado en colaboración con Almudena Moreno Ribera y Silvia Pineda 
</div>
</div>
</div>

</section>
<section class="slide level2">

<div class="r-fit-text">
<p><span class="flow">¡Bienvenidos a R!</span></p>
</div>
<p><span style="color:#444442;"><strong>Dejad vuestras hojas de cálculo y SPSS a un lado</strong></span></p>
</section>
<section id="buenas" class="slide level2">
<h2>¡Buenas!</h2>
<p><span class="hl-green"><strong>Correo</strong></span>: <a href="mailto:javalv09@ucm.es" class="email"><strong>javalv09@ucm.es</strong></a>. <span class="hl-green"><strong>Despacho</strong></span>: 722 (3ª planta de la Facultad de Estudios Estadísticos de la UCM).</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="img/me.jpeg"></p>
</div><div class="column" style="width:70%;">
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Javier Álvarez Liébana</strong></span>, de Carabanchel (Bajo).</p></li>
<li class="fragment"><p>Licenciado en Matemáticas (UCM). <span class="hl-yellow"><strong>Doctorado en estadística</strong></span> (UGR).</p></li>
<li class="fragment"><p>Encargado de la <span class="hl-yellow"><strong>visualización y análisis de datos covid</strong></span> del Principado de Asturias (2021-2022).</p></li>
<li class="fragment"><p>Miembro de la <span class="hl-yellow"><strong>Sociedad Española de Estadística e IO</strong></span> y la <span class="hl-yellow"><strong>Real Sociedad Matemática Española</strong></span>.</p></li>
</ul>
</div>
</div>
</div>
<p>Actualmente, <span class="hl-yellow"><strong>investigador y docente en la Facultad de Estadística de la UCM</strong></span>. Divulgando por <a href="https://twitter.com/dadosdelaplace"><strong>Twitter</strong></a> e <a href="https://instagram.com/javieralvarezliebana"><strong>Instagram</strong></a></p>
</section>
<section id="objetivos" class="slide level2">
<h2>Objetivos</h2>
<div class="columns">
<div class="column" style="width:37%;">
<p><img data-src="https://assets-global.website-files.com/6092cb6b4ac959f39728dd26/6188a97fa499b5fbfe410417_target%20(1).png"></p>
</div><div class="column" style="width:63%;">
<div>
<ul>
<li class="fragment"><p>Quitarnos el <span class="hl-yellow"><strong>miedo a los errores en programación</strong></span> → a programar se aprende programando</p></li>
<li class="fragment"><p>Entender los <span class="hl-yellow"><strong>conceptos básicos de R</strong></span> desde cero → aprender a abstraer ideas y algoritmos</p></li>
<li class="fragment"><p>Utilidad de programar → flujos de trabajo <span class="hl-yellow"><strong>reproducibles</strong>, <strong>transparentes</strong></span> y mantenibles</p></li>
<li class="fragment"><p>Introducción al <span class="hl-yellow"><strong>análisis y preprocesamiento</strong></span> de datos</p></li>
<li class="fragment"><p>Adquirir habilidades en el <span class="hl-yellow"><strong>análisis descriptivo de los datos</strong></span></p></li>
<li class="fragment"><p>Adquirir habilidades en la <span class="hl-yellow"><strong>modelización lineal</strong></span></p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="planificacion" class="slide level2">
<h2>Planificación</h2>
<div class="column-screen-inset-right">
<div style="font-size:20px">
<table>
<thead>
<tr class="header">
<th style="text-align: center;">CLASE</th>
<th style="text-align: center;">SEMANA</th>
<th style="text-align: center;">FECHAS</th>
<th style="text-align: center;">TOPIC</th>
<th style="text-align: center;">EJ.</th>
<th style="text-align: center;">CASO PRÁCTICO</th>
<th style="text-align: center;">ENTREGA</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-1">1</a></td>
<td style="text-align: center;">S1</td>
<td style="text-align: center;">17 oct</td>
<td style="text-align: center;">Primeros pasos. Tipos de datos y vectores</td>
<td style="text-align: center;"><a href="#/tu-turno-1-1">💻</a> <a href="#/tu-turno-1-2">💻</a> <a href="#/tu-turno-1-3">💻</a></td>
<td style="text-align: center;"><a href="#/caso-practico-1-1">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-2">2</a></td>
<td style="text-align: center;">S2</td>
<td style="text-align: center;">22 oct</td>
<td style="text-align: center;">Primeras bases de datos</td>
<td style="text-align: center;"><a href="#/tu-turno-2-1">💻</a> <a href="#/tu-turno-2-2">💻</a></td>
<td style="text-align: center;"><a href="#/caso-practico-2-1">🐣</a> <a href="#/caso-practico-2-2">🐣</a> <a href="#/caso-practico-2-3">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-3">3</a></td>
<td style="text-align: center;">S2</td>
<td style="text-align: center;">24 oct</td>
<td style="text-align: center;">Estructuras de control y Quarto</td>
<td style="text-align: center;"><a href="#/tu-turno-3-1">💻</a> <a href="#/tu-turno-3-2">💻</a></td>
<td style="text-align: center;"><a href="#/caso-practico-3-1">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-4">4</a></td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">29 oct</td>
<td style="text-align: center;">Import, ggplot y tidyverse</td>
<td style="text-align: center;"><a href="#/tu-turno-4-1">💻</a> <a href="#/tu-turno-4-2">💻</a> <a href="#/tu-turno-4-3">💻</a> <a href="#/tu-turno-4-4">💻</a> <a href="#/tu-turno-4-5">💻</a> <a href="#/tu-turno-4-6">💻</a></td>
<td style="text-align: center;"><a href="#/caso-practico-4-1">🐣</a> <a href="#/caso-practico-4-2">🐣</a> <a href="#/caso-practico-4-3">🐣</a> <a href="#/caso-practico-4-4">🐣</a> <a href="#/caso-practico-4-5">🐣</a> <a href="#/caso-practico-4-6">🐣</a> <a href="#/caso-practico-4-7">🐣</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="casos-practicos" class="slide level2">
<h2>Casos prácticos: R base</h2>
<p>Practicar también con los 💻 <strong>ejercicios resueltos</strong> de las diapositivas. Los 🐣 indican el nivel de dificultad</p>
<div class="column-screen-inset-right">
<div style="font-size:25px">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">TEMA</th>
<th style="text-align: left;">DATASET</th>
<th style="text-align: center;">LINK</th>
<th style="text-align: center;">DIFICULTAD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">R base y vectores</td>
<td style="text-align: left;">airquality</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/intro-r-vectores-isciii/#caso-pr%C3%A1ctico-i-airquality-vectores">Link</a></td>
<td style="text-align: center;">🐣</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tibbles</td>
<td style="text-align: left;">pinniped</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/matrices-tibble-isciii/#caso-pr%C3%A1ctico-i-pinniped-dataset">Link</a></td>
<td style="text-align: center;">🐣</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tibbles</td>
<td style="text-align: left;">Taylor Swift</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/matrices-tibble-isciii/#caso-pr%C3%A1ctico-ii-an%C3%A1lisis-de-taylor-swift">Link</a></td>
<td style="text-align: center;">🐣🐣</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tibbles y textos</td>
<td style="text-align: left;">Discursos de Navidad</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/matrices-tibble-isciii/#caso-pr%C3%A1ctico-iii-salto-de-longitud-practicando-textos">Link</a></td>
<td style="text-align: center;">🐣🐣🐣</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bucles y estructuras if-else</td>
<td style="text-align: left;">Simulados</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/if-else-bucles-funciones-isciii/#caso-pr%C3%A1ctico-i-bucles-y-estructuras-condicionales">Link</a></td>
<td style="text-align: center;">🐣🐣🐣🐣</td>
</tr>
<tr class="even">
<td style="text-align: left;">Funciones</td>
<td style="text-align: left;">Simulados</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/if-else-bucles-funciones-isciii/#caso-pr%C3%A1ctico-ii-conversor-de-temperaturas">Link</a></td>
<td style="text-align: center;">🐣🐣🐣</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li><a href="#/extra-Rbase">👾 Materiales extras R base</a></li>
</ul>
</section>
<section id="casos-prácticos-tidyverse" class="slide level2">
<h2>Casos prácticos: tidyverse</h2>
<p>Practicar también con los 💻 <strong>ejercicios resueltos</strong> de las diapositivas. Los 🐣 indican el nivel de dificultad</p>
<div class="column-screen-inset-right">
<div style="font-size:25px">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">TEMA</th>
<th style="text-align: left;">DATASET</th>
<th style="text-align: center;">LINK</th>
<th style="text-align: center;">DIFICULTAD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">¿Qué es el tidydata?</td>
<td style="text-align: left;">Datos de la OMS</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/tidydata-isciii/#caso-pr%C3%A1ctico-an%C3%A1lisis-de-datos-de-la-oms">Link</a></td>
<td style="text-align: center;">🐣🐣</td>
</tr>
<tr class="even">
<td style="text-align: left;">Operaciones con filas</td>
<td style="text-align: left;">airquality</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-ii-airquality-tidyverse">Link</a></td>
<td style="text-align: center;">🐣</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Operaciones con columnas</td>
<td style="text-align: left;">Taylor Swift</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-iii-taylor-swift">Link</a></td>
<td style="text-align: center;">🐣🐣</td>
</tr>
<tr class="even">
<td style="text-align: left;">Operaciones con columnas</td>
<td style="text-align: left;">El señor de los anillos</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-iii-extra-el-se%C3%B1or-de-los-anillos">Link</a></td>
<td style="text-align: center;">🐣🐣🐣</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Resúmenes</td>
<td style="text-align: left;">Billboard</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-iv-billboard">Link</a></td>
<td style="text-align: center;">🐣🐣</td>
</tr>
<tr class="even">
<td style="text-align: left;">Resúmenes</td>
<td style="text-align: left;">Datos de fútbol: Messi vs Cristiano Ronaldo</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-v-messi-vs-ronaldo">Link</a></td>
<td style="text-align: center;">🐣🐣</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Resúmenes e importar/exportar</td>
<td style="text-align: left;">Encuesta del CIS sobre feminismo</td>
<td style="text-align: center;"><a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-vi-tabla-en-spss">Link</a></td>
<td style="text-align: center;">🐣🐣🐣🐣</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li><a href="#/extra-tidyverse">👾 Materiales extras tidyverse</a></li>
</ul>
</section>
<section id="casos-prácticos-estadística-descriptiva-en-r" class="slide level2">
<h2>Casos prácticos: estadística descriptiva en R</h2>
<p>::: column-screen-inset-right ::: {style=“font-size:25px”} | TEMA | DATASET | LINK | DIFICULTAD | |:—————|:—————-|:——–:|:———–:| | Intro a la visualización de datos en R | Datos de covid del ISCIII | <a href="https://javieralvarezliebana.quarto.pub/intro-dataviz-isciii/#caso-pr%C3%A1ctico-visualizaci%C3%B3n-covid">Link</a> | 🐣 | | Intro a la estadística descriptiva univariante | Encuesta de satisfacción | <a href="https://javieralvarezliebana.quarto.pub/descriptiva-inferencia-isciii/#caso-pr%C3%A1ctico-encuesta-de-satisfacci%C3%B3n">Link</a> | 🐣🐣 | | Intro a la estadística bivariante: cuali vs cuali | Encuesta de satisfacción | <a href="...">Link</a> | 🐣🐣 | | Intro a la estadística bivariante: cuanti vs cuanti | Salud mental | <a href="...">Link</a> | 🐣🐣 |</p>
<ul>
<li><a href="#/recursos-dataviz">👾 Recursos extras visualización</a></li>
<li><a href="#/extra-dataviz">👾 Materiales extras visualización</a></li>
</ul>
</section>
<section id="materiales-extra" class="slide level2">
<h2>Material extras</h2>
<ul>
<li><a href="#/extra-Rbase">💻 R base</a></li>
<li><a href="#/extra-tidyverse">💻 Tidyverse</a></li>
<li><a href="#/extra-dataviz">💻 Dataviz en R</a></li>
<li><a href="#/github">💻 Github</a></li>
</ul>
</section>
<section id="materiales" class="slide level2">
<h2>Materiales</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Diapositivas</strong></span>: diapositivas en <code>Quarto</code> disponibles y actualizadas en <a href="https://javieralvarezliebana.es/docencia/biostats-ISCII" class="uri"><strong>https://javieralvarezliebana.es/docencia/biostats-ISCII</strong></a>. En el menú de las diapositivas (abajo a la izquierda) tienes una <span class="hl-yellow"><strong>opción para descargarlas en pdf</strong></span> en <code>Tools</code></p></li>
<li><p><span class="hl-yellow">🗃 <strong>Datos</strong></span>: datasets que usaremos a lo largo de la asignatura, disponibles en <a href="https://drive.google.com/drive/folders/1zDc_XqXnTxx8auEYW7aFfIsnzDXOcAiZ?usp=sharing" class="uri"><strong>https://drive.google.com/drive/folders/1zDc_XqXnTxx8auEYW7aFfIsnzDXOcAiZ?usp=sharing</strong></a></p></li>
<li><p><span class="hl-yellow">📚 <strong>Recursos de apoyo</strong></span>: en inglés <a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a> y en castellano <a href="https://cdr-book.github.io/" class="uri">https://cdr-book.github.io/</a>, y <a href="https://ivelasq.quarto.pub/intro-to-quarto/" class="uri">https://ivelasq.quarto.pub/intro-to-quarto/</a> para Quarto.</p></li>
</ul>
</section>
<section>
<section id="clase-1" class="title-slide slide level1 center">
<h1>Clase 1: <span class="flow">primeros pasos</span></h1>
<p><span style="color:#444442;"><strong>Instalando R y RStudio. Primeros pasos: ¿qué tipos de celdas (datos) existen?</strong></span></p>
<ul>
<li><a href="#/tu-turno-1-1">💻 Ejercicios resueltos: R y RStudio</a></li>
<li><a href="#/tu-turno-1-2">💻 Ejercicios resueltos: tipos de datos</a></li>
<li><a href="#/tu-turno-1-3">💻 Ejercicios resueltos: vectores</a></li>
<li><a href="#/caso-practico-1-1">🐣 Workbook/caso práctico I</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="requisitos" class="slide level2">
<h2>Requisitos</h2>
<p>Para el curso los únicos requisitos serán:</p>
<ol type="1">
<li><span class="hl-yellow"><strong>Conexión a internet</strong></span> (para la descarga de algunos datos y paquetes).</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li><span class="hl-yellow"><strong>Instalar R</strong></span>: será nuestro lenguaje. La descarga la haremos (gratuitamente) desde <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a></li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li><span class="hl-yellow"><strong>Instalar RStudio</strong></span> desde <a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a></li>
</ol>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/cranR.jpg" width="420"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rstudio.jpg" width="420"></p>
</div>
</div>
</div>
</section>
<section id="r-vs-rstudio" class="slide level2">
<h2>R vs RStudio</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/gramatica.webp" width="360"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/word.jpg" width="430"></p>
</div>
</div>
<div class="fragment fade-in-then-out">
<p>Programaremos como escribimos (castellano, por ejemplo) → <code>R</code> es <span class="hl-yellow"><strong>lenguaje</strong></span></p>
</div>
<div class="fragment fade-up">
<ul>
<li>Necesitaremos una <span class="hl-yellow"><strong>gramática, un lenguaje</strong></span> (<code>R</code>)</li>
</ul>
<div class="fragment fade-in">
<ul>
<li>Y un entorno, por ejemplo un <span class="hl-yellow"><strong>Word</strong></span> (<code>RStudio</code>), para escribirlo</li>
</ul>
</div>
</div>
</section>
<section id="instalación-de-r" class="slide level2">
<h2>Instalación de R</h2>
<p>El lenguaje <code>R</code> será nuestra <span class="hl-yellow"><strong>gramática y ortografía</strong></span> (nuestras reglas de juego)</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 1</strong></span>: entra en <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a> y selecciona tu sistema operativo.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 2</strong></span>: para Mac basta con que hacer click en el <strong>archivo .pkg</strong>, y abrirlo una vez descargado. Para sistemas Windows, debemos clickar en <strong>install R for the first time</strong> y después en <strong>Download R for Windows</strong>. Una vez descargado, abrirlo como cualquier archivo de instalación.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 3</strong></span>: abrir el ejecutable de instalación.</p></li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>Siempre que tengas que descargar algo de CRAN (ya sea el propio R o un paquete), <span class="hl-orange"><strong>asegúrate de tener conexión a internet</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-operación" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Primera operación</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Para comprobar la instalación, tras abrir <code>R</code>, deberías ver el <code>R GUI</code> (Graphical User Interface) con una <strong>pantalla blanca</strong> similar a esta (<span class="hl-yellow"><strong>consola</strong></span>).</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>Primer código</strong></span>: a una variable llamada <code>a</code> le <strong>asignaremos</strong> el valor <code>1</code> (escribiremos el código en la consola y daremos «enter»). Tras ello haremos la suma <code>a + b</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb1-1" class="hljs-ln-code"><a href="#cb1-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="primera-operación-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Primera operación</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Para comprobar la instalación, tras abrir <code>R</code>, deberías ver el <code>R GUI</code> (Graphical User Interface) con una <strong>pantalla blanca</strong> similar a esta (<span class="hl-yellow"><strong>consola</strong></span>).</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Primer código</strong></span>: a una variable llamada <code>a</code> le <strong>asignaremos</strong> el valor <code>1</code> (escribiremos el código en la consola y daremos «enter»). Tras ello haremos la suma <code>a + b</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb2-1" class="hljs-ln-code"><a href="#cb2-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-2" class="hljs-ln-code"><a href="#cb2-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="primera-operación-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Primera operación</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Para comprobar la instalación, tras abrir <code>R</code>, deberías ver el <code>R GUI</code> (Graphical User Interface) con una <strong>pantalla blanca</strong> similar a esta (<span class="hl-yellow"><strong>consola</strong></span>).</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Primer código</strong></span>: a una variable llamada <code>a</code> le <strong>asignaremos</strong> el valor <code>1</code> (escribiremos el código en la consola y daremos «enter»). Tras ello haremos la suma <code>a + b</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb3-1" class="hljs-ln-code"><a href="#cb3-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-2" class="hljs-ln-code"><a href="#cb3-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb3-3" class="hljs-ln-code"><a href="#cb3-3"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Fíjate que…</strong></p>
</div>
<div class="callout-content">
<p>En la consola aparece un número <code>[1]</code>: simplemente es un contador de elementos (como contar filas en un Word)</p>
</div>
</div>
</div>
</div>
</section>
<section id="instalación-de-r-studio" class="slide level2">
<h2>Instalación de R Studio</h2>
<p><code>RStudio</code> será el <span class="hl-yellow"><strong>Word</strong></span> que usaremos para escribir (lo que se conoce como un <span class="hl-yellow"><strong>IDE: entorno integrado de desarrollo</strong></span>).</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 1</strong></span>: entra la <a href="https://posit.co/download/rstudio-desktop/">web oficial de RStudio</a> (ahora llamado Posit) y selecciona la descarga gratuita.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 2</strong></span>: selecciona el ejecutable que te aparezca acorde a tu sistema operativo.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 3</strong></span>: tras descargar el ejecutable, hay que abrirlo como otro cualquier otro y dejar que termine la instalación.</p></li>
</ul>
</div>
</section>
<section id="organización-de-rstudio" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Consola</strong></span>: es el nombre para llamar a la ventana grande que te ocupa buena parte de tu pantalla. Prueba a escribir el mismo código que antes (la suma de las variables) en ella. La consola será donde <strong>ejecutaremos órdenes y mostraremos resultados</strong>.</li>
</ul>

<img data-src="img/consola_rstudio.jpg" width="420" class="r-stretch"></section>
<section id="organización-de-rstudio-1" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Environment</strong></span>: la pantalla pequeña (puedes ajustar los márgenes con el ratón a tu gusto) que tenemos en la parte superior derecha. Nos mostrará las <strong>variables que tenemos definidas</strong>.</li>
</ul>

<img data-src="img/environment.jpg" width="420" class="r-stretch"></section>
<section id="organización-de-rstudio-2" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Panel multiusos</strong></span>: la ventana que tenemos en la parte inferior derecha no servirá para buscar <strong>ayuda de funciones</strong>, además de para <strong>visualizar gráficos</strong>.</li>
</ul>

<img data-src="img/multiusos.jpg" width="420" class="r-stretch"></section>
<section id="qué-es-r-por-qué-r" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>

<img data-src="img/meme_barco.jpg" class="r-stretch"></section>
<section id="qué-es-r-por-qué-r-1" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>

<img data-src="img/incel_excel.png" class="r-stretch"><p><code>R</code> es la evolución del trabajo de los laboratorios Bell con el lenguaje <code>S</code>, que fue llevado al mundo del software libre por Ross Ihaka y Robert Gentleman en los años 90. La version <code>R 1.0.0</code> se publicó el 29 de febrero de 2000.</p>
</section>
<section id="qué-es-r-por-qué-r-2" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>
<p><code>R</code> es el <span class="hl-yellow"><strong>lenguaje estadístico por excelencia</strong></span>, creado por y para estadísticos/as, con 6 ventajas fundamentales <span class="hl-red"><strong>frente a Excel, SAS, Stata o SPSS</strong></span>:</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Lenguaje de programación</strong></span>: la obviedad → análisis <span class="hl-purple"><strong>replicables</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Gratuito</strong></span>: la filosofía de la comunidad de <code>R</code> es el compartir código bajo <strong>copyleft</strong> → <strong>uso ético de dinero y algoritmos</strong></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Software libre</strong></span>: no solo es gratis sino que permite acceder libremente a código ajeno, incluso al <strong>propio código fuente</strong> → <span class="hl-purple"><strong>flexibilidad y transparencia</strong></span> (Free and Open Source Software FOSS)</li>
</ul>
</div>
</section>
<section id="qué-es-r-por-qué-r-3" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>
<p><code>R</code> es el <span class="hl-yellow"><strong>lenguaje estadístico por excelencia</strong></span>, creado por y para estadísticos/as, con 6 ventajas fundamentales <span class="hl-red"><strong>frente a Excel, SAS, Stata o SPSS</strong></span>:</p>
<ul>
<li><span class="hl-yellow"><strong>Lenguaje modular</strong></span>: hemos instalado lo mínimo, pero existen códigos de otras personas que podemos reusar (casi 20 000 <span class="hl-yellow"><strong>paquetes</strong></span>) → <span class="hl-purple"><strong>ahorro de tiempo</strong></span> e <span class="hl-purple"><strong>innovación inmediata</strong></span></li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Lenguaje de alto nivel</strong></span>: facilita la programación (como Python) → <span class="hl-purple"><strong>menor curva de aprendizaje</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Comunidad y empleabilidad</strong></span>: junto con Python es el lenguaje más utilizado en el campo de la estadística y la ciencia de datos en investigación, docencia, empresas (Línea Directa, Mapfre, Telefónica, Orange, Apple, Spotify, Netflix, El País, Civio, HP, etc) y organismos públicos (ISCIII, CNIC, CNIO, INE, IGN, CIS, CEO, DGT, AEMET, RTVE, etc)</li>
</ul>
</div>
</section>
<section id="por-qué-programar" class="slide level2">
<h2>¿Por qué programar?</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Automatizar</strong></span> → te permitirá automatizar tareas recurrentes.</p></li>
<li><p><span class="hl-yellow"><strong>Replicabilidad</strong></span> → podrás replicar tu análisis siempre de la misma manera.</p></li>
<li><p><span class="hl-yellow"><strong>Flexibilidad</strong></span> → podrás adaptar el software a tus necesidades.</p></li>
<li><p><span class="hl-yellow"><strong>Transparencia</strong></span> → ser auditado por la comunidad.</p></li>
</ul>

<img data-src="img/the_general_problem.png" class="r-stretch"></section>
<section id="idea-fundamental-paquetes" class="slide level2">
<h2>Idea fundamental: paquetes</h2>
<p>Una de las ideas claves de <code>R</code> es el <span class="hl-yellow"><strong>uso de paquetes</strong></span>: códigos que otras personas han implementado para <strong>resolver un problema</strong></p>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Instalación</strong></span>: descargamos los códigos de la web (necesitamos internet) → <span class="hl-purple"><strong>comprar un libro</strong></span>, solo una vez (por ordenador)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Carga</strong></span>: con el paquete descargado, indicamos qué paquetes queremos usar cada vez que abramos <code>RStudio</code> → <span class="hl-purple"><strong>traer el libro de la estantería</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="idea-fundamental-paquetes-1" class="slide level2">
<h2>Idea fundamental: paquetes</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<p>Una vez instalado, hay <strong>dos manera de usar un paquete</strong> (traerlo de la estantería)</p>
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Paquete entero</strong></span>: con <code>library()</code>, usando el nombre del paquete sin comillas, cargamos en la sesión <span class="hl-purple"><strong>todo el libro</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Funciones concretas</strong></span> usando <code>paquete::funcion</code> le índicamos que solo queremos una <span class="hl-purple"><strong>página concreta de ese libro</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="te-vas-equivocar" class="slide level2">
<h2>Te vas equivocar</h2>
<p>Durante tu aprendizaje va a ser muy habitual que las cosas no salgan a la primera → <span class="hl-yellow"><strong>te vas equivocar</strong></span>. No solo será importante asumirlo sino que es <span class="hl-yellow"><strong>importante leer los mensajes de error</strong></span> para aprender de ellos.</p>
<div class="fragment">
<ul>
<li><span class="hl-red"><strong>Mensajes de error</strong></span>: precedidos de <strong>«Error in…»</strong> y serán aquellos fallos que <span class="hl-red"><strong>impidan la ejecución</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="st">"a"</span> <span class="sc">+</span> <span class="dv">1</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "a" + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-orange"><strong>Mensajes de warning</strong></span>: precedidos de <strong>«Warning in…»</strong> son los (posibles) fallos más delicados ya que son incoherencias que <span class="hl-orange"><strong>no impiden la ejecución</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Ejecuta la orden pero el resultado es NaN, **Not A Number**, un valor que no existe</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(-1): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="scripts-documentos-.r" class="slide level2">
<h2>Scripts (documentos .R)</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/abrir_script.jpg" width="350"></p>
</div><div class="column" style="width:65%;">
<p>Un <span class="hl-yellow"><strong>script</strong></span> será el documento en el que programamos, nuestro archivo <code>.doc</code> (aquí con extensión <code>.R</code>) donde escribiremos las órdenes. Para <strong>abrir nuestro primero script</strong>, haz click en el menú en <code>File &lt; New File &lt; R Script</code>.</p>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Es importante <strong>no abusar de la consola</strong>: todo lo que no escribas en un script, cuando cierres, <span class="hl-orange"><strong>lo habrás perdido</strong></span>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p><code>R</code> es <span class="hl-orange"><strong>case-sensitive</strong></span>: es sensible a mayúsculas y minúsculas por lo que <code>x</code> y <code>X</code> representa variables distintas.</p>
</div>
</div>
</div>
</section>
<section id="ejecutando-el-primer-script" class="slide level2">
<h2>Ejecutando el primer script</h2>
<p>Ahora tenemos una <strong>cuarta ventana</strong>: la ventana donde <span class="hl-yellow"><strong>escribiremos nuestros códigos</strong></span>. ¿Cómo ejecutarlo?</p>
<div class="fragment">
<ol type="1">
<li><strong>Escribimos</strong> el código a ejecutar.</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><strong>Guardamos</strong> el archivo .R haciendo click en <code>Save current document</code>.</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>El código no se ejecuta salvo que se lo indiquemos. Tenemos <strong>tres opciones de ejecutar un script</strong>:</li>
</ol>
<ul>
<li><span class="hl-yellow"><strong>Copiar y pegar</strong></span> en consola.</li>
<li><span class="hl-yellow"><strong>Seleccionar líneas</strong></span> y <code>Ctrl+Enter</code></li>
<li><span class="hl-yellow"><strong>Activar Source on save</strong></span> a la derecha de guardar: no solo guarda sino que ejecuta el código <strong>completo</strong>.</li>
</ul>
</div>
</section>
<section id="sé-organizado-proyectos" class="slide level2">
<h2>Sé organizado: proyectos</h2>
<p>De la misma manera que en el ordenador solemos trabajar de manera <span class="hl-yellow"><strong>ordenada por carpetas</strong></span>, en <code>RStudio</code> podemos hacer lo mismo para trabajar de <span class="hl-yellow"><strong>manera eficaz creando proyectos</strong></span>.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:60%;">
<p>Un <span class="hl-yellow"><strong>proyecto será una «carpeta»</strong></span> dentro de <code>RStudio</code>, de manera que nuestro directorio raíz automáticamente será la propia carpeta de proyecto (pudiendo pasar de un proyecto a otro con el menu superior derecho).</p>
<p>Podemos crear uno en una carpeta nueva o en una carpeta ya existente.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/rstudio_proyectos.png" width="370"></p>
</div>
</div>
</div>
</section>
<section id="tu-turno-1-1" class="slide level2">
<h2>💻 Tu turno</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-1-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-1-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-1-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-1-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-1-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-1-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li><li><a href="#tabset-1-8"><span class="hl-yellow"><strong>Ejercicio 8</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>📝 Crea en tu ordenador una carpeta de la asignatura y crea dentro de ella el proyecto de <code>RStudio</code>: es ahí donde vas a guardar todo lo que hagamos a lo largo de este curso.Tras crear el proyecto tendrás un archivo <code>R Project</code>. A continuación crea en dicha carpeta dos subcarpetas: <code>datos</code> (es ahí donde irás guardando los distintos datasets que usaremos) y <code>scripts</code> (es ahí donde irás guardando los archivos <code>.R</code> de cada clase)</p>
</div>
<div id="tabset-1-2">
<p>📝 Dentro del proyecto crea un script <code>ejercicios-clase1.R</code> (dentro de la carpeta <code>scripts</code>). Una vez creado define en él una variable de nombre <code>a</code> y cuyo valor sea -1. Ejecuta el código de las 3 maneras explicadas.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>a <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-3">
<p>📝 Añade debajo otra línea para definir una variable <code>b</code> con el valor 5. Tras ello guarda la multiplicación de ambas variables. Ejecuta el código como consideres.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>a <span class="sc">*</span> b <span class="co"># sin guardar</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>multiplicacion <span class="ot">&lt;-</span> a <span class="sc">*</span> b <span class="co"># guardado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-4">
<p>📝 Modifica el código inferior para definir dos variables c y d, con valores 3 y -1. Tras ello divide las variables y guarda el resultado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>c <span class="ot">&lt;-</span> <span class="co"># deberías asignarle el valor 3</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>d <span class="ot">&lt;-</span> <span class="co"># deberías asignarle el valor -1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>d <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>c <span class="sc">/</span> d <span class="co"># sin guardar</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>division <span class="ot">&lt;-</span> c <span class="sc">/</span> d <span class="co"># guardado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-5">
<p>📝 Asigna un valor positivo a <code>x</code> y calcula su raíz cuadrada; asigna otro negativo <code>y</code> y calcula su valor absoluto con la función <code>abs()</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">sqrt</span>(x)</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="fu">abs</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Toma nota</strong></p>
</div>
<div class="callout-content">
<p>Comandos como <code>sqrt()</code>, <code>abs()</code> o <code>max()</code> son lo que llamamos <span class="hl-purple"><strong>funciones</strong></span>: líneas de código que hemos «encapsulado» bajo un nombre, y dado unos argumentos de entrada, ejecuta las órdenes (una especie de atajo). En las funciones los <span class="hl-yellow"><strong>argumentos irán SIEMPRE entre paréntesis</strong></span></p>
</div>
</div>
</div>
</div>
<div id="tabset-1-6">
<p>📝 Usando la variable <code>x</code> ya definida, completa/modifica el código inferior para guardar en una nueva variable <code>z</code> el resultado guardado en <code>x</code> menos 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>z <span class="ot">&lt;-</span> ? <span class="sc">-</span> ? <span class="co"># completa el código</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="dv">5</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-7">
<p>📝 Define una variable <code>x</code> y asígnale el valor <code>-1</code>. Define otra <code>y</code> y asígnale el valor <code>0</code>. Tras ello realiza las operaciones a) <code>x</code> entre <code>y</code>; b) raíz cuadrada de <code>x</code>. ¿Qué obtienes?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>y <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb21-3"><a href="#cb21-3"></a></span>
<span id="cb21-4"><a href="#cb21-4"></a>x <span class="sc">/</span> y</span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="fu">sqrt</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-8">
<p>📝 Escribe el código inferior en tu script. ¿Por qué crees que no funciona?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>y <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb22-3"><a href="#cb22-3"></a></span>
<span id="cb22-4"><a href="#cb22-4"></a>X <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'X' not found</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="de-la-celda-a-la-tabla" class="slide level2">
<h2>De la CELDA a la TABLA</h2>
<p>¿Qué <span class="hl-yellow"><strong>tipo de dato</strong></span> podemos tener en cada celda de una <strong>tabla</strong>?</p>

<img data-src="img/celdas.jpg" class="r-stretch"><div>
<ul>
<li class="fragment"><span class="hl-yellow"><strong>Celda</strong></span>: dato individual de un tipo concreto.</li>
<li class="fragment"><span class="hl-yellow"><strong>Variable</strong></span>: <strong>concatenación</strong> de valores del mismo tipo (<span class="hl-purple"><strong>vectores en R</strong></span>).</li>
<li class="fragment"><span class="hl-yellow"><strong>Matriz</strong></span>: concatenación de variables del <strong>mismo tipo y longitud</strong>.</li>
<li class="fragment"><span class="hl-yellow"><strong>Tabla</strong></span>: concatenación de variables de <span class="hl-purple"><strong>distinto tipo pero igual longitud</strong></span></li>
<li class="fragment"><span class="hl-yellow"><strong>Lista</strong></span>: concatenación de variables de <span class="hl-purple"><strong>distinto tipo y distinta longitud</strong></span></li>
</ul>
</div>
</section>
<section id="pero-antesbuenas-prácticas" class="slide level2">
<h2>Pero antes…buenas prácticas</h2>
<p>Antes de seguir, es importante que sepas algo cuánto antes: <span class="hl-yellow"><strong>empezar en la programación puede ser frustrante</strong></span></p>
<div class="fragment">
<p>Al igual que cuando aprendes un idioma nuevo, el primer obstáculo a solventar no es tanto qué decir sino cómo decirlo de manera correcta. Y en <code>R</code> pasa lo mismo, así que vamos a <span class="hl-yellow"><strong>normalizar nuestra forma de programar</strong></span> lo máximo posible para evitar errores futuros.</p>
</div>
<div class="fragment">
<ul>
<li><span class="hl-green"><strong>Tip 1</strong></span>: <span class="hl-yellow"><strong>asignar, evaluar y comparar no es lo mismo</strong></span>. Si te has fijado en <code>R</code> estamos usando <code>&lt;-</code> para asignar valores a variables. Usaremos <code>=</code> para evaluar argumentos en funciones y <code>==</code> para saber si dos elementos son iguales.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># asignar</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>x <span class="ot">=</span> <span class="dv">1</span> <span class="co"># evaluar</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>x <span class="sc">==</span> <span class="dv">1</span> <span class="co"># comparar</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="pero-antesbuenas-prácticas-1" class="slide level2">
<h2>Pero antes…buenas prácticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 2</strong></span>: programa como escribes. Al igual que cuando redactas en castellano, acostúmbrate a incorporar <span class="hl-yellow"><strong>espacios y saltos de línea</strong></span> paranoquedarteciego (es una buena práctica y no un requisito porque <code>R</code> no procesa los espacios)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># óptimo</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>x<span class="ot">&lt;-</span><span class="dv">1</span> <span class="co"># regu</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>x<span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># peor (decídete)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-green"><strong>Tip 3</strong></span>: no seas caótico/a, <span class="hl-yellow"><strong>estandariza nombres</strong></span>. Acostúmbrate siempre a nombrar las variables de la misma manera. El único requisito es que <strong>debe empezar siempre por una letra</strong> (y sin tildes). La forma más recomendable es la conocida como <code>snake_case</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>variable_en_modo_snake_case</span>
<span id="cb26-2"><a href="#cb26-2"></a>otraFormaMasDificilDeLeer</span>
<span id="cb26-3"><a href="#cb26-3"></a>hay.gente.que.usa.esto</span>
<span id="cb26-4"><a href="#cb26-4"></a>Incluso_Haygente.Caotica_que.NoMereceNuestraATENCION</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="pero-antesbuenas-prácticas-2" class="slide level2">
<h2>Pero antes…buenas prácticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 4</strong></span>: facilita la lectura y escritura, <span class="hl-yellow"><strong>pon límites</strong></span>. En <code>Tools &lt; Global Options</code> puedes personalizar algunas opciones de <code>RStudio</code>. En <code>Code &lt; Display</code> podemos indicarle en <code>Show margin</code> que los scripts nos muestren un margen “imaginario” (no interacciona con el código) para “forzarnos” a realizar un salto de línea.</li>
</ul>

<img data-src="img/show_margin.jpg" class="r-stretch"></section>
<section id="pero-antesbuenas-prácticas-3" class="slide level2">
<h2>Pero antes…buenas prácticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 5</strong></span>: el <span class="hl-yellow"><strong>tabulador es tu mejor amigo</strong></span>. En <code>RStudio</code> tenemos una herramienta maravillosa: si escribes parte del nombre de una variable o función y tabulas, <code>RStudio</code> te autocompleta</li>
</ul>

<img data-src="img/tab-autocompletar.png" class="r-stretch"></section>
<section id="pero-antesbuenas-prácticas-4" class="slide level2">
<h2>Pero antes…buenas prácticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 6</strong></span>: ni un paréntesis soltero. Siempre que abras un paréntesis deberás cerrarlo. Para facilitar esta tarea entra en <code>Tools &lt; Global Options &lt; Code &lt; Display</code> y activa la opción <code>Rainbow parentheses</code></li>
</ul>

<img data-src="img/rainbow-parentheses.jpg" class="r-stretch"></section>
<section id="pero-antesbuenas-prácticas-5" class="slide level2">
<h2>Pero antes…buenas prácticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 7</strong></span>: fíjate en el lateral izquierdo. No solo podrás ver la línea de código por la que vas sino que, en caso de estar cometiendo un <span class="hl-red"><strong>error de sintaxis</strong></span>, el propio <code>RStudio</code> te avisará.</li>
</ul>

<img data-src="img/rstudio-error-sintaxis.png" class="r-stretch"><ul>
<li><span class="hl-green"><strong>Tip 8</strong></span>: intenta <span class="hl-yellow"><strong>trabajar siempre por proyectos</strong></span> (para esta clase, crea un script <code>clase2.R</code> en el proyecto que creamos en la anterior clase)</li>
</ul>
<p>&nbsp;</p>
<p>Ver más tips en <a href="https://r4ds.had.co.nz/workflow-basics.html#whats-in-a-name" class="uri">https://r4ds.had.co.nz/workflow-basics.html#whats-in-a-name</a></p>
</section>
<section id="celdas-tipos-de-datos" class="slide level2">
<h2>Celdas: tipos de datos</h2>
<p>¿Existen <span class="hl-yellow"><strong>variables más allá de los números en la ciencia de datos</strong></span>? Piensa por ejemplo en los datos que podrías guardar de una persona:</p>
<div class="fragment fade-up">
<ul>
<li>La edad o el peso será un <span class="hl-yellow"><strong>número</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Su nombre será una cadena de <span class="hl-yellow"><strong>texto (conocida como string o char)</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>A la pregunta «¿estás matriculado en la Facultad?» la respuesta será lo que llamamos una <span class="hl-yellow"><strong>variable lógica</strong></span> (<code>TRUE</code> si está matriculado o <code>FALSE</code> en otro caso).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>matriculado <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Su fecha de nacimiento será precisamente eso, una <span class="hl-yellow"><strong>fecha</strong></span>.</li>
</ul>
</div>
</section>
<section id="variables-numéricas" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Variables numéricas</h2>
<p>El dato más sencillo (ya lo hemos usado) serán las <span class="hl-yellow"><strong>variables numéricas</strong></span>. Para saber la <span class="hl-yellow"><strong>clase de dato en R</strong></span> de una variable tenemos la función <code>class()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb30-1" class="hljs-ln-code"><a href="#cb30-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="variables-numéricas-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Variables numéricas</h2>
<p>El dato más sencillo (ya lo hemos usado) serán las <span class="hl-yellow"><strong>variables numéricas</strong></span>. Para saber la <span class="hl-yellow"><strong>clase de dato en R</strong></span> de una variable tenemos la función <code>class()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="fu">class</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Para saber su <span class="hl-yellow"><strong>tipología (naturaleza o formato)</strong></span> variable tenemos <code>typeof()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">typeof</span>(<span class="dv">1</span>) <span class="co"># 1 pero almacenado como un valor real (double, con decimales)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">typeof</span>(<span class="fu">as.integer</span>(<span class="dv">1</span>)) <span class="co"># 1 pero almacenado como un entero.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Fíjate que…</strong></p>
</div>
<div class="callout-content">
<p>En <code>R</code> tenemos una colección de funciones que empiezan por <code>as.x()</code> y que sirven como <span class="hl-yellow"><strong>funciones de conversión</strong></span>: un dato que era de un tipo, lo convertimos a tipo <code>x</code>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="variables-numéricas-2" class="slide level2">
<h2>Variables numéricas</h2>
<p>Además de los números «normales» tendremos el <span class="hl-yellow"><strong>valor más/menos infinito</strong></span> codificado como <code>Inf</code> o <code>-Inf</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -Inf</code></pre>
</div>
</div>
<div class="fragment">
<p>Y valores que <span class="hl-yellow"><strong>no son números reales</strong></span> <em>not a number</em> (indeterminaciones, complejos, etc) codificado como <code>NaN</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-numéricas-3" class="slide level2">
<h2>Variables numéricas</h2>
<p>Con las variables numéricas podemos realizar las <span class="hl-yellow"><strong>operaciones aritméticas</strong></span> de una calculadora: sumar (<code>+</code>)…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<div class="fragment">
<p>…raíz cuadrada (<code>sqrt()</code>)…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">sqrt</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.236068</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>… potencias (<code>^2</code>, <code>^3</code>)…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>a<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>…valor absoluto (<code>abs()</code>), etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="fu">abs</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-texto" class="slide level2">
<h2>Variables de texto</h2>
<p>Imagina que además de la edad de una persona queremos guardar su nombre: ahora la variable será de tipo <code>character</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javier"</span></span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="fu">class</span>(nombre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>cadenas de texto</strong></span> son un tipo con el que obviamente <span class="hl-red"><strong>no podremos hacer operaciones aritméticas</strong></span> (sí otras operaciones como pegar o localizar patrones).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>nombre <span class="sc">+</span> <span class="dv">1</span> <span class="co"># error al sumar número a texto</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in nombre + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Recuerda que…</strong></p>
</div>
<div class="callout-content">
<p>Las variables de tipo texto (character o string) van <span class="hl-orange"><strong>SIEMPRE entre comillas</strong></span>: no es lo mismo <code>TRUE</code> (valor lógico, binario) que <code>"TRUE"</code> (texto).</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-función-paste" class="slide level2">
<h2>Primera función: paste</h2>
<p>Como hemos comentado <code>R</code> llamaremos <span class="hl-yellow"><strong>función</strong></span> a un trozo de <span class="hl-yellow"><strong>código encapsulado</strong></span> bajo un nombre, y que depende de unos <span class="hl-yellow"><strong>argumentos</strong></span> de entrada. Nuestra primera función será <code>paste()</code>: dadas dos cadenas de texto nos permite pegarlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier Álvarez"</code></pre>
</div>
</div>
<div class="fragment">
<p>Fíjate que <span class="hl-yellow"><strong>por defecto</strong></span> nos pega las cadenas con un espacio, pero podemos añadir un <span class="hl-yellow"><strong>argumento opcional</strong></span> para indicarle el separador (en <code>sep = ...</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>, <span class="at">sep =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier*Álvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="primera-función-paste-1" class="slide level2">
<h2>Primera función: paste</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/paste_help.jpg"></p>
</div><div class="column" style="width:50%;">
<p>¿Cómo saber <span class="hl-yellow"><strong>qué argumentos necesita una función</strong></span>? Escribiendo en consola <code>? paste</code> te aparecerá una <span class="hl-yellow"><strong>ayuda</strong></span> en el panel multiusos.</p>
<p>En dicha ayuda podrás ver en su cabecera que argumentos ya tiene <span class="hl-yellow"><strong>asignados por defecto</strong></span> la función</p>
</div>
</div>
<div class="fragment">
<p>Existe una función similar llamada <code>paste0()</code> que pega por defecto con <code>sep = ""</code> (sin nada).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="fu">paste0</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "JavierÁlvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="primera-función-paste-2" class="slide level2">
<h2>Primera función: paste</h2>
<p>Los argumentos (y su detalle) también pueden ser consultado <strong>tabulando (detras una coma)</strong>.</p>

<img data-src="img/tab-functions.png" class="r-stretch"></section>
<section id="funciones-argumentos-por-defecto" class="slide level2">
<h2>Funciones: argumentos por defecto</h2>
<p>Es muy importante entender el concepto de <span class="hl-yellow"><strong>argumento por defecto de una función</strong></span> en <code>R</code>: es un valor que la función usa pero a veces podemos no ver porque <span class="hl-yellow"><strong>ya tiene un valor asignado</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="co"># Hacen lo mismo</span></span>
<span id="cb62-2"><a href="#cb62-2"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier Álvarez"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>, <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier Álvarez"</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Toma nota</strong></p>
</div>
<div class="callout-content">
<p>El operador <code>=</code> lo <span class="hl-yellow"><strong>reservaremos para asignar argumentos</strong></span> dentro de funciones. Para todas las demás asignaciones usaremos <code>&lt;-</code></p>
</div>
</div>
</div>
</div>
</section>
<section id="primer-paquete-glue" class="slide level2">
<h2>Primer paquete: glue</h2>
<p>Una forma más intuitiva de trabajar con textos es usar el paquete <code>{glue}</code>: lo primero que haremos será «comprar el libro» (si nunca lo hemos hecho). Tras ello <span class="hl-yellow"><strong>cargamos el paquete</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">install.packages</span>(<span class="st">"glue"</span>) <span class="co"># solo la primra vez</span></span>
<span id="cb66-2"><a href="#cb66-2"></a><span class="fu">library</span>(glue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con la función <code>glue()</code> de dicho paquete podemos usar <span class="hl-yellow"><strong>variables dentro de cadenas de texto</strong></span>. Por ejemplo, «la edad es de … años», donde la edad está guardada en una variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb67-2"><a href="#cb67-2"></a><span class="fu">glue</span>(<span class="st">"La edad es de {edad} años"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La edad es de 33 años</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Dentro de las llaves también podemos <span class="hl-yellow"><strong>ejecutar operaciones</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>unidades <span class="ot">&lt;-</span> <span class="st">"días"</span></span>
<span id="cb69-2"><a href="#cb69-2"></a><span class="fu">glue</span>(<span class="st">"La edad es de {edad * 365} {unidades}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La edad es de 12045 días</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-lógicas" class="slide level2">
<h2>Variables lógicas</h2>
<p>Otro tipo fundamental serán las <span class="hl-yellow"><strong>variables lógicas o binarias</strong></span> (<strong>dos valores</strong>):</p>
<ul>
<li><code>TRUE</code>: <span class="hl-yellow"><strong>verdadero</strong></span> guardado internamente como un 1.</li>
<li><code>FALSE</code>: <span class="hl-yellow"><strong>falso</strong></span> guardado internamente como un 0.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>soltero <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># ¿Es soltero? --&gt; SÍ</span></span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="fu">class</span>(soltero)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que internamente están guardados como variables binarias, podemos <span class="hl-yellow"><strong>realizar operaciones aritméticas</strong></span> con ellas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a><span class="cn">FALSE</span> <span class="sc">-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-lógicas-1" class="slide level2">
<h2>Variables lógicas</h2>
<p>Como veremos en breve, las variables lógicas en realidad puede tomar un tercer valor: <code>NA</code> o <span class="hl-yellow"><strong>dato ausente</strong></span>, representando las siglas de <em>not available</em>, y será muy habitual encontrarlo dentro de una base de datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>ausente <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>ausente <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Las variables lógicas <span class="hl-red"><strong>NO son variables de texto</strong></span>: <code>"TRUE"</code> es un texto, <code>TRUE</code> es un valor lógico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="cn">TRUE</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="st">"TRUE"</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "TRUE" + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="condiciones-lógicas" class="slide level2">
<h2>Condiciones lógicas</h2>
<p>Los valores lógicos suelen ser resultado de <span class="hl-yellow"><strong>evaluar condiciones lógicas</strong></span>. Por ejemplo, imaginemos que queremos <span class="hl-yellow"><strong>comprobar</strong></span> si una persona se llama Javi.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"María"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con el <span class="hl-yellow"><strong>operador lógico</strong></span> <code>==</code> preguntamos sí lo que tenemos guardado a la izquierda es <span class="hl-purple"><strong>igual que</strong></span> lo que tenemos a la derecha: es una <span class="hl-yellow"><strong>pregunta</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a>nombre <span class="sc">==</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Con su opuesto <code>!=</code> preguntamos <span class="hl-purple"><strong>si es distinto</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a>nombre <span class="sc">!=</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Fíjate que…</strong></p>
</div>
<div class="callout-content">
<p>No es lo mismo <code>&lt;-</code> (<span class="hl-yellow"><strong>asignación</strong></span>) que <code>==</code> (estamos <span class="hl-yellow"><strong>preguntando</strong></span>, es una comparación lógica).</p>
</div>
</div>
</div>
</div>
</section>
<section id="condiciones-lógicas-1" class="slide level2">
<h2>Condiciones lógicas</h2>
<p>Además de las comparaciones «igual a» frente «distinto», también comparaciones de orden como <span class="hl-purple"><strong>menor que</strong></span> <code>&lt;</code>, <span class="hl-purple"><strong>mayor que</strong></span> <code>&gt;</code>, <code>&lt;=</code> o <code>&gt;=</code>.</p>
<p><strong>¿Tiene la persona menos de 32 años?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">34</span></span>
<span id="cb88-2"><a href="#cb88-2"></a>edad <span class="sc">&lt;</span> <span class="dv">32</span> <span class="co"># ¿Es la edad menor de 32 años?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="fragment">
<p><strong>¿La edad es mayor o igual que 38 años?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a>edad <span class="sc">&gt;=</span> <span class="dv">38</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><strong>¿El nombre guardado es Javi?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span>
<span id="cb92-2"><a href="#cb92-2"></a>nombre <span class="sc">==</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha" class="slide level2">
<h2>Variables de fecha</h2>
<p>Un tipo de datos muy especial: los <span class="hl-yellow"><strong>datos de tipo fecha</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a>fecha_char <span class="ot">&lt;-</span> <span class="st">"2021-04-21"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Parece una simple cadena de texto pero <span class="hl-yellow"><strong>debería representar un instante en el tiempo</strong></span>. ¿Qué debería suceder si <span class="hl-purple"><strong>sumamos un 1 a una fecha</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a>fecha_char <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fecha_char + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
<p>Las fechas <span class="hl-red"><strong>NO pueden ser texto</strong></span>: debemos convertir la cadena de texto a fecha.</p>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>Para trabajar con fechas usaremos el paquete <code>{lubridate}</code>, que deberemos instalar antes de poder usarlo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a><span class="fu">install.packages</span>(<span class="st">"lubridate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="variables-de-fecha-1" class="slide level2">
<h2>Variables de fecha</h2>
<p>Una vez instalado, de todos los paquetes (libros) que tenemos, le indicaremos que nos cargue ese concretamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a><span class="fu">library</span>(lubridate) <span class="co"># instala si no lo has hecho</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Para <span class="hl-yellow"><strong>convertir a tipo fecha</strong></span> usaremos la función <code>as_date()</code> del paquete <code>{lubridate}</code> (por defecto en formato <code>yyyy-mm-dd</code>)</p>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a><span class="co"># ¡no es una fecha, es un texto!</span></span>
<span id="cb99-2"><a href="#cb99-2"></a>fecha_char <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fecha_char + 1: non-numeric argument to binary operator</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a><span class="fu">class</span>(fecha_char)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a>fecha <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"2023-03-28"</span>)</span>
<span id="cb103-2"><a href="#cb103-2"></a>fecha <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-29"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a><span class="fu">class</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha-2" class="slide level2">
<h2>Variables de fecha</h2>
<p>En <code>as_date()</code> el formato de fecha por defecto es <code>yyyy-mm-dd</code> así si la cadena de texto no se introduce de manera adecuada…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a><span class="fu">as_date</span>(<span class="st">"28-03-2023"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<div class="fragment">
<p>Para <span class="hl-yellow"><strong>cualquier otro formato debemos especificarlo</strong></span> en el argumento opcional <code>format = ...</code> tal que <code>%d</code> representa días, <code>%m</code> meses, <code>%Y</code> en formato de 4 años y <code>%y</code> en formato de 2 años.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a><span class="fu">as_date</span>(<span class="st">"28-03-2023"</span>, <span class="at">format =</span> <span class="st">"%d-%m-%Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-28"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1"></a><span class="fu">as_date</span>(<span class="st">"28-03-23"</span>, <span class="at">format =</span> <span class="st">"%d-%m-%y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-28"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1"></a><span class="fu">as_date</span>(<span class="st">"03-28-2023"</span>, <span class="at">format =</span> <span class="st">"%m-%d-%Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-28"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1"></a><span class="fu">as_date</span>(<span class="st">"28/03/2023"</span>, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-28"</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha-3" class="slide level2">
<h2>Variables de fecha</h2>
<p>En dicho paquete tenemos funciones muy útiles para <span class="hl-yellow"><strong>manejar fechas</strong></span>:</p>
<ul>
<li>Con <code>today()</code> podemos obtener directamente la <span class="hl-purple"><strong>fecha actual</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1"></a><span class="fu">today</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-11-08"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Con <code>now()</code> podemos obtener la <span class="hl-purple"><strong>fecha y hora actual</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1"></a><span class="fu">now</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-11-08 23:23:41 CET"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Con <code>year()</code>, <code>month()</code> o <code>day()</code> podemos <span class="hl-purple"><strong>extraer el año, mes y día</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a>fecha <span class="ot">&lt;-</span> <span class="fu">today</span>()</span>
<span id="cb121-2"><a href="#cb121-2"></a><span class="fu">year</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2024</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1"></a><span class="fu">month</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
</div>
</section>
<section id="resúmenes-de-paquetes" class="slide level2">
<h2>Resúmenes de paquetes</h2>

<img data-src="img/lubridate.png" class="r-stretch"><div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Amplia contenido</strong></p>
</div>
<div class="callout-content">
<p>Tienes un resumen en pdf de los paquetes más importantes en la <span class="hl-green"><strong>carpeta correspondiente en el campus</strong></span></p>
</div>
</div>
</div>
</section>
<section id="tu-turno-1-2" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-2-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-2-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-2-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-2-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-2-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-2-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<p>📝 Define una variable que guarde tu edad (llamada <code>edad</code>) y otra con tu nombre (llamada <code>nombre</code>)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb125-2"><a href="#cb125-2"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-2">
<p>📝 Comprueba con dicha variable <code>edad</code> si NO tiene 60 años o si se llama <code>"Ornitorrinco"</code> (debes obtener variables lógicas como resultado)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1"></a>edad <span class="sc">!=</span> <span class="dv">60</span> <span class="co"># distinto de</span></span>
<span id="cb126-2"><a href="#cb126-2"></a>nombre <span class="sc">==</span> <span class="st">"Ornitorrinco"</span> <span class="co"># igual a</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-3">
<p>📝 ¿Por qué el código inferior da error?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1"></a>edad <span class="sc">+</span> nombre</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in edad + nombre: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div id="tabset-2-4">
<p>📝 Define otra variable llamada <code>hermanos</code> que responda la pregunta «¿tienes hermanos?» y otra variable que almacene tu fecha de nacimiento (llamada <code>fecha_nacimiento</code>).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1"></a>hermanos <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb129-2"><a href="#cb129-2"></a></span>
<span id="cb129-3"><a href="#cb129-3"></a><span class="fu">library</span>(lubridate) <span class="co"># sino lo tenías ya cargado</span></span>
<span id="cb129-4"><a href="#cb129-4"></a>fecha_nacimiento <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"1989-09-10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-5">
<p>📝 Define otra variable con tus apellidos (llamada <code>apellidos</code>) y usa <code>glue()</code> para tener, en una sola variable llamada <code>nombre_completo</code>, tu nombre y apellidos separando nombre y apellido por una coma</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1"></a>apellidos <span class="ot">&lt;-</span> <span class="st">"Álvarez Liébana"</span></span>
<span id="cb130-2"><a href="#cb130-2"></a><span class="fu">glue</span>(<span class="st">"{nombre}, {apellidos}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-6">
<p>📝 De <code>fecha_nacimiento</code> extrae el mes.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1"></a><span class="fu">month</span>(fecha_nacimiento)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-7">
<p>📝 Calcula los días que han pasado desde la fecha de tu nacimiento hasta hoy (con la fecha de nacimiento definida en el ejercicio 4).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1"></a><span class="fu">today</span>() <span class="sc">-</span> fecha_nacimiento</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="vectores-concatenar" class="slide level2">
<h2>Vectores: concatenar</h2>
<p>Cuando trabajamos con datos normalmente tendremos <span class="hl-yellow"><strong>columnas que representan variables</strong></span>: llamaremos <span class="hl-yellow"><strong>vectores</strong></span> a una <span class="hl-purple"><strong>concatenación</strong></span> de celdas (valores) del <span class="hl-purple"><strong>mismo tipo</strong></span> (lo que sería una columna de una tabla).</p>
<div class="fragment">
<p>La forma más sencilla es con el comando <code>c()</code> (c de <strong>concatenar</strong>), y basta con introducir sus <strong>elementos entre paréntesis y separados por comas</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">27</span>, <span class="dv">60</span>, <span class="dv">61</span>)</span>
<span id="cb133-2"><a href="#cb133-2"></a>edades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Un número individual <code>x &lt;- 1</code> (o bien <code>x &lt;- c(1)</code>) es en realidad un <strong>vector de longitud uno</strong> –&gt; todo lo que sepamos <span class="hl-green"><strong>hacer con un número podemos hacerlo con un vector de ellos</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="vectores-concatenar-1" class="slide level2">
<h2>Vectores: concatenar</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/edades_environment.jpg"></p>
</div><div class="column" style="width:60%;">
<p>Como ves ahora en el <code>environment</code> tenemos una <strong>colección de elementos</strong> guardada</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1"></a>edades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61</code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>La <span class="hl-yellow"><strong>longitud de un vector</strong></span> se puede calcular con <code>length()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1"></a><span class="fu">length</span>(edades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>También podemos <span class="hl-yellow"><strong>concatenar vectores</strong></span> entre sí (los repite uno tras otro)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1"></a><span class="fu">c</span>(edades, edades, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61 32 27 60 61  8</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-numéricas" class="slide level2">
<h2>Secuencias numéricas</h2>
<p>El vector más famoso será el de tipo numérico, y en concreto, las conocidas como <span class="hl-yellow"><strong>secuencias numéricas</strong></span> (por ejemplo, los días del mes), usadas para, entre otras cosas, indexar bucles.</p>
<div class="fragment">
<p>El comando <code>seq(inicio, fin)</code> nos permite crear una <span class="hl-yellow"><strong>secuencia numérica</strong></span> desde un elemento inicial hasta uno final, <span class="hl-purple"><strong>avanzando de uno en uno</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">31</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Fíjate que si hacemos eso con <span class="hl-red"><strong>caracteres no podremos hacerlo</strong></span> ya que no hay un orden a priori entre textos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1"></a><span class="st">"a"</span><span class="sc">:</span><span class="st">"z"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "a":"z": NA/NaN argument</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-numéricas-1" class="slide level2">
<h2>Secuencias numéricas</h2>
<p>Un atajo es el comando <code>1:n</code>, que nos devuelve lo mismo que <code>seq(1, n)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6 7</code></pre>
</div>
</div>
<p>Si el elemento inicial es mayor que el final, entenderá que la secuencia es <span class="hl-purple"><strong>en orden decreciente</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1"></a><span class="dv">7</span><span class="sc">:-</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  7  6  5  4  3  2  1  0 -1 -2 -3</code></pre>
</div>
</div>
<div class="fragment">
<p>También podemos definir <span class="hl-yellow"><strong>otro tipo de distancia</strong></span> (paso) entre consecutivos con el argumento <code>by = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="at">by =</span> <span class="fl">0.5</span>) <span class="co"># secuencia desde 1 a 7 de 0.5 en 0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-numéricas-2" class="slide level2">
<h2>Secuencias numéricas</h2>
<p>Otras veces nos interesará definir una <span class="hl-yellow"><strong>secuencia con una longitud concreta</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="at">l =</span> <span class="dv">7</span>) <span class="co"># secuencia desde 1 a 50 de longitud 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.000000  9.166667 17.333333 25.500000 33.666667 41.833333 50.000000</code></pre>
</div>
</div>
<div class="fragment">
<p>Incluso puede nos interese generar un vector de <span class="hl-yellow"><strong>n elementos repetidos</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1"></a><span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>) <span class="co"># vector de 7 ceros</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0 0 0</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Dado que internamente son guardados como números también podremos hacer esto con <span class="hl-yellow"><strong>fechas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1"></a><span class="fu">seq</span>(<span class="fu">as_date</span>(<span class="st">"2023-09-01"</span>), <span class="fu">as_date</span>(<span class="st">"2023-09-10"</span>), <span class="at">by =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2023-09-01" "2023-09-02" "2023-09-03" "2023-09-04" "2023-09-05"
 [6] "2023-09-06" "2023-09-07" "2023-09-08" "2023-09-09" "2023-09-10"</code></pre>
</div>
</div>
</div>
</section>
<section id="vectores-de-caracteres" class="slide level2">
<h2>Vectores de caracteres</h2>
<p>Un vector es una <strong>concatenación</strong> de elementos del <span class="hl-yellow"><strong>mismo tipo</strong></span>, pero no tienen porque ser necesariamente números. Vamos a crear una frase de ejemplo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1"></a>frase <span class="ot">&lt;-</span> <span class="st">"Me llamo Javi"</span></span>
<span id="cb157-2"><a href="#cb157-2"></a>frase</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me llamo Javi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1"></a><span class="fu">length</span>(frase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<div class="fragment">
<p>En el caso anterior no era un vector, era un solo elemento de texto. Para crear un vector debemos usar de nuevo <code>c()</code> y separar elementos entre comas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Me"</span>, <span class="st">"llamo"</span>, <span class="st">"Javi"</span>)</span>
<span id="cb161-2"><a href="#cb161-2"></a>vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me"    "llamo" "Javi" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1"></a><span class="fu">length</span>(vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</section>
<section id="vectores-de-caracteres-1" class="slide level2">
<h2>Vectores de caracteres</h2>
<p>¿Qué sucederá si <span class="hl-yellow"><strong>concatenamos elementos de diferente tipo</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">"javi"</span>, <span class="st">"3"</span>, <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"    "2"    "javi" "3"    "TRUE"</code></pre>
</div>
</div>
<p>Fíjate que como todos tienen que ser del mismo tipo, lo que hace <code>R</code> es <span class="hl-yellow"><strong>convertir</strong></span> todo a texto, violando la <span class="hl-red"><strong>integridad del dato</strong></span></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1"></a><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 1 0</code></pre>
</div>
</div>
<p>Es importante entender que los valores lógicos en realidad están <span class="hl-yellow"><strong>almacenados internamente como 0/1</strong></span></p>
</div>
</section>
<section id="operaciones-con-vectores" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Con los vectores numéricos podemos hacer las mismas <span class="hl-yellow"><strong>operaciones aritméticas</strong></span> que con los números → un <span class="hl-purple"><strong>número es un vector</strong></span> (de longitud uno)</p>
<div class="fragment">
<p>¿Qué sucederá si <span class="hl-yellow"><strong>sumamos o restamos un valor</strong></span> a un vector?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb169-2"><a href="#cb169-2"></a>x <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1"></a>x <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  6 10 14</code></pre>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Salvo que indiquemos lo contrario, en <code>R</code> las operaciones con vectores son siempre <span class="hl-orange"><strong>elemento a elemento</strong></span></p>
</div>
</div>
</div>
</div>
</section>
<section id="suma-de-vectores" class="slide level2">
<h2>Suma de vectores</h2>
<p>Los vectores también pueden interactuar entre ellos, así que podemos definir, por ejemplo, <span class="hl-yellow"><strong>sumas de vectores</strong></span> (elemento a elemento)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb173-2"><a href="#cb173-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb173-3"><a href="#cb173-3"></a>x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que la operación (por ejemplo, una suma) se realiza elemento a elemento, ¿qué sucederá si <span class="hl-yellow"><strong>sumamos dos vectores de distinta longitud</strong></span>?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb175-2"><a href="#cb175-2"></a>x <span class="sc">+</span> z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11  9</code></pre>
</div>
</div>
<p>Lo que hace es <span class="hl-yellow"><strong>reciclar elementos</strong></span>: si tiene un vector de 4 elementos y sumamos otro de 3 elementos, lo que hará será reciclar del vector con menor longitud.</p>
</div>
</section>
<section id="comparar-vectores" class="slide level2">
<h2>Comparar vectores</h2>
<p>Una operación muy habitual es <span class="hl-yellow"><strong>preguntar a los datos</strong></span> mediante el uso de <span class="hl-purple"><strong>condiciones lógicas</strong></span>. Por ejemplo, si definimos un vector de temperaturas…</p>
<p><span class="hl-yellow"><strong>¿Qué días hizo menos de 22 grados?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">15</span>, <span class="dv">29</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1"></a>x <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>Nos devolverá un <span class="hl-yellow"><strong>vector lógico</strong></span>, en función de si <strong>cada elemento</strong> cumple o no la condición pedida (de <strong>igual longitud</strong> que el vector preguntado)</p>
</div>
<div class="fragment">
<p>Si tuviéramos un <span class="hl-yellow"><strong>dato ausente</strong></span> (por error del aparato ese día), la condición evaluada también sería <code>NA</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="cn">NA</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">7</span>, <span class="dv">29</span>, <span class="dv">10</span>)</span>
<span id="cb180-2"><a href="#cb180-2"></a>y <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE    NA FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="comparar-vectores-1" class="slide level2">
<h2>Comparar vectores</h2>
<p>Las <span class="hl-yellow"><strong>condiciones lógicas pueden ser combinadas</strong></span> de dos maneras:</p>
<ul>
<li><span class="hl-yellow"><strong>Intersección</strong></span>: <span class="hl-purple"><strong>todas</strong></span> las condiciones concatenadas se deben cumplir (<span class="hl-purple"><strong>conjunción y</strong></span> con <code>&amp;</code>) para devolver un <code>TRUE</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<ul>
<li><span class="hl-yellow"><strong>Unión</strong></span>: basta con que <span class="hl-purple"><strong>al menos una</strong></span> se cumpla (<span class="hl-purple"><strong>conjunción o</strong></span> con <code>|</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">|</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="fragment">
<p>Con <code>any()</code> y <code>all()</code> podemos comprobar que <span class="hl-yellow"><strong>todos los elementos</strong></span> cumplen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1"></a><span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="acceder-a-elementos" class="slide level2">
<h2>Acceder a elementos</h2>
<p>Otra operación muy habitual es la de <span class="hl-yellow"><strong>acceder a elementos</strong></span>. La forma más sencilla es usar el operador <code>[i]</code> (acceder al elemento i-ésimo)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">33</span>, <span class="cn">NA</span>, <span class="dv">61</span>) </span>
<span id="cb190-2"><a href="#cb190-2"></a>edades[<span class="dv">3</span>] <span class="co"># accedemos a la edad de la tercera persona </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que un número no es más que un vector de longitud uno, esta operación también la podemos aplicar usando un <span class="hl-yellow"><strong>vector de índices a seleccionar</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hola"</span>, <span class="st">"qué"</span>, <span class="st">"tal"</span>, <span class="st">"estás"</span>, <span class="st">"?"</span>)</span>
<span id="cb192-2"><a href="#cb192-2"></a>y[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span>)] <span class="co"># primer, segundo y cuarto elemento</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "qué"   "estás"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Para acceder al último, sin preocuparnos de cuál es, podemos pasarle como índice la propia longitud <code>x[length(x)]</code></p>
</div>
</div>
</div>
</div>
</section>
<section id="eliminar-elementos" class="slide level2">
<h2>Eliminar elementos</h2>
<p>Otras veces no querremos seleccionar sino <span class="hl-yellow"><strong>eliminar algunos elementos</strong></span>. Deberemos repetir la misma operación pero con el signo - delante: el operador <code>[-i]</code> no selecciona el elemento i-ésimo del vector sino que lo «des-selecciona»</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "qué"   "tal"   "estás" "?"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1"></a>y[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "tal"   "estás" "?"    </code></pre>
</div>
</div>
<div class="fragment">
<p>En muchas ocasiones los queremos <span class="hl-yellow"><strong>seleccionar o eliminar en base a condiciones lógicas</strong></span>, en función de los valores, así que pasaremos como índice la propia condición (recuerda, <code>x &lt; 2</code> nos devuelve un vector lógico)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">30</span>, <span class="dv">17</span>, <span class="dv">45</span>)</span>
<span id="cb198-2"><a href="#cb198-2"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"maría"</span>, <span class="st">"laura"</span>, <span class="st">"carla"</span>, <span class="st">"luis"</span>)</span>
<span id="cb198-3"><a href="#cb198-3"></a>nombres[edades <span class="sc">&lt;</span> <span class="dv">18</span>] <span class="co"># nombres de los menores de edad</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "carla"</code></pre>
</div>
</div>
</div>
</section>
<section id="sumar-vectores" class="slide level2">
<h2>Sumar vectores</h2>
<p>También podemos hacer uso de <span class="hl-yellow"><strong>operaciones estadísticas</strong></span> como por ejemplo <code>sum()</code> que, dado un vector, nos devuelve la suma de todos sus elementos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb200-2"><a href="#cb200-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>¿Qué sucede cuando falta un dato (ausente)?</strong></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb202-2"><a href="#cb202-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>Por defecto, si tenemos un dato ausente, la <span class="hl-yellow"><strong>operación también será ausente</strong></span>. Para poder <span class="hl-purple"><strong>obviar ese dato</strong></span>, usamos un argumento opcional <code>na.rm = TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="sumar-vectores-1" class="slide level2">
<h2>Sumar vectores</h2>
<p>Como hemos comentado que los valores lógicos son guardados internamente como 0 y 1, podremos usarlos en operaciones aritméticas.</p>
<p>Por ejemplo, si queremos <span class="hl-yellow"><strong>averiguar el número de elementos que cumplen una condición</strong></span> (por ejemplo, menores que 3), los que lo hagan tendrán asignado un 1 (<code>TRUE</code>) y los que no un 0 (<code>FALSE</code>) , por lo que basta con sumar dicho vector lógico para obtener el número de elementos que cumplen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb206-2"><a href="#cb206-2"></a><span class="fu">sum</span>(x <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="suma-acumulada" class="slide level2">
<h2>Suma acumulada</h2>
<p>Otra operación habitual que puede sernos útil es la <span class="hl-yellow"><strong>suma acumulada</strong></span> con <code>cumsum()</code> que, dado un vector, nos devuelve un vector a su vez con el primero, el primero más el segundo, el primero más el segundo más el tercero…y así sucesivamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">8</span>)</span>
<span id="cb208-2"><a href="#cb208-2"></a><span class="fu">cumsum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  6  8  7 15</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>¿Qué sucede cuando falta un dato (ausente)?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb210-2"><a href="#cb210-2"></a><span class="fu">cumsum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -1  2 NA NA</code></pre>
</div>
</div>
<p>En el caso de la suma acumulada lo que sucede es que <span class="hl-yellow"><strong>a partir de ese valor, todo lo acumulado posterior será ausente</strong></span>.</p>
</section>
<section id="diferencia" class="slide level2">
<h2>Diferencia</h2>
<p>Otra operación habitual que puede sernos útil es la <span class="hl-yellow"><strong>diferencia (con retardo)</strong></span> con <code>diff()</code> que, dado un vector, nos devuelve un vector con el segundo menos el primero, el tercero menos el segundo, el cuarto menos el tercero…y así sucesivamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb212-2"><a href="#cb212-2"></a><span class="fu">diff</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7 -3 -2  6 -9 -1  6</code></pre>
</div>
</div>
<div class="fragment">
<p>Con el argumento <code>lag =</code> podemos indicar el <span class="hl-yellow"><strong>retardo</strong></span> de dicha diferencia (por ejemplo, <code>lag = 3</code> implica que se resta el cuarto menos el primero, el quinto menos el segundo, etc)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb214-2"><a href="#cb214-2"></a><span class="fu">diff</span>(x, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  1 -5 -4 -4</code></pre>
</div>
</div>
</div>
</section>
<section id="media" class="slide level2">
<h2>Media</h2>
<p>Otras operaciones habituales son la <span class="hl-yellow"><strong>media</strong></span>, <span class="hl-yellow"><strong>mediana</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<ul>
<li><span class="hl-yellow"><strong>Media</strong></span>: medida de centralidad que consiste en sumar todos los elementos y dividirlos entre la cantidad de elementos sumados. La más conocida pero la <span class="hl-red"><strong>menos robusta</strong></span>: dado un conjunto, si se introducen valores atípicos o outliers (valores muy grandes o muy pequeños), la media se perturba con mucha facilidad.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="cn">NA</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb216-2"><a href="#cb216-2"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 169.8889</code></pre>
</div>
</div>
</section>
<section id="percentiles" class="slide level2">
<h2>Percentiles</h2>
<p>Otras operaciones habituales son la <span class="hl-yellow"><strong>media</strong></span>, <span class="hl-yellow"><strong>mediana</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<ul>
<li><span class="hl-yellow"><strong>Mediana</strong></span>: medida de centralidad que consiste en ordenar los elementos y quedarse con el que ocupa la mitad.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb218-2"><a href="#cb218-2"></a><span class="fu">median</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 170</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Percentiles</strong></span>: medidas de posición (nos dividen en partes iguales los datos).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1"></a><span class="fu">quantile</span>(x) <span class="co"># por defecto percentiles 0-25-50-75-100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0%  25%  50%  75% 100% 
 150  165  170  177  191 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1"></a><span class="fu">quantile</span>(x, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  10%   40%   90% 
154.0 167.6 183.0 </code></pre>
</div>
</div>
</div>
</section>
<section id="ordenar-vectores" class="slide level2">
<h2>Ordenar vectores</h2>
<p>Por último, una acción habitual es saber <span class="hl-yellow"><strong>ordenar valores</strong></span>:</p>
<ul>
<li><code>sort()</code>: devuelve el <span class="hl-yellow"><strong>vector ordenado</strong></span>. Por defecto de menor a mayor pero con <code>decreasing = TRUE</code> podemos cambiarlo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">81</span>, <span class="dv">7</span>, <span class="dv">25</span>, <span class="dv">41</span>, <span class="dv">65</span>, <span class="dv">20</span>, <span class="dv">33</span>, <span class="dv">23</span>, <span class="dv">77</span>)</span>
<span id="cb224-2"><a href="#cb224-2"></a><span class="fu">sort</span>(edades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7 20 23 25 33 41 65 77 81</code></pre>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1"></a><span class="fu">sort</span>(edades, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 81 77 65 41 33 25 23 20  7</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>order()</code>: devuelve el <span class="hl-yellow"><strong>vector de índices</strong></span> que tendríamos que usar para tener el vector ordenado</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1"></a><span class="fu">order</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 6 1 7 2 8 9 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1"></a>x[<span class="fu">order</span>(x)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 155 165 167 170 173 177 181 191</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-1-3" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-3-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-3-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-3-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-3-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-3-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-3-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li><li><a href="#tabset-3-8"><span class="hl-yellow"><strong>Ejercicio 8</strong></span></a></li><li><a href="#tabset-3-9"><span class="hl-yellow"><strong>Ejercicio 9</strong></span></a></li><li><a href="#tabset-3-10"><span class="hl-yellow"><strong>Ejercicio 10</strong></span></a></li><li><a href="#tabset-3-11"><span class="hl-yellow"><strong>Ejercicio 11</strong></span></a></li><li><a href="#tabset-3-12"><span class="hl-yellow"><strong>Ejercicio 12</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<p>📝 Define el vector <code>x</code> como la concatenación de los 5 primeros números impares. Calcula la longitud del vector</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1"></a><span class="co"># Dos formas</span></span>
<span id="cb232-2"><a href="#cb232-2"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)</span>
<span id="cb232-3"><a href="#cb232-3"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb232-4"><a href="#cb232-4"></a></span>
<span id="cb232-5"><a href="#cb232-5"></a><span class="fu">length</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-2">
<p>📝 Accede al tercer elemento de <code>x</code>. Accede al último elemento (sin importar la longitud, un código que pueda ejecutarse siempre). Elimina el primer elemento.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1"></a>x[<span class="dv">3</span>]</span>
<span id="cb233-2"><a href="#cb233-2"></a>x[<span class="fu">length</span>(x)]</span>
<span id="cb233-3"><a href="#cb233-3"></a>x[<span class="sc">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-3">
<p>📝 Obtén los elementos de <code>x</code> mayores que 4. Calcula el vector <code>1/x</code> y guárdalo en una variable.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">4</span>]</span>
<span id="cb234-2"><a href="#cb234-2"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb234-3"><a href="#cb234-3"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-4">
<p>📝 Crea un vector que represente los nombres de 5 personas, de los cuales uno es desconocido.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Javi"</span>, <span class="st">"Sandra"</span>, <span class="cn">NA</span>, <span class="st">"Laura"</span>, <span class="st">"Carlos"</span>)</span>
<span id="cb235-2"><a href="#cb235-2"></a>nombres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-5">
<p>📝 Encuentra del vector <code>x</code> de ejercicios anteriores los elementos mayores (estrictos) que 1 Y ADEMÁS menores (estrictos) que 7. Encuentra una forma de averiguar si todos los elementos son o no positivos.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">7</span>]</span>
<span id="cb236-2"><a href="#cb236-2"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-6">
<p>📝 Dado el vector <code>x &lt;- c(1, -5, 8, NA, 10, -3, 9)</code>, ¿por qué su media no devuelve un número sino lo que se muestra en el código inferior?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">8</span>, <span class="cn">NA</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb237-2"><a href="#cb237-2"></a><span class="fu">mean</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</div>
<div id="tabset-3-7">
<p>📝 Dado el vector <code>x &lt;- c(1, -5, 8, NA, 10, -3, 9)</code>, extrae los elementos que ocupan los lugares 1, 2, 5, 6.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">8</span>, <span class="cn">NA</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb239-2"><a href="#cb239-2"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>)]</span>
<span id="cb239-3"><a href="#cb239-3"></a>x[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-8">
<p>📝 Dado el vector <code>x</code> del ejercicio anterior, ¿cuales tienen un dato ausente? Pista: las funciones <code>is.algo()</code> comprueban si el elemento es tipo <code>algo</code> (tabula)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1"></a><span class="fu">is.na</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-9">
<p>📝 Define el vector <code>x</code> como la concatenación de los 4 primeros números pares. Calcula el número de elementos de <code>x</code> menores estrictamente que 5.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1"></a>x[x <span class="sc">&lt;</span> <span class="dv">5</span>] </span>
<span id="cb241-2"><a href="#cb241-2"></a><span class="fu">sum</span>(x <span class="sc">&lt;</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-10">
<p>📝 Calcula el vector <code>1/x</code> y obtén la versión ordenada (de menor a mayor) de las dos formas posibles</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb242-2"><a href="#cb242-2"></a><span class="fu">sort</span>(z)</span>
<span id="cb242-3"><a href="#cb242-3"></a>z[<span class="fu">order</span>(z)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-11">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1"></a><span class="fu">min</span>(x)</span>
<span id="cb243-2"><a href="#cb243-2"></a><span class="fu">max</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-12">
<p>📝 Encuentra del vector <code>x</code> los elementos mayores (estrictos) que 1 y menores (estrictos) que 6. Encuentra una forma de averiguar si todos los elementos son o no negativos.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">7</span>]</span>
<span id="cb244-2"><a href="#cb244-2"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-1-1" class="slide level2">
<h2>🐣 Caso práctico I: vectores</h2>
<p>En el paquete <code>{datasets}</code> (ya instalado por defecto) tenemos diversos conjuntos de datos y uno de ellos es <code>airquality</code>. Debajo te he extraído 3 variables de dicho dataset (fíjate que se hace con <code>datos$variable</code>, ese dolar será importante en el futuro).</p>
<p>Los datos capturan <span class="hl-yellow"><strong>medidas diarias (n = 153 observaciones) de la calidad del aire</strong></span> en Nueva York, de mayo a septiembre de 1973. Se midieron <strong>6 variables</strong>: niveles de ozono, radiación solar, viento, temperatura, mes y día.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb245-2"><a href="#cb245-2"></a>temperature <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp</span>
<span id="cb245-3"><a href="#cb245-3"></a>month <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Month</span>
<span id="cb245-4"><a href="#cb245-4"></a>day <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Day</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/intro-r-vectores-isciii/"><strong>workbook</strong></a></p>
</section></section>
<section>
<section id="clase-2" class="title-slide slide level1 center">
<h1>Clase 2: <span class="flow">primeras bases de datos</span></h1>
<p><span style="color:#444442;"><strong>Primera base de datos: matrices, data.frame y tibble</strong></span></p>
<ul>
<li><a href="#/tu-turno-2-1">💻 Ejercicios resueltos: matrices</a></li>
<li><a href="#/tu-turno-2-2">💻 Ejercicios resueltos: data.frame y tibble</a></li>
<li><a href="#/caso-practico-2-1">🐣 Workbook/caso práctico: tibble</a></li>
<li><a href="#/caso-practico-2-2">🐣 Workbook/caso práctico: Quarto</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="primera-base-de-datos" class="slide level2">
<h2>Primera base de datos</h2>
<p>Cuando analizamos datos solemos tener <span class="hl-yellow"><strong>varias variables</strong></span> de cada individuo: necesitamos una «tabla» que las recopile. La opción más inmediata son las <span class="hl-yellow"><strong>matrices</strong></span>: concatenación de variables del <span class="hl-purple"><strong>mismo tipo e igual longitud</strong></span>.</p>
<p>Imagina que tenemos estaturas y pesos de 4 personas. ¿Cómo <span class="hl-yellow"><strong>crear un dataset con las dos variables</strong></span>?</p>
<div class="fragment">
<p>La opción más habitual es usando <code>cbind()</code>: <span class="hl-yellow"><strong>concatenamos (bind) vectores en forma de columnas (c)</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb246" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1"></a>estaturas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">160</span>, <span class="dv">170</span>, <span class="dv">180</span>)</span>
<span id="cb246-2"><a href="#cb246-2"></a>pesos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">63</span>, <span class="dv">70</span>, <span class="dv">85</span>, <span class="dv">95</span>)</span>
<span id="cb246-3"><a href="#cb246-3"></a>datos_matriz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(estaturas, pesos)</span>
<span id="cb246-4"><a href="#cb246-4"></a>datos_matriz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     estaturas pesos
[1,]       150    63
[2,]       160    70
[3,]       170    85
[4,]       180    95</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>También podemos <span class="hl-yellow"><strong>construir la matriz por filas</strong></span> con la función <code>rbind()</code> (concatenar - bind - por filas - rows), aunque lo <span class="hl-green"><strong>recomendable es tener cada variable en columna</strong></span> e individuo en fila como luego veremos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1"></a><span class="fu">rbind</span>(estaturas, pesos) <span class="co"># Construimos la matriz por filas</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1] [,2] [,3] [,4]
estaturas  150  160  170  180
pesos       63   70   85   95</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Podemos <span class="hl-yellow"><strong>«visualizar» la matriz</strong></span> con <code>View(matriz)</code>.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Podemos <span class="hl-yellow"><strong>comprobar las dimensiones</strong></span> con <code>dim()</code>, <code>nrow()</code> y <code>ncol()</code>: las matrices son un tipo de <strong>datos tabulados</strong> (organizados en filas y columnas)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1"></a><span class="fu">dim</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1"></a><span class="fu">nrow</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1"></a><span class="fu">ncol</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-1" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>También podemos <span class="hl-yellow"><strong>«darle vuelta» (matriz transpuesta)</strong></span> con <code>t()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1"></a><span class="fu">t</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1] [,2] [,3] [,4]
estaturas  150  160  170  180
pesos       63   70   85   95</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que ahora tenemos dos dimensiones en nuestros datos, para <span class="hl-yellow"><strong>acceder a elementos con <code>[]</code></strong></span> deberemos proporcionar <strong>dos índices separados por comas</strong>: índice de la fila y de la columna</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1"></a>datos_matriz[<span class="dv">2</span>, <span class="dv">1</span>] <span class="co"># segunda fila, primera columna</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas 
      160 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1"></a>datos_matriz[<span class="dv">1</span>, <span class="dv">2</span>] <span class="co"># primera fila, segunda columna </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>pesos 
   63 </code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-2" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>En algunas casos querremos obtener los <span class="hl-yellow"><strong>datos totales de un individuo</strong></span> (una fila concreta pero todas las columnas) o los valores de <span class="hl-yellow"><strong>toda una variable</strong></span> para todos los individuos (una columna concreta pero todas las filas). Para ello dejaremos <span class="hl-yellow"><strong>sin rellenar uno de los índices</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1"></a>datos_matriz[<span class="dv">2</span>, ] <span class="co"># segundo individuo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas     pesos 
      160        70 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1"></a>datos_matriz[, <span class="dv">1</span>] <span class="co"># primera variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 160 170 180</code></pre>
</div>
</div>
<div class="fragment">
<p>Mucho de lo aprendido con vectores podemos hacerlo con matrices, así podemos por ejemplo acceder a varias filas y/o columnas haciendo uso de las <span class="hl-yellow"><strong>secuencias de enteros 1:n</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1"></a>datos_matriz[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="dv">1</span>] <span class="co"># primera variable para el primer y tercer individuo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 170</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-3" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>También podemos definir una <span class="hl-yellow"><strong>matriz a partir de un vector numérico</strong></span>, reorganizando los valores en forma de matriz (sabiendo que los elementos se van <span class="hl-purple"><strong>colocando por columnas</strong></span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1"></a>z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>) </span>
<span id="cb268-2"><a href="#cb268-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9</code></pre>
</div>
</div>
<div class="fragment">
<p>Incluso podemos <span class="hl-yellow"><strong>definir una matriz de valores constantes</strong></span>, por ejemplo de ceros (para luego rellenar)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1"></a><span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-matrices" class="slide level2">
<h2>Operaciones con matrices</h2>
<p>Con las matrices sucede como con los vectores: cuando aplicamos una <span class="hl-yellow"><strong>operación aritmética lo hacemos elemento a elemento</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1"></a>z<span class="sc">/</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]  0.2  0.8  1.4
[2,]  0.4  1.0  1.6
[3,]  0.6  1.2  1.8</code></pre>
</div>
</div>
<div class="fragment">
<p>Para realizar <span class="hl-yellow"><strong>operaciones en un sentido matricial</strong></span> deberemos añadir <code>%%</code>, por ejemplo, para multiplicar matrices será <code>%*%</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1"></a>z <span class="sc">*</span> <span class="fu">t</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    8   21
[2,]    8   25   48
[3,]   21   48   81</code></pre>
</div>
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1"></a>z <span class="sc">%*%</span> <span class="fu">t</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]   66   78   90
[2,]   78   93  108
[3,]   90  108  126</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-matrices-1" class="slide level2">
<h2>Operaciones con matrices</h2>
<p>También podemos <span class="hl-yellow"><strong>realizar operaciones por columnas/filas</strong></span> sin recurrir a bucles con la función <code>apply()</code>, y le indicaremos como <strong>argumentos</strong></p>
<ul>
<li>la matriz</li>
<li>el sentido de la operación (<code>MARGIN = 1</code> por filas, <code>MARGIN = 2</code> por columnas)</li>
<li>la función a aplicar</li>
<li>argumentos extra que necesite la función</li>
</ul>
<div class="fragment">
<p>Por ejemplo, para aplicar una media a cada variable, será <code>mean</code> aplicada con <code>MARGIN = 2</code> (misma función para cada columna)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1"></a><span class="co"># Media (mean) por columnas (MARGIN = 2)</span></span>
<span id="cb278-2"><a href="#cb278-2"></a><span class="fu">apply</span>(datos_matriz, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas     pesos 
   165.00     78.25 </code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-2-1" class="slide level2">
<h2>💻 Tu turno (matrices)</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-4-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-4-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-4-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-4-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-4-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<p>📝 Modifica el código inferior para definir una matriz <code>x</code> de unos, de 3 filas y 7 columnas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb280-2"><a href="#cb280-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">7</span>)</span>
<span id="cb281-2"><a href="#cb281-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-2">
<p>📝 A la matriz anterior, suma un 1 a cada número de la matriz y divide el resultado entre 5. Tras ello calcula su transpuesta</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1"></a>new_matrix <span class="ot">&lt;-</span> (x <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">/</span><span class="dv">5</span></span>
<span id="cb282-2"><a href="#cb282-2"></a><span class="fu">t</span>(new_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-3">
<p>📝 ¿Por qué el código inferior nos devuelve dicho mensaje de aviso?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in matrix(1:15, nrow = 4): data length [15] is not a sub-multiple or
multiple of the number of rows [4]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    5    9   13
[2,]    2    6   10   14
[3,]    3    7   11   15
[4,]    4    8   12    1</code></pre>
</div>
</div>
</div>
<div id="tabset-4-4">
<p>📝 Define la matriz <code>x &lt;- matrix(1:12, nrow = 4)</code>. Tras ello obtén los datos del primer individuo, los datos de la tercera variable, y el elemento <code>(4, 1)</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb286-2"><a href="#cb286-2"></a>x[<span class="dv">1</span>, ] <span class="co"># primera fila</span></span>
<span id="cb286-3"><a href="#cb286-3"></a>x[, <span class="dv">3</span>] <span class="co"># tercera columna</span></span>
<span id="cb286-4"><a href="#cb286-4"></a>x[<span class="dv">4</span>, <span class="dv">1</span>] <span class="co"># elemento (4, 1)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-5">
<p>📝 Define una matriz de 2 variables y 3 individuos tal que cada variable capture la estatura y la edad 3 personas, de manera que la edad de la segunda persona sea desconocida (ausente). Tras ello calcula la media de cada variable (¡nos debe de volver un número!)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="st">"edad"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="cn">NA</span>, <span class="dv">25</span>), <span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">160</span>, <span class="dv">165</span>, <span class="dv">170</span>))</span>
<span id="cb287-2"><a href="#cb287-2"></a><span class="fu">apply</span>(datos, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># media por columnas</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-6">
<p>📝 ¿Por qué devuelve error el código inferior? ¿Qué está mal?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1"></a>matriz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="st">"edad"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>), <span class="st">"nombres"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>, <span class="st">"carlos"</span>))</span>
<span id="cb288-2"><a href="#cb288-2"></a>matriz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     edad nombres 
[1,] "15" "javi"  
[2,] "20" "sandra"
[3,] "25" "carlos"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1"></a>matriz <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in matriz + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Las matrices tienen el mismo problema que los vectores: si juntamos datos de distinto tipo, se <span class="hl-red"><strong>perturba la integridad del dato</strong></span> ya que los convierte (fíjate en el código inferior: las edades y los <code>TRUE/FALSE</code> los ha convertido a texto)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb292" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">24</span>, <span class="cn">NA</span>)</span>
<span id="cb292-2"><a href="#cb292-2"></a>soltero <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>)</span>
<span id="cb292-3"><a href="#cb292-3"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>, <span class="st">"lucía"</span>)</span>
<span id="cb292-4"><a href="#cb292-4"></a>matriz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(edades, soltero, nombres)</span>
<span id="cb292-5"><a href="#cb292-5"></a>matriz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     edades soltero nombres
[1,] "14"   "TRUE"  "javi" 
[2,] "24"   NA      "laura"
[3,] NA     "FALSE" "lucía"</code></pre>
</div>
</div>
<div class="fragment">
<p>De hecho al no ser números ya no podemos realizar operaciones aritméticas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb294"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1"></a>matriz <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in matriz + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-1" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Para poder trabajar con <span class="hl-yellow"><strong>variables de distinto tipo</strong></span> tenemos en <code>R</code> lo que se conoce como <span class="hl-yellow"><strong>data.frame</strong></span>: concatenación de variables de igual longitud pero que pueden ser de <span class="hl-purple"><strong>tipo distinto</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(edades, soltero, nombres)</span>
<span id="cb296-2"><a href="#cb296-2"></a><span class="fu">class</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edades soltero nombres
1     14    TRUE    javi
2     24      NA   laura
3     NA   FALSE   lucía</code></pre>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-2" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Dado que un <code>data.frame</code> es ya un intento de «base de datos» las variables no son meros vectores matemáticos: <span class="hl-yellow"><strong>tienen un significado</strong></span> y podemos (debemos) <span class="hl-purple"><strong>ponerles nombres</strong></span> que describan su significado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb300-2"><a href="#cb300-2"></a>tabla <span class="ot">&lt;-</span></span>
<span id="cb300-3"><a href="#cb300-3"></a>  <span class="fu">data.frame</span>(<span class="st">"edad"</span> <span class="ot">=</span> edades, <span class="st">"estado"</span> <span class="ot">=</span> soltero, <span class="st">"nombre"</span> <span class="ot">=</span> nombres,</span>
<span id="cb300-4"><a href="#cb300-4"></a>             <span class="st">"f_nacimiento"</span> <span class="ot">=</span> <span class="fu">as_date</span>(<span class="fu">c</span>(<span class="st">"1989-09-10"</span>, <span class="st">"1992-04-01"</span>, <span class="st">"1980-11-27"</span>)))</span>
<span id="cb300-5"><a href="#cb300-5"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento
1   14   TRUE   javi   1989-09-10
2   24     NA  laura   1992-04-01
3   NA  FALSE  lucía   1980-11-27</code></pre>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-3" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p><span class="hl-yellow"><strong>¡TENEMOS NUESTRO PRIMER CONJUNTO DE DATOS!</strong></span> (estrictamente no podemos hablar de base de datos pero de momento como lo si fuesen). Puedes visualizarlo escribiendo su nombre en consola o con <code>View(tabla)</code></p>

<img data-src="img/view_tabla.jpg" class="r-stretch"></section>
<section id="acceso-a-variables" class="slide level2">
<h2>Acceso a variables</h2>
<p>Si queremos acceder a sus elementos, al ser de nuevo <strong>datos tabulados</strong>, podemos acceder como en las matrices (<span class="hl-red"><strong>no recomendable</strong></span>): de nuevo <span class="hl-yellow"><strong>tenemos dos índices</strong></span> (filas y columnas, dejando libre la que no usemos)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1"></a>tabla[<span class="dv">2</span>, ]  <span class="co"># segunda fila (todas sus variables)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento
2   24     NA  laura   1992-04-01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1"></a>tabla[, <span class="dv">3</span>]  <span class="co"># tercera columna (de todos los individuos)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "laura" "lucía"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1"></a>tabla[<span class="dv">2</span>, <span class="dv">1</span>]  <span class="co"># primera característica de la segunda persona</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:25%;">
<p><img data-src="img/menu_data_frame.jpg"></p>
</div><div class="column" style="width:75%;">
<p>Pero también tiene las ventajas de una <span class="hl-yellow"><strong>«base» de datos</strong></span> : podemos <span class="hl-purple"><strong>aceder a las variables por su nombre</strong></span> (<span class="hl-green"><strong>lo recomendable</strong></span> ya que las variables pueden cambiar de posición y ahora sí tienen un significado), poniendo el nombre de la tabla seguido del símbolo <code>$</code> (con el <strong>tabulador</strong>, nos aparecerá un menú de columnas a elegir)</p>
</div>
</div>
</div>
</section>
<section id="funciones-de-consulta" class="slide level2">
<h2>Funciones de consulta</h2>
<ul>
<li><code>names()</code>: nos muestra los nombres de las variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1"></a><span class="fu">names</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "edad"         "estado"       "nombre"       "f_nacimiento"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>dim()</code>: nos muestra las dimensiones (también <code>nrow()</code> y <code>ncol()</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1"></a><span class="fu">dim</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Podemos acceder a las variables por su nombre</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1"></a>tabla[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="st">"nombre"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "lucía"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1"></a>tabla<span class="sc">$</span>nombre[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "lucía"</code></pre>
</div>
</div>
</div>
</section>
<section id="añadir-variable" class="slide level2">
<h2>Añadir variable</h2>
<p>Si tenemos uno ya creado y queremos <span class="hl-yellow"><strong>añadir una columna</strong></span> es tan simple como usar la función <code>data.frame()</code> que ya hemos visto para concatenar la columna. Vamos añadir por ejemplo una nueva variable, el número de hermanos de cada individuo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1"></a><span class="co"># Añadimos una nueva columna con nº de hermanos/as</span></span>
<span id="cb316-2"><a href="#cb316-2"></a>hermanos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb316-3"><a href="#cb316-3"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(tabla, <span class="st">"n_hermanos"</span> <span class="ot">=</span> hermanos)</span>
<span id="cb316-4"><a href="#cb316-4"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento n_hermanos
1   14   TRUE   javi   1989-09-10          0
2   24     NA  laura   1992-04-01          2
3   NA  FALSE  lucía   1980-11-27          3</code></pre>
</div>
</div>
</section>
<section id="intento-final-tibble" class="slide level2">
<h2>Intento final: tibble</h2>
<p>Las tablas en formato <code>data.frame</code> tienen algunas <span class="hl-red"><strong>limitaciones</strong></span>. La principal es que <span class="hl-red"><strong>no permite la recursividad</strong></span>: imagina que definimos una base de datos con estaturas y pesos, y queremos una tercera variable con el IMC</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1"></a><span class="fu">data.frame</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb318-2"><a href="#cb318-2"></a>           <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in data.frame(estatura = c(1.7, 1.8, 1.6), peso = c(80, 75, 70), : object 'peso' not found</code></pre>
</div>
</div>
<div class="fragment">
<p>En adelante usaremos el formato <code>tibble</code> (<span class="hl-yellow"><strong>data.frame mejorado</strong></span>) del paquete <code>{tibble}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb320-2"><a href="#cb320-2"></a>datos_tb <span class="ot">&lt;-</span> </span>
<span id="cb320-3"><a href="#cb320-3"></a>  <span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>), <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb320-4"><a href="#cb320-4"></a><span class="fu">class</span>(datos_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1"></a>datos_tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
</div>
</section>
<section id="intento-final-tibble-1" class="slide level2">
<h2>Intento final: tibble</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1"></a>datos_tb <span class="ot">&lt;-</span></span>
<span id="cb324-2"><a href="#cb324-2"></a>  <span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>), <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb324-3"><a href="#cb324-3"></a>datos_tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
<p>Las tablas en formato <code>tibble</code> nos permitirá una <span class="hl-yellow"><strong>gestión más ágil, eficiente y coherente</strong></span> de los datos, con 4 ventajas principales:</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Metainformación</strong></span>: si te fijas en la cabecera, nos dice ya automáticamente el número de filas y columnas, y el tipo de cada variable</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Recursividad</strong></span>: permite definir las variables secuencialmente (como hemos visto)</li>
</ul>
</div>
</section>
<section id="intento-final-tibble-2" class="slide level2">
<h2>Intento final: tibble</h2>
<ul>
<li><span class="hl-yellow"><strong>Consistencia</strong></span>: si accedes a una columna que no existe avisa con un warning</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1"></a>datos_tb<span class="sc">$</span>invent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `invent`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Por filas</strong></span>: crear por filas (copiar y pegar de una tabla) con <code>tribble()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1"></a><span class="fu">tribble</span>(<span class="sc">~</span>colA, <span class="sc">~</span>colB,</span>
<span id="cb329-2"><a href="#cb329-2"></a>        <span class="st">"a"</span>,   <span class="dv">1</span>,</span>
<span id="cb329-3"><a href="#cb329-3"></a>        <span class="st">"b"</span>,   <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  colA   colB
  &lt;chr&gt; &lt;dbl&gt;
1 a         1
2 b         2</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>El paquete <code>{datapasta}</code> nos permite <span class="hl-green"><strong>copiar y pegar</strong></span> tablas de páginas web y documentos sencillos</p>
</div>
</div>
</div>
</div>
</section>
<section id="recapitulando" class="slide level2">
<h2>Recapitulando</h2>
<ul>
<li>Cada <span class="hl-yellow"><strong>celda puede ser de un tipo diverso</strong></span>: números, texto, fechas, valores lógicos, etc</li>
</ul>
<div class="fragment">
<ul>
<li>Un <span class="hl-yellow"><strong>vector es una concatenación de celdas</strong></span> (las futuras columnas de nuestras tablas) –&gt; En <code>R</code> por defecto las operaciones se hacen <span class="hl-yellow"><strong>elemento a elemento</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Una <span class="hl-yellow"><strong>matriz</strong></span> nos permite concatenar <span class="hl-yellow"><strong>variables del MISMO tipo y MISMA longitud</strong></span> –&gt; datos tabulados</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Un <span class="hl-yellow"><strong>data.frame</strong></span> nos permite concatenar <span class="hl-yellow"><strong>variables de DISTINTO tipo y MISMA longitud</strong></span> –&gt; usaremos <span class="hl-yellow"><strong>tibble</strong></span> como una opción mejorada de base de datos</li>
</ul>
</div>
</section>
<section id="tu-turno-2-2" class="slide level2">
<h2>💻 Tu turno (tb/df)</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-5-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-5-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-5-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-5-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-5-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-5-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li><li><a href="#tabset-5-8"><span class="hl-yellow"><strong>Ejercicio 8</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<p>📝 Carga del paquete <code>{datasets}</code> el conjunto de datos <code>airquality</code> (variables de la calidad del aire de Nueva York desde mayo hasta septiembre de 1973). ¿Es el conjunto de datos airquality de tipo tibble? En caso negativo, conviértelo a tibble (busca en la documentación del paquete en <a href="https://tibble.tidyverse.org/index.html" class="uri">https://tibble.tidyverse.org/index.html</a>).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb331-2"><a href="#cb331-2"></a><span class="fu">class</span>(datasets<span class="sc">::</span>airquality)</span>
<span id="cb331-3"><a href="#cb331-3"></a>airquality_tb <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(datasets<span class="sc">::</span>airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-2">
<p>📝 Una vez convertido a <code>tibble</code> obtén el nombre de las variables y las dimensiones del conjunto de datos. ¿Cuántas variables hay? ¿Cuántos días se han medido?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1"></a><span class="fu">names</span>(airquality_tb)</span>
<span id="cb332-2"><a href="#cb332-2"></a><span class="fu">ncol</span>(airquality_tb)</span>
<span id="cb332-3"><a href="#cb332-3"></a><span class="fu">nrow</span>(airquality_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-3">
<p>📝 Filtra solo los datos de la quinta observación</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1"></a>airquality_tb[<span class="dv">5</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-4">
<p>📝 Modifica el código inferior para filtrar solo los datos del mes de agosto. ¿Cómo indicarle que queremos solo las filas que cumplan una condición concreta? (pista: en realidad todo son vectores “formateados”)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1"></a>airquality_tb[Month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1"></a>airquality_tb[airquality_tb<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-5">
<p>📝 Selecciona aquellos datos que no sean ni de julio ni de agosto.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1"></a>airquality_tb[airquality_tb<span class="sc">$</span>Month <span class="sc">!=</span> <span class="dv">7</span> <span class="sc">&amp;</span> airquality_tb<span class="sc">$</span>Month <span class="sc">!=</span> <span class="dv">8</span>, ]</span>
<span id="cb336-2"><a href="#cb336-2"></a></span>
<span id="cb336-3"><a href="#cb336-3"></a><span class="co"># otra forma</span></span>
<span id="cb336-4"><a href="#cb336-4"></a>airquality_tb[<span class="sc">!</span>(airquality_tb<span class="sc">$</span>Month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>)), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-6">
<p>📝 Modifica el siguiente código para quedarte solo con las variable de ozono y temperatura (sin importar qué posición ocupen)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1"></a>airquality_tb[, <span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-7">
<p>📝 Selecciona los datos de temperatura y viento de agosto.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1"></a>airquality_tb[airquality_tb<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">8</span>, <span class="fu">c</span>(<span class="st">"Temp"</span>, <span class="st">"Wind"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-8">
<p>📝 Traduce a castellano el nombre de las variables.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1"></a><span class="fu">names</span>(airquality_tb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ozono"</span>, <span class="st">"rad_solar"</span>, <span class="st">"viento"</span>, <span class="st">"temp"</span>, <span class="st">"mes"</span>, <span class="st">"dia"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-2-1" class="slide level2">
<h2>🐣 Caso práctico I: tibble</h2>
<p>Del paquete <code>{Biostatistics}</code> usaremos el conjunto de datos <code>pinniped</code>, que guarda los <strong>datos de peso de cuerpo y cerebro</strong> (desagregado por sexo y mono/poligamia) de 33 especies de mamíferos marinos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1"></a>Biostatistics<span class="sc">::</span>pinniped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                  Species Male_brain_g Female_brain_g Male_mass_Kg
1  Monachus schauinslandi        370.0             NA          173
2       Monachus monachus        480.0          480.0          260
3 Mirounga angustirostris        700.0          640.0         2275
4        Mirounga leonina       1431.3          898.8         3510
5  Leptonychotes weddelli        535.0          637.5          450
  Female_mass_Kg Mate_type
1          272.2      mono
2          275.0      mono
3          488.0      poly
4          565.7      poly
5          447.0      poly</code></pre>
</div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/matrices-tibble-isciii"><strong>workbook</strong></a></p>
</section>
<section id="caso-practico-2-2" class="slide level2">
<h2>🐣 Caso práctico II: Taylor Swift</h2>
<p>Del paquete <code>{taylor}</code> vamos a usar el conjunto de datos <code>taylor_album_songs</code> para poner en práctico lo aprendido sobre bases de datos y manejo de variables. Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/matrices-tibble-isciii"><strong>workbook</strong></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1"></a><span class="fu">library</span>(taylor)</span>
<span id="cb342-2"><a href="#cb342-2"></a>taylor_album_songs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 240 × 29
   album_name   ep    album_release track_number track_name     artist featuring
   &lt;chr&gt;        &lt;lgl&gt; &lt;date&gt;               &lt;int&gt; &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;    
 1 Taylor Swift FALSE 2006-10-24               1 Tim McGraw     Taylo… &lt;NA&gt;     
 2 Taylor Swift FALSE 2006-10-24               2 Picture To Bu… Taylo… &lt;NA&gt;     
 3 Taylor Swift FALSE 2006-10-24               3 Teardrops On … Taylo… &lt;NA&gt;     
 4 Taylor Swift FALSE 2006-10-24               4 A Place In Th… Taylo… &lt;NA&gt;     
 5 Taylor Swift FALSE 2006-10-24               5 Cold As You    Taylo… &lt;NA&gt;     
 6 Taylor Swift FALSE 2006-10-24               6 The Outside    Taylo… &lt;NA&gt;     
 7 Taylor Swift FALSE 2006-10-24               7 Tied Together… Taylo… &lt;NA&gt;     
 8 Taylor Swift FALSE 2006-10-24               8 Stay Beautiful Taylo… &lt;NA&gt;     
 9 Taylor Swift FALSE 2006-10-24               9 Should've Sai… Taylo… &lt;NA&gt;     
10 Taylor Swift FALSE 2006-10-24              10 Mary's Song (… Taylo… &lt;NA&gt;     
# ℹ 230 more rows
# ℹ 22 more variables: bonus_track &lt;lgl&gt;, promotional_release &lt;date&gt;,
#   single_release &lt;date&gt;, track_release &lt;date&gt;, danceability &lt;dbl&gt;,
#   energy &lt;dbl&gt;, key &lt;int&gt;, loudness &lt;dbl&gt;, mode &lt;int&gt;, speechiness &lt;dbl&gt;,
#   acousticness &lt;dbl&gt;, instrumentalness &lt;dbl&gt;, liveness &lt;dbl&gt;, valence &lt;dbl&gt;,
#   tempo &lt;dbl&gt;, time_signature &lt;int&gt;, duration_ms &lt;int&gt;, explicit &lt;lgl&gt;,
#   key_name &lt;chr&gt;, mode_name &lt;chr&gt;, key_mode &lt;chr&gt;, lyrics &lt;list&gt;</code></pre>
</div>
</div>
</section></section>
<section>
<section id="clase-3" class="title-slide slide level1 center">
<h1>Clase 3: <span class="flow">if-elses, bucles y Quarto</span></h1>
<p><span style="color:#444442;"><strong>Estructuras condicionales, bucles y Quarto</strong></span></p>
<ul>
<li><a href="#/tu-turno-3-1">💻 Ejercicios resueltos: estructuras condicionales</a></li>
<li><a href="#/tu-turno-3-2">💻 Ejercicios resueltos: bucles</a></li>
<li><a href="#/caso-practico-3-1">🐣 Workbook/caso práctico: bucles y condicionales</a></li>
<li><a href="#/extra-Rbase">👾 Materiales extras R base</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="estructuras-de-control" class="slide level2">
<h2>Estructuras de control</h2>
<p>Una <span class="hl-yellow"><strong>estructura de control</strong></span> se compone de una serie de comandos orientados a <span class="hl-yellow"><strong>decidir el camino</strong></span> que tu código debe recorrer</p>
<ul>
<li><p>Si se cumple la condición A, ¿qué sucede?</p></li>
<li><p>¿Y si sucede B?</p></li>
<li><p>¿Cómo puedo repetir una misma expresión (dependiendo de una variable)?</p></li>
</ul>
<div class="fragment">
<p>Si has programado antes, quizás te sea familiar las conocidas como <span class="hl-yellow"><strong>estructuras condicionales</strong></span> tales como <code>if (blabla) {...} else {...}</code> o <span class="hl-yellow"><strong>bucles</strong></span> <code>for/while</code> (a evitar siempre que podamos).</p>
</div>
</section>
<section id="estructura-if" class="slide level2">
<h2>Estructura If</h2>
<p>Una de las estructuras de control más famosas son las conocidas como <span class="hl-yellow"><strong>estructuras condicionales</strong></span> <code>if</code>.</p>
<blockquote>
<p>SI (IF) un conjunto de condiciones se cumple (TRUE), entonces ejecuta lo que haya dentro de las llaves</p>
</blockquote>
<p>Por ejemplo, la estructura <code>if (x == 1) { código A }</code> lo que hará será <span class="hl-yellow"><strong>ejecutar el código A entre llaves</strong></span> pero <span class="hl-purple"><strong>SOLO SI</strong></span> la <span class="hl-purple"><strong>condición entre paréntesis es cierta</strong></span> (solo si <code>x</code> es 1). En cualquier otro caso, no hará nada.</p>
<div class="fragment">
<p>Por ejemplo, definamos un vector de edades de 8 personas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1"></a>edad <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">17</span>, <span class="dv">24</span>, <span class="dv">56</span>, <span class="dv">31</span>, <span class="dv">20</span>, <span class="dv">87</span>, <span class="dv">73</span>)</span>
<span id="cb344-2"><a href="#cb344-2"></a>edad <span class="sc">&lt;</span> <span class="dv">18</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="estructura-if-1" class="slide level2">
<h2>Estructura If</h2>
<p>Nuestra estructura condicional hará lo siguiente: <span class="hl-yellow"><strong>si existe algún menor de edad, imprimirá</strong></span> por pantalla un mensaje.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1"></a><span class="cf">if</span> (<span class="fu">any</span>(edad <span class="sc">&lt;</span> <span class="dv">18</span>)) { </span>
<span id="cb346-2"><a href="#cb346-2"></a>  </span>
<span id="cb346-3"><a href="#cb346-3"></a>  <span class="fu">print</span>(<span class="st">"Existe alguna persona menor de edad"</span>)</span>
<span id="cb346-4"><a href="#cb346-4"></a>  </span>
<span id="cb346-5"><a href="#cb346-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Existe alguna persona menor de edad"</code></pre>
</div>
</div>
</section>
<section id="estructura-if-2" class="slide level2">
<h2>Estructura If</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1"></a><span class="cf">if</span> (<span class="fu">any</span>(edad <span class="sc">&lt;</span> <span class="dv">18</span>)) { </span>
<span id="cb348-2"><a href="#cb348-2"></a>  </span>
<span id="cb348-3"><a href="#cb348-3"></a>  <span class="fu">print</span>(<span class="st">"Existe alguna persona menor de edad"</span>)</span>
<span id="cb348-4"><a href="#cb348-4"></a>  </span>
<span id="cb348-5"><a href="#cb348-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En caso de que las <span class="hl-yellow"><strong>condiciones no sean ciertas</strong></span> dentro de <code>if()</code> (<code>FALSE</code>), no sucede nada</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1"></a><span class="cf">if</span> (<span class="fu">all</span>(edad <span class="sc">&gt;=</span> <span class="dv">18</span>)) { </span>
<span id="cb349-2"><a href="#cb349-2"></a>  </span>
<span id="cb349-3"><a href="#cb349-3"></a>  <span class="fu">print</span>(<span class="st">"Todos son mayores de edad"</span>)</span>
<span id="cb349-4"><a href="#cb349-4"></a>  </span>
<span id="cb349-5"><a href="#cb349-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>No obtenemos ningún mensaje</strong> porque la condición <code>all(edad &gt;= 18)</code> no es <code>TRUE</code>, así que no ejecuta nada.</p>
</section>
<section id="estructura-if-else" class="slide level2">
<h2>Estructura If-else</h2>
<p>La estructura <code>if (condicion) { código A }</code> puede combinarse con un <code>else { código B }</code>: cuando la <span class="hl-yellow"><strong>condición no está verificada</strong></span>, se <span class="hl-yellow"><strong>ejecutará el código alternativo B</strong></span> dentro de <code>else { }</code>, permitiéndonos decidir que sucede cuando se cumple y cuando no.</p>
<div class="fragment">
<p>Por ejemplo, <code>if (x == 1) { código A } else { código B }</code> ejecutará A si <code>x</code> es igual a 1 y B en cualquier otro caso.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1"></a><span class="cf">if</span> (<span class="fu">all</span>(edad <span class="sc">&gt;=</span> <span class="dv">18</span>)) { </span>
<span id="cb350-2"><a href="#cb350-2"></a>  </span>
<span id="cb350-3"><a href="#cb350-3"></a>  <span class="fu">print</span>(<span class="st">"Todos son mayores de edad"</span>)</span>
<span id="cb350-4"><a href="#cb350-4"></a>  </span>
<span id="cb350-5"><a href="#cb350-5"></a>} <span class="cf">else</span> {</span>
<span id="cb350-6"><a href="#cb350-6"></a>  </span>
<span id="cb350-7"><a href="#cb350-7"></a>  <span class="fu">print</span>(<span class="st">"Existe alguna persona menor de edad"</span>)</span>
<span id="cb350-8"><a href="#cb350-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Existe alguna persona menor de edad"</code></pre>
</div>
</div>
</div>
</section>
<section id="estructura-if-else-1" class="slide level2">
<h2>Estructura If-else</h2>
<p>Esta estructura <code>if - else</code> puede ser <span class="hl-yellow"><strong>anidada</strong></span>: imagina que queremos ejecutar un código si todos son menores; si no sucede, pero todos son mayores de 16, hacer otra cosa; en cualquier otra cosa, otra acción.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb352"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1"></a><span class="cf">if</span> (<span class="fu">all</span>(edad <span class="sc">&gt;=</span> <span class="dv">18</span>)) { </span>
<span id="cb352-2"><a href="#cb352-2"></a>  </span>
<span id="cb352-3"><a href="#cb352-3"></a>  <span class="fu">print</span>(<span class="st">"Todos son mayores de edad"</span>)</span>
<span id="cb352-4"><a href="#cb352-4"></a>  </span>
<span id="cb352-5"><a href="#cb352-5"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">all</span>(edad <span class="sc">&gt;=</span> <span class="dv">16</span>)) {</span>
<span id="cb352-6"><a href="#cb352-6"></a>  </span>
<span id="cb352-7"><a href="#cb352-7"></a>  <span class="fu">print</span>(<span class="st">"Hay algún menor de edad pero todos con 16 años o más"</span>)</span>
<span id="cb352-8"><a href="#cb352-8"></a>  </span>
<span id="cb352-9"><a href="#cb352-9"></a>} <span class="cf">else</span> { <span class="fu">print</span>(<span class="st">"Hay alguna persona con menos de 16 años"</span>) }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hay alguna persona con menos de 16 años"</code></pre>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Truco</strong></p>
</div>
<div class="callout-content">
<p>Puedes <strong>colapsar las estructuras</strong> haciendo click en la flecha a la izquierda que aparece en tu script.</p>
</div>
</div>
</div>
</section>
<section id="if-else-vectorizado" class="slide level2">
<h2>If-else vectorizado</h2>
<p>Esta estructura condicional se puede <span class="hl-yellow"><strong>vectorizar</strong></span> (en una sola línea) con <code>if_else()</code> (del paquete <code>{dplyr}</code>), cuyos argumentos son</p>
<ul>
<li>la condición a evaluar</li>
<li>lo que sucede cuando se cumple y cuando no</li>
<li>un argumento opcional para cuando la condición a evaluar es <code>NA</code></li>
</ul>
<p>Vamos a etiquetar sin son mayores/menores y un “desconocido” cuando no conocemos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb354"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb354-2"><a href="#cb354-2"></a>edad <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, edad)</span>
<span id="cb354-3"><a href="#cb354-3"></a><span class="fu">if_else</span>(edad <span class="sc">&gt;=</span> <span class="dv">18</span>, <span class="st">"mayor"</span>, <span class="st">"menor"</span>, <span class="at">missing =</span> <span class="st">"desconocido"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "desconocido" "menor"       "menor"       "mayor"       "mayor"      
[6] "mayor"       "mayor"       "mayor"       "mayor"      </code></pre>
</div>
</div>
<p>En <code>R</code> base existe <code>ifelse()</code>: no deja especificar que hacer con los ausentes pero permite especificar distintos tipos de datos en <code>TRUE</code> y en <code>FALSE</code>.</p>
</section>
<section id="tu-turno-3-1" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-6-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-6-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-6-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-6-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-6-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-6-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<p>📝 ¿Cuál es la salida del siguiente código?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb356"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1"></a><span class="fu">if_else</span>(<span class="fu">sqrt</span>(<span class="dv">9</span>) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="fu">sqrt</span>(<span class="dv">9</span>), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1"></a>La salida es <span class="dv">0</span> ya que <span class="fu">sqrt</span>(<span class="dv">9</span>) es igual <span class="dv">3</span>, y dado que no es menor que <span class="dv">2</span>, devuelve el segundo argumento que es <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-2">
<p>📝 ¿Cuál es la salida del siguiente código?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb358"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb358-2"><a href="#cb358-2"></a><span class="fu">if_else</span>(<span class="fu">sqrt</span>(x) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1"></a>La salida es el vector <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1</span>) ya que <span class="fu">sqrt</span>(<span class="dv">1</span>) sí es menor que <span class="dv">2</span>, <span class="fu">sqrt</span>(<span class="dv">9</span>) no lo es, y tanto en el caso de <span class="fu">sqrt</span>(<span class="cn">NA</span>) (raíz de ausente) como <span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>) (devuelve <span class="cn">NaN</span>, not a number), su raíz cuadrada no puede verificarse si es menor que <span class="dv">2</span> o no, así que la salida es NA.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-3">
<p>📝 Modifica el código inferior para que, cuando no se pueda verificar si la raíz cuadrada de un número es menor que 2, devuelva -1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb360"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb360-2"><a href="#cb360-2"></a><span class="fu">if_else</span>(<span class="fu">sqrt</span>(x) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb361-2"><a href="#cb361-2"></a><span class="fu">if_else</span>(<span class="fu">sqrt</span>(x) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="at">missing =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-4">
<p>📝 ¿Cuál es son los valores de <code>x</code> e <code>y</code> del código inferior para <code>z &lt;- 1</code>, <code>z &lt;- -1</code> y <code>z &lt;- -5</code>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb362"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1"></a>z <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb362-2"><a href="#cb362-2"></a><span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb362-3"><a href="#cb362-3"></a>  </span>
<span id="cb362-4"><a href="#cb362-4"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb362-5"><a href="#cb362-5"></a>  y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">sqrt</span>(z)</span>
<span id="cb362-6"><a href="#cb362-6"></a>  </span>
<span id="cb362-7"><a href="#cb362-7"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb362-8"><a href="#cb362-8"></a>  </span>
<span id="cb362-9"><a href="#cb362-9"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">4</span></span>
<span id="cb362-10"><a href="#cb362-10"></a>  y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="sc">-</span>z)</span>
<span id="cb362-11"><a href="#cb362-11"></a>  </span>
<span id="cb362-12"><a href="#cb362-12"></a>} <span class="cf">else</span> {</span>
<span id="cb362-13"><a href="#cb362-13"></a>  </span>
<span id="cb362-14"><a href="#cb362-14"></a>  x <span class="ot">&lt;-</span> z<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb362-15"><a href="#cb362-15"></a>  y <span class="ot">&lt;-</span> <span class="fu">abs</span>(z)</span>
<span id="cb362-16"><a href="#cb362-16"></a>  </span>
<span id="cb362-17"><a href="#cb362-17"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1"></a>En primero caso x <span class="ot">=</span> <span class="dv">1</span> e y <span class="ot">=</span> <span class="sc">-</span><span class="fl">1.</span> En el segundo caso x <span class="ot">=</span> <span class="dv">1</span> e y <span class="ot">=</span> <span class="fl">1.</span> En el tercer caso <span class="sc">-</span><span class="fl">2.5</span> y <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-5">
<p>📝 ¿Qué pasaría si ejecutamos el siguiente código? Spoiler: da error. ¿Por qué? ¿Cómo solucionarlo?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb364"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb364-2"><a href="#cb364-2"></a><span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb364-3"><a href="#cb364-3"></a>  </span>
<span id="cb364-4"><a href="#cb364-4"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb364-5"><a href="#cb364-5"></a>  y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">sqrt</span>(z)</span>
<span id="cb364-6"><a href="#cb364-6"></a>  </span>
<span id="cb364-7"><a href="#cb364-7"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb364-8"><a href="#cb364-8"></a>  </span>
<span id="cb364-9"><a href="#cb364-9"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">4</span></span>
<span id="cb364-10"><a href="#cb364-10"></a>  y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="sc">-</span>z)</span>
<span id="cb364-11"><a href="#cb364-11"></a>  </span>
<span id="cb364-12"><a href="#cb364-12"></a>} <span class="cf">else</span> {</span>
<span id="cb364-13"><a href="#cb364-13"></a>  </span>
<span id="cb364-14"><a href="#cb364-14"></a>  x <span class="ot">&lt;-</span> z<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb364-15"><a href="#cb364-15"></a>  y <span class="ot">&lt;-</span> <span class="fu">abs</span>(z)</span>
<span id="cb364-16"><a href="#cb364-16"></a>  </span>
<span id="cb364-17"><a href="#cb364-17"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1"></a>Da error ya que en los <span class="st">`</span><span class="at">if (condición) { } else { }</span><span class="st">`</span> <span class="st">"clásicos"</span> necesitamos que</span>
<span id="cb365-2"><a href="#cb365-2"></a>la condición tenga longitud <span class="fu">uno</span> (un solo valor TRU<span class="sc">/</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb366"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1"></a><span class="co"># para arreglarlo podemos hacer un if_else vectorial</span></span>
<span id="cb366-2"><a href="#cb366-2"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>)</span>
<span id="cb366-3"><a href="#cb366-3"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb366-4"><a href="#cb366-4"></a>x <span class="ot">&lt;-</span> <span class="fu">if_else</span>(z <span class="sc">&gt;</span> <span class="dv">0</span>, z<span class="sc">^</span><span class="dv">3</span>, <span class="fu">if_else</span>(<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>, z<span class="sc">^</span><span class="dv">4</span>, z<span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb366-5"><a href="#cb366-5"></a>y <span class="ot">&lt;-</span> <span class="fu">if_else</span>(z <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="sc">-</span><span class="fu">sqrt</span>(z), <span class="fu">if_else</span>(<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="fu">sqrt</span>(<span class="sc">-</span>z), <span class="fu">abs</span>(z)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-6">
<p>📝 ¿Qué sucederá si ejecutamos el código inferior?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1"></a>z <span class="ot">&lt;-</span> <span class="st">"a"</span></span>
<span id="cb367-2"><a href="#cb367-2"></a><span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb367-3"><a href="#cb367-3"></a>  </span>
<span id="cb367-4"><a href="#cb367-4"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb367-5"><a href="#cb367-5"></a>  y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">sqrt</span>(z)</span>
<span id="cb367-6"><a href="#cb367-6"></a>  </span>
<span id="cb367-7"><a href="#cb367-7"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb367-8"><a href="#cb367-8"></a>  </span>
<span id="cb367-9"><a href="#cb367-9"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">4</span></span>
<span id="cb367-10"><a href="#cb367-10"></a>  y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="sc">-</span>z)</span>
<span id="cb367-11"><a href="#cb367-11"></a>  </span>
<span id="cb367-12"><a href="#cb367-12"></a>} <span class="cf">else</span> {</span>
<span id="cb367-13"><a href="#cb367-13"></a>  </span>
<span id="cb367-14"><a href="#cb367-14"></a>  x <span class="ot">&lt;-</span> z<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb367-15"><a href="#cb367-15"></a>  y <span class="ot">&lt;-</span> <span class="fu">abs</span>(z)</span>
<span id="cb367-16"><a href="#cb367-16"></a>  </span>
<span id="cb367-17"><a href="#cb367-17"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1"></a><span class="co"># dará error ya que no es un argumento numérico</span></span>
<span id="cb368-2"><a href="#cb368-2"></a>Error <span class="cf">in</span> z<span class="sc">^</span><span class="dv">3</span> <span class="sc">:</span> non<span class="sc">-</span>numeric argument to binary operator</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-7">
<p>📝 Del paquete <code>{lubridate}</code>, la función <code>hour()</code> nos devuelve la hora de una fecha dada, y la función <code>now()</code> nos devuelve fecha y hora del momento actual. Con ambas funciones haz que se imprima por pantalla (<code>cat()</code>) “buenas noches” solo a partir de las 21 horas.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1"></a><span class="co"># Cargamos librería</span></span>
<span id="cb369-2"><a href="#cb369-2"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb369-3"><a href="#cb369-3"></a></span>
<span id="cb369-4"><a href="#cb369-4"></a><span class="co"># Fecha-hora actual</span></span>
<span id="cb369-5"><a href="#cb369-5"></a>fecha_actual <span class="ot">&lt;-</span> <span class="fu">now</span>()</span>
<span id="cb369-6"><a href="#cb369-6"></a></span>
<span id="cb369-7"><a href="#cb369-7"></a><span class="co"># Estructura if</span></span>
<span id="cb369-8"><a href="#cb369-8"></a><span class="cf">if</span> (<span class="fu">hour</span>(fecha_actual) <span class="sc">&gt;</span> <span class="dv">21</span>) {</span>
<span id="cb369-9"><a href="#cb369-9"></a>  </span>
<span id="cb369-10"><a href="#cb369-10"></a>  <span class="fu">cat</span>(<span class="st">"Buenas noches"</span>) <span class="co"># print/cat dos formas de imprimir por pantalla</span></span>
<span id="cb369-11"><a href="#cb369-11"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="bucles" class="slide level2">
<h2>Bucles</h2>
<p>Aunque en la mayoría de ocasiones se pueden reemplazar por otras estructuras más eficientes y legibles, es importante conocer una de las expresiones de control más famosas: los <span class="hl-yellow"><strong>bucles</strong></span>.</p>
<ul>
<li><p><code>for { }</code>: permite <span class="hl-yellow"><strong>repetir el mismo código</strong></span> en un <span class="hl-purple"><strong>número prefijado y conocido</strong></span> de veces.</p></li>
<li><p><code>while { }</code>: permite <span class="hl-yellow"><strong>repetir el mismo código</strong></span> pero en un <span class="hl-purple"><strong>número indeterminado de veces</strong></span> (hasta que una <strong>condición</strong> deje de cumplirse).</p></li>
</ul>
</section>
<section id="bucles-for" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Bucles for</h2>
<p>Un bucle <span class="hl-yellow"><strong>for</strong></span> es una estructura que permite <span class="hl-yellow"><strong>repetir</strong></span> un conjunto de órdenes un número <span class="hl-purple"><strong>finito, prefijado y conocido de veces</strong></span> dado un conjunto de índices.</p>
<p>Vamos a definir un vector <code>x &lt;- c(0, -7, 1, 4)</code> y otra variable vacía <code>y</code>. Tras ello definiremos un bucle for con <code>for () { }</code>: dentro de los paréntesis indicaremos un índice y unos valores a recorrer, dentro de las llaves el código a ejecutar en cada iteración (en este caso, rellenar <code>y</code> como <code>x + 1</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb370-1" class="hljs-ln-code"><a href="#cb370-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb370-2" class="hljs-ln-code"><a href="#cb370-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bucles-for-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Bucles for</h2>
<p>Un bucle <span class="hl-yellow"><strong>for</strong></span> es una estructura que permite <span class="hl-yellow"><strong>repetir</strong></span> un conjunto de órdenes un número <span class="hl-purple"><strong>finito, prefijado y conocido de veces</strong></span> dado un conjunto de índices.</p>
<p>Vamos a definir un vector <code>x &lt;- c(0, -7, 1, 4)</code> y otra variable vacía <code>y</code>. Tras ello definiremos un bucle for con <code>for () { }</code>: dentro de los paréntesis indicaremos un índice y unos valores a recorrer, dentro de las llaves el código a ejecutar en cada iteración (en este caso, rellenar <code>y</code> como <code>x + 1</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb371-1" class="hljs-ln-code"><a href="#cb371-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb371-2" class="hljs-ln-code"><a href="#cb371-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb371-3" class="hljs-ln-code"><a href="#cb371-3"></a></span>
<span id="cb371-4" class="hljs-ln-code"><a href="#cb371-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb371-5" class="hljs-ln-code"><a href="#cb371-5"></a>  </span>
<span id="cb371-6" class="hljs-ln-code"><a href="#cb371-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bucles-for-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Bucles for</h2>
<p>Un bucle <span class="hl-yellow"><strong>for</strong></span> es una estructura que permite <span class="hl-yellow"><strong>repetir</strong></span> un conjunto de órdenes un número <span class="hl-purple"><strong>finito, prefijado y conocido de veces</strong></span> dado un conjunto de índices.</p>
<p>Vamos a definir un vector <code>x &lt;- c(0, -7, 1, 4)</code> y otra variable vacía <code>y</code>. Tras ello definiremos un bucle for con <code>for () { }</code>: dentro de los paréntesis indicaremos un índice y unos valores a recorrer, dentro de las llaves el código a ejecutar en cada iteración (en este caso, rellenar <code>y</code> como <code>x + 1</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb372-1" class="hljs-ln-code"><a href="#cb372-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb372-2" class="hljs-ln-code"><a href="#cb372-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb372-3" class="hljs-ln-code"><a href="#cb372-3"></a></span>
<span id="cb372-4" class="hljs-ln-code"><a href="#cb372-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb372-5" class="hljs-ln-code"><a href="#cb372-5"></a>  y[i] <span class="ot">&lt;-</span> x[i] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb372-6" class="hljs-ln-code"><a href="#cb372-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bucles-for-3" class="slide level2">
<h2>Bucles for</h2>
<p>Fíjate que debido a que <code>R</code> funciona de manera <span class="hl-yellow"><strong>vectorial por defecto</strong></span>, el bucle es lo mismo que hacer <code>x + 1</code> directamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb373-1"><a href="#cb373-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb373-2"><a href="#cb373-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb373-3"><a href="#cb373-3"></a></span>
<span id="cb373-4"><a href="#cb373-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb373-5"><a href="#cb373-5"></a>  y[i] <span class="ot">&lt;-</span> x[i] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb373-6"><a href="#cb373-6"></a>}</span>
<span id="cb373-7"><a href="#cb373-7"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -6  2  5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb375"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb375-1"><a href="#cb375-1"></a>y2 <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb375-2"><a href="#cb375-2"></a>y2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -6  2  5</code></pre>
</div>
</div>
</section>
<section id="bucles-for-4" class="slide level2">
<h2>Bucles for</h2>
<p>Otra opción habitual es indicar los índices de manera «automática»: desde el primero <code>1</code> hasta el último (que corresponde con la longitud de x <code>length(x)</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb377"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb377-1"><a href="#cb377-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb377-2"><a href="#cb377-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb377-3"><a href="#cb377-3"></a></span>
<span id="cb377-4"><a href="#cb377-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb377-5"><a href="#cb377-5"></a>  y[i] <span class="ot">&lt;-</span> x[i] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb377-6"><a href="#cb377-6"></a>}</span>
<span id="cb377-7"><a href="#cb377-7"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -6  2  5</code></pre>
</div>
</div>
</section>
<section id="bucles-for-5" class="slide level2">
<h2>Bucles for</h2>
<p>Así la <span class="hl-yellow"><strong>estructura general de un bucle for</strong></span> será siempre la siguiente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb379"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb379-1"><a href="#cb379-1"></a><span class="cf">for</span> (índice <span class="cf">in</span> conjunto) { </span>
<span id="cb379-2"><a href="#cb379-2"></a>  código (dependiente de i)</span>
<span id="cb379-3"><a href="#cb379-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="hl-green"><strong>SIEMPRE</strong></span> sabemos cuántas iteraciones tenemos (tantas como elementos haya en el conjunto a indexar)</p>
</section>
<section id="evitando-bucles" class="slide level2">
<h2>Evitando bucles</h2>
<p>Como ya hemos aprendido con el paquete<code>{microbenchmark}</code> podemos chequear como <span class="hl-yellow"><strong>los bucles suelen ser muy ineficientes</strong></span> (de ahí que debamos evitarlos en la mayoría de ocasiones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1"></a><span class="fu">library</span>(microbenchmark)</span>
<span id="cb380-2"><a href="#cb380-2"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span></span>
<span id="cb380-3"><a href="#cb380-3"></a><span class="fu">microbenchmark</span>(y <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span>, </span>
<span id="cb380-4"><a href="#cb380-4"></a>               <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) { y[i] <span class="ot">&lt;-</span> x[i]<span class="sc">^</span><span class="dv">2</span> },</span>
<span id="cb380-5"><a href="#cb380-5"></a>               <span class="at">times =</span> <span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Unit: nanoseconds
                                    expr    min     lq      mean   median
                                y &lt;- x^2    984   1148   1282.48   1189.0
 for (i in 1:100) {     y[i] &lt;- x[i]^2 } 716762 751407 813926.26 765449.5
       uq     max neval
   1312.0    5945   500
 790336.5 2770780   500</code></pre>
</div>
</div>
</section>
<section id="bucles-for-6" class="slide level2">
<h2>Bucles for</h2>
<p>Podemos ver otro ejemplo de bucle <span class="hl-yellow"><strong>combinando números y textos</strong></span>: definimos un vector de edades y de nombres, e imprimimos el nombre y edad i-ésima.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Javi"</span>, <span class="st">"Sandra"</span>, <span class="st">"Carlos"</span>, <span class="st">"Marcos"</span>, <span class="st">"Marta"</span>)</span>
<span id="cb382-2"><a href="#cb382-2"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">27</span>, <span class="dv">18</span>, <span class="dv">43</span>, <span class="dv">29</span>)</span>
<span id="cb382-3"><a href="#cb382-3"></a></span>
<span id="cb382-4"><a href="#cb382-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) { </span>
<span id="cb382-5"><a href="#cb382-5"></a>  </span>
<span id="cb382-6"><a href="#cb382-6"></a>  <span class="fu">print</span>(<span class="fu">glue</span>(<span class="st">"{nombres[i]} tiene {edades[i]} años"</span>)) </span>
<span id="cb382-7"><a href="#cb382-7"></a>  </span>
<span id="cb382-8"><a href="#cb382-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Javi tiene 33 años
Sandra tiene 27 años
Carlos tiene 18 años
Marcos tiene 43 años
Marta tiene 29 años</code></pre>
</div>
</div>
</section>
<section id="bucles-for-7" class="slide level2">
<h2>Bucles for</h2>
<p>Aunque normalmente se suelen indexar con vectors numéricos, los bucles pueden ser <span class="hl-yellow"><strong>indexados sobre cualquier estructura vectorial</strong></span>, da igual de que tipo sea el conjunto</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb384-2"><a href="#cb384-2"></a>week_days <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"monday"</span>, <span class="st">"tuesday"</span>, <span class="st">"wednesday"</span>, <span class="st">"thursday"</span>,</span>
<span id="cb384-3"><a href="#cb384-3"></a>               <span class="st">"friday"</span>, <span class="st">"saturday"</span>, <span class="st">"sunday"</span>)</span>
<span id="cb384-4"><a href="#cb384-4"></a></span>
<span id="cb384-5"><a href="#cb384-5"></a><span class="cf">for</span> (days <span class="cf">in</span> week_days) {</span>
<span id="cb384-6"><a href="#cb384-6"></a>  </span>
<span id="cb384-7"><a href="#cb384-7"></a>  <span class="fu">print</span>(<span class="fu">str_to_upper</span>(days))</span>
<span id="cb384-8"><a href="#cb384-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MONDAY"
[1] "TUESDAY"
[1] "WEDNESDAY"
[1] "THURSDAY"
[1] "FRIDAY"
[1] "SATURDAY"
[1] "SUNDAY"</code></pre>
</div>
</div>
</section>
<section id="bucles-y-condicionales" class="slide level2">
<h2>Bucles y condicionales</h2>
<p>Vamos a <strong>combinar las estructuras condicionales y los bucles</strong>: usando el conjunto <code>swiss</code> del paquete <code>{datasets}</code>, vamos a asignar <code>NA</code> si los valores de fertilidad son mayores de 80.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(swiss)) {</span>
<span id="cb386-2"><a href="#cb386-2"></a>  </span>
<span id="cb386-3"><a href="#cb386-3"></a>  <span class="cf">if</span> (swiss<span class="sc">$</span>Fertility[i] <span class="sc">&gt;</span> <span class="dv">80</span>) { </span>
<span id="cb386-4"><a href="#cb386-4"></a>    </span>
<span id="cb386-5"><a href="#cb386-5"></a>    swiss<span class="sc">$</span>Fertility[i] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb386-6"><a href="#cb386-6"></a>    </span>
<span id="cb386-7"><a href="#cb386-7"></a>  }</span>
<span id="cb386-8"><a href="#cb386-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Esto es exactamente igual a un <code>if_else()</code> vectorizado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1"></a><span class="fu">data</span>(<span class="st">"swiss"</span>)</span>
<span id="cb387-2"><a href="#cb387-2"></a>swiss<span class="sc">$</span>Fertility <span class="ot">&lt;-</span> <span class="fu">if_else</span>(swiss<span class="sc">$</span>Fertility <span class="sc">&gt;</span> <span class="dv">80</span>, <span class="cn">NA</span>, swiss<span class="sc">$</span>Fertility)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="bucles-while" class="slide level2">
<h2>Bucles while</h2>
<p>Otra forma de crear un bucle es con la estructura <code>while { }</code>, que nos ejecutará un bucle <span class="hl-yellow"><strong>un número desconocido de veces</strong></span>, hasta que una condición <span class="hl-yellow"><strong>deje de cumplirse</strong></span> (de hecho puede que nunca termine). Por ejemplo, vamos a inializar una variable <code>ciclos &lt;- 1</code>, que incrementaremos en cada paso, y no saldremos del bucle hasta que <code>ciclos &gt; 4</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1"></a>ciclos <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb388-2"><a href="#cb388-2"></a><span class="cf">while</span>(ciclos <span class="sc">&lt;=</span> <span class="dv">4</span>) {</span>
<span id="cb388-3"><a href="#cb388-3"></a>  </span>
<span id="cb388-4"><a href="#cb388-4"></a>  <span class="fu">print</span>(<span class="fu">glue</span>(<span class="st">"No todavía, vamos por el ciclo {ciclos}"</span>)) </span>
<span id="cb388-5"><a href="#cb388-5"></a>  ciclos <span class="ot">&lt;-</span> ciclos <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb388-6"><a href="#cb388-6"></a>  </span>
<span id="cb388-7"><a href="#cb388-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No todavía, vamos por el ciclo 1
No todavía, vamos por el ciclo 2
No todavía, vamos por el ciclo 3
No todavía, vamos por el ciclo 4</code></pre>
</div>
</div>
</section>
<section id="bucles-while-1" class="slide level2">
<h2>Bucles while</h2>
<p>Un bucle <code>while</code> será siempre como sigue</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1"></a><span class="cf">while</span>(condición) {</span>
<span id="cb390-2"><a href="#cb390-2"></a>  </span>
<span id="cb390-3"><a href="#cb390-3"></a>  código a hacer mientras la condición sea <span class="cn">TRUE</span></span>
<span id="cb390-4"><a href="#cb390-4"></a>  <span class="co"># normalmente aquí se actualiza alguna variable</span></span>
<span id="cb390-5"><a href="#cb390-5"></a>  </span>
<span id="cb390-6"><a href="#cb390-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bucles-while-2" class="slide level2">
<h2>Bucles while</h2>
<p>¿Qué sucede cuando la <span class="hl-yellow"><strong>condición nunca es FALSE</strong></span>? Pruébalo tu mismo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb391"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb391-1"><a href="#cb391-1"></a><span class="cf">while</span> (<span class="dv">1</span> <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb391-2"><a href="#cb391-2"></a>  </span>
<span id="cb391-3"><a href="#cb391-3"></a>  <span class="fu">print</span>(<span class="st">"Presiona ESC para salir del bucle"</span>)</span>
<span id="cb391-4"><a href="#cb391-4"></a>  </span>
<span id="cb391-5"><a href="#cb391-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;</p>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Un bucle <code>while { }</code> puede ser bastante «peligroso» sino controlamos bien cómo pararlo.</p>
</div>
</div>
</div>
</section>
<section id="bucles-while-3" class="slide level2">
<h2>Bucles while</h2>
<p>Contamos con dos palabras reservadas para <span class="hl-yellow"><strong>abortar un bucle o forzar su avance</strong></span>:</p>
<ul>
<li><code>break</code>: permite <span class="hl-yellow"><strong>abortar un bucle</strong></span> incluso si no se ha llegado a su final</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb392-2"><a href="#cb392-2"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb392-3"><a href="#cb392-3"></a>    </span>
<span id="cb392-4"><a href="#cb392-4"></a>    <span class="cf">break</span> <span class="co"># si i = 3, abortamos bucle</span></span>
<span id="cb392-5"><a href="#cb392-5"></a>    </span>
<span id="cb392-6"><a href="#cb392-6"></a>  }</span>
<span id="cb392-7"><a href="#cb392-7"></a>  <span class="fu">print</span>(i)</span>
<span id="cb392-8"><a href="#cb392-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2</code></pre>
</div>
</div>
</section>
<section id="bucles-while-4" class="slide level2">
<h2>Bucles while</h2>
<p>Contamos con dos palabras reservadas para <span class="hl-yellow"><strong>abortar un bucle o forzar su avance</strong></span>:</p>
<ul>
<li><code>next</code>: <span class="hl-yellow"><strong>fuerza un bucle a avanzar a la siguiente iteración</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb394-2"><a href="#cb394-2"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb394-3"><a href="#cb394-3"></a>    </span>
<span id="cb394-4"><a href="#cb394-4"></a>    <span class="cf">next</span> <span class="co"># si i = 3, la obvia y continua al siguiente</span></span>
<span id="cb394-5"><a href="#cb394-5"></a>    </span>
<span id="cb394-6"><a href="#cb394-6"></a>  }</span>
<span id="cb394-7"><a href="#cb394-7"></a>  <span class="fu">print</span>(i)</span>
<span id="cb394-8"><a href="#cb394-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 4
[1] 5</code></pre>
</div>
</div>
</section>
<section id="bucles-repeat" class="slide level2">
<h2>Bucles repeat</h2>
<p>Aunque no es tan usado como las opciones anteriores, también contamos con <code>repeat { }</code> que ejecuta un <span class="hl-yellow"><strong>bucle de manera infinita hasta que se indique abortar</strong></span> con un break</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1"></a>count <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb396-2"><a href="#cb396-2"></a><span class="cf">repeat</span> { </span>
<span id="cb396-3"><a href="#cb396-3"></a>  </span>
<span id="cb396-4"><a href="#cb396-4"></a>  count <span class="ot">&lt;-</span> count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb396-5"><a href="#cb396-5"></a>  <span class="cf">if</span> (count <span class="sc">&gt;=</span> <span class="dv">100</span>) { <span class="cf">break</span> }</span>
<span id="cb396-6"><a href="#cb396-6"></a>  </span>
<span id="cb396-7"><a href="#cb396-7"></a>}</span>
<span id="cb396-8"><a href="#cb396-8"></a>count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100</code></pre>
</div>
</div>
</section>
<section id="replicate" class="slide level2">
<h2>Replicate</h2>
<p>Aunque no es formalmente un bucle, otra forma de <span class="hl-yellow"><strong>repetir código un número de veces</strong></span> es hacer uso de <code>replicate()</code>: simplemente permite repetir lo mismo <span class="hl-yellow"><strong>n veces</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb398"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb398-2"><a href="#cb398-2"></a><span class="fu">replicate</span>(<span class="at">n =</span> <span class="dv">3</span>, x<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    1    1
[2,]    4    4    4
[3,]    9    9    9</code></pre>
</div>
</div>
</section>
<section id="replicate-1" class="slide level2">
<h2>Replicate</h2>
<p>La función <code>replicate()</code> se suele usar para <span class="hl-yellow"><strong>generar distintas repeticiones de elementos aleatorios</strong></span>. Por ejemplo, imaginemos que queremos generar 3 muestras de distribuciones normales, en la que cada muestra tendrá 7 elementos. Para generar una se usa <code>rnorm(n = 7)</code> (r de resample, norm de normal, y si no se dice nada es media 0 y desv 1).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb400"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1"></a><span class="fu">replicate</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]       [,2]       [,3]
[1,] -0.6975594 -1.4869667  0.8105881
[2,]  0.7869937  1.6010121  0.1743988
[3,]  0.3400217  0.2870323  0.4346023
[4,]  0.7931344 -1.0142404  1.3661365
[5,]  0.9775227 -1.0415317  0.6709150
[6,]  0.3814467  1.4431629 -0.1890720
[7,]  1.2817131  0.5100470 -0.5423930</code></pre>
</div>
</div>
</section>
<section id="tu-turno-3-2" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-7-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-7-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-7-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<p>📝 Modifica el código inferior para que se imprima un mensaje por pantalla si y solo si todos los datos de <code>airquality</code> son con mes distinto a enero</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb402"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb402-2"><a href="#cb402-2"></a>months <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Month</span>
<span id="cb402-3"><a href="#cb402-3"></a></span>
<span id="cb402-4"><a href="#cb402-4"></a><span class="cf">if</span> (months <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb402-5"><a href="#cb402-5"></a>  <span class="fu">print</span>(<span class="st">"No hay datos de enero"</span>)</span>
<span id="cb402-6"><a href="#cb402-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb403"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb403-2"><a href="#cb403-2"></a>months <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Month</span>
<span id="cb403-3"><a href="#cb403-3"></a></span>
<span id="cb403-4"><a href="#cb403-4"></a><span class="cf">if</span> (<span class="fu">all</span>(months <span class="sc">!=</span> <span class="dv">1</span>)) {</span>
<span id="cb403-5"><a href="#cb403-5"></a>  <span class="fu">print</span>(<span class="st">"No hay datos de enero"</span>)</span>
<span id="cb403-6"><a href="#cb403-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-2">
<p>📝 Modifica el código inferior para guardar en una variable llamada <code>temp_alta</code> un <code>TRUE</code> si alguno de los registros tiene una temperatura superior a 90 grados Farenheit y <code>FALSE</code> en cualquier otro caso</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb404"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1"></a>temp <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp</span>
<span id="cb404-2"><a href="#cb404-2"></a></span>
<span id="cb404-3"><a href="#cb404-3"></a><span class="cf">if</span> (temp <span class="sc">==</span> <span class="dv">100</span>) {</span>
<span id="cb404-4"><a href="#cb404-4"></a>  <span class="fu">print</span>(<span class="st">"Algunos de los registros tienen temperaturas superiores a 90 grados Farenheit"</span>)</span>
<span id="cb404-5"><a href="#cb404-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb405"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1"></a><span class="co"># Option 1</span></span>
<span id="cb405-2"><a href="#cb405-2"></a>temp <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp</span>
<span id="cb405-3"><a href="#cb405-3"></a>temp_alta <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb405-4"><a href="#cb405-4"></a><span class="cf">if</span> (<span class="fu">any</span>(temp <span class="sc">&gt;</span> <span class="dv">90</span>)) {</span>
<span id="cb405-5"><a href="#cb405-5"></a>   temp_alta <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb405-6"><a href="#cb405-6"></a>}</span>
<span id="cb405-7"><a href="#cb405-7"></a></span>
<span id="cb405-8"><a href="#cb405-8"></a><span class="co"># Option 2</span></span>
<span id="cb405-9"><a href="#cb405-9"></a>temp_alta <span class="ot">&lt;-</span> <span class="fu">any</span>(airquality<span class="sc">$</span>Temp <span class="sc">&gt;</span> <span class="dv">90</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-3">
<p>📝 Modifica el código inferior para diseñar un bucle <code>for</code> de 5 iteraciones que solo recorra los primeros 5 impares (y en cada paso del bucle los imprima)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb406"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb406-2"><a href="#cb406-2"></a>  </span>
<span id="cb406-3"><a href="#cb406-3"></a>  <span class="fu">print</span>(i)</span>
<span id="cb406-4"><a href="#cb406-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb407"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)) {</span>
<span id="cb407-2"><a href="#cb407-2"></a>  </span>
<span id="cb407-3"><a href="#cb407-3"></a>  <span class="fu">print</span>(i)</span>
<span id="cb407-4"><a href="#cb407-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-4">
<p>📝 Modifica el código inferior para diseñar un bucle <code>while</code> que empiece con un contador <code>count &lt;- 1</code> y pare cuando llegue a 6</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb408"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1"></a>count <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb408-2"><a href="#cb408-2"></a><span class="cf">while</span> (count <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb408-3"><a href="#cb408-3"></a>  </span>
<span id="cb408-4"><a href="#cb408-4"></a>  <span class="fu">print</span>(count)</span>
<span id="cb408-5"><a href="#cb408-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1"></a>count <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb409-2"><a href="#cb409-2"></a><span class="cf">while</span> (count <span class="sc">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb409-3"><a href="#cb409-3"></a>  </span>
<span id="cb409-4"><a href="#cb409-4"></a>  <span class="fu">print</span>(count)</span>
<span id="cb409-5"><a href="#cb409-5"></a>  count <span class="ot">&lt;-</span> count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb409-6"><a href="#cb409-6"></a>  </span>
<span id="cb409-7"><a href="#cb409-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-3-1" class="slide level2">
<h2>🐣 Caso práctico I</h2>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/if-else-bucles-funciones-isciii/"><strong>workbook</strong></a> donde tendrás que diseñar algunos estudios de simulación haciendo uso de <strong>bucles y estructuras condicionales</strong></p>
</section>
<section id="comunicar-rmd-y-quarto" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Una de las <span class="hl-yellow"><strong>principales fortalezas</strong></span> de <code>R</code> es la <span class="hl-yellow"><strong>facilidad para generar informes, libros, webs, apuntes y hasta diapositivas</strong></span> (este mismo material por ejemplo). Para ello <span class="hl-purple"><strong>instalaremos</strong></span> antes</p>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li>el paquete <code>{rmarkdown}</code> (para generar archivos <code>.rmd</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb410"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1"></a><span class="fu">install.packages</span>(<span class="st">"rmarkdown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>instalar <a href="https://quarto.org/docs/get-started/"><strong>Quarto</strong></a> (si ya conocías <code>R</code>, el «nuevo» <code>.rmd</code> ahora como <code>.qmd</code>)</li>
</ul>
</div><div class="column" style="width:60%;">
<p><img data-src="img/quarto.png"></p>
</div>
</div>
</section>
<section id="comunicar-rmd-y-quarto-1" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Hasta ahora solo hemos programado en scripts (archivos <code>.R</code>) dentro de proyectos, pero en muchas ocasiones <span class="hl-yellow"><strong>no trabajaremos solos</strong></span> y necesitaremos <span class="hl-yellow"><strong>comunicar los resultados</strong></span> en diferentes formatos:</p>
<ul>
<li>apuntes (para nosotros mismos)</li>
<li>diapositivas</li>
<li>web</li>
<li>informes</li>
</ul>
<p>Para todo ello usaremos <span class="hl-yellow"><strong>Quarto</strong></span> (ver más en <a href="https://ivelasq.quarto.pub/intro-to-quarto/" class="uri">https://ivelasq.quarto.pub/intro-to-quarto/</a>)</p>
</section>
<section id="comunicar-rmd-y-quarto-2" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Los archivos de extensión <code>.qmd</code> (o <code>.rmd</code> antes) nos permitirán fácilmente combinar:</p>
<ul>
<li><span class="hl-yellow"><strong>Markdown</strong></span>: <span class="hl-purple"><strong>lenguaje tipado</strong></span> que nos permite crear contenido simple (tipo wordpress, con texto, <strong>negritas</strong>, <em>cursivas</em>, etc) con un diseño legible.</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Matemáticas (latex)</strong></span>: lenguaje para escribir notación matemática como <span class="math inline">\(x^2\)</span> o <span class="math inline">\(\sqrt{y}\)</span> o <span class="math inline">\(\int_{a}^{b} f(x) dx\)</span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Código y salidas</strong></span>: podremos no solo mostrar el paso final sino el código que has ido realizando (en <code>R</code>, <code>Python</code>, <code>C++</code>, <code>Julia</code>, …), con <span class="hl-purple"><strong>cajitas de código llamadas CHUNKS</strong></span>.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Imágenes, <span class="hl-yellow"><strong>gráficas</strong></span>, tablas, estilos (css, js), etc.</li>
</ul>
</div>
</section>
<section id="comunicar-rmd-y-quarto-3" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>La principal ventaja de realizar este tipo de material en Quarto/Rmarkdown es que, al hacerlo desde <code>RStudio</code>, puedes generar un <span class="hl-yellow"><strong>informe o una presentación sin salirte del entorno de programación</strong></span> en el que estás trabajando</p>
<p>De esta forma podrás analizar los datos, resumirlos y a la vez comunicarlos con la misma herramienta.</p>
<div class="fragment">
<p>Recientemente el equipo de <code>RStudio</code> desarrolló <span class="hl-yellow"><strong>Quarto</strong></span>, una versión mejorada de Rmarkdown (archivos <code>.qmd</code>), con un formato un poco más estético y simple. Tienes toda la documentación y ejemplos en <a href="https://quarto.org/"><strong>https://quarto.org/</strong></a></p>
</div>
</section>
<section id="usos-de-quarto" class="slide level2">
<h2>Usos de Quarto</h2>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">Webs</a></li><li><a href="#tabset-8-2">Libros</a></li><li><a href="#tabset-8-3">Blogs</a></li><li><a href="#tabset-8-4">Presentaciones</a></li><li><a href="#tabset-8-5">Revistas</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<p><img data-src="./img/website.png" height="350"></p>
</div>
<div id="tabset-8-2">
<p><img data-src="./img/book.png" height="350"></p>
</div>
<div id="tabset-8-3">
<p><img data-src="./img/blog.png" height="350"></p>
</div>
<div id="tabset-8-4">
<p><img data-src="./img/presentation.png" height="350"></p>
</div>
<div id="tabset-8-5">
<p><img data-src="https://user-images.githubusercontent.com/163582/42351114-e5deaa1c-8078-11e8-90de-2aff57bba255.png" height="350"></p>
</div>
</div>
</div>
<p>Imágenes obtenidas de <a href="https://ivelasq.quarto.pub/intro-to-quarto/#/working-with-the-rstudio-visual-editor" class="uri">https://ivelasq.quarto.pub/intro-to-quarto/#/working-with-the-rstudio-visual-editor</a></p>
</section>
<section id="nuestro-primer-informe" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:55%;">
<p><img data-src="img/quarto-create.png"></p>
</div><div class="column" style="width:45%;">
<p>Vamos a crear el <span class="hl-yellow"><strong>primer fichero rmarkdown con Quarto</strong></span> con extensión <code>.qmd</code>. Para ello solo necesitaremos hacer click en</p>
<p><code>File &lt;&lt; New File &lt;&lt; Quarto Document</code></p>
</div>
</div>
</section>
<section id="nuestro-primer-informe-1" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/quarto-format.png"></p>
</div><div class="column" style="width:55%;">
<p>Tras hacerlo nos aparecerán varias <span class="hl-yellow"><strong>opciones de formatos de salida</strong></span>:</p>
<ul>
<li>archivo <code>.pdf</code></li>
<li>archivo <code>.html</code> (<span class="hl-yellow"><strong>recomendable</strong></span>): documento dinámico, permite la interacción con el usuario, como una «página web».</li>
<li>archivo <code>.doc</code> (nada recomendable)</li>
</ul>
</div>
</div>
<div class="fragment">
<p>De momento dejaremos marcado el <span class="hl-yellow"><strong>formato HTML que viene por defecto</strong></span>, y escribiremos el <span class="hl-yellow"><strong>título</strong></span> de nuestro documento. Tras ello tendremos nuestro <span class="hl-yellow"><strong>archivo .qmd</strong></span> (ya no es un script .R como los que hemos abierto hasta ahora).</p>
</div>
</section>
<section id="nuestro-primer-informe-2" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/quarto-example.png"></p>
</div><div class="column" style="width:40%;">
<p>Deberías tener algo similar a la captura de la imagen con <span class="hl-yellow"><strong>dos modos de edición</strong></span>: <code>Source</code> (con código, la opción recomendada hasta que lo domines) y <code>Visual</code> (más parecido a un blog)</p>
</div>
</div>
<p>Para <span class="hl-yellow"><strong>ejecutar TODO el documento</strong></span> debes clickar <code>Render on Save</code> y darle a guardar.</p>
</section>
<section id="salida-de-quarto" class="slide level2">
<h2>Salida de Quarto</h2>

<img data-src="img/quarto-prueba-html.png" class="r-stretch"><p>Deberías haber obtenido una <span class="hl-yellow"><strong>salida en html similar a esta</strong></span> (y se te ha generado en tu ordenador un <span class="hl-yellow"><strong>archivo html</strong></span>)</p>
</section>
<section id="editor-source-vs-visual" class="slide level2">
<h2>Editor: source vs visual</h2>
<p>Como se indicaba, tienes dos formas de trabajar: con código puro y algo parecido a un Notion (blog)</p>

<img data-src="./img/rstudio-source-visual.png" class="r-stretch"><p>Imagen obtenida de <a href="https://ivelasq.quarto.pub/intro-to-quarto/#/working-with-the-rstudio-visual-editor" class="uri">https://ivelasq.quarto.pub/intro-to-quarto/#/working-with-the-rstudio-visual-editor</a></p>
</section>
<section id="nuestro-primer-informe-3" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-example.png"></p>
</div><div class="column" style="width:50%;">
<p>Un fichero <code>.qmd</code> se <span class="hl-yellow"><strong>divide básicamente en tres partes</strong></span>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Cabecera</strong></span>: la parte que tienes al inicio entre <code>---</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Texto</strong></span>: que podremos formatear y mejorar con negritas (escrito como <strong>negritas</strong>, con doble astérisco al inicio y final), cursivas (<em>cursivas</em>, con barra baja al inicio y final) o destacar nombres de funciones o variables de R. Puedes añadir ecuaciones como <span class="math inline">\(x^2\)</span> (he escrito <code>$x^2$</code>, entre dólares).</p></li>
<li><p><span class="hl-yellow"><strong>Código R</strong></span></p></li>
</ul>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera están en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el título/subtítulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes algún archivo de estilos</li>
<li><code>toc</code>: si quieres índice o no</li>
<li><code>toc-location</code>: posición del índice</li>
<li><code>toc-title</code>: título del índice</li>
</ul></li>
<li><code>editor</code>: si estás en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb411"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb411-1" class="hljs-ln-code"><a href="#cb411-1"></a><span class="pp">---</span></span>
<span id="cb411-2" class="hljs-ln-code"><a href="#cb411-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb411-3" class="hljs-ln-code"><a href="#cb411-3"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb411-4" class="hljs-ln-code"><a href="#cb411-4"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb411-5" class="hljs-ln-code"><a href="#cb411-5"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb411-6" class="hljs-ln-code"><a href="#cb411-6"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera están en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el título/subtítulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes algún archivo de estilos</li>
<li><code>toc</code>: si quieres índice o no</li>
<li><code>toc-location</code>: posición del índice</li>
<li><code>toc-title</code>: título del índice</li>
</ul></li>
<li><code>editor</code>: si estás en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb412"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb412-1" class="hljs-ln-code"><a href="#cb412-1"></a><span class="pp">---</span></span>
<span id="cb412-2" class="hljs-ln-code"><a href="#cb412-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb412-3" class="hljs-ln-code"><a href="#cb412-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"javier álvarez liébana"</span></span>
<span id="cb412-4" class="hljs-ln-code"><a href="#cb412-4"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb412-5" class="hljs-ln-code"><a href="#cb412-5"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb412-6" class="hljs-ln-code"><a href="#cb412-6"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb412-7" class="hljs-ln-code"><a href="#cb412-7"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera están en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el título/subtítulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes algún archivo de estilos</li>
<li><code>toc</code>: si quieres índice o no</li>
<li><code>toc-location</code>: posición del índice</li>
<li><code>toc-title</code>: título del índice</li>
</ul></li>
<li><code>editor</code>: si estás en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb413"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb413-1" class="hljs-ln-code"><a href="#cb413-1"></a><span class="pp">---</span></span>
<span id="cb413-2" class="hljs-ln-code"><a href="#cb413-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb413-3" class="hljs-ln-code"><a href="#cb413-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"javier álvarez liébana"</span></span>
<span id="cb413-4" class="hljs-ln-code"><a href="#cb413-4"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb413-5" class="hljs-ln-code"><a href="#cb413-5"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb413-6" class="hljs-ln-code"><a href="#cb413-6"></a><span class="at">    </span><span class="fu">style</span><span class="kw">:</span><span class="at"> style.css</span></span>
<span id="cb413-7" class="hljs-ln-code"><a href="#cb413-7"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb413-8" class="hljs-ln-code"><a href="#cb413-8"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb413-9" class="hljs-ln-code"><a href="#cb413-9"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera están en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el título/subtítulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes algún archivo de estilos</li>
<li><code>toc</code>: si quieres índice o no</li>
<li><code>toc-location</code>: posición del índice</li>
<li><code>toc-title</code>: título del índice</li>
</ul></li>
<li><code>editor</code>: si estás en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb414"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb414-1" class="hljs-ln-code"><a href="#cb414-1"></a><span class="pp">---</span></span>
<span id="cb414-2" class="hljs-ln-code"><a href="#cb414-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb414-3" class="hljs-ln-code"><a href="#cb414-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"javier álvarez liébana"</span></span>
<span id="cb414-4" class="hljs-ln-code"><a href="#cb414-4"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb414-5" class="hljs-ln-code"><a href="#cb414-5"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb414-6" class="hljs-ln-code"><a href="#cb414-6"></a><span class="at">    </span><span class="fu">style</span><span class="kw">:</span><span class="at"> style.css</span></span>
<span id="cb414-7" class="hljs-ln-code"><a href="#cb414-7"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb414-8" class="hljs-ln-code"><a href="#cb414-8"></a><span class="at">    </span><span class="fu">toc-location</span><span class="kw">:</span><span class="at"> left</span></span>
<span id="cb414-9" class="hljs-ln-code"><a href="#cb414-9"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb414-10" class="hljs-ln-code"><a href="#cb414-10"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera están en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el título/subtítulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes algún archivo de estilos</li>
<li><code>toc</code>: si quieres índice o no</li>
<li><code>toc-location</code>: posición del índice</li>
<li><code>toc-title</code>: título del índice</li>
</ul></li>
<li><code>editor</code>: si estás en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb415"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb415-1" class="hljs-ln-code"><a href="#cb415-1"></a><span class="pp">---</span></span>
<span id="cb415-2" class="hljs-ln-code"><a href="#cb415-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb415-3" class="hljs-ln-code"><a href="#cb415-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"javier álvarez liébana"</span></span>
<span id="cb415-4" class="hljs-ln-code"><a href="#cb415-4"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb415-5" class="hljs-ln-code"><a href="#cb415-5"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb415-6" class="hljs-ln-code"><a href="#cb415-6"></a><span class="at">    </span><span class="fu">style</span><span class="kw">:</span><span class="at"> style.css</span></span>
<span id="cb415-7" class="hljs-ln-code"><a href="#cb415-7"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb415-8" class="hljs-ln-code"><a href="#cb415-8"></a><span class="at">    </span><span class="fu">toc-location</span><span class="kw">:</span><span class="at"> left</span></span>
<span id="cb415-9" class="hljs-ln-code"><a href="#cb415-9"></a><span class="at">    </span><span class="fu">toc-title</span><span class="kw">:</span><span class="at"> Índice</span></span>
<span id="cb415-10" class="hljs-ln-code"><a href="#cb415-10"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb415-11" class="hljs-ln-code"><a href="#cb415-11"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="texto-de-un-qmd" class="slide level2">
<h2>Texto de un qmd</h2>
<p>Respecto a la escritura solo hay una <span class="hl-yellow"><strong>cosa importante</strong></span>: salvo que indiquemos lo contrario, <span class="hl-yellow"><strong>TODO lo que vamos a escribir es texto (normal)</strong></span>. No código R.</p>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/quarto-prueba-qmd2.png" width="350"> <img data-src="img/quarto-prueba-html2.png" width="320"></p>
</div><div class="column" style="width:65%;">
<p>Vamos a empezar escribiendo una sección al inicio (<code># Intro</code> y detrás por ej. la frase</p>
<blockquote>
<p>Este material ha sido diseñado por el profesor Javier Álvarez Liébana, docente en la Universidad Complutense de Madrid</p>
</blockquote>
<p>Además al <code>Running Code</code> le añadiremos una almohadilla <code>#</code>: las <span class="hl-yellow"><strong>almohadillas FUERA DE CHUNKS</strong></span> nos servirán para crear <span class="hl-yellow"><strong>epígrafes (secciones)</strong></span> en el documento</p>
</div>
</div>
</section>
<section id="índice-de-un-qmd" class="slide level2">
<h2>Índice de un qmd</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/quarto-indice-qmd-2.png" width="370"> <img data-src="img/quarto-indice-html2.png" width="370"></p>
</div><div class="column" style="width:60%;">
<p>Para que el <span class="hl-yellow"><strong>índice capture dichas secciones</strong></span> modificaremos la cabecera del archivo como se observa en la imagen (puedes cambiar la localización del índice y el título si quieres para probar).</p>
</div>
</div>
</section>
<section id="texto-en-un-qmd" class="slide level2">
<h2>Texto en un qmd</h2>
<p>Vamos a <span class="hl-yellow"><strong>personalizar un poco el texto</strong></span> haciendo lo siguiente:</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-texto-mejorado-qmd.png" width="370"> <img data-src="img/quarto-texto-mejorado-html.png" width="370"></p>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Vamos a añadir <span class="hl-yellow"><strong>negrita al nombre</strong></span> (poniendo ** al inicio y al final).</p></li>
<li><p>Vamos añadir <span class="hl-yellow"><strong>cursiva</strong></span> a la palabra material (poniendo _ al inicio y al final).</p></li>
<li><p>Vamos añadir un <span class="hl-yellow"><strong>enlace</strong></span> <a href="https://www.ucm.es" class="uri">https://www.ucm.es</a>, asociándolo al nombre de la Universidad. Para ello el título lo ponemos entre corchetes y justo detrás el enlace entre paréntesis <code>[«Universidad Complutense de Madrid»](https://www.ucm.es)</code></p></li>
</ul>
</div>
</div>
</section>
<section id="código-en-un-qmd" class="slide level2">
<h2>Código en un qmd</h2>
<p>Para <span class="hl-yellow"><strong>añadir código R</strong></span> debemos crear nuestras <span class="hl-yellow"><strong>cajas de código llamadas chunks</strong></span>: altos en el camino en nuestro texto markdown donde podremos incluir código de casi cualquier lenguaje (y sus salidas).</p>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-chunk-qmd.png" width="470"></p>
</div><div class="column" style="width:50%;">
<p>Para incluir uno deberá de ir <span class="hl-yellow"><strong>encabezado</strong></span> de la siguiente forma tienes un atajo <code>Command + Option + I</code> (Mac) o <code>Ctrl + Shift + I</code> (Windows)</p>
</div>
</div>
</section>
<section id="código-en-un-qmd-1" class="slide level2">
<h2>Código en un qmd</h2>
<p>Dentro de dicha cajita (que tiene ahora otro color en el documento) <span class="hl-yellow"><strong>escribiremos código R</strong></span> como lo veníamos haciendo hasta ahora en los scripts.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-chunk-1-qmd.png" width="410"> <img data-src="img/quarto-chunk-1-html.png" width="410"></p>
</div><div class="column" style="width:50%;">
<p>Vamos por ejemplo a definir dos variables y su suma de la siguiente manera, escribiendo dicho código en nuestro <code>.qmd</code> (dentro de ese chunk)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1"></a><span class="co"># Código R</span></span>
<span id="cb416-2"><a href="#cb416-2"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb416-3"><a href="#cb416-3"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb416-4"><a href="#cb416-4"></a>x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="etiquetando-chunks" class="slide level2">
<h2>Etiquetando chunks</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-tag-chunks-qmd.png" width="400"> <img data-src="img/quarto-tag-chunks-html.png" width="400"></p>
</div><div class="column" style="width:50%;">
<p>Los chunks pueden tener un <span class="hl-yellow"><strong>nombre o etiqueta</strong></span>, de forma que podamos referenciarlos de nuevo para no repetir código.</p>
</div>
</div>
</section>
<section id="ejecutando-chunks" class="slide level2">
<h2>Ejecutando chunks</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/quarto-inline-qmd.png" width="400"> <img data-src="img/quarto-inline-html.png" width="380"></p>
</div><div class="column" style="width:60%;">
<p>En cada chunk aparecen <span class="hl-yellow"><strong>dos botones</strong></span>:</p>
<ul>
<li><p>botón de <span class="hl-yellow"><strong>play</strong></span>: activa la <span class="hl-yellow"><strong>ejecución y salida de ese chunk particular</strong></span> (lo puedes visualizar dentro de tu propio <code>RStudio</code>)</p></li>
<li><p>botón de <span class="hl-yellow"><strong>rebobinar</strong></span>: activa la <span class="hl-yellow"><strong>ejecución y salida de todos los chunk hasta ese</strong></span> (sin llegar a él)</p></li>
</ul>
<p>&nbsp;</p>
<p>Además podemos <span class="hl-yellow"><strong>incluir código R dentro de la línea de texto</strong></span> (en lugar de mostrar el texto x ejecuta el código R mostrando la variable).</p>
</div>
</div>
</section>
<section id="personalización-de-chunks" class="slide level2">
<h2>Personalización de chunks</h2>
<p>Los <span class="hl-yellow"><strong>chunks podemos personalizarlos</strong></span> con opciones al inicio del chunk precedido de <code>#|</code>:</p>
<ul>
<li><p><code>#| echo: false</code>: <span class="hl-green"><strong>ejecuta código</strong></span> y se <span class="hl-green"><strong>muestra resultado</strong></span> pero <span class="hl-red"><strong>no visualiza código</strong></span> en la salida.</p></li>
<li><p><code>#| include: false</code>: <span class="hl-green"><strong>ejecuta código</strong></span> pero <span class="hl-red"><strong>no muestra resultado</strong></span> y <span class="hl-red"><strong>no visualiza código</strong></span> en la salida.</p></li>
<li><p><code>#| eval: false</code>: <span class="hl-red"><strong>no ejecuta código</strong></span>, <span class="hl-red"><strong>no muestra resultado</strong></span> pero <span class="hl-green"><strong>sí visualiza código</strong></span> en la salida.</p></li>
<li><p><code>#| message: false</code>: <span class="hl-green"><strong>ejecuta código</strong></span> pero <span class="hl-red"><strong>no muestra mensajes de salida</strong></span>.</p></li>
<li><p><code>#| warning: false</code>: <span class="hl-green"><strong>ejecuta código</strong></span> pero <span class="hl-red"><strong>no muestra mensajes de warning</strong></span>.</p></li>
<li><p><code>#| error: true</code>: <span class="hl-green"><strong>ejecuta código</strong></span> y <span class="hl-green"><strong>permite que haya errores</strong></span> mostrando el mensaje de error en la salida.</p></li>
</ul>

<img data-src="img/quarto-options-chunk.png" width="380" class="r-stretch"><p>Estas opciones podemos aplicarlas chunk a chunk o fijar los parámetros de forma global con <code>knitr::opts_chunk$set()</code> al inicio del documento (dentro de un chunk).</p>
</section>
<section id="personalizando-chunks" class="slide level2">
<h2>Personalizando chunks</h2>
<p>Si queremos que aplique la <strong>opción a todos los chunks por defecto</strong> debemos incluirlo al final de la cabecera, como <span class="hl-yellow"><strong>opciones de ejecución</strong></span></p>
<div class="sourceCode" id="cb418"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb418-1"><a href="#cb418-1"></a><span class="pp">---</span></span>
<span id="cb418-2"><a href="#cb418-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"¡Hola!"</span></span>
<span id="cb418-3"><a href="#cb418-3"></a><span class="fu">format</span><span class="kw">:</span><span class="at"> html</span></span>
<span id="cb418-4"><a href="#cb418-4"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb418-5"><a href="#cb418-5"></a><span class="fu">execute</span><span class="kw">:</span></span>
<span id="cb418-6"><a href="#cb418-6"></a><span class="at">  </span><span class="fu">echo</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb418-7"><a href="#cb418-7"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="organizando-qmd" class="slide level2">
<h2>Organizando qmd</h2>
<p>Además de texto y código podemos introducir lo siguiente:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Ecuaciones</strong></span>: puedes añadir además ecuaciones como <span class="math inline">\(x^2\)</span> (he escrito <code>$x^2$</code>, la ecuación entre dólares).</p></li>
<li><p><span class="hl-yellow"><strong>Listas</strong></span>: puedes itemizar elementos poniendo <code>*</code></p></li>
</ul>
<p><code>* Paso 1: ...</code></p>
<p><code>* Paso 2: ...</code></p>
<ul>
<li><span class="hl-yellow"><strong>Cross-references</strong></span>: puedes etiquetar partes del documento (la etiqueta se construye con <code>{#nombre-seccion}</code>) y llamarlas luego con <code>[Sección](@nombre-seccion)</code></li>
</ul>
</section>
<section id="gráficasimágenes-en-qmd" class="slide level2">
<h2>Gráficas/imágenes en qmd</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-fig-qmd.png" width="340"> <img data-src="img/quarto-fig-html.png" width="390"></p>
</div><div class="column" style="width:50%;">
<p>Por último, también podemos <span class="hl-yellow"><strong>añadir pies de gráficas o imágenes</strong></span> añadiendo <code>#| fig-cap: "..."</code></p>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:65%;">
<p>Fíjate que el <span class="hl-yellow"><strong>caption está en el margen</strong></span> (por ejemplo). Puedes cambiarlo introduciendo <span class="hl-yellow"><strong>ajustes en la cabecera</strong></span> (todo lo relativo a figuras empieza por <code>fig-</code>, y puedes ver las opciones tabulando). Tienes más información en <a href="https://quarto.org/" class="uri"><strong>https://quarto.org/</strong></a></p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/quarto-cabecera-desplegable.png" width="400"></p>
</div>
</div>
</div>
</section>
<section id="añadir-estilos" class="slide level2">
<h2>Añadir estilos</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-estilos-qmd.png" width="400"> <img data-src="img/quarto-estilos-html.png" width="400"></p>
</div><div class="column" style="width:50%;">
<p>Por último puedes añadir un <span class="hl-yellow"><strong>tema personalizado</strong></span> incluyendo un <span class="hl-yellow"><strong>archivo de estilos</strong></span> (archivo en formato <code>.scss</code> o <code>.css</code>). Te he dejado uno en <a href="https://github.com/dadosdelaplace/docencia-R-master-bio-2324/tree/main/material" class="uri">https://github.com/dadosdelaplace/docencia-R-master-bio-2324/tree/main/material</a>.</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>El archivo de estilos debe estar en la misma carpeta que el archivo <code>.qmd</code></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="añadir-estilos-1" class="slide level2">
<h2>Añadir estilos</h2>
<p>También puedes hacerlo de manera sencilla <span class="hl-yellow"><strong>añadiendo a los textos un poco de HTML</strong></span>. Por ejemplo, para personalizar el color de un texto va entre corchetes y justo tras el texto, entre llaves, las opciones de estilo</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb419-1"><a href="#cb419-1"></a>Esta palabra es [roja]{style="color:red;"} ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb420"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb420-1"><a href="#cb420-1"></a>... y esta [verde y en negrita]{style="color:green; font-weight: bold;"}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<p>Esta palabra es <span style="color:red;">roja</span> …</p>
<p>… y esta <span style="color:green; font-weight: bold;">verde y en negrita</span></p>
</div>
</section>
<section id="revealjs" class="slide level2">
<h2>Revealjs</h2>
<p>Puedes añadir algunas «animaciones» usando lo que se conoce como Revealjs (javascript), especifcándolo en la cabecera y usando <span class="hl-yellow"><strong>bloques</strong></span> de dicho lenguaje delimitados por <code>:::</code> al inicio y final, y la palabra de la «herramienta» a usar. Por ejemplo <code>{.incremental}</code> hace una transición de los elementos.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb421-1"><a href="#cb421-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb421-2"><a href="#cb421-2"></a><span class="at">  revealjs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode numberSource revealjs number-lines code-with-copy"><code class="sourceCode"><span id="cb422-1"><a href="#cb422-1"></a>::: {.incremental}</span>
<span id="cb422-2"><a href="#cb422-2"></a>- Me</span>
<span id="cb422-3"><a href="#cb422-3"></a>- llamo</span>
<span id="cb422-4"><a href="#cb422-4"></a>- Javi</span>
<span id="cb422-5"><a href="#cb422-5"></a>:::</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>
<ul>
<li class="fragment">Me</li>
<li class="fragment">llamo</li>
<li class="fragment">Javi</li>
</ul>
</div>
</section>
<section id="bloques-de-llamada" class="slide level2">
<h2>Bloques de llamada</h2>
<p>También puedes usar los <span class="hl-yellow"><strong>bloques de llamada</strong></span> que por defecto son <code>note</code>, <code>tip</code>, <code>warning</code>, <code>caution</code> e <code>important</code> (aunque los puedes crear y personalizar). Para ello basta con usar <code>:::{.callout-tipo}</code> y el tipo que quieras</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb423-1"><a href="#cb423-1"></a>:::{.callout-tip}</span>
<span id="cb423-2"><a href="#cb423-2"></a></span>
<span id="cb423-3"><a href="#cb423-3"></a>Note that there are five types of callouts, including: </span>
<span id="cb423-4"><a href="#cb423-4"></a>`note`, `tip`, `warning`, `caution`, and `important`.</span>
<span id="cb423-5"><a href="#cb423-5"></a></span>
<span id="cb423-6"><a href="#cb423-6"></a>:::</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Recuerda que los 5 tipos son <code>note</code>, <code>tip</code>, <code>warning</code>, <code>caution</code> e <code>important</code>.</p>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Caution</strong></p>
</div>
<div class="callout-content">
<p>Úsalos con cabeza, a veces mucho recursos estético puede marear.</p>
</div>
</div>
</div>
</div>
</section>
<section id="múltiples-columnas" class="slide level2">
<h2>Múltiples columnas</h2>
<p>Con <code>:::: columns</code> podemos definir una disposición de <span class="hl-yellow"><strong>múltiples columnas</strong></span> donde cada una viene definida por <code>::: {.column width="65%"} cosa :::</code>, indicando al lado del porcentaje cuanto quieres que ocupe cada columna (¡cuidado, no dejar espacios!)</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb424-1"><a href="#cb424-1"></a>:::: columns</span>
<span id="cb424-2"><a href="#cb424-2"></a>::: {.column width="65%"}</span>
<span id="cb424-3"><a href="#cb424-3"></a>Así se define un vector</span>
<span id="cb424-4"><a href="#cb424-4"></a>:::</span>
<span id="cb424-5"><a href="#cb424-5"></a>::: {.column width="35%"}</span>
<span id="cb424-6"><a href="#cb424-6"></a>x <span class="er">&lt;</span>- c(1, 2, 3)</span>
<span id="cb424-7"><a href="#cb424-7"></a>x</span>
<span id="cb424-8"><a href="#cb424-8"></a>:::</span>
<span id="cb424-9"><a href="#cb424-9"></a>::::</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:65%;">
<p>Así se define un vector</p>
</div><div class="column" style="width:35%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb425"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb425-2"><a href="#cb425-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="clase-4" class="title-slide slide level1 center">
<h1>Clase 4: <span class="flow">intro a tidyverse</span></h1>
<p><span style="color:#444442;"><strong>Dataviz, importar/exportar e intro a tidyverse</strong></span></p>
<ul>
<li><a href="#/tidydata">Intro a tidydata</a></li>
<li><a href="#/dplyr">Intro a preprocesamiento con dplyr</a></li>
<li><a href="#/summarise">Intro a resúmenes</a></li>
<li><a href="#/ggplot">Intro a dataviz en R</a></li>
</ul>
</section>
<section id="tidydata" class="slide level2">
<h2>Clase 4: <span class="flow">tidydata</span></h2>
<p><span style="color:#444442;"><strong>Dataviz, importar/exportar ggplot e intro a tidyverse</strong></span></p>
<ul>
<li><a href="#/tu-turno-4-1">💻 Ejercicios resueltos: tidydata</a></li>
<li><a href="#/caso-practico-4-1">🐣 Workbook/caso práctico: tidy data</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="tidydata" class="slide level2">
<h2>R base vs Tidyverse</h2>
<p>Hasta ahora todo lo que hemos hecho en <code>R</code> lo hemos realizado en el paradigma de programación conocido como <span class="hl-yellow"><strong>R base</strong></span>. Y es que cuando <code>R</code> nació como lenguaje, muchos de los que programaban en él imitaron formas y metodologías heredadas de otros lenguajes, basado en el uso de</p>
<ul>
<li><p>Bucles <span class="hl-yellow"><strong>for</strong></span> y <span class="hl-yellow"><strong>while</strong></span></p></li>
<li><p>Estructuras <span class="hl-yellow"><strong>if-else</strong></span></p></li>
<li><p>Estructuras <span class="hl-yellow"><strong>$ y []</strong></span></p></li>
</ul>
<p>Y aunque es necesario conocer dichas estructuras, en la <span class="hl-red"><strong>mayoría de ocasiones hay opciones más modernas y vamos a poder evitarlas</strong></span> en especial los bucles: es necesario conocer la gramática de un idioma para habler uno de sus dialectos.</p>
</section>
<section id="qué-es-tidyverse" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/flow_tidyverse.jpg"></p>
</div>
</div>
<p>En ese contexto de programación funcional, hace una década nacía <code>{tidyverse}</code>, un <span class="hl-yellow"><strong>«universo» de paquetes</strong></span> para garantizar un flujo de trabajo eficiente, coherente y lexicográficamente sencillo de entender, basado en la idea de que <span class="hl-purple"><strong>nuestros datos están limpios y ordenados (tidy)</strong></span></p>
</section>
<section id="qué-es-tidyverse-1" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
<ul>
<li><code>{lubridate}</code> manejo de fechas</li>
<li><code>{rvest}</code>: web scraping</li>
<li><code>{tidymodels}</code>: modelización/predicción</li>
</ul>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: optimizando data.frame</li>
<li><code>{tidyr}</code>: limpieza de datos</li>
<li><code>{readr}</code>: carga datos rectangulares (.csv), <code>{readxl}</code> para importar archivos .xls y .xlsx</li>
<li><code>{dplyr}</code>: gramática para depurar</li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{purrr}</code>: manejo de listas</li>
<li><code>{forcats}</code>: manejo de cualitativas</li>
<li><code>{ggplot2}</code>: visualización de datos</li>
</ul>
</div>
</div>
</section>
<section id="filosofía-base-tidy-data" class="slide level2">
<h2>Filosofía base: tidy data</h2>
<blockquote>
<p>Tidy datasets are all alike, but every messy dataset is messy in its own way (Hadley Wickham, Chief Scientist en RStudio)</p>
</blockquote>
<div style="font-size:120px; text-align: center; color:#F8DF58;">
<p><b>TIDY</b><b><span style="color:#CAB0EE;">VERSE</span></b></p>
</div>
<p>El <span class="hl-purple"><strong>universo</strong></span> de paquetes <code>{tidyverse}</code> se basa en la idea introducida por <strong>Hadley Wickham</strong> (el Dios al que rezamos) de <span class="hl-yellow"><strong>estandarizar</strong></span> el formato de los datos para</p>
<div>
<ul>
<li class="fragment"><span class="hl-green"><strong>sistematizar</strong></span> la depuración</li>
<li class="fragment">hacer más <span class="hl-green"><strong>sencillo</strong></span> su manipulación.</li>
<li class="fragment">código <span class="hl-green"><strong>legible</strong></span></li>
</ul>
</div>
</section>
<section id="reglas-del-tidy-data" class="slide level2">
<h2>Reglas del tidy data</h2>
<p>Lo primero por tanto será entender qué son los <span class="hl-yellow"><strong>conjuntos tidydata</strong></span> ya que todo <code>{tidyverse}</code> se basa en que los datos están estandarizados.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment fade-in">
<ol type="1">
<li>Cada <span class="hl-yellow"><strong>variable</strong></span> en una <span class="hl-purple"><strong>única columna</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="2" type="1">
<li>Cada <span class="hl-yellow"><strong>individuo</strong></span> en una <span class="hl-purple"><strong>fila diferente</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="3" type="1">
<li>Cada <span class="hl-yellow"><strong>celda</strong></span> con un <span class="hl-purple"><strong>único valor</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="4" type="1">
<li>Cada <span class="hl-yellow"><strong>dataset</strong></span> en un <span class="hl-purple"><strong>tibble</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="5" type="1">
<li>Si queremos cruzar <span class="hl-yellow"><strong>múltiples tablas</strong></span> debemos tener una <span class="hl-purple"><strong>columna común</strong></span></li>
</ol>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidy_def.jpg" style="width:160.0%"></p>
</div>
</div>
</section>
<section id="tubería-pipe" class="slide level2">
<h2>Tubería (pipe)</h2>
<p>En <code>{tidyverse}</code> será clave el <span class="hl-yellow"><strong>operador pipe (tubería)</strong></span> definido como <code>|&gt;</code> (<span class="hl-purple"><strong>ctrl+shift+M</strong></span>): será una <span class="hl-yellow"><strong>tubería que recorre los datos</strong></span> y los transforma.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p>En R base, si queremos aplicar tres funciones <code>first()</code>, <code>second()</code> y <code>third()</code> en orden, sería</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb427"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb427-1"><a href="#cb427-1"></a><span class="fu">third</span>(<span class="fu">second</span>(<span class="fu">first</span>(datos)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>En <code>{tidyverse}</code> podremos <span class="hl-yellow"><strong>leer de izquierda a derecha</strong></span> y separar los datos de las acciones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">first</span>() <span class="sc">|&gt;</span> <span class="fu">second</span>() <span class="sc">|&gt;</span> <span class="fu">third</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Apunte importante</strong></p>
</div>
<div class="callout-content">
<p>Desde la versión 4.1.0 de <code>R</code> disponemos de <code>|&gt;</code>, un pipe <strong>nativo</strong> disponible <span class="hl-purple"><strong>fuera de tidyverse</strong></span>, sustituyendo al <span class="hl-red"><strong>antiguo pipe</strong></span> <code>%&gt;%</code> que dependía del paquete <code>{magrittr}</code> (bastante problemático).</p>
</div>
</div>
</div>
</div>
</section>
<section id="tubería-pipe-1" class="slide level2">
<h2>Tubería (pipe)</h2>
<p>La principal ventaja es que el <span class="hl-yellow"><strong>código sea muy legible (casi literal)</strong></span> pudiendo hacer grandes operaciones con los datos con apenas código.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb429"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb429-2"><a href="#cb429-2"></a>  <span class="fu">limpio</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-3"><a href="#cb429-3"></a>  <span class="fu">filtro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-4"><a href="#cb429-4"></a>  <span class="fu">selecciono</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-5"><a href="#cb429-5"></a>  <span class="fu">ordeno</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-6"><a href="#cb429-6"></a>  <span class="fu">modifico</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-7"><a href="#cb429-7"></a>  <span class="fu">renombro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-8"><a href="#cb429-8"></a>  <span class="fu">agrupo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-9"><a href="#cb429-9"></a>  <span class="fu">cuento</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-10"><a href="#cb429-10"></a>  <span class="fu">resumo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb429-11"><a href="#cb429-11"></a>  <span class="fu">pinto</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<center>
<img src="img/logo_pipe.png" width="360px">
</center>
</div>
</div>
</section>
<section id="datos-sucios-messy-data" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>¿Pero qué aspecto tienen los <span class="hl-yellow"><strong>datos no tidy</strong></span>? Vamos a cargar la tabla <code>table4a</code> del paquete <code>{tidyr}</code> (ya lo tenemos cargado del entorno tidyverse).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb430"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb430-1"><a href="#cb430-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb430-2"><a href="#cb430-2"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="pivotar-pivot_longer" class="slide level2">
<h2>Pivotar: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb432"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb432-1"><a href="#cb432-1"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<p>❎ Cada <span class="hl-red"><strong>fila representa dos observaciones</strong></span> (1999 y 2000) → las columnas <code>1999</code> y <code>2000</code> en realidad deberían ser en sí <span class="hl-yellow"><strong>valores de una variable</strong></span> y no nombres de columnas.</p>
</div>
</div>
<div class="fragment">
<p>Incluiremos una <span class="hl-yellow"><strong>nueva columna</strong></span> que nos guarde el año y otra que guarde el valor de la variable de interés en cada uno de esos años. Y lo haremos con la función <code>pivot_longer()</code>: <span class="hl-yellow"><strong>pivotaremos la tabla</strong></span> a formato long:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb434"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb434-1"><a href="#cb434-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb434-2"><a href="#cb434-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div>
</section>
<section id="pivotar-pivot_longer-1" class="slide level2">
<h2>Pivotar: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb436"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb436-2"><a href="#cb436-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>),</span>
<span id="cb436-3"><a href="#cb436-3"></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb436-4"><a href="#cb436-4"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/table4a.jpg"></p>
</div>
</div>
<ul>
<li><code>cols</code>: <span class="hl-yellow"><strong>nombre de las variables a pivotar</strong></span></li>
<li><code>names_to</code>: nombre de la nueva variable a la quemandamos la <span class="hl-yellow"><strong>cabecera</strong></span> de la tabla (los nombres).</li>
<li><code>values_to</code>: nombre de la nueva variable a la que vamos a mandar los <span class="hl-yellow"><strong>datos</strong></span>.</li>
</ul>
</section>
<section id="datos-sucios-messy-data-1" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos otro ejemplo con la tabla <code>table2</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb438"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb438-1"><a href="#cb438-1"></a>table2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="pivotar-pivot_wider" class="slide level2">
<h2>Pivotar: pivot_wider()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>❎ Cada <span class="hl-red"><strong>observación está dividido en dos filas</strong></span> → los <span class="hl-yellow"><strong>registros con el mismo año deberían ser el mismo</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Lo que haremos será lo opuesto: con <code>pivot_wider()</code> <span class="hl-yellow"><strong>ensancharemos la tabla</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb441"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb441-1"><a href="#cb441-1"></a>table2 <span class="sc">|&gt;</span>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases population
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-sucios-messy-data-2" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos otro ejemplo con la tabla <code>table3</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb443"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="separar-separate" class="slide level2">
<h2>Separar: separate()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb445"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb445-1"><a href="#cb445-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>❎ Cada <span class="hl-red"><strong>celda contiene varios valores</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Lo que haremos será hacer uso de la función <code>separate()</code> para mandar <span class="hl-yellow"><strong>separar cada valor</strong></span> a una columna diferente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb447"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb447-1"><a href="#cb447-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="separar-separate-1" class="slide level2">
<h2>Separar: separate()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb449"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb449-1"><a href="#cb449-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
<p>Fíjate que los datos, aunque los ha separado, <span class="hl-red"><strong>los ha mantenido como texto</strong></span> cuando en realidad deberían ser variables numéricas. Para ello podemos añadir el argumento opcional <code>convert = TRUE</code></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb451"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb451-1"><a href="#cb451-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases        pop
  &lt;chr&gt;       &lt;dbl&gt;  &lt;int&gt;      &lt;int&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-sucios-messy-data-3" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos el último ejemplo con la tabla <code>table5</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb453"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb453-1"><a href="#cb453-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country     century year  rate             
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="unir-unite" class="slide level2">
<h2>Unir unite()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb455"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb455-1"><a href="#cb455-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country     century year  rate             
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>❎ Tenemos <span class="hl-red"><strong>mismos valores divididos en dos columnas</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Usaremos <code>unite()</code> para <span class="hl-yellow"><strong>unir los valores</strong></span> de siglo y año en una misma columna</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb457"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb457-1"><a href="#cb457-1"></a>table5 <span class="sc">|&gt;</span> <span class="fu">unite</span>(<span class="at">col =</span> year_completo, century, year, <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year_completo rate             
  &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;            
1 Afghanistan 1999          745/19987071     
2 Afghanistan 2000          2666/20595360    
3 Brazil      1999          37737/172006362  
4 Brazil      2000          80488/174504898  
5 China       1999          212258/1272915272
6 China       2000          213766/1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-4-1" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-9-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-9-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-9-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<p>📝 Usa el dataset original <code>relig_income</code> en <code>{tidyr}</code> y trata de responder a la última pregunta: ¿cuántas personas agnósticas con ingresos superiores (o iguales) a 30 tenemos?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb459"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb459-1"><a href="#cb459-1"></a><span class="fu">sum</span>(relig_income[relig_income<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Agnostic"</span>,</span>
<span id="cb459-2"><a href="#cb459-2"></a>             <span class="fu">c</span>(<span class="st">"$30-40k"</span>, <span class="st">"$40-50k"</span>, <span class="st">"$50-75k"</span>, <span class="st">"$75-100k"</span>, <span class="st">"$100-150k"</span>, <span class="st">"&gt;150k"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-2">
<p>📝 Convierte a tidy data</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb460"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1"></a>relig_tidy <span class="ot">&lt;-</span></span>
<span id="cb460-2"><a href="#cb460-2"></a>  relig_income <span class="sc">|&gt;</span> </span>
<span id="cb460-3"><a href="#cb460-3"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>religion, <span class="at">names_to =</span> <span class="st">"ingresos"</span>, <span class="at">values_to =</span> <span class="st">"personas"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-3">
<p>📝 Echa un vistazo a la tabla <code>table4b</code> del paquete <code>{tidyr}</code>. ¿Es tidydata? En caso negativo, ¿qué falla? ¿Cómo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb461"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb461-1"><a href="#cb461-1"></a>table4b <span class="sc">|&gt;</span></span>
<span id="cb461-2"><a href="#cb461-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"1999"</span><span class="sc">:</span><span class="st">"2000"</span>, <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb461-3"><a href="#cb461-3"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-4">
<p>📝 Echa un vistazo a la tabla <code>billboard</code> del paquete <code>{tidyr}</code>. ¿Es tidydata? En caso negativo, ¿qué falla? ¿Cómo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb462"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb462-1"><a href="#cb462-1"></a>billboard <span class="sc">|&gt;</span></span>
<span id="cb462-2"><a href="#cb462-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"wk1"</span><span class="sc">:</span><span class="st">"wk76"</span>,</span>
<span id="cb462-3"><a href="#cb462-3"></a>               <span class="at">names_to =</span> <span class="st">"week"</span>,</span>
<span id="cb462-4"><a href="#cb462-4"></a>               <span class="at">names_prefix =</span> <span class="st">"wk"</span>,</span>
<span id="cb462-5"><a href="#cb462-5"></a>               <span class="at">values_to =</span> <span class="st">"position"</span>,</span>
<span id="cb462-6"><a href="#cb462-6"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-4-1" class="slide level2">
<h2>🐣 Caso práctico I: tidy data</h2>
<p>En el paquete <code>{tidyr}</code> contamos con el dataset <code>who2</code> (dataset de la Organización Mundial de la Salud). Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/tidydata-isciii/#caso-pr%C3%A1ctico-an%C3%A1lisis-de-datos-de-la-oms"><strong>workbook</strong></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb463"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb463-1"><a href="#cb463-1"></a>who2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,240 × 58
   country      year sp_m_014 sp_m_1524 sp_m_2534 sp_m_3544 sp_m_4554 sp_m_5564
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan  1980       NA        NA        NA        NA        NA        NA
 2 Afghanistan  1981       NA        NA        NA        NA        NA        NA
 3 Afghanistan  1982       NA        NA        NA        NA        NA        NA
 4 Afghanistan  1983       NA        NA        NA        NA        NA        NA
 5 Afghanistan  1984       NA        NA        NA        NA        NA        NA
 6 Afghanistan  1985       NA        NA        NA        NA        NA        NA
 7 Afghanistan  1986       NA        NA        NA        NA        NA        NA
 8 Afghanistan  1987       NA        NA        NA        NA        NA        NA
 9 Afghanistan  1988       NA        NA        NA        NA        NA        NA
10 Afghanistan  1989       NA        NA        NA        NA        NA        NA
# ℹ 7,230 more rows
# ℹ 50 more variables: sp_m_65 &lt;dbl&gt;, sp_f_014 &lt;dbl&gt;, sp_f_1524 &lt;dbl&gt;,
#   sp_f_2534 &lt;dbl&gt;, sp_f_3544 &lt;dbl&gt;, sp_f_4554 &lt;dbl&gt;, sp_f_5564 &lt;dbl&gt;,
#   sp_f_65 &lt;dbl&gt;, sn_m_014 &lt;dbl&gt;, sn_m_1524 &lt;dbl&gt;, sn_m_2534 &lt;dbl&gt;,
#   sn_m_3544 &lt;dbl&gt;, sn_m_4554 &lt;dbl&gt;, sn_m_5564 &lt;dbl&gt;, sn_m_65 &lt;dbl&gt;,
#   sn_f_014 &lt;dbl&gt;, sn_f_1524 &lt;dbl&gt;, sn_f_2534 &lt;dbl&gt;, sn_f_3544 &lt;dbl&gt;,
#   sn_f_4554 &lt;dbl&gt;, sn_f_5564 &lt;dbl&gt;, sn_f_65 &lt;dbl&gt;, ep_m_014 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="dplyr" class="slide level2">
<h2>Clase 4: <span class="flow">preprocesamiento con dplyr</span></h2>
<p><span style="color:#444442;"><strong>Intro a tidyverse</strong></span></p>
<ul>
<li><a href="#/tu-turno-4-2">💻 Ejercicios resueltos: operaciones por filas</a></li>
<li><a href="#/caso-practico-4-2">🐣 Workbook/caso práctico: airquality</a></li>
<li><a href="#/tu-turno-4-3">💻 Ejercicios resueltos: operaciones por columnas</a></li>
<li><a href="#/caso-practico-4-3">🐣 Workbook/caso práctico: Taylor Swift</a></li>
<li><a href="#/extra-tidyverse">👾 Materiales extras tidyverse</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="preprocesamiento-dplyr" class="slide level2">
<h2>Preprocesamiento: dplyr</h2>
<p>Dentro de <code>{tidyverse}</code> usaremos el paquete <code>{dplyr}</code> para el <span class="hl-yellow"><strong>preprocesamiento y depuración</strong></span> de los datos. La idea es que el <span class="hl-yellow"><strong>código sea legible</strong></span>, como si fuese una <strong>lista de instrucciones</strong> que al leerla nos diga de manera muy evidente lo que está haciendo.</p>
<p>Vamos a practicar con el dataset <code>starwars</code> del paquete cargado <code>{dplyr}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb465"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb465-1"><a href="#cb465-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb465-2"><a href="#cb465-2"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="muestreo" class="slide level2">
<h2>Muestreo</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Una de las operaciones más comunes es lo que se conoce en estadística como <span class="hl-yellow"><strong>muestreo</strong></span>: una <span class="hl-yellow"><strong>selección o filtrado de registros</strong></span> (una submuestra)</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/muestreo.jpeg" width="500"></p>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>No aleatorio (por cuotas)</strong></span>: en base a condiciones lógicas sobre los registros (<code>filter()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>No aleatorio (intencional/discreccional)</strong></span>: en base a posición (<code>slice()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Aleatorio simple</strong></span> (<code>slice_sample()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Aleatorio estratificado</strong></span> (<code>group_by()</code> + <code>slice_sample()</code>)</li>
</ul>
</div>
</section>
<section id="filtrar-filas-filter" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb466"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb466-2"><a href="#cb466-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb467"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb467-1"><a href="#cb467-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb467-2"><a href="#cb467-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>El más simple es cuando <span class="hl-yellow"><strong>filtramos registros</strong></span> en base a alguna condición lógica: con <code>filter()</code> se seleccionarán solo individuos que cumplan ciertas condiciones (muestreo no aleatorio por condiciones)</p>
<div>
<ul>
<li class="fragment"><code>==</code>, <code>!=</code>: <span class="hl-purple"><strong>igual</strong></span> o <span class="hl-yellow"><strong>distinto</strong></span> que (<code>|&gt; filter(variable == "a")</code>)</li>
<li class="fragment"><code>&gt;</code>, <code>&lt;</code>: <span class="hl-purple"><strong>mayor</strong></span> o <span class="hl-yellow"><strong>menor</strong></span> que (<code>|&gt; filter(variable &lt; 3)</code>)</li>
<li class="fragment"><code>&gt;=</code>, <code>&lt;=</code>: <span class="hl-yellow"><strong>mayor o igual</strong></span> o <span class="hl-purple"><strong>menor o igual</strong></span> que (<code>|&gt; filter(variable &gt;= 5)</code>)</li>
<li class="fragment"><code>%in%</code>: valores <span class="hl-yellow"><strong>pertenencen</strong></span> a un listado de opciones (<code>|&gt; filter(variable %in% c("azul", "verde"))</code>)</li>
<li class="fragment"><code>between(variable, val1, val2)</code>: si los valores (continuos) <span class="hl-yellow"><strong>caen dentro de un rango</strong></span> de valores (<code>|&gt; filter(between(variable, 160, 180))</code>)</li>
</ul>
</div>
</section>
<section id="filtrar-filas-filter-1" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<p>Dichas <span class="hl-yellow"><strong>condiciones lógicas</strong></span> las podemos <span class="hl-yellow"><strong>combinar</strong></span> de diferentes maneras (y, o, o excluyente)</p>

<img data-src="img/tablas_verdad.png" class="r-stretch"><div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Recuerda que dentro de <code>filter()</code> debe ir siempre algo que devuelva un <span class="hl-green"><strong>vector de valores lógicos</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-2" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb468"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb468-1"><a href="#cb468-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb468-2"><a href="#cb468-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb469"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb469-1"><a href="#cb469-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb469-2"><a href="#cb469-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías para… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes de <span class="hl-purple"><strong>ojos marrones</strong></span>?</p>
<div class="fragment">
<p><span class="hl-yellow"><strong>¿Qué tipo de variable es?</strong></span> –&gt; La variable <code>eye_color</code> es cualitativa así que está representada por textos</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb470"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb470-1"><a href="#cb470-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb470-2"><a href="#cb470-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Leia Or…    150  49   brown      light      brown           19   fema… femin…
 2 Biggs D…    183  84   black      light      brown           24   male  mascu…
 3 Han Solo    180  80   brown      fair       brown           29   male  mascu…
 4 Yoda         66  17   white      green      brown          896   male  mascu…
 5 Boba Fe…    183  78.2 black      fair       brown           31.5 male  mascu…
 6 Lando C…    177  79   black      dark       brown           31   male  mascu…
 7 Arvel C…     NA  NA   brown      fair       brown           NA   male  mascu…
 8 Wicket …     88  20   brown      brown      brown            8   male  mascu…
 9 Padmé A…    185  45   brown      light      brown           46   fema… femin…
10 Quarsh …    183  NA   black      dark       brown           62   male  mascu…
# ℹ 11 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-3" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb472"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb472-1"><a href="#cb472-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb472-2"><a href="#cb472-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb473"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb473-1"><a href="#cb473-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb473-2"><a href="#cb473-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías para… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>no tienen ojos marrones</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb474"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb474-1"><a href="#cb474-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb474-2"><a href="#cb474-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">!=</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 66 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 6 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 7 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 8 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
 9 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
10 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…
# ℹ 56 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-4" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb476"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb476-1"><a href="#cb476-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb476-2"><a href="#cb476-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb477"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb477-1"><a href="#cb477-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb477-2"><a href="#cb477-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías para … <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan los ojos marrones o azules</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb478"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb478-1"><a href="#cb478-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb478-2"><a href="#cb478-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"brown"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 3 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 4 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 5 Biggs D…    183    84 black      light      brown           24   male  mascu…
 6 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
 7 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…
 8 Chewbac…    228   112 brown      unknown    blue           200   male  mascu…
 9 Han Solo    180    80 brown      fair       brown           29   male  mascu…
10 Jek Ton…    180   110 brown      fair       blue            NA   &lt;NA&gt;  &lt;NA&gt;  
# ℹ 30 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-5" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb480"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb480-1"><a href="#cb480-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb480-2"><a href="#cb480-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb481"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb481-1"><a href="#cb481-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb481-2"><a href="#cb481-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Fíjate que <code>%in%</code> es equivalente a concatenar varios <code>==</code> con una conjunción o (<code>|</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb482"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb482-1"><a href="#cb482-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb482-2"><a href="#cb482-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"blue"</span> <span class="sc">|</span> eye_color <span class="sc">==</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 3 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 4 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 5 Biggs D…    183    84 black      light      brown           24   male  mascu…
 6 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
 7 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…
 8 Chewbac…    228   112 brown      unknown    blue           200   male  mascu…
 9 Han Solo    180    80 brown      fair       brown           29   male  mascu…
10 Jek Ton…    180   110 brown      fair       blue            NA   &lt;NA&gt;  &lt;NA&gt;  
# ℹ 30 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="filtrar-filas-filter-6" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb484"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb484-1"><a href="#cb484-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb484-2"><a href="#cb484-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb485"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb485-1"><a href="#cb485-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb485-2"><a href="#cb485-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías para … <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>midan entre 120 y 160 cm</strong></span>?</p>
<div class="fragment">
<p><span class="hl-yellow"><strong>¿Qué tipo de variable es?</strong></span> –&gt; La variable <code>height</code> es cuantitativa continua así que deberemos filtrar por rangos de valores (intervalos) –&gt; usaremos <code>between()</code></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb486"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb486-1"><a href="#cb486-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb486-2"><a href="#cb486-2"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">160</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Leia Org…    150    49 brown      light      brown             19 fema… femin…
2 Mon Moth…    150    NA auburn     fair       blue              48 fema… femin…
3 Nien Nunb    160    68 none       grey       black             NA male  mascu…
4 Watto        137    NA black      blue, grey yellow            NA male  mascu…
5 Gasgano      122    NA none       white, bl… black             NA male  mascu…
6 Cordé        157    NA brown      light      brown             NA &lt;NA&gt;  &lt;NA&gt;  
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-7" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb488"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb488-1"><a href="#cb488-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb488-2"><a href="#cb488-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb489"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb489-1"><a href="#cb489-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb489-2"><a href="#cb489-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan ojos y no sean humanos</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb490"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb490-1"><a href="#cb490-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb490-2"><a href="#cb490-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">!=</span> <span class="st">"Human"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Yoda          66    17 white      green      brown            896 male  mascu…
2 Wicket S…     88    20 brown      brown      brown              8 male  mascu…
3 Eeth Koth    171    NA black      brown      brown             NA male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-8" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb492"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb492-1"><a href="#cb492-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb492-2"><a href="#cb492-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb493"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb493-1"><a href="#cb493-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb493-2"><a href="#cb493-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan ojos y no sean humanos, o que tengan más de 60 años</strong></span>? Piénsalo bien: los <span class="hl-yellow"><strong>paréntesis son importantes</strong></span>: no es lo mismo <span class="math inline">\((a+b)*c\)</span> que <span class="math inline">\(a+(b*c)\)</span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb494"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb494-1"><a href="#cb494-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb494-2"><a href="#cb494-2"></a>  <span class="fu">filter</span>((eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">!=</span> <span class="st">"Human"</span>) <span class="sc">|</span> birth_year <span class="sc">&gt;</span> <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 C-3PO       167    75 &lt;NA&gt;       gold       yellow           112 none  mascu…
 2 Wilhuff…    180    NA auburn, g… fair       blue              64 male  mascu…
 3 Chewbac…    228   112 brown      unknown    blue             200 male  mascu…
 4 Jabba D…    175  1358 &lt;NA&gt;       green-tan… orange           600 herm… mascu…
 5 Yoda         66    17 white      green      brown            896 male  mascu…
 6 Palpati…    170    75 grey       pale       yellow            82 male  mascu…
 7 Wicket …     88    20 brown      brown      brown              8 male  mascu…
 8 Qui-Gon…    193    89 brown      fair       blue              92 male  mascu…
 9 Finis V…    170    NA blond      fair       blue              91 male  mascu…
10 Quarsh …    183    NA black      dark       brown             62 male  mascu…
11 Shmi Sk…    163    NA black      fair       brown             72 fema… femin…
12 Mace Wi…    188    84 none       dark       brown             72 male  mascu…
13 Ki-Adi-…    198    82 white      pale       yellow            92 male  mascu…
14 Eeth Ko…    171    NA black      brown      brown             NA male  mascu…
15 Cliegg …    183    NA brown      fair       blue              82 male  mascu…
16 Dooku       193    80 white      fair       brown            102 male  mascu…
17 Bail Pr…    191    NA black      tan        brown             67 male  mascu…
18 Jango F…    183    79 black      tan        brown             66 male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="eliminar-ausentes-drop_na" class="slide level2">
<h2>Eliminar ausentes: drop_na()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb496"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb496-1"><a href="#cb496-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb496-2"><a href="#cb496-2"></a>  <span class="fu">retirar_ausentes</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb497"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb497-1"><a href="#cb497-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb497-2"><a href="#cb497-2"></a>  <span class="fu">drop_na</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hay un <strong>filtro especial</strong> para una de las operaciones más habituales en depuración: <span class="hl-yellow"><strong>retirar los ausentes</strong></span>. Para ello podemos usar dentro de un filtro <code>is.na()</code>, que nos devuelve <code>TRUE/FALSE</code> en función de si es ausente, o bien …</p>
<div class="fragment">
<p>Usar <code>drop_na()</code>: si no indicamos variable, elimina registros con ausente en cualquier variable. Más adelante veremos como <span class="hl-yellow"><strong>imputar esos ausentes</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb498"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb498-1"><a href="#cb498-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb498-2"><a href="#cb498-2"></a>  <span class="fu">drop_na</span>(mass, height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  name                mass height hair_color 
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;      
1 Luke Skywalker        77    172 blond      
2 C-3PO                 75    167 &lt;NA&gt;       
3 R2-D2                 32     96 &lt;NA&gt;       
4 Darth Vader          136    202 none       
5 Leia Organa           49    150 brown      
6 Owen Lars            120    178 brown, grey
7 Beru Whitesun Lars    75    165 brown      </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb500"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb500-1"><a href="#cb500-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb500-2"><a href="#cb500-2"></a>  <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  name                mass height hair_color   
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;        
1 Luke Skywalker        77    172 blond        
2 Darth Vader          136    202 none         
3 Leia Organa           49    150 brown        
4 Owen Lars            120    178 brown, grey  
5 Beru Whitesun Lars    75    165 brown        
6 Biggs Darklighter     84    183 black        
7 Obi-Wan Kenobi        77    182 auburn, white</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="reordenar-filas-arrange" class="slide level2">
<h2>Reordenar filas: arrange()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb502"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb502-1"><a href="#cb502-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">ordenar</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb503"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb503-1"><a href="#cb503-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>También podemos <span class="hl-yellow"><strong>ordenar filas</strong></span> en función de alguna variable con <code>arrange()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb504"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb504-1"><a href="#cb504-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  name                  height  mass hair_color skin_color  eye_color
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Ratts Tyerel              79    15 none       grey, blue  unknown  
2 Yoda                      66    17 white      green       brown    
3 Wicket Systri Warrick     88    20 brown      brown       brown    
4 R2-D2                     96    32 &lt;NA&gt;       white, blue red      
5 R5-D4                     97    32 &lt;NA&gt;       white, red  red      </code></pre>
</div>
</div>
<div class="fragment">
<p>Por <span class="hl-yellow"><strong>defecto de menor a mayor</strong></span> pero podemos <span class="hl-purple"><strong>invertir el orden</strong></span> con <code>desc()</code></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb506"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb506-1"><a href="#cb506-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  name         height  mass
  &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;
1 Yarael Poof     264    NA
2 Tarfful         234   136
3 Lama Su         229    88
4 Chewbacca       228   112
5 Roos Tarpals    224    82</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb508"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb508-1"><a href="#cb508-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass, <span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  name                  height  mass
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
1 Ratts Tyerel              79    15
2 Yoda                      66    17
3 Wicket Systri Warrick     88    20
4 R5-D4                     97    32
5 R2-D2                     96    32</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="eliminar-duplicados-distinct" class="slide level2">
<h2>Eliminar duplicados: distinct()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb510"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb510-1"><a href="#cb510-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">sin_duplicados</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb511"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb511-1"><a href="#cb511-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Muchas veces necesitaremos asegurarnos que no hay duplicados en alguna variable (DNI) y podemos <span class="hl-yellow"><strong>eliminar filas duplicadas</strong></span> con <code>distinct()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb512"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb512-1"><a href="#cb512-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  sex           
  &lt;chr&gt;         
1 male          
2 none          
3 female        
4 hermaphroditic
5 &lt;NA&gt;          </code></pre>
</div>
</div>
<div class="fragment">
<p>Para mantener todas las columnas de la tabla usaremos <code>.keep_all = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb514"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb514-1"><a href="#cb514-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky…    172    77 blond      fair       blue              19 male  mascu…
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu…
3 Leia Org…    150    49 brown      light      brown             19 fema… femin…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="añadir-filas-bind_rows" class="slide level2">
<h2>Añadir filas: bind_rows()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb516"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb516-1"><a href="#cb516-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">encuadernar_filas</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb517"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb517-1"><a href="#cb517-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último, podemos <span class="hl-yellow"><strong>concatenar nuevas filas</strong></span> con <code>bind_rows()</code> con <span class="hl-red"><strong>las nuevas observaciones en tabla</strong></span> (si no cuadran columnas rellena con ausentes)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb518"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb518-1"><a href="#cb518-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb518-2"><a href="#cb518-2"></a>  <span class="fu">tibble</span>(<span class="st">"nombre"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>), <span class="st">"edad"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">50</span>))</span>
<span id="cb518-3"><a href="#cb518-3"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  nombre  edad
  &lt;chr&gt;  &lt;dbl&gt;
1 javi      33
2 laura     50</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb520"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb520-1"><a href="#cb520-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(<span class="fu">tibble</span>(<span class="st">"nombre"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"carlos"</span>, <span class="cn">NA</span>), <span class="st">"cp"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">28045</span>, <span class="dv">28019</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  nombre  edad    cp
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 javi      33    NA
2 laura     50    NA
3 carlos    NA 28045
4 &lt;NA&gt;      NA 28019</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-4-2" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-10" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-10-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-10-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-10-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-10-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-10-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-10-1">
<p>📝 Selecciona del conjunto de starwars solo los personajes que sean androides o cuyo valor en <code>species</code> sea desconocido</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb522"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb522-1"><a href="#cb522-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb522-2"><a href="#cb522-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Droid"</span> <span class="sc">|</span> <span class="fu">is.na</span>(species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-2">
<p>📝 Selecciona del conjunto de starwars solo los personajes cuyo peso esté entre 65 y 90 kg.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb523"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb523-1"><a href="#cb523-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">between</span>(mass, <span class="dv">65</span>, <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-3">
<p>📝 Tras limpiar de ausentes en todas las variables, selecciona del conjunto de starwars solo los personajes que sean humanos y que vengan de Tatooine</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb524"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb524-1"><a href="#cb524-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb524-2"><a href="#cb524-2"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb524-3"><a href="#cb524-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-4">
<p>📝 Selecciona del conjunto original de starwars los personajes no humanos, <code>male</code> en el sexo y que midan entre 120 y 170 cm, o los personajes con ojos marrones o rojos.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb525"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb525-1"><a href="#cb525-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb525-2"><a href="#cb525-2"></a>  <span class="fu">filter</span>((species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">&amp;</span></span>
<span id="cb525-3"><a href="#cb525-3"></a>            <span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">170</span>)) <span class="sc">|</span></span>
<span id="cb525-4"><a href="#cb525-4"></a>           eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"brown"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-5">
<p>📝 Selecciona solo los personajes que sean humanos y de ojos marrones, para después ordernarlos en altura descendente y peso ascendente.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb526"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb526-1"><a href="#cb526-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb526-2"><a href="#cb526-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">==</span> <span class="st">"Human"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb526-3"><a href="#cb526-3"></a>  <span class="fu">arrange</span>(height, <span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb527"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb527-1"><a href="#cb527-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb528"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb528-1"><a href="#cb528-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hasta ahora todas las operaciones realizadas (aunque usásemos info de columnas) eran por filas. En elc aso de columnas, la acción más sencilla es <span class="hl-yellow"><strong>seleccionar variables por nombre</strong></span> con <code>select()</code>, dando como argumentos los nombres de columnas <span class="hl-purple"><strong>sin comillas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb529"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb529-1"><a href="#cb529-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name, hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 2
   name               hair_color   
   &lt;chr&gt;              &lt;chr&gt;        
 1 Luke Skywalker     blond        
 2 C-3PO              &lt;NA&gt;         
 3 R2-D2              &lt;NA&gt;         
 4 Darth Vader        none         
 5 Leia Organa        brown        
 6 Owen Lars          brown, grey  
 7 Beru Whitesun Lars brown        
 8 R5-D4              &lt;NA&gt;         
 9 Biggs Darklighter  black        
10 Obi-Wan Kenobi     auburn, white
# ℹ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="selección-columnas-select-1" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb531"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb531-1"><a href="#cb531-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb532"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb532-1"><a href="#cb532-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>La función <code>select()</code> nos permite seleccionar varias variables a la vez, incluso <span class="hl-yellow"><strong>concatenando sus nombres como si fuesen índices numéricos</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb533"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb533-1"><a href="#cb533-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name<span class="sc">:</span>eye_color) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  name           height  mass hair_color skin_color  eye_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Luke Skywalker    172    77 blond      fair        blue     
2 C-3PO             167    75 &lt;NA&gt;       gold        yellow   
3 R2-D2              96    32 &lt;NA&gt;       white, blue red      
4 Darth Vader       202   136 none       white       yellow   </code></pre>
</div>
</div>
<div class="fragment">
<p>Y podemos <span class="hl-yellow"><strong>deseleccionar columnas</strong></span> con <code>-</code> delante</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb535"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb535-1"><a href="#cb535-1"></a>starwars <span class="sc">|&gt;</span>  <span class="fu">select</span>(<span class="sc">-</span>mass, <span class="sc">-</span>(eye_color<span class="sc">:</span>starships))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  name           height hair_color skin_color 
  &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      
1 Luke Skywalker    172 blond      fair       
2 C-3PO             167 &lt;NA&gt;       gold       
3 R2-D2              96 &lt;NA&gt;       white, blue
4 Darth Vader       202 none       white      </code></pre>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select-2" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb537"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb537-1"><a href="#cb537-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb538"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb538-1"><a href="#cb538-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Tenemos además <span class="hl-yellow"><strong>palabras reservadas</strong></span>: <code>everything()</code> <span class="hl-purple"><strong>todas las variables</strong></span>…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb539"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb539-1"><a href="#cb539-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(mass, homeworld, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 14
   mass homeworld name   height hair_color skin_color eye_color birth_year sex  
  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1    77 Tatooine  Luke …    172 blond      fair       blue            19   male 
2    75 Tatooine  C-3PO     167 &lt;NA&gt;       gold       yellow         112   none 
3    32 Naboo     R2-D2      96 &lt;NA&gt;       white, bl… red             33   none 
4   136 Tatooine  Darth…    202 none       white      yellow          41.9 male 
# ℹ 5 more variables: gender &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="selección-columnas-select-3" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb541"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb541-1"><a href="#cb541-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb542"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb542-1"><a href="#cb542-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>También podemos jugar con <span class="hl-yellow"><strong>patrones</strong></span> en el nombre, aquellas que <span class="hl-purple"><strong>comiencen por un prefijo</strong></span> (<code>starts_with()</code>), <span class="hl-purple"><strong>terminen con un sufijo</strong></span> (<code>ends_with()</code>), <span class="hl-purple"><strong>contengan un texto</strong></span> (<code>contains()</code>) o cumplan una <span class="hl-purple"><strong>expresión regular</strong></span> (<code>matches()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb543"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb543-1"><a href="#cb543-1"></a><span class="co"># variables cuyo nombre acaba en "color" y contengan sexo o género</span></span>
<span id="cb543-2"><a href="#cb543-2"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"color"</span>), <span class="fu">matches</span>(<span class="st">"sex|gender"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 5
   hair_color    skin_color  eye_color sex    gender   
   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;    
 1 blond         fair        blue      male   masculine
 2 &lt;NA&gt;          gold        yellow    none   masculine
 3 &lt;NA&gt;          white, blue red       none   masculine
 4 none          white       yellow    male   masculine
 5 brown         light       brown     female feminine 
 6 brown, grey   light       blue      male   masculine
 7 brown         light       blue      female feminine 
 8 &lt;NA&gt;          white, red  red       none   masculine
 9 black         light       brown     male   masculine
10 auburn, white fair        blue-gray male   masculine
# ℹ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="selección-columnas-select-4" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb545"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb545-1"><a href="#cb545-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb546"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb546-1"><a href="#cb546-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select-5" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb547"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb547-1"><a href="#cb547-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb548"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb548-1"><a href="#cb548-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último, podemos seleccionar columnas por <span class="hl-yellow"><strong>tipo de dato</strong></span> haciendo uso de <code>where()</code> y dentro una función que devuelva un valor lógico de tipo de dato.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb549"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb549-1"><a href="#cb549-1"></a><span class="co"># Solo columnas numéricas o de texto</span></span>
<span id="cb549-2"><a href="#cb549-2"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 11
   height  mass birth_year name     hair_color skin_color eye_color sex   gender
    &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; 
 1    172    77       19   Luke Sk… blond      fair       blue      male  mascu…
 2    167    75      112   C-3PO    &lt;NA&gt;       gold       yellow    none  mascu…
 3     96    32       33   R2-D2    &lt;NA&gt;       white, bl… red       none  mascu…
 4    202   136       41.9 Darth V… none       white      yellow    male  mascu…
 5    150    49       19   Leia Or… brown      light      brown     fema… femin…
 6    178   120       52   Owen La… brown, gr… light      blue      male  mascu…
 7    165    75       47   Beru Wh… brown      light      blue      fema… femin…
 8     97    32       NA   R5-D4    &lt;NA&gt;       white, red red       none  mascu…
 9    183    84       24   Biggs D… black      light      brown     male  mascu…
10    182    77       57   Obi-Wan… auburn, w… fair       blue-gray male  mascu…
# ℹ 77 more rows
# ℹ 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="renombrar-rename" class="slide level2">
<h2>Renombrar: rename()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb551"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb551-1"><a href="#cb551-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">renombrar</span>(<span class="at">nuevo =</span> antiguo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb552"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb552-1"><a href="#cb552-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">nuevo =</span> antiguo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces también podemos querer <span class="hl-yellow"><strong>modificar la «metainformación»</strong></span> de los datos, <span class="hl-yellow"><strong>renombrando columnas</strong></span>. Para ello usaremos de <code>rename()</code> poniendo <span class="hl-purple"><strong>primero el nombre nuevo</strong></span> y luego el <span class="hl-purple"><strong>antiguo</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb553"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb553-1"><a href="#cb553-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height, <span class="at">peso =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   nombre   altura  peso hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs D…    183    84 black      light      brown           24   male  mascu…
10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
# ℹ 77 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="modificar-columnas-mutate" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb555"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb555-1"><a href="#cb555-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb556"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb556-1"><a href="#cb556-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>En muchas ocasiones querremos <span class="hl-yellow"><strong>modificar o crear variables</strong></span> con <code>mutate()</code>.</p>
<div class="fragment">
<p>Vamos a crear por ejemplo una nueva variable <code>height_m</code> con la altura en metros.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb557"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb557-1"><a href="#cb557-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">height_m =</span> height <span class="sc">/</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 15
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs D…    183    84 black      light      brown           24   male  mascu…
10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
# ℹ 77 more rows
# ℹ 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;, height_m &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="modificar-columnas-mutate-1" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb559"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb559-1"><a href="#cb559-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb560"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb560-1"><a href="#cb560-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Además con los argumentos opcionales podemos <span class="hl-yellow"><strong>recolocar la columna modificada</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb561"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb561-1"><a href="#cb561-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb561-2"><a href="#cb561-2"></a>  <span class="fu">mutate</span>(<span class="at">height_m =</span> height <span class="sc">/</span> <span class="dv">100</span>,</span>
<span id="cb561-3"><a href="#cb561-3"></a>         <span class="at">IMC =</span> mass <span class="sc">/</span> (height_m<span class="sc">^</span><span class="dv">2</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 16
   height_m   IMC name   height  mass hair_color skin_color eye_color birth_year
      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
 1     1.72  26.0 Luke …    172    77 blond      fair       blue            19  
 2     1.67  26.9 C-3PO     167    75 &lt;NA&gt;       gold       yellow         112  
 3     0.96  34.7 R2-D2      96    32 &lt;NA&gt;       white, bl… red             33  
 4     2.02  33.3 Darth…    202   136 none       white      yellow          41.9
 5     1.5   21.8 Leia …    150    49 brown      light      brown           19  
 6     1.78  37.9 Owen …    178   120 brown, gr… light      blue            52  
 7     1.65  27.5 Beru …    165    75 brown      light      blue            47  
 8     0.97  34.0 R5-D4      97    32 &lt;NA&gt;       white, red red             NA  
 9     1.83  25.1 Biggs…    183    84 black      light      brown           24  
10     1.82  23.2 Obi-W…    182    77 auburn, w… fair       blue-gray       57  
# ℹ 77 more rows
# ℹ 7 more variables: sex &lt;chr&gt;, gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="modificar-columnas-mutate-2" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb563"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb563-1"><a href="#cb563-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb564"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb564-1"><a href="#cb564-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante…</strong></p>
</div>
<div class="callout-content">
<p>Cuando aplicamos <code>mutate()</code>, debemos de acordarnos que las <span class="hl-yellow"><strong>operaciones se realizan de manera vectorial</strong></span>, elemento a elemento, por lo que la función que usemos dentro debe devolver un vector de igual longitud. En caso contrario, <span class="hl-red"><strong>devolverá una constante</strong></span></p>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb565"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb565-1"><a href="#cb565-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb565-2"><a href="#cb565-2"></a>  <span class="fu">mutate</span>(<span class="at">constante =</span> <span class="fu">mean</span>(mass, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 15
   constante name  height  mass hair_color skin_color eye_color birth_year sex  
       &lt;dbl&gt; &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1      97.3 Luke…    172    77 blond      fair       blue            19   male 
 2      97.3 C-3PO    167    75 &lt;NA&gt;       gold       yellow         112   none 
 3      97.3 R2-D2     96    32 &lt;NA&gt;       white, bl… red             33   none 
 4      97.3 Dart…    202   136 none       white      yellow          41.9 male 
 5      97.3 Leia…    150    49 brown      light      brown           19   fema…
 6      97.3 Owen…    178   120 brown, gr… light      blue            52   male 
 7      97.3 Beru…    165    75 brown      light      blue            47   fema…
 8      97.3 R5-D4     97    32 &lt;NA&gt;       white, red red             NA   none 
 9      97.3 Bigg…    183    84 black      light      brown           24   male 
10      97.3 Obi-…    182    77 auburn, w… fair       blue-gray       57   male 
# ℹ 77 more rows
# ℹ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="recategorizar-if_else" class="slide level2">
<h2>Recategorizar: if_else()</h2>
<p>También podemos combinar <code>mutate()</code> con la expresión de control <code>if_else()</code> para <span class="hl-yellow"><strong>recategorizar la variable</strong></span>: si <span class="hl-purple"><strong>se cumple una condición</strong></span>, hace una cosa, en caso contrario otra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb567"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb567-1"><a href="#cb567-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb567-2"><a href="#cb567-2"></a>  <span class="fu">mutate</span>(<span class="at">human =</span> <span class="fu">if_else</span>(species <span class="sc">==</span> <span class="st">"Human"</span>, <span class="st">"Human"</span>, <span class="st">"Not Human"</span>),</span>
<span id="cb567-3"><a href="#cb567-3"></a>         <span class="at">.after =</span> name) <span class="sc">|&gt;</span> </span>
<span id="cb567-4"><a href="#cb567-4"></a>  <span class="fu">select</span>(name<span class="sc">:</span>mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 4
   name               human     height  mass
   &lt;chr&gt;              &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt;
 1 Luke Skywalker     Human        172    77
 2 C-3PO              Not Human    167    75
 3 R2-D2              Not Human     96    32
 4 Darth Vader        Human        202   136
 5 Leia Organa        Human        150    49
 6 Owen Lars          Human        178   120
 7 Beru Whitesun Lars Human        165    75
 8 R5-D4              Not Human     97    32
 9 Biggs Darklighter  Human        183    84
10 Obi-Wan Kenobi     Human        182    77
# ℹ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="tu-turno-4-3" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-11" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-11-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-11-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-11-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-11-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-11-1">
<p>📝 Filtra el conjunto de personajes y quédate solo con aquellos que en la variable <code>height</code> no tengan un dato ausente. Con los datos obtenidos del filtro anterior, selecciona solo las variables name, height, así como todas aquellas variables que CONTENGAN la palabra color en su nombre.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb569"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb569-1"><a href="#cb569-1"></a>starwars_2 <span class="ot">&lt;-</span></span>
<span id="cb569-2"><a href="#cb569-2"></a>  starwars <span class="sc">|&gt;</span> </span>
<span id="cb569-3"><a href="#cb569-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb569-4"><a href="#cb569-4"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-2">
<p>📝 Con los datos originales, comprueba cuántas modalidades únicas hay en la variable de color de pelo.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb570"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb570-1"><a href="#cb570-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb570-2"><a href="#cb570-2"></a>  <span class="fu">distinct</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb570-3"><a href="#cb570-3"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-3">
<p>📝 Del dataset original, selecciona solo las variables numéricas y de tipo texto. Tras ello define una nueva variable llamada <code>under_18</code> que nos recategorice la variable de edad: <code>TRUE</code> si es menor de edad y <code>FALSE</code> en caso contrario</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb571"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb571-1"><a href="#cb571-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb571-2"><a href="#cb571-2"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character)) <span class="sc">|&gt;</span> </span>
<span id="cb571-3"><a href="#cb571-3"></a>  <span class="fu">mutate</span>(<span class="at">under_18 =</span> birth_year <span class="sc">&lt;</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-4">
<p>📝 Del dataset original, crea una nueva columna llamada <code>auburn</code> (cobrizo/caoba) que nos diga TRUE si el color de pelo contiene dicha palabra y FALSE en caso contrario (reminder <code>str_detect()</code>).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb572"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb572-1"><a href="#cb572-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb572-2"><a href="#cb572-2"></a>  <span class="fu">mutate</span>(<span class="at">auburn =</span> <span class="fu">str_detect</span>(hair_color, <span class="st">"auburn"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="summarise" class="slide level2">
<h2>Clase 4: <span class="flow">construyendo resúmenes</span></h2>
<p><span style="color:#444442;"><strong>Intro a tidyverse</strong></span></p>
<ul>
<li><a href="#/tu-turno-4-4">💻 Ejercicios resueltos: resúmenes</a></li>
<li><a href="#/caso-practico-4-4">🐣 Workbook/caso práctico: billboard</a></li>
<li><a href="#/caso-practico-4-5">🐣 Workbook/caso práctico: fútbol</a></li>
<li><a href="#/extra-tidyverse">👾 Materiales extras tidyverse</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="contar-count" class="slide level2">
<h2>Contar: count()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb573"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb573-1"><a href="#cb573-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">contar</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb574"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb574-1"><a href="#cb574-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hasta ahora solo hemos transformado o consultado los datos pero no hemos generado estadísticas. Empecemos por lo sencillo: <span class="hl-yellow"><strong>¿cómo contar (frecuencias)?</strong></span></p>
<div class="fragment">
<p>Cuando lo usamos en solitario <code>count()</code> nos devolverá simplemente el número de registros , pero cuando lo usamos con variables <code>count()</code> calcula lo que se conoce como <span class="hl-yellow"><strong>frecuencias</strong></span>: <span class="hl-purple"><strong>número de elementos de cada modalidad</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb575"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb575-1"><a href="#cb575-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  sex                n
  &lt;chr&gt;          &lt;int&gt;
1 female            16
2 hermaphroditic     1
3 male              60
4 none               6
5 &lt;NA&gt;               4</code></pre>
</div>
</div>
</div>
</section>
<section id="contar-count-1" class="slide level2">
<h2>Contar: count()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb577"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb577-1"><a href="#cb577-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">contar</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb578"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb578-1"><a href="#cb578-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Además si pasamos varias variables nos calcula lo que se conoce como una <span class="hl-yellow"><strong>tabla de contigencia</strong></span>. Con <code>sort = TRUE</code> nos devolverá el <span class="hl-purple"><strong>conteo ordenado</strong></span> (más frecuentes primero).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb579"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb579-1"><a href="#cb579-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(sex, gender, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  sex            gender        n
  &lt;chr&gt;          &lt;chr&gt;     &lt;int&gt;
1 male           masculine    60
2 female         feminine     16
3 none           masculine     5
4 &lt;NA&gt;           &lt;NA&gt;          4
5 hermaphroditic masculine     1
6 none           feminine      1</code></pre>
</div>
</div>
</section>
<section id="agrupar-group_by" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb581"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb581-1"><a href="#cb581-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb581-2"><a href="#cb581-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb581-3"><a href="#cb581-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb581-4"><a href="#cb581-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb582"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb582-1"><a href="#cb582-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb582-2"><a href="#cb582-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb582-3"><a href="#cb582-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb582-4"><a href="#cb582-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Una de las <span class="hl-yellow"><strong>funciones más potentes</strong></span> a combinar con las acciones vistas es <code>group_by()</code>, que nos permitirá <span class="hl-yellow"><strong>agrupar nuestros registros</strong></span> previamente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb583"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb583-1"><a href="#cb583-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb583-2"><a href="#cb583-2"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span></span>
<span id="cb583-3"><a href="#cb583-3"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb583-4"><a href="#cb583-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  sex                n
  &lt;chr&gt;          &lt;int&gt;
1 female            16
2 hermaphroditic     1
3 male              60
4 none               6
5 &lt;NA&gt;               4</code></pre>
</div>
</div>
</section>
<section id="agrupar-group_by-1" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb585"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb585-1"><a href="#cb585-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb585-2"><a href="#cb585-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb585-3"><a href="#cb585-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb585-4"><a href="#cb585-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb586"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb586-1"><a href="#cb586-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb586-2"><a href="#cb586-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb586-3"><a href="#cb586-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb586-4"><a href="#cb586-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Cuando apliquemos <code>group_by()</code> es importante entender que <span class="hl-yellow"><strong>NO MODIFICA los datos</strong></span>, sino que nos crea una <span class="hl-yellow"><strong>variable de grupo</strong></span> (subtablas por cada grupo) que modificará las acciones futuras: las <span class="hl-purple"><strong>operaciones se aplicarán a cada subtabla por separado</strong></span></p>
<div class="fragment">
<p>Por ejemplo, imaginemos que queremos extraer el personaje más alto con <code>slice_max()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb587"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb587-1"><a href="#cb587-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Yarael P…    264    NA none       white      yellow            NA male  mascu…
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="agrupar-group_by-2" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb589"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb589-1"><a href="#cb589-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb589-2"><a href="#cb589-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb589-3"><a href="#cb589-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb589-4"><a href="#cb589-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb590"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb590-1"><a href="#cb590-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb590-2"><a href="#cb590-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb590-3"><a href="#cb590-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb590-4"><a href="#cb590-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Y si queremos <span class="hl-yellow"><strong>extraer el personaje más alto pero…de cada uno de los sexos</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb591"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb591-1"><a href="#cb591-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb591-2"><a href="#cb591-2"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb591-3"><a href="#cb591-3"></a>  <span class="fu">slice_max</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb591-4"><a href="#cb591-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Taun We      213    NA none       grey       black             NA fema… femin…
2 Jabba De…    175  1358 &lt;NA&gt;       green-tan… orange           600 herm… mascu…
3 Yarael P…    264    NA none       white      yellow            NA male  mascu…
4 IG-88        200   140 none       metal      red               15 none  mascu…
5 Gregar T…    185    85 black      dark       brown             NA &lt;NA&gt;  &lt;NA&gt;  
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="agrupar-group_by-3" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb593"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb593-1"><a href="#cb593-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb593-2"><a href="#cb593-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb593-3"><a href="#cb593-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb593-4"><a href="#cb593-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb594"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb594-1"><a href="#cb594-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb594-2"><a href="#cb594-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb594-3"><a href="#cb594-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb594-4"><a href="#cb594-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidydatatutor_1.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidydatatutor_2.jpg"></p>
</div>
</div>
<p>La web <a href="https://tidydatatutor.com/" class="uri">https://tidydatatutor.com/</a> permite visualizar las operaciones de <code>{tidyverse}</code> (con el pipe antiguo)</p>
</section>
<section id="agrupar-group_by-4" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb595"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb595-1"><a href="#cb595-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb595-2"><a href="#cb595-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb595-3"><a href="#cb595-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span></span>
<span id="cb595-4"><a href="#cb595-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb596"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb596-1"><a href="#cb596-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb596-2"><a href="#cb596-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb596-3"><a href="#cb596-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span></span>
<span id="cb596-4"><a href="#cb596-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Recuerda siempre <span class="hl-red"><strong>hacer ungroup</strong></span> para eliminar la variable de grupo creada</p>
</div>
</div>
</div>
<div class="fragment">
<p>En la nueva versión de <code>{dplyr}</code> ahora se <span class="hl-yellow"><strong>permite incluir la variable de grupo</strong></span> en la llamada a muchas funciones con el argumento <code>by = ...</code> o <code>.by = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb597"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb597-1"><a href="#cb597-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height, <span class="at">by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  name                  height  mass hair_color skin_color       eye_color
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;    
1 Yarael Poof              264    NA none       white            yellow   
2 IG-88                    200   140 none       metal            red      
3 Taun We                  213    NA none       grey             black    
4 Jabba Desilijic Tiure    175  1358 &lt;NA&gt;       green-tan, brown orange   
5 Gregar Typho             185    85 black      dark             brown    </code></pre>
</div>
</div>
</div>
</section>
<section id="resumir-summarise" class="slide level2">
<h2>Resumir: summarise()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb599"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb599-1"><a href="#cb599-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb600"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb600-1"><a href="#cb600-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último tenemos <code>summarise()</code>, que nos permitirá sacar resúmenes estadísticos. Por ejemplo, vamos a <span class="hl-yellow"><strong>calcular la media de las alturas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb601"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb601-1"><a href="#cb601-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb601-2"><a href="#cb601-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb601-3"><a href="#cb601-3"></a>  <span class="fu">summarise</span>(<span class="at">media_altura =</span> <span class="fu">mean</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  media_altura
         &lt;dbl&gt;
1         175.</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Fíjate que <code>mutate()</code> devuelve <span class="hl-yellow"><strong>tantas filas como registros originales</strong></span>, mientras que con <code>summarise()</code> calcula un <span class="hl-purple"><strong>nuevo dataset de resumen</strong></span>, solo incluyendo aquello que esté indicado.</p>
</div>
</div>
</div>
</div>
</section>
<section id="resumir-summarise-1" class="slide level2">
<h2>Resumir: summarise()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb603"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb603-1"><a href="#cb603-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb604"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb604-1"><a href="#cb604-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Si además esto lo <span class="hl-yellow"><strong>combinamos con la agrupación</strong></span> de <code>group_by()</code> o <code>.by = ...</code>, en pocas líneas de código puedes obtener <span class="hl-purple"><strong>estadísticas desagreagadas</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb605"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb605-1"><a href="#cb605-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb605-2"><a href="#cb605-2"></a>  <span class="fu">drop_na</span>(sex, height, mass) <span class="sc">|&gt;</span> </span>
<span id="cb605-3"><a href="#cb605-3"></a>  <span class="fu">summarise</span>(<span class="at">media_altura =</span> <span class="fu">mean</span>(height),</span>
<span id="cb605-4"><a href="#cb605-4"></a>            <span class="at">media_peso =</span> <span class="fu">mean</span>(mass),</span>
<span id="cb605-5"><a href="#cb605-5"></a>            <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  sex            media_altura media_peso
  &lt;chr&gt;                 &lt;dbl&gt;      &lt;dbl&gt;
1 male                   178.       80.2
2 none                   140        69.8
3 female                 172.       54.7
4 hermaphroditic         175      1358  </code></pre>
</div>
</div>
</section>
<section id="resumir-reframe" class="slide level2">
<h2>Resumir: reframe()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb607"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb607-1"><a href="#cb607-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb608"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb608-1"><a href="#cb608-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">reframe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>En el nuevo <code>{dplyr}</code> han incluido <code>reframe()</code> para evitar problemas de <code>summarise()</code> cuando <span class="hl-yellow"><strong>devolvemos más de un valor por variable</strong></span>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb609"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb609-1"><a href="#cb609-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb609-2"><a href="#cb609-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span></span>
<span id="cb609-3"><a href="#cb609-3"></a>  <span class="fu">summarise</span>(<span class="fu">quantile</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  `quantile(mass)`
             &lt;dbl&gt;
1             15  
2             55.6
3             79  
4             84.5
5           1358  </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb612"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb612-1"><a href="#cb612-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb612-2"><a href="#cb612-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span></span>
<span id="cb612-3"><a href="#cb612-3"></a>  <span class="fu">reframe</span>(<span class="fu">quantile</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  `quantile(mass)`
             &lt;dbl&gt;
1             15  
2             55.6
3             79  
4             84.5
5           1358  </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-4-4" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-12" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-12-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-12-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-12-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-12-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-12-1">
<p>📝 Calcula cuántos personajes hay de cada especie, ordenados de más a menor frecuencia.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb614"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb614-1"><a href="#cb614-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(species, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-12-2">
<p>📝 Tras eliminar ausentes en las variables de peso y estatura, añade una nueva variable que nos calcule el IMC de cada personaje, y determina el IMC medio de nuestros personajes desagregada por sexo</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb615"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb615-1"><a href="#cb615-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb615-2"><a href="#cb615-2"></a>  <span class="fu">drop_na</span>(mass, height) <span class="sc">|&gt;</span> </span>
<span id="cb615-3"><a href="#cb615-3"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> mass <span class="sc">/</span> ((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb615-4"><a href="#cb615-4"></a>  <span class="fu">summarise</span>(<span class="at">IMC_medio =</span> <span class="fu">mean</span>(IMC), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-12-3">
<p>📝 Obtén el personaje más joven por cada sexo.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb616"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb616-1"><a href="#cb616-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb616-2"><a href="#cb616-2"></a>  <span class="fu">slice_min</span>(birth_year, <span class="at">by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-12-4">
<p>📝 Obtén la edad del personaje más joven y más viejo de cada sexo.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb617"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb617-1"><a href="#cb617-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb617-2"><a href="#cb617-2"></a>  <span class="fu">drop_na</span>(birth_year) <span class="sc">|&gt;</span></span>
<span id="cb617-3"><a href="#cb617-3"></a>  <span class="fu">summarise</span>(<span class="fu">min</span>(birth_year), <span class="fu">max</span>(birth_year), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="ggplot" class="slide level2">
<h2>Clase 4: <span class="flow">dataviz en R</span></h2>
<p><span style="color:#444442;"><strong>Intro a ggplot. Exportar/importar</strong></span></p>
<ul>
<li><a href="#/tu-turno-4-5">💻 Ejercicios resueltos: importar/exportar</a></li>
<li><a href="#/caso-practico-4-6">🐣 Workbook/caso práctico: encuesta CIS</a></li>
<li><a href="#/tu-turno-4-6">💻 Ejercicios resueltos: ggplot</a></li>
<li><a href="#/extra-dataviz">👾 Materiales extras visualización</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="dataviz-en-r-ggplot2" class="slide level2">
<h2>Dataviz en R: ggplot2</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>El paquete <code>{ggplot2}</code> se basa en la idea de Wilkinson en <span class="hl-yellow"><strong>«Grammar of graphics»</strong></span>: dotar a los gráficos de una gramática propia. Una de las principales fortalezas de <code>R</code> es la <span class="hl-yellow"><strong>visualización</strong></span> con <code>{ggplot2}</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb618"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb618-1"><a href="#cb618-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La <span class="hl-yellow"><strong>visualización de datos</strong></span> debería ser una parte fundamental de todo análisis de datos. No es solo una cuestión estética.</p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/telling_dataviz.jpg" width="400"></p>
</div>
</div>
</section>
<section id="dataviz-en-r-ggplot2-1" class="slide level2">
<h2>Dataviz en R: ggplot2</h2>
<p>La filosofía detrás de <code>{ggplot2}</code> es entender los <span class="hl-yellow"><strong>gráficos como parte del flujo</strong></span> de trabajo, dotándoles de una <span class="hl-yellow"><strong>gramática</strong></span>. El objetivo es empezar con un lienzo en blanco e ir <span class="hl-yellow"><strong>añadiendo capas a tu gráfico</strong></span>. La ventaja de <code>{ggplot2}</code> es poder <span class="hl-purple"><strong>mapear atributos estéticos</strong></span> (color, forma, tamaño) de objetos geométricos (puntos, barras, líneas) en función de los datos.</p>
<p>&nbsp;</p>
<p>La <strong>documentación</strong> del paquete puedes consultarla en <a href="https://ggplot2-book.org/introduction.html" class="uri">https://ggplot2-book.org/introduction.html</a></p>

<img data-src="img/grammar_ggplot2.jpg" class="r-stretch"></section>
<section id="dataviz-en-r-ggplot2-2" class="slide level2">
<h2>Dataviz en R: ggplot2</h2>

<img data-src="img/tarta_ggplot2.png" class="r-stretch"></section>
<section id="dataviz-en-r-ggplot2-3" class="slide level2">
<h2>Dataviz en R: ggplot2</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/tarta_recortada_ggplot2.jpg"></p>
</div><div class="column" style="width:60%;">
<p>Un gráfico se podrá componer de <span class="hl-yellow"><strong>capas</strong></span></p>
<ul>
<li><span class="hl-purple"><strong>Datos (data)</strong></span></li>
<li><span class="hl-purple"><strong>Mapeado (aesthetics)</strong></span> de elementos estéticos: ejes, color, forma, etc (en función de los datos)</li>
<li><span class="hl-purple"><strong>Geometría (geom)</strong></span>: puntos, líneas, barras, polígonos, etc.</li>
<li><span class="hl-purple"><strong>Componer gráficas (facet)</strong></span></li>
<li><span class="hl-purple"><strong>Transformaciones (stat)</strong></span>: ordenar, resumir, etc.</li>
<li><span class="hl-purple"><strong>Coordenadas (coord)</strong></span>: coordenadas cartesianas, polares, grids, etc.</li>
<li><span class="hl-purple"><strong>Temas (theme)</strong></span>: fuente, tamaño de letra, subtítulos, captions, leyenda, ejes, etc.</li>
</ul>
</div>
</div>
</section>
<section id="importarexportar" class="slide level2">
<h2>Importar/exportar</h2>
<p>Veamos un <strong>primer intento</strong> para entender la filosofía ggplot pero para ello muchas veces <span class="hl-yellow"><strong>necesitaremos importar datos externamente</strong></span>. Una de las principales <span class="hl-yellow"><strong>fortalezas</strong></span> de <code>R</code> es que podemos importar datos muy fácilmente en diferentes formatos:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Formatos nativos de R</strong></span>: archivos <code>.rda</code> y <code>.RData</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Rectangular data</strong></span>: archivos <code>.csv</code> y <code>.tsv</code>, archivos <code>.txt</code>, etc.</p></li>
<li><p><span class="hl-yellow"><strong>Datos en excel</strong></span>: archivos <code>.xls</code> y<code>.xlsx</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Datos desde SAS/Stata/SPSS</strong></span>: archivos <code>.sas7bdat</code>, <code>.sav</code> y <code>.dat</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Datos desde Google Drive</strong></span></p></li>
<li><p><span class="hl-yellow"><strong>Datos desde API’s</strong></span>: aemet, catastro, censo, spotify, etc.</p></li>
</ul>
</section>
<section id="formatos-nativos" class="slide level2">
<h2>Formatos nativos</h2>
<p>Los ficheros <span class="hl-yellow"><strong>más sencillos</strong></span> para importar a <code>R</code> (y que suelen ocupar menos espacio en disco) son sus propias <span class="hl-yellow"><strong>extensiones nativas</strong></span>: ficheros en formatos <code>.RData</code> y <code>.rda</code>. Para cargarlos basta con <span class="hl-yellow"><strong>utilizar la función</strong></span> <code>load()</code> proporcionándole la ruta del fichero.</p>
<ul>
<li>Archivos <code>RData</code>: vamos a importar el archivo <code>world_bank_pop.RData</code> que incluye la tabla <code>world_bank_pop</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb619"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb619-1"><a href="#cb619-1"></a><span class="fu">load</span>(<span class="st">"./datos/world_bank_pop.RData"</span>)</span>
<span id="cb619-2"><a href="#cb619-2"></a>world_bank_pop</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,064 × 20
   country indicator      `2000`  `2001`  `2002`  `2003`  `2004`  `2005`  `2006`
   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 ABW     SP.URB.TOTL    4.16e4 4.20e+4 4.22e+4 4.23e+4 4.23e+4 4.24e+4 4.26e+4
 2 ABW     SP.URB.GROW    1.66e0 9.56e-1 4.01e-1 1.97e-1 9.46e-2 1.94e-1 3.67e-1
 3 ABW     SP.POP.TOTL    8.91e4 9.07e+4 9.18e+4 9.27e+4 9.35e+4 9.45e+4 9.56e+4
 4 ABW     SP.POP.GROW    2.54e0 1.77e+0 1.19e+0 9.97e-1 9.01e-1 1.00e+0 1.18e+0
 5 AFE     SP.URB.TOTL    1.16e8 1.20e+8 1.24e+8 1.29e+8 1.34e+8 1.39e+8 1.44e+8
 6 AFE     SP.URB.GROW    3.60e0 3.66e+0 3.72e+0 3.71e+0 3.74e+0 3.81e+0 3.81e+0
 7 AFE     SP.POP.TOTL    4.02e8 4.12e+8 4.23e+8 4.34e+8 4.45e+8 4.57e+8 4.70e+8
 8 AFE     SP.POP.GROW    2.58e0 2.59e+0 2.61e+0 2.62e+0 2.64e+0 2.67e+0 2.70e+0
 9 AFG     SP.URB.TOTL    4.31e6 4.36e+6 4.67e+6 5.06e+6 5.30e+6 5.54e+6 5.83e+6
10 AFG     SP.URB.GROW    1.86e0 1.15e+0 6.86e+0 7.95e+0 4.59e+0 4.47e+0 5.03e+0
# ℹ 1,054 more rows
# ℹ 11 more variables: `2007` &lt;dbl&gt;, `2008` &lt;dbl&gt;, `2009` &lt;dbl&gt;, `2010` &lt;dbl&gt;,
#   `2011` &lt;dbl&gt;, `2012` &lt;dbl&gt;, `2013` &lt;dbl&gt;, `2014` &lt;dbl&gt;, `2015` &lt;dbl&gt;,
#   `2016` &lt;dbl&gt;, `2017` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="formatos-nativos-1" class="slide level2">
<h2>Formatos nativos</h2>
<ul>
<li>Archivos <code>.rda</code>: vamos a importar el dataset airquality desde <code>airquality.rda</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb621"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb621-1"><a href="#cb621-1"></a><span class="fu">load</span>(<span class="st">"./datos/airquality.rda"</span>)</span>
<span id="cb621-2"><a href="#cb621-2"></a><span class="fu">as_tibble</span>(airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 153 × 6
   Ozone Solar.R  Wind  Temp Month   Day
   &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1    41     190   7.4    67     5     1
 2    36     118   8      72     5     2
 3    12     149  12.6    74     5     3
 4    18     313  11.5    62     5     4
 5    NA      NA  14.3    56     5     5
 6    28      NA  14.9    66     5     6
 7    23     299   8.6    65     5     7
 8    19      99  13.8    59     5     8
 9     8      19  20.1    61     5     9
10    NA     194   8.6    69     5    10
# ℹ 143 more rows</code></pre>
</div>
</div>
</section>
<section id="formatos-nativos-2" class="slide level2">
<h2>Formatos nativos</h2>
<p>Tenga en cuenta que los archivos cargados con <code>load()</code> se cargan <span class="hl-yellow"><strong>automáticamente en el entorno</strong></span> (con el nombre guardado originalmente), y no sólo se pueden cargar conjuntos de datos: <code>load()</code> nos permite cargar múltiples objetos (no sólo datos tabulares).</p>
<p>Los archivos nativos <code>.rda</code> y <code>.RData</code> son una forma adecuada de guardar el entorno de variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb623"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb623-1"><a href="#cb623-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"./datos/multiple_objects.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Las <span class="hl-yellow"><strong>rutas</strong></span> deben ser siempre <span class="hl-yellow"><strong>sin espacios, ñ, ni acentos</strong></span>.</p>
</div>
</div>
</div>
</section>
<section id="datos-tabulados-readr" class="slide level2">
<h2>Datos tabulados: readr</h2>
<p>El paquete <code>{readr}</code> dentro del entorno <code>{tidyverse}</code> contiene varias funciones útiles para <span class="hl-yellow"><strong>cargar datos rectangulares (sin formatear pero tabulados)</strong></span>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><code>read_csv()</code>: archivos <code>.csv</code> <span class="hl-purple"><strong>variables separadas por comas</strong></span></li>
<li><code>read_csv2()</code>: variables separadas por <span class="hl-purple"><strong>punto y coma</strong></span></li>
<li><code>read_tsv()</code>: variables separadas por <span class="hl-purple"><strong>tabuladores</strong></span>.</li>
<li><code>read_table()</code>: variables separadas por <span class="hl-purple"><strong>espacios</strong></span>.</li>
<li><code>read_delim()</code>: función generar con opción de <span class="hl-purple"><strong>especificar el delimitador</strong></span>.</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="img/data-import-readr.png"></p>
</div>
</div>
<p>Todos ellos necesitan como <strong>argumento la ruta del fichero</strong> más <strong>otros opcionales</strong> (saltar cabecera o no, decimales, etc). Ver más en <a href="https://readr.tidyverse.org/" class="uri">https://readr.tidyverse.org/</a></p>
</section>
<section id="datos-tabulados-.csv-.tsv" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>La principal ventaja de <code>{readr}</code> es que <span class="hl-yellow"><strong>automatiza el formato</strong></span> para pasar de un fichero plano (sin formato) a un tibble (en filas y columnas, con formato).</p>
<div class="fragment">
<ul>
<li>Archivo <code>.csv</code>: con <code>read_csv()</code> cargaremos archivos <span class="hl-purple"><strong>separados por comas</strong></span>, pasando como <span class="hl-yellow"><strong>argumento la ruta</strong></span> en <code>file = ...</code>. Vamos a importar el conjunto de datos <code>chickens.csv</code> (sobre pollos de dibujos animados, por qué no). Si nos fijamos en la salida nos da el tipo de variables.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb624"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb624-1"><a href="#cb624-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb624-2"><a href="#cb624-2"></a>chickens <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>)</span>
<span id="cb624-3"><a href="#cb624-3"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                               
1 Foghorn Leghorn         rooster         0 That's a joke, ah say, that's a jok…
2 Chicken Little          hen             3 The sky is falling!                 
3 Ginger                  hen            12 Listen. We'll either die free chick…
4 Camilla the Chicken     hen             7 Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster         0 Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-1" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>El <span class="hl-yellow"><strong>formato de la variable</strong></span> se hará normalmente <span class="hl-yellow"><strong>automáticamente</strong></span> por <code>read_csv()</code>, y podemos consultarlo con <code>spec()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb626"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb626-1"><a href="#cb626-1"></a><span class="fu">spec</span>(chickens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  chicken = col_character(),
  sex = col_character(),
  eggs_laid = col_double(),
  motto = col_character()
)</code></pre>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-2" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>Aunque normalmente lo hace bien automáticamente podemos <span class="hl-yellow"><strong>especificar el formato explícitamente</strong></span> en <code>col_types = lista()</code> (en formato lista, con <code>col_xxx()</code> para cada tipo de variable, por ejemplo <code>eggs_laid</code> se importará como carácter).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb628"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb628-1"><a href="#cb628-1"></a>chickens <span class="ot">&lt;-</span></span>
<span id="cb628-2"><a href="#cb628-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>,</span>
<span id="cb628-3"><a href="#cb628-3"></a>           <span class="at">col_types =</span> <span class="fu">list</span>(<span class="fu">col_character</span>(), <span class="fu">col_character</span>(),</span>
<span id="cb628-4"><a href="#cb628-4"></a>                            <span class="fu">col_character</span>(), <span class="fu">col_character</span>()))</span>
<span id="cb628-5"><a href="#cb628-5"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;                               
1 Foghorn Leghorn         rooster 0         That's a joke, ah say, that's a jok…
2 Chicken Little          hen     3         The sky is falling!                 
3 Ginger                  hen     12        Listen. We'll either die free chick…
4 Camilla the Chicken     hen     7         Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster 0         Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-3" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>Incluso podemos indicar que <span class="hl-yellow"><strong>variables queremos seleccionar</strong></span> (sin ocupar memoria), indicándolo en <code>col_select = ...</code> (en formato lista, con <code>col_select = ...</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb630"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb630-1"><a href="#cb630-1"></a>chickens <span class="ot">&lt;-</span></span>
<span id="cb630-2"><a href="#cb630-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>,</span>
<span id="cb630-3"><a href="#cb630-3"></a>           <span class="at">col_select =</span> <span class="fu">c</span>(chicken, sex, eggs_laid))</span>
<span id="cb630-4"><a href="#cb630-4"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  chicken                 sex     eggs_laid
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt;
1 Foghorn Leghorn         rooster         0
2 Chicken Little          hen             3
3 Ginger                  hen            12
4 Camilla the Chicken     hen             7
5 Ernie The Giant Chicken rooster         0</code></pre>
</div>
</div>
</section>
<section id="datos-tabulados-.txt" class="slide level2">
<h2>Datos tabulados (.txt)</h2>
<p>¿Qué ocurre cuando el <span class="hl-red"><strong>separador no es correcto</strong></span>?</p>
<div class="fragment">
<p>Si usamos <code>read_csv()</code> espera que el separador entre columnas sea una coma pero, como puedes ver con el siguiente <code>.txt</code>, lo interpreta todo como una sola columna: <span class="hl-yellow"><strong>no tiene coma y no sabe dónde separar</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb632"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb632-1"><a href="#cb632-1"></a>datos_txt <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/massey-rating.txt"</span>)</span>
<span id="cb632-2"><a href="#cb632-2"></a><span class="fu">dim</span>(datos_txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10  1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb634"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb634-1"><a href="#cb634-1"></a><span class="fu">as_tibble</span>(datos_txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
   `UCC PAY LAZ KPK  RT   COF BIH DII ENG ACU Rank Team            Conf`
   &lt;chr&gt;                                                                
 1 1   1   1   1   1     1   1   1   1   1    1 Ohio St          B10    
 2 2   2   2   2   2     2   2   2   4   2    2 Oregon           P12    
 3 3   4   3   4   3     4   3   4   2   3    3 Alabama          SEC    
 4 4   3   4   3   4     3   5   3   3   4    4 TCU              B12    
 5 6   6   6   5   5     7   6   5   6  11    5 Michigan St      B10    
 6 7   7   7   6   7     6  11   8   7   8    6 Georgia          SEC    
 7 5   5   5   7   6     8   4   6   5   5    7 Florida St       ACC    
 8 8   8   9   9  10     5   7   7  10   7    8 Baylor           B12    
 9 9  11   8  13  11    11  12   9  14   9    9 Georgia Tech     ACC    
10 13  10  13  11   8     9  10  11   9  10   10 Mississippi      SEC   </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-tabulados-.txt-1" class="slide level2">
<h2>Datos tabulados (.txt)</h2>
<p>Para ello tenemos.</p>
<ul>
<li><p><code>read_csv2()</code> cuando el <span class="hl-yellow"><strong>separador es punto y coma</strong></span>, <code>read_tsv()</code> cuando es un <span class="hl-yellow"><strong>tabulador</strong></span> y <code>read_table()</code> cuando es un <span class="hl-yellow"><strong>espacio</strong></span>.</p></li>
<li><p><code>read_delim()</code> en general.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb636"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb636-1"><a href="#cb636-1"></a>datos_txt <span class="ot">&lt;-</span> <span class="fu">read_table</span>(<span class="at">file =</span> <span class="st">"./datos/massey-rating.txt"</span>)</span>
<span id="cb636-2"><a href="#cb636-2"></a><span class="fu">as_tibble</span>(datos_txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 13
     UCC   PAY   LAZ   KPK    RT   COF   BIH   DII   ENG   ACU  Rank Team  Conf 
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
 1     1     1     1     1     1     1     1     1     1     1     1 Ohio  St   
 2     2     2     2     2     2     2     2     2     4     2     2 Oreg… P12  
 3     3     4     3     4     3     4     3     4     2     3     3 Alab… SEC  
 4     4     3     4     3     4     3     5     3     3     4     4 TCU   B12  
 5     6     6     6     5     5     7     6     5     6    11     5 Mich… St   
 6     7     7     7     6     7     6    11     8     7     8     6 Geor… SEC  
 7     5     5     5     7     6     8     4     6     5     5     7 Flor… St   
 8     8     8     9     9    10     5     7     7    10     7     8 Bayl… B12  
 9     9    11     8    13    11    11    12     9    14     9     9 Geor… Tech 
10    13    10    13    11     8     9    10    11     9    10    10 Miss… SEC  </code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Otro paquete de importación clave será el paquete <code>{readxl}</code> para <span class="hl-yellow"><strong>importar datos desde Excel</strong></span>. Tres funciones serán clave:</p>
<ul>
<li><code>read_xls()</code> específica para <code>.xls</code>, <code>read_xlsx()</code> específica para <code>.xlsx</code>.</li>
<li><code>read_excel()</code>: tanto para <code>.xls</code> como para <code>.xlsx</code>.</li>
</ul>
<div class="fragment">
<p>Vamos a importar <code>deaths.xlsx</code> con los registros de defunciones de famosos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb638"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb638-1"><a href="#cb638-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb638-2"><a href="#cb638-2"></a>deaths <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>)</span>
<span id="cb638-3"><a href="#cb638-3"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 6
   `Lots of people`             ...2                     ...3  ...4  ...5  ...6 
   &lt;chr&gt;                        &lt;chr&gt;                    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1 simply cannot resist writing &lt;NA&gt;                     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  some…
 2 at                           the                      top   &lt;NA&gt;  of    thei…
 3 or                           merging                  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  cells
 4 Name                         Profession               Age   Has … Date… Date…
 5 David Bowie                  musician                 69    TRUE  17175 42379
 6 Carrie Fisher                actor                    60    TRUE  20749 42731
 7 Chuck Berry                  musician                 90    TRUE  9788  42812
 8 Bill Paxton                  actor                    61    TRUE  20226 42791
 9 Prince                       musician                 57    TRUE  21343 42481
10 Alan Rickman                 actor                    69    FALSE 16854 42383
11 Florence Henderson           actor                    82    TRUE  12464 42698
12 Harper Lee                   author                   89    FALSE 9615  42419
13 Zsa Zsa Gábor                actor                    99    TRUE  6247  42722
14 George Michael               musician                 53    FALSE 23187 42729
15 Some                         &lt;NA&gt;                     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
16 &lt;NA&gt;                         also like to write stuff &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
17 &lt;NA&gt;                         &lt;NA&gt;                     at t… bott… &lt;NA&gt;  &lt;NA&gt; 
18 &lt;NA&gt;                         &lt;NA&gt;                     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  too! </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-1" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb640"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb640-1"><a href="#cb640-1"></a>deaths <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  `Lots of people`             ...2       ...3  ...4     ...5          ...6     
  &lt;chr&gt;                        &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;    
1 simply cannot resist writing &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          some not…
2 at                           the        top   &lt;NA&gt;     of            their sp…
3 or                           merging    &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          cells    
4 Name                         Profession Age   Has kids Date of birth Date of …
5 David Bowie                  musician   69    TRUE     17175         42379    
6 Carrie Fisher                actor      60    TRUE     20749         42731    </code></pre>
</div>
</div>
<p><span class="hl-red"><strong>Una desgracia muy común</strong></span> es que haya algún tipo de comentario o texto al principio del fichero, teniendo que <span class="hl-yellow"><strong>saltar esas filas</strong></span>.</p>
</section>
<section id="datos-excel-.xls-.xlsx-2" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Podemos <span class="hl-yellow"><strong>saltar estas filas</strong></span> directamente en la carga con <code>skip = ...</code> (indicando el número de filas a saltar).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb642"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb642-1"><a href="#cb642-1"></a>deaths <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb642-2"><a href="#cb642-2"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 6
   Name          Profession Age   `Has kids` `Date of birth`     `Date of death`
   &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;      &lt;dttm&gt;              &lt;chr&gt;          
 1 David Bowie   musician   69    TRUE       1947-01-08 00:00:00 42379          
 2 Carrie Fisher actor      60    TRUE       1956-10-21 00:00:00 42731          
 3 Chuck Berry   musician   90    TRUE       1926-10-18 00:00:00 42812          
 4 Bill Paxton   actor      61    TRUE       1955-05-17 00:00:00 42791          
 5 Prince        musician   57    TRUE       1958-06-07 00:00:00 42481          
 6 Alan Rickman  actor      69    FALSE      1946-02-21 00:00:00 42383          
 7 Florence Hen… actor      82    TRUE       1934-02-14 00:00:00 42698          
 8 Harper Lee    author     89    FALSE      1926-04-28 00:00:00 42419          
 9 Zsa Zsa Gábor actor      99    TRUE       1917-02-06 00:00:00 42722          
10 George Micha… musician   53    FALSE      1963-06-25 00:00:00 42729          
11 Some          &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       NA                  &lt;NA&gt;           
12 &lt;NA&gt;          also like… &lt;NA&gt;  &lt;NA&gt;       NA                  &lt;NA&gt;           
13 &lt;NA&gt;          &lt;NA&gt;       at t… bottom,    NA                  &lt;NA&gt;           
14 &lt;NA&gt;          &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       NA                  too!           </code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-3" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Además con <code>col_names = ...</code> ya podemos renombrar las columnas en la importación (<span class="hl-yellow"><strong>proporcionar nombres supone 1ª línea ya como dato</strong></span>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb644" data-code-line-numbers="2-3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb644-1"><a href="#cb644-1"></a>deaths <span class="ot">&lt;-</span></span>
<span id="cb644-2"><a href="#cb644-2"></a>  <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>, <span class="at">skip =</span> <span class="dv">5</span>,</span>
<span id="cb644-3"><a href="#cb644-3"></a>            <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"nombre"</span>, <span class="st">"profesion"</span>, <span class="st">"edad"</span>, <span class="st">"hijos"</span>, <span class="st">"nacimiento"</span>, <span class="st">"muerte"</span>))</span>
<span id="cb644-4"><a href="#cb644-4"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 6
   nombre             profesion           edad  hijos nacimiento          muerte
   &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;              &lt;chr&gt; 
 1 David Bowie        musician            69    TRUE  1947-01-08 00:00:00 42379 
 2 Carrie Fisher      actor               60    TRUE  1956-10-21 00:00:00 42731 
 3 Chuck Berry        musician            90    TRUE  1926-10-18 00:00:00 42812 
 4 Bill Paxton        actor               61    TRUE  1955-05-17 00:00:00 42791 
 5 Prince             musician            57    TRUE  1958-06-07 00:00:00 42481 
 6 Alan Rickman       actor               69    FALSE 1946-02-21 00:00:00 42383 
 7 Florence Henderson actor               82    TRUE  1934-02-14 00:00:00 42698 
 8 Harper Lee         author              89    FALSE 1926-04-28 00:00:00 42419 
 9 Zsa Zsa Gábor      actor               99    TRUE  1917-02-06 00:00:00 42722 
10 George Michael     musician            53    FALSE 1963-06-25 00:00:00 42729 
11 Some               &lt;NA&gt;                &lt;NA&gt;  &lt;NA&gt;  NA                  &lt;NA&gt;  
12 &lt;NA&gt;               also like to write… &lt;NA&gt;  &lt;NA&gt;  NA                  &lt;NA&gt;  
13 &lt;NA&gt;               &lt;NA&gt;                at t… bott… NA                  &lt;NA&gt;  
14 &lt;NA&gt;               &lt;NA&gt;                &lt;NA&gt;  &lt;NA&gt;  NA                  too!  </code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-4" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>También podemos <span class="hl-yellow"><strong>cargar un Excel con varias hojas</strong></span>: para <span class="hl-yellow"><strong>indicar la hoja</strong></span> (ya sea por su nombre o por su número) utilizaremos el argumento <code>sheet = ...</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb646"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb646-1"><a href="#cb646-1"></a>mtcars <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/datasets.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"mtcars"</span>)</span>
<span id="cb646-2"><a href="#cb646-2"></a>mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 11
     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
 2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
 3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
 4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
 5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
 6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
 7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
 8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
 9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
# ℹ 22 more rows</code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-5" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Incluso podemos indicar el <span class="hl-yellow"><strong>rango de celdas</strong></span> a cargar con <code>range = ...</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb648"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb648-1"><a href="#cb648-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/datasets.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"iris"</span>, <span class="at">range =</span> <span class="st">"C1:E4"</span>)</span>
<span id="cb648-2"><a href="#cb648-2"></a>iris</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  Petal.Length Petal.Width Species
         &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  
1          1.4         0.2 setosa 
2          1.4         0.2 setosa 
3          1.3         0.2 setosa </code></pre>
</div>
</div>
</section>
<section id="importar-desde-sasstataspss" class="slide level2">
<h2>Importar desde SAS/STATA/SPSS</h2>
<p>El paquete <code>{haven}</code> dentro del universo tidyverse nos permitirá <span class="hl-yellow"><strong>importar ficheros de los 3 software de pago más importantes</strong></span>: SAS, SPSS y Stata.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb650"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb650-1"><a href="#cb650-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb650-2"><a href="#cb650-2"></a></span>
<span id="cb650-3"><a href="#cb650-3"></a><span class="co"># SAS</span></span>
<span id="cb650-4"><a href="#cb650-4"></a>iris_sas <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="at">data_file =</span> <span class="st">"./datos/iris.sas7bdat"</span>)</span>
<span id="cb650-5"><a href="#cb650-5"></a></span>
<span id="cb650-6"><a href="#cb650-6"></a><span class="co"># SPSS</span></span>
<span id="cb650-7"><a href="#cb650-7"></a>iris_spss <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="at">file =</span> <span class="st">"./datos/iris.sav"</span>)</span>
<span id="cb650-8"><a href="#cb650-8"></a></span>
<span id="cb650-9"><a href="#cb650-9"></a><span class="co"># Stata</span></span>
<span id="cb650-10"><a href="#cb650-10"></a>iris_stata <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="at">file =</span> <span class="st">"./datos/iris.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exportar" class="slide level2">
<h2>Exportar</h2>
<p>De la misma forma que podemos importar también podemos <span class="hl-yellow"><strong>exportar</strong></span></p>
<ul>
<li>exportar en <code>.RData</code> (opción recomendada para variables almacenadas en <code>R</code>). Recuerda que esta extensión <span class="hl-yellow"><strong>sólo se puede utilizar en <code>R</code></strong></span>. Para ello, basta con utilizar <code>save(object, file = path)</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb651"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb651-1"><a href="#cb651-1"></a>table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb651-2"><a href="#cb651-2"></a><span class="fu">save</span>(table, <span class="at">file =</span> <span class="st">"./datos/table.RData"</span>)</span>
<span id="cb651-3"><a href="#cb651-3"></a><span class="fu">rm</span>(table) <span class="co"># eliminar</span></span>
<span id="cb651-4"><a href="#cb651-4"></a><span class="fu">load</span>(<span class="st">"./datos/table.RData"</span>)</span>
<span id="cb651-5"><a href="#cb651-5"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
      a     b
  &lt;int&gt; &lt;int&gt;
1     1     1
2     2     2
3     3     3
4     4     4</code></pre>
</div>
</div>
</section>
<section id="exportar-1" class="slide level2">
<h2>Exportar</h2>
<p>La ventaja de <code>.RData</code> es que podemos <span class="hl-yellow"><strong>exportar múltiples variables de nuestro environment</strong></span>, no solo un único dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb653"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb653-1"><a href="#cb653-1"></a>table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb653-2"><a href="#cb653-2"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb653-3"><a href="#cb653-3"></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>)</span>
<span id="cb653-4"><a href="#cb653-4"></a><span class="fu">save</span>(table, a, b, <span class="at">file =</span> <span class="st">"./datos/mult_obj.RData"</span>)</span>
<span id="cb653-5"><a href="#cb653-5"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"table"</span>))</span>
<span id="cb653-6"><a href="#cb653-6"></a><span class="fu">load</span>(<span class="st">"./datos/mult_obj.RData"</span>)</span>
<span id="cb653-7"><a href="#cb653-7"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
      a     b
  &lt;int&gt; &lt;int&gt;
1     1     1
2     2     2
3     3     3
4     4     4</code></pre>
</div>
</div>
</section>
<section id="exportar-2" class="slide level2">
<h2>Exportar</h2>
<ul>
<li><span class="hl-yellow"><strong>exportado en <code>.csv</code></strong></span>. Para ello simplemente utilizamos <code>write_csv(object, file = path)</code>, y es el más recomendable para exportar bases de datos de tamaño pequeño o mediano. Ver <a href="https://arrow.apache.org/docs/r/" class="uri">https://arrow.apache.org/docs/r/</a> para bases de datos masivas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb655"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb655-1"><a href="#cb655-1"></a><span class="fu">write_csv</span>(table, <span class="at">file =</span> <span class="st">"./datos/table.csv"</span>)</span>
<span id="cb655-2"><a href="#cb655-2"></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/table.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
      a     b
  &lt;dbl&gt; &lt;dbl&gt;
1     1     1
2     2     2
3     3     3
4     4     4</code></pre>
</div>
</div>
</section>
<section id="tu-turno-4-5" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-13" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-13-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-13-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-13-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-13-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-13-1">
<p>📝 El conjunto de datos <code>who2</code> del paquete <code>{tidyr}</code> que hemos utilizado en ejercicios anteriores, expórtalo a un formato nativo <code>R</code> en la carpeta <code>datos</code> de tu proyecto de RStudio</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb657"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb657-1"><a href="#cb657-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb657-2"><a href="#cb657-2"></a><span class="fu">save</span>(who2, <span class="at">file =</span> <span class="st">"./datos/who2.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-2">
<p>📝 Carga el conjunto de datos <code>who2</code> pero desde la carpeta data (importa el fichero creado en el ejercicio anterior)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb658"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb658-1"><a href="#cb658-1"></a><span class="fu">load</span>(<span class="st">"./datos/who2.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-3">
<p>📝 Repite lo mismo (exportar e importar) en 4 formatos: <code>.csv</code>, <code>.xlsx</code>, <code>.sav</code> (spss) y <code>.dta</code> (stata)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb659"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb659-1"><a href="#cb659-1"></a><span class="co"># csv</span></span>
<span id="cb659-2"><a href="#cb659-2"></a><span class="fu">library</span>(readr)</span>
<span id="cb659-3"><a href="#cb659-3"></a><span class="fu">write_csv</span>(who2, <span class="at">file =</span> <span class="st">"./datos/who2.csv"</span>)</span>
<span id="cb659-4"><a href="#cb659-4"></a>who2_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/who2.csv"</span>)</span>
<span id="cb659-5"><a href="#cb659-5"></a></span>
<span id="cb659-6"><a href="#cb659-6"></a><span class="co"># excel</span></span>
<span id="cb659-7"><a href="#cb659-7"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb659-8"><a href="#cb659-8"></a><span class="fu">write.xlsx</span>(who2, <span class="at">file =</span> <span class="st">"./datos/who2.xlsx"</span>)</span>
<span id="cb659-9"><a href="#cb659-9"></a>who2_data <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/who2.xlsx"</span>)</span>
<span id="cb659-10"><a href="#cb659-10"></a></span>
<span id="cb659-11"><a href="#cb659-11"></a><span class="co"># sas y stata</span></span>
<span id="cb659-12"><a href="#cb659-12"></a><span class="fu">library</span>(haven)</span>
<span id="cb659-13"><a href="#cb659-13"></a><span class="fu">write_sav</span>(who2, <span class="at">path =</span> <span class="st">"./datos/who2.sav"</span>)</span>
<span id="cb659-14"><a href="#cb659-14"></a>who2_data <span class="ot">&lt;-</span> <span class="fu">read_spss</span>(<span class="at">path =</span> <span class="st">"./datos/who2.sav"</span>)</span>
<span id="cb659-15"><a href="#cb659-15"></a></span>
<span id="cb659-16"><a href="#cb659-16"></a><span class="fu">write_dta</span>(who2, <span class="at">path =</span> <span class="st">"./datos/who2.dta"</span>)</span>
<span id="cb659-17"><a href="#cb659-17"></a>who2_data <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="at">path =</span> <span class="st">"./datos/who2.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-4">
<p>📝 Repita la carga de <code>who2.csv</code> pero seleccione sólo las 4 primeras columnas ya cargadas.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb660"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb660-1"><a href="#cb660-1"></a>who_select <span class="ot">&lt;-</span></span>
<span id="cb660-2"><a href="#cb660-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/who2.csv"</span>,</span>
<span id="cb660-3"><a href="#cb660-3"></a>           <span class="at">col_select =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"iso2"</span>, <span class="st">"iso3"</span>, <span class="st">"year"</span>))</span>
<span id="cb660-4"><a href="#cb660-4"></a>who_select</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="primer-intento-scatter-plot" class="slide level2">
<h2>Primer intento: scatter plot</h2>
<p>Ahora que sabemos importar archivos, vamos a importar el conjunto de datos <code>gapminder</code>: un fichero con <strong>datos de esperanzas de vida, poblaciones y renta per cápita</strong> de distintos países en distintos momentos temporales.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb661"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb661-1"><a href="#cb661-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb661-2"><a href="#cb661-2"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/gapminder.csv"</span>)</span>
<span id="cb661-3"><a href="#cb661-3"></a>gapminder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="primer-intento-scatter-plot-1" class="slide level2">
<h2>Primer intento: scatter plot</h2>
<p>El fichero consta de 1704 registros y 6 variables: <code>country</code>, <code>continent</code>, <code>year</code>, <code>lifeExp</code> (esperanza de vida), <code>pop</code> (población) y <code>gdpPercap</code> (renta per cápita).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb663"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb663-1"><a href="#cb663-1"></a><span class="fu">glimpse</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,704
Columns: 6
$ country   &lt;chr&gt; "Afghanistan", "Afghanistan", "Afghanistan", "Afghanistan", …
$ continent &lt;chr&gt; "Asia", "Asia", "Asia", "Asia", "Asia", "Asia", "Asia", "Asi…
$ year      &lt;dbl&gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, …
$ lifeExp   &lt;dbl&gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8…
$ pop       &lt;dbl&gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12…
$ gdpPercap &lt;dbl&gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, …</code></pre>
</div>
</div>
<p>Para empezar con algo sencillo <span class="hl-yellow"><strong>filtraremos solo los datos de 1997</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb665"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb665-1"><a href="#cb665-1"></a>gapminder_1997 <span class="ot">&lt;-</span> gapminder[gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1997</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="primer-intento-scatter-plot-2" class="slide level2">
<h2>Primer intento: scatter plot</h2>
<p>Imagina que queremos dibujar un <span class="hl-yellow"><strong>scatter plot</strong></span> (diagrama de dispersión de puntos, que enfrenta a una variable <code>x</code> con una variable <code>y</code>).</p>
<p>&nbsp;</p>
<p>Si tuviéses que <span class="hl-yellow"><strong>construir capa a capa el gráfico</strong></span>: ¿qué necesitarías?</p>
</section>
<section id="ingredientes-datos" class="slide level2">
<h2>Ingredientes: datos</h2>
<p>¿Qué <span class="hl-yellow"><strong>elementos necesitamos</strong></span> para realizar un diagrama de puntos? Para <span class="hl-purple"><strong>iniciar el lienzo VACÍO (de momento)</strong></span> necesitamos llamar una base de datos con <code>ggplot(datos)</code></p>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><span class="hl-yellow"><strong>Datos (data)</strong></span>: conjunto <code>gapminder_1997</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb666"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb666-1"><a href="#cb666-1"></a><span class="fu">ggplot</span>(gapminder_1997)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-403-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="ingredientes-x-y" class="slide level2">
<h2>Ingredientes: (x, y)</h2>
<p>Ya tenemos linkada la base de datos pero necesitamos <span class="hl-yellow"><strong>indicarle que variables de la tabla</strong></span> queremos que relacione con el gráfico (en este caso necesita mínimo una <code>x</code> y otra <code>y</code>).</p>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><p><span class="hl-yellow"><strong>Datos (data)</strong></span>: conjunto <code>gapminder_1997</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Mapeado</strong></span>: indicar dentro de <code>aes()</code> (aesthetics) las variables en cada coordenada. Todo <span class="hl-purple"><strong>dentro de aes() será mapeado de la base de datos</strong></span></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb667"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb667-1"><a href="#cb667-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb667-2"><a href="#cb667-2"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> pop))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-405-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="geometría-geom_point" class="slide level2">
<h2>Geometría: geom_point()</h2>
<p>De momento sigue vacío ya que aún no le hemos indicado lo más importante: <span class="hl-yellow"><strong>¿qué tipo de gráfica queremos hacer?</strong></span>. Para eso usaremos las <span class="hl-yellow"><strong>capas geométricas</strong></span> que empiezan por <code>geom_xxx()</code>.</p>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><span class="hl-yellow"><strong>Geometría (geom)</strong></span>: optaremos por <strong>puntos</strong> usando <code>geom_point()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb668"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb668-1"><a href="#cb668-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb668-2"><a href="#cb668-2"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> pop)) <span class="sc">+</span></span>
<span id="cb668-3"><a href="#cb668-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-407-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="rol-de-los-ejes-x-y" class="slide level2">
<h2>Rol de los ejes: (x, y)</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>Vamos a profundizar en ese mapeado: ¿cómo <span class="hl-yellow"><strong>cambiar el rol</strong></span> de los ejes (población en el eje X y renta per cápita en el eje Y)?</p>
<ul>
<li><strong>Eje X</strong>: población (variable <code>pop</code>)</li>
<li><strong>Eje Y</strong>: renta per cápita (variable <code>gdpPercap</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb669"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb669-1"><a href="#cb669-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb669-2"><a href="#cb669-2"></a>       <span class="fu">aes</span>(<span class="at">x =</span> pop, <span class="at">y =</span> gdpPercap)) <span class="sc">+</span></span>
<span id="cb669-3"><a href="#cb669-3"></a>  <span class="fu">geom_point</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-409-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="rol-de-los-ejes-x-y-1" class="slide level2">
<h2>Rol de los ejes: (x, y)</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>¿Y un scatter plot con <strong>esperanza de vida</strong> en eje X frente a <strong>renta per cápita</strong>?</p>
<ul>
<li><strong>Eje X</strong>: esperanza de vida (variable <code>lifeExp</code>)</li>
<li><strong>Eje Y</strong>: renta per cápita (variable <code>gdpPercap</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb670"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb670-1"><a href="#cb670-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb670-2"><a href="#cb670-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb670-3"><a href="#cb670-3"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-411-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="color-size-shape-fijos" class="slide level2">
<h2>Color, size, shape: fijos</h2>
<p>Dentro de <code>geom_point()</code> tenemos varios <strong>parámetros estéticos a configurar</strong>:</p>
<ul>
<li><p><code>na.rm = ...</code>: si queremos que nos quite ausentes.</p></li>
<li><p><code>color = ...</code>: color (si tiene dimensión, color del contorno)</p></li>
<li><p><code>fill = ...</code>: color del relleno (si tiene dimensión)</p></li>
</ul>
<div class="fragment">
<div class="columns">
<div class="column" style="width:45%;">
<p>Empezaremos por un <span class="hl-yellow"><strong>color fijo</strong></span>, por ejemplo <code>"red"</code> (existen otros como <code>"blue"</code>, <code>"black"</code>, <code>"yellow"</code>, etc)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb671"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb671-1"><a href="#cb671-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb671-2"><a href="#cb671-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb671-3"><a href="#cb671-3"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-413-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="color-size-shape-fijos-1" class="slide level2">
<h2>Color, size, shape: fijos</h2>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><code>size = ...</code>: tamaño de la geometría (en este caso el <span class="hl-yellow"><strong>tamaño de los puntos</strong></span>), cuanto mayor sea el número, mayor será el tamaño de la geometría.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb672"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb672-1"><a href="#cb672-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb672-2"><a href="#cb672-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb672-3"><a href="#cb672-3"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">7</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-415-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="color-size-shape-fijos-2" class="slide level2">
<h2>Color, size, shape: fijos</h2>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><code>alpha = ...</code>: grado de opacidad del color (1 totalmente opaco, 0 totalmente transparente)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb673"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb673-1"><a href="#cb673-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb673-2"><a href="#cb673-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb673-3"><a href="#cb673-3"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">7</span>,</span>
<span id="cb673-4"><a href="#cb673-4"></a>             <span class="at">alpha =</span> <span class="fl">0.4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-417-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="color-size-shape-fijos-3" class="slide level2">
<h2>Color, size, shape: fijos</h2>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><code>shape = ...</code>: forma de la geometría, en este caso del «punto» (ver todas las opciones en <code>vignette("ggplot2-specs")</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb674"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb674-1"><a href="#cb674-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb674-2"><a href="#cb674-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb674-3"><a href="#cb674-3"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>,</span>
<span id="cb674-4"><a href="#cb674-4"></a>             <span class="at">fill =</span> <span class="st">"black"</span>,</span>
<span id="cb674-5"><a href="#cb674-5"></a>             <span class="at">size =</span> <span class="dv">7</span>,</span>
<span id="cb674-6"><a href="#cb674-6"></a>             <span class="at">alpha =</span> <span class="fl">0.4</span>,</span>
<span id="cb674-7"><a href="#cb674-7"></a>             <span class="at">shape =</span> <span class="dv">23</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-419-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="color-size-shape-fijos-4" class="slide level2">
<h2>Color, size, shape: fijos</h2>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><code>stroke = ...</code>: tamaño del contorno</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb675"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb675-1"><a href="#cb675-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb675-2"><a href="#cb675-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb675-3"><a href="#cb675-3"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">7</span>,</span>
<span id="cb675-4"><a href="#cb675-4"></a>             <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">stroke =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-421-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="color-size-shape-fijos-5" class="slide level2">
<h2>Color, size, shape: fijos</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>Los colores también podemos asignárselos por su <strong>código hexadecimal</strong>, consultando en <a href="https://htmlcolorcodes.com/es/" class="uri">https://htmlcolorcodes.com/es/</a>, eligiendo el color que queramos. El código hexadecimal siempre comenzará con <code>#</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb676"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb676-1"><a href="#cb676-1"></a><span class="co"># Color en hexadecimal</span></span>
<span id="cb676-2"><a href="#cb676-2"></a><span class="co"># https://htmlcolorcodes.com/es/</span></span>
<span id="cb676-3"><a href="#cb676-3"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb676-4"><a href="#cb676-4"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb676-5"><a href="#cb676-5"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#A02B85"</span>,</span>
<span id="cb676-6"><a href="#cb676-6"></a>             <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">size =</span> <span class="dv">7</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-423-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="mapeado-estético-aes" class="slide level2">
<h2>Mapeado estético: aes()</h2>
<p>Hasta ahora los <strong>atributos estéticos</strong> se los hemos pasado fijos y <span class="hl-yellow"><strong>constantes</strong></span>. Pero la verdadera potencia y versatilidad de <code>ggplot</code> es que podemos <span class="hl-yellow"><strong>mapear los atributos estéticos en función de los datos</strong></span> en <code>aes()</code> para que <strong>dependan de variables de los datos</strong>.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:45%;">
<p>Por ejemplo, vamos a asignar un <span class="hl-yellow"><strong>color a cada dato en función de su continente</strong></span> con <code>aes(color = continent)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb677"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb677-1"><a href="#cb677-1"></a><span class="co"># Tamaño fijo</span></span>
<span id="cb677-2"><a href="#cb677-2"></a><span class="co"># Color por continentes</span></span>
<span id="cb677-3"><a href="#cb677-3"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb677-4"><a href="#cb677-4"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp,</span>
<span id="cb677-5"><a href="#cb677-5"></a>           <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb677-6"><a href="#cb677-6"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-425-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="mapeado-estético-aes-1" class="slide level2">
<h2>Mapeado estético: aes()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Podemos combinarlo con lo que hemos hecho anteriormente:</p>
<ul>
<li><p><span class="hl-yellow"><strong>color</strong></span> en función del <span class="hl-purple"><strong>continente</strong></span>.</p></li>
<li><p><span class="hl-yellow"><strong>tamaño</strong></span> en función de la <span class="hl-purple"><strong>población</strong></span>.</p></li>
<li><p><span class="hl-yellow"><strong>transparencia</strong></span> la fijamos <span class="hl-purple"><strong>constante</strong></span> del 50%.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb678"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb678-1"><a href="#cb678-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb678-2"><a href="#cb678-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp,</span>
<span id="cb678-3"><a href="#cb678-3"></a>           <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb678-4"><a href="#cb678-4"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A este scatter plot particular se le conoce <strong>BUBBLE CHART</strong></p>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-427-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="visualización-multivariante" class="slide level2">
<h2>Visualización multivariante</h2>
<p>Reflexionemos sobre el gráfico anterior:</p>
<ul>
<li><strong>color</strong> en función del <strong>continente</strong>.</li>
<li><strong>tamaño</strong> en función de la <strong>población</strong></li>
<li><strong>transparencia</strong> fija del 50%</li>
</ul>
<p>Usando los datos hemos conseguido dibujar en un <span class="hl-yellow"><strong>gráfico bidimensional 4 variables</strong></span>: <code>lifeExp</code> y <code>gdpPercap</code> en los ejes , <code>continent</code> como color y <code>pop</code> como tamaño de la geometría, con muy pocas líneas de código.</p>
</section>
<section id="escalas-scale-ejes" class="slide level2">
<h2>Escalas (scale): ejes</h2>
<p>Es importante entender que <span class="hl-yellow"><strong>hasta ahora solo hemos indicado que un atribut estético A dependa de una variable B de los datos</strong></span>.</p>
<p>Por ejemplo, si <code>aes(color = variable)</code> le estoy diciendo que cada modalidad distinta de la variable adopte un color distinto pero…<span class="hl-yellow"><strong>¿qué color?</strong></span></p>
<div class="fragment">
<p>Para ello usaremos una de las capas más importantes, las <span class="hl-yellow"><strong>capas de escalas</strong></span> <code>scale_xxx()</code>.</p>
</div>
</section>
<section id="escalas-scale-ejes-1" class="slide level2">
<h2>Escalas (scale): ejes</h2>
<p>Hasta ahora dentro de <code>aes()</code> solo le indicábamos que variable mapeamos pero no sus ajustes.</p>
<div class="columns">
<div class="column" style="width:47%;">
<p>Por ejemplo, vamos a <strong>configurar el eje x para tener marcas personalizadas</strong> cada 10 unidades (<code>scale_x_continuous(breaks = ...)</code>)</p>
</div><div class="column" style="width:53%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-428-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb679"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb679-1"><a href="#cb679-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb679-2"><a href="#cb679-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp,</span>
<span id="cb679-3"><a href="#cb679-3"></a>           <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb679-4"><a href="#cb679-4"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb679-5"><a href="#cb679-5"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb679-6"><a href="#cb679-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>,</span>
<span id="cb679-7"><a href="#cb679-7"></a>       <span class="at">title =</span> <span class="st">"Primer ggplot"</span>, <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>,</span>
<span id="cb679-8"><a href="#cb679-8"></a>       <span class="at">color =</span> <span class="st">"continente"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="escalas-scale-colores" class="slide level2">
<h2>Escalas (scale): colores</h2>
<p>La misma idea la podemos aplicar a otro atríbuto como los <span class="hl-yellow"><strong>colores</strong></span> con <code>scale_color_...()</code> y <code>scale_fill_...()</code>: hemos indicado que mapeé dicho atributo por continente pero…¿qué colores usar?</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p>Con <code>scale_color_manual()</code> podemos indicar manualmente una <span class="hl-yellow"><strong>paleta</strong></span> (puedes buscar en <a href="https://htmlcolorcodes.com/" class="uri">https://htmlcolorcodes.com/</a>)</p>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-430-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb680"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb680-1"><a href="#cb680-1"></a>pal <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#A02B85"</span>, <span class="st">"#2DE86B"</span>, <span class="st">"#4FB2CA"</span>, <span class="st">"#E8DA2D"</span>, <span class="st">"#E84C2D"</span>)</span>
<span id="cb680-2"><a href="#cb680-2"></a><span class="fu">ggplot</span>(gapminder_1997, <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp, <span class="at">color =</span> continent)) <span class="sc">+</span></span>
<span id="cb680-3"><a href="#cb680-3"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb680-4"><a href="#cb680-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb680-5"><a href="#cb680-5"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> pal) <span class="sc">+</span></span>
<span id="cb680-6"><a href="#cb680-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>, <span class="at">title =</span> <span class="st">"Primer ggplot"</span>,</span>
<span id="cb680-7"><a href="#cb680-7"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>, <span class="at">color =</span> <span class="st">"continente"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="escalas-scale-colores-1" class="slide level2">
<h2>Escalas (scale): colores</h2>
<p>Otra opción es elegir alguna de las <span class="hl-yellow"><strong>paletas de colores diseñadas</strong></span> en el paquete <code>{ggthemes}</code>:</p>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li><code>scale_color_colorblind()</code>: paleta de colores basada en los colores de <span class="hl-yellow"><strong>daltónicos/as</strong></span>.</li>
</ul>
</div><div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-432-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb681"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb681-1"><a href="#cb681-1"></a><span class="fu">ggplot</span>(gapminder_1997, <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb681-2"><a href="#cb681-2"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb681-3"><a href="#cb681-3"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb681-4"><a href="#cb681-4"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb681-5"><a href="#cb681-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>, <span class="at">title =</span> <span class="st">"Primer ggplot"</span>,</span>
<span id="cb681-6"><a href="#cb681-6"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>, <span class="at">color =</span> <span class="st">"continente"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="escalas-scale-colores-2" class="slide level2">
<h2>Escalas (scale): colores</h2>
<p>Incluso cargar <span class="hl-yellow"><strong>paletas de colores diseñadas en base a películas o arte</strong></span></p>
<div class="columns">
<div class="column" style="width:44%;">
<ul>
<li><span class="hl-yellow"><strong>películas</strong></span>: paquete <code>{harrypotter}</code> (repositorio de Github <code>aljrico/harrypotter</code>) usando <code>scale_color_hp_d()</code>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://raw.githubusercontent.com/aljrico/harrypotter/master/readme_raw_files/palettes/ravenclaw.png" style="width:20.0%"></p>
<figcaption>Paleta basada en la casa Ravenclaw</figcaption>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-435-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb682"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb682-1"><a href="#cb682-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="at">repo =</span> <span class="st">"aljrico/harrypotter"</span>) </span>
<span id="cb682-2"><a href="#cb682-2"></a><span class="fu">ggplot</span>(gapminder_1997, <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb682-3"><a href="#cb682-3"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb682-4"><a href="#cb682-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb682-5"><a href="#cb682-5"></a>  harrypotter<span class="sc">::</span><span class="fu">scale_color_hp_d</span>(<span class="at">option =</span> <span class="st">"ravenclaw"</span>)<span class="sc">+</span></span>
<span id="cb682-6"><a href="#cb682-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>, <span class="at">title =</span> <span class="st">"Primer ggplot"</span>,</span>
<span id="cb682-7"><a href="#cb682-7"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>, <span class="at">color =</span> <span class="st">"continente"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="escalas-scale-colores-3" class="slide level2">
<h2>Escalas (scale): colores</h2>
<p>Incluso cargar <span class="hl-yellow"><strong>paletas de colores diseñadas en base a películas o arte</strong></span></p>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><span class="hl-yellow"><strong>cuadros</strong></span>: paquete <code>{MetBrewer}</code> (repositorio de Github <code>BlakeRMills/MetBrewer</code>) usando <code>scale_colour_manual(values = met.brewer(...))</code>.</li>
</ul>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-437-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb683"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb683-1"><a href="#cb683-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="at">repo =</span> <span class="st">"BlakeRMills/MetBrewer"</span>) </span>
<span id="cb683-2"><a href="#cb683-2"></a><span class="fu">library</span>(MetBrewer)</span>
<span id="cb683-3"><a href="#cb683-3"></a></span>
<span id="cb683-4"><a href="#cb683-4"></a><span class="fu">ggplot</span>(gapminder_1997, <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb683-5"><a href="#cb683-5"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb683-6"><a href="#cb683-6"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb683-7"><a href="#cb683-7"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">met.brewer</span>(<span class="st">"Monet"</span>)) <span class="sc">+</span></span>
<span id="cb683-8"><a href="#cb683-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>, <span class="at">title =</span> <span class="st">"Primer ggplot"</span>,</span>
<span id="cb683-9"><a href="#cb683-9"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>, <span class="at">color =</span> <span class="st">"continente"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="escalas-scale-colores-4" class="slide level2">
<h2>Escalas (scale): colores</h2>
<p>Incluso cargar <span class="hl-yellow"><strong>paletas de colores diseñadas en base a películas o arte</strong></span></p>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><span class="hl-yellow"><strong>discos</strong></span>: paquete <code>{peRReo}</code> (repositorio de Github <code>jbgb13/peRReo</code>) usando <code>scale_colour_manual(values = latin_palette())</code>.</li>
</ul>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-439-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb684"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb684-1"><a href="#cb684-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="at">repo =</span> <span class="st">"jbgb13/peRReo"</span>) </span>
<span id="cb684-2"><a href="#cb684-2"></a><span class="fu">library</span>(peRReo)</span>
<span id="cb684-3"><a href="#cb684-3"></a></span>
<span id="cb684-4"><a href="#cb684-4"></a><span class="fu">ggplot</span>(gapminder_1997, <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb684-5"><a href="#cb684-5"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb684-6"><a href="#cb684-6"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb684-7"><a href="#cb684-7"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">latin_palette</span>(<span class="st">"rosalia"</span>)) <span class="sc">+</span></span>
<span id="cb684-8"><a href="#cb684-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>, <span class="at">title =</span> <span class="st">"Primer ggplot"</span>,</span>
<span id="cb684-9"><a href="#cb684-9"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>, <span class="at">color =</span> <span class="st">"continente"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="escalas-otros-atributos" class="slide level2">
<h2>Escalas: otros atributos</h2>
<p>Lo mismo que hemos hecho para los ejes o colores podemos hacer para el <span class="hl-yellow"><strong>resto de atríbutos estéticos</strong></span></p>
<div class="columns">
<div class="column" style="width:40%;">
<p>Por ejemplo, vamos a indicarle que mapeé el tamaño en función de población pero indicándole el <span class="hl-yellow"><strong>rango de valores</strong></span> (continuo en este caso) entre los que moverse con <code>scale_size_continuous()</code></p>
</div><div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-441-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb685"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb685-1"><a href="#cb685-1"></a><span class="fu">ggplot</span>(gapminder_1997, <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb685-2"><a href="#cb685-2"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb685-3"><a href="#cb685-3"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb685-4"><a href="#cb685-4"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb685-5"><a href="#cb685-5"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb685-6"><a href="#cb685-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>, <span class="at">title =</span> <span class="st">"Primer ggplot"</span>,</span>
<span id="cb685-7"><a href="#cb685-7"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>, <span class="at">color =</span> <span class="st">"continente"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>::: ::::</p>
</section>
<section id="etiquetas-sencillas-labs" class="slide level2">
<h2>Etiquetas sencillas: labs()</h2>
<p>Podemos también <span class="hl-yellow"><strong>personalizar de manera sencilla</strong></span> haciendo uso de la capa <code>labs()</code>:</p>
<div class="columns">
<div class="column" style="width:45%;">
<ul>
<li><code>title,subtitle</code>: título/subtítulo</li>
<li><code>caption</code>: pie de gráfica</li>
<li><code>x, y</code>: nombres de los ejes</li>
<li><code>size, color, fill, ...</code>: nombre en leyenda de las variables que codifiquen los atributos</li>
</ul>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-443-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb686"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb686-1"><a href="#cb686-1"></a><span class="fu">ggplot</span>(gapminder_1997, <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb686-2"><a href="#cb686-2"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb686-3"><a href="#cb686-3"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb686-4"><a href="#cb686-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>,</span>
<span id="cb686-5"><a href="#cb686-5"></a>       <span class="at">title =</span> <span class="st">"Primer ggplot"</span>, <span class="at">subtitle =</span> <span class="st">"Datos de gapminder"</span>,</span>
<span id="cb686-6"><a href="#cb686-6"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>, <span class="at">color =</span> <span class="st">"continente"</span>, <span class="at">size =</span> <span class="st">"población"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="eliminar-de-la-leyenda" class="slide level2">
<h2>Eliminar de la leyenda</h2>
<p>Podemos eliminar variables de la leyenda con <code>guides(atributo = "none")</code></p>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb687"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb687-1"><a href="#cb687-1"></a><span class="fu">ggplot</span>(gapminder_1997,</span>
<span id="cb687-2"><a href="#cb687-2"></a>       <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, </span>
<span id="cb687-3"><a href="#cb687-3"></a>           <span class="at">x =</span> lifeExp,</span>
<span id="cb687-4"><a href="#cb687-4"></a>           <span class="at">color =</span> continent, </span>
<span id="cb687-5"><a href="#cb687-5"></a>           <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb687-6"><a href="#cb687-6"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb687-7"><a href="#cb687-7"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb687-8"><a href="#cb687-8"></a>  <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb687-9"><a href="#cb687-9"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>,</span>
<span id="cb687-10"><a href="#cb687-10"></a>       <span class="at">y =</span> <span class="st">"Renta per cápita"</span>,</span>
<span id="cb687-11"><a href="#cb687-11"></a>       <span class="at">title =</span> <span class="st">"Primer ggplot"</span>,</span>
<span id="cb687-12"><a href="#cb687-12"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>,</span>
<span id="cb687-13"><a href="#cb687-13"></a>       <span class="at">color =</span> <span class="st">"continente"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-446-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="tema-básico" class="slide level2">
<h2>Tema (básico)</h2>
<p>Por último en este primer gráfico, vamos personalizar el tema con alguna de las capas <code>theme_...()</code></p>
<div class="columns">
<div class="column" style="width:45%;">
<p>Por ejemplo, vamos a usar <code>theme_minimal()</code> para tener un tema “austero” y minimalista (aprenderemos a definir cada detalle de nuestro tema).</p>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-447-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb688"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb688-1"><a href="#cb688-1"></a><span class="fu">ggplot</span>(gapminder_1997, <span class="fu">aes</span>(<span class="at">y =</span> gdpPercap, <span class="at">x =</span> lifeExp, <span class="at">color =</span> continent, <span class="at">size =</span> pop)) <span class="sc">+</span></span>
<span id="cb688-2"><a href="#cb688-2"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb688-3"><a href="#cb688-3"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">35</span>, <span class="dv">85</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb688-4"><a href="#cb688-4"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb688-5"><a href="#cb688-5"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperanza de vida"</span>, <span class="at">y =</span> <span class="st">"Renta per cápita"</span>, <span class="at">title =</span> <span class="st">"Primer ggplot"</span>,</span>
<span id="cb688-6"><a href="#cb688-6"></a>       <span class="at">caption =</span> <span class="st">"J. Álvarez Liébana"</span>, <span class="at">color =</span> <span class="st">"continente"</span>) <span class="sc">+</span></span>
<span id="cb688-7"><a href="#cb688-7"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="gráficos-de-una-variable" class="slide level2">
<h2>Gráficos de una variable</h2>
<p>El anterior ejemplo era un <strong>diagrama de dispersión</strong> (bivariante) que nos permite jugar mucho con los parámetros pero empezaremos <span class="hl-yellow"><strong>aprendiendo a analizar una sola variable</strong></span> (estadística univariante).</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:40%;">
<p>Para ello algo fundamental será conocer la naturaleza de la variable ya que <span class="hl-yellow"><strong>habrá cosas que podamos hacer con un tipo de variables y no con otras</strong></span>. Por ejemplo, vamos a tomar el fichero de datos <code>starwars</code> del paquete <code>{dplyr}</code> y vamos a <strong>empezar un ggplot</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb689"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb689-1"><a href="#cb689-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb689-2"><a href="#cb689-2"></a><span class="fu">ggplot</span>(starwars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-450-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="gráficos-de-una-variable-1" class="slide level2">
<h2>Gráficos de una variable</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>Si quiésemos hacer un diagrama de dispersión sencillo como antes entre peso y estatura sería así</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb690"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb690-1"><a href="#cb690-1"></a><span class="fu">ggplot</span>(starwars) <span class="sc">+</span></span>
<span id="cb690-2"><a href="#cb690-2"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> mass, <span class="at">y =</span> height)) <span class="sc">+</span></span>
<span id="cb690-3"><a href="#cb690-3"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-452-1.png" width="960"></p>
</div>
</div>
</div>
</div>
<p>¿Qué línea habrá cambiar si en lugar de hacer un diagrama de dispersión queremos hacer un <span class="hl-yellow"><strong>histograma de la estatura</strong></span></p>
<div class="fragment">
<p>Lo que <span class="hl-yellow"><strong>diferencia a un gráfico de otro es la capa geométrica</strong></span>, así que deberemos buscar un <code>geom_xxx()</code> distinto (en este caso <code>geom_histogram()</code>)</p>
</div>
</section>
<section id="histogramas" class="slide level2">
<h2>Histogramas</h2>
<p>Un <span class="hl-yellow"><strong>histograma es una representación gráfica de la distribución de frecuencia</strong></span> de un conjunto de datos <strong>numéricos continuos</strong>. Consiste en un gráfico de barras <span class="hl-yellow"><strong>PERO donde ahora la base de cada barra representa un intervalo de valores</strong></span>, y la altura de la barra indica la frecuencia o la densidad de datos dentro de ese intervalo: ahora la <span class="hl-yellow"><strong>anchura de las barras sí es relevante</strong></span> (cuantifica la anchura del intervalo en el que estamos agrupando los datos).</p>
<div class="fragment">
<p>Los histogramas son especialmente útiles para visualizar la forma y la dispersión de los datos aunque <span class="hl-red"><strong>dependen de un parámetro crítico</strong></span> como es la cantidad de barras (o anchura de cada barra) de las que queramos disponer.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img//clipboard-984736011.png" width="414"></p>
</figure>
</div>
</div>
</section>
<section id="histogramas-1" class="slide level2">
<h2>Histogramas</h2>
<p>Fíjate que si lo <span class="hl-red"><strong>cambiamos tal cual produce error</strong></span>. ¿Por qué?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb691"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb691-1"><a href="#cb691-1"></a><span class="fu">ggplot</span>(starwars) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> mass, <span class="at">y =</span> height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `geom_histogram()`:
! Problem while computing stat.
ℹ Error occurred in the 1st layer.
Caused by error in `setup_params()`:
! `stat_bin()` must only have an x or y aesthetic.</code></pre>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:42%;">
<p>La capa usada (histograma) solo admite una <code>x</code> o un <code>y</code> –&gt; habrás gráficos bivariantes y <span class="hl-yellow"><strong>gráficos univariantes</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb693"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb693-1"><a href="#cb693-1"></a><span class="fu">ggplot</span>(starwars) <span class="sc">+</span></span>
<span id="cb693-2"><a href="#cb693-2"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> height)) <span class="sc">+</span></span>
<span id="cb693-3"><a href="#cb693-3"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:58%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-455-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="histogramas-2" class="slide level2">
<h2>Histogramas</h2>
<p>Los histogramas dependen de una <span class="hl-red"><strong>decisión crítica</strong></span> que cambiará por completo el gráfico: el número de barras (<code>bins = ...</code>).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb694"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb694-1"><a href="#cb694-1"></a><span class="fu">ggplot</span>(starwars) <span class="sc">+</span></span>
<span id="cb694-2"><a href="#cb694-2"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> height), <span class="at">bins =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb694-3"><a href="#cb694-3"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-456-1.png" width="960" class="r-stretch"></section>
<section id="gráfico-de-densidad" class="slide level2">
<h2>Gráfico de densidad</h2>
<p>Como hemos comentado una de las decisiones a tomar en un histograma es la anchura de las barras ya que dicho valor va a cambiar nuestra percepción de la distribución de los datos.</p>
<div class="fragment">
<p>Una de las alternativas más conocidas son los conocidos como <span class="hl-yellow"><strong>gráficos de densidad</strong></span>, una especie de aproximación continua de dichas barras, proporcionando la curva que se intuye que define la forma de un histograma si hacemos las barras cada vez más finas.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img//clipboard-2738368484.png" width="300"></p>
</figure>
</div>
</div>
</section>
<section id="gráfico-de-densidad-1" class="slide level2">
<h2>Gráfico de densidad</h2>
<p>Para realizar un gráfico de densidad debemos de usar simplemente <code>geom_density()</code> como capa geométrica</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb695"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb695-1"><a href="#cb695-1"></a><span class="fu">ggplot</span>(starwars) <span class="sc">+</span></span>
<span id="cb695-2"><a href="#cb695-2"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> height)) <span class="sc">+</span></span>
<span id="cb695-3"><a href="#cb695-3"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-457-1.png" width="960" class="r-stretch"></section>
<section id="gráfico-de-densidad-2" class="slide level2">
<h2>Gráfico de densidad</h2>
<p>Lo que hemo aprendido sobre los <span class="hl-yellow"><strong>atributos estéticos de un gráfico</strong></span> podemos aplicarlo a cualquier capa. Por ejemplo, vamos a decirle que el <span class="hl-yellow"><strong>color y relleno de la densidad dependa del <code>sex</code></strong></span> (es decir, una densidad para cada uno).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb696"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb696-1"><a href="#cb696-1"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(sex)) <span class="sc">+</span></span>
<span id="cb696-2"><a href="#cb696-2"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">fill =</span> sex, <span class="at">color =</span> sex),</span>
<span id="cb696-3"><a href="#cb696-3"></a>               <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb696-4"><a href="#cb696-4"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb696-5"><a href="#cb696-5"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb696-6"><a href="#cb696-6"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-458-1.png" width="960" class="r-stretch"></section>
<section id="gráfico-de-densidad-3" class="slide level2">
<h2>Gráfico de densidad</h2>
<p>El paquete <code>{ggridges}</code> y su función <code>geom_density_ridges()</code> nos permite <span class="hl-yellow"><strong>visualizar densidades de distintos grupos en distintos niveles de altura</strong></span>: en lugar de tener todas una encima de otra, podremos indicarle una variable <code>y</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb697"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb697-1"><a href="#cb697-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb697-2"><a href="#cb697-2"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(sex)) <span class="sc">+</span></span>
<span id="cb697-3"><a href="#cb697-3"></a>  <span class="fu">geom_density_ridges</span>(<span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> sex,</span>
<span id="cb697-4"><a href="#cb697-4"></a>                          <span class="at">fill =</span> sex, <span class="at">color =</span> sex),</span>
<span id="cb697-5"><a href="#cb697-5"></a>               <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb697-6"><a href="#cb697-6"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb697-7"><a href="#cb697-7"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb697-8"><a href="#cb697-8"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-459-1.png" width="960" class="r-stretch"></section>
<section id="diagrama-de-sectores" class="slide level2">
<h2>Diagrama de sectores</h2>
<p>Un <span class="hl-red"><strong>gráfico de sectores</strong></span>, también conocido como gráfico circular o pie chart en inglés, es una representación visual de datos que muestra la proporción de cada categoría dentro de un conjunto de datos en forma de un círculo dividido en sectores. Cada sector representa una categoría y su tamaño angular es proporcional a la frecuencia o proporción de esa categoría en relación con el total.</p>

<img data-src="img/clipboard-2656977358.png" width="590" class="r-stretch quarto-figure-center"></section>
<section id="diagrama-de-sectores-1" class="slide level2">
<h2>Diagrama de sectores</h2>

<img data-src="img/clipboard-2247838254.png" width="590" class="r-stretch quarto-figure-center"></section>
<section id="diagrama-de-sectores-2" class="slide level2">
<h2>Diagrama de sectores</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/clipboard-2247838254.png" width="550"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/clipboard-1745598244.png" width="550"></p>
</figure>
</div>
</section>
<section id="diagrama-de-barras" class="slide level2">
<h2>Diagrama de barras</h2>
<p>Utiliza <span class="hl-yellow"><strong>barras rectangulares para mostrar la frecuencia, la magnitud o la proporción de diferentes categorías</strong></span>. Cada barra representa una categoría específica y su longitud es proporcional a la cantidad o frecuencia que representa. Es importante <span class="hl-red"><strong>no confundir con un histograma</strong></span>: en un diagrama de barras la anchura de cada barra es una decisión meramente estética (incluso si dejas o no un hueco entre cada barra).</p>
<p>También pueden ser útiles para representar variables cuantitativas discretas (e.g., número de hijos).</p>

<img data-src="img//clipboard-3388298140.png" width="400" class="r-stretch quarto-figure-center"></section>
<section id="diagrama-de-cajas" class="slide level2">
<h2>Diagrama de cajas</h2>
<p>Un <span class="hl-yellow"><strong>diagrama de cajas (boxplots)</strong></span> es una representación gráfica que proporciona un resumen de varias características importantes de un conjunto de datos numéricos basado en <strong>medidas de posición</strong>.</p>
<div class="fragment">
<p>El diagrama de cajas muestra la distribución de los datos a lo largo de un eje vertical, dividiendo el conjunto de datos en cuartiles y proporcionando información sobre la dispersión y la simetría de la distribución. Es importante tener en cuenta que en este gráfico, tanto la centralidad representada (mediana) como las medidas de posición (cuartiles) como los valores atípicos, se hace <span class="hl-yellow"><strong>en relación a la mediana y no a la media</strong></span>.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/clipboard-2370668930.png" width="477"></p>
</figure>
</div>
</div>
</section>
<section id="diagrama-de-cajas-1" class="slide level2">
<h2>Diagrama de cajas</h2>
<p>Para realizarlos basta con usar <code>geom_boxplot()</code> como capa geométrica. Por ejemplo, vamos a realizar uno con la variable <code>height</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb698"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb698-1"><a href="#cb698-1"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(height)) <span class="sc">+</span></span>
<span id="cb698-2"><a href="#cb698-2"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> height)) <span class="sc">+</span></span>
<span id="cb698-3"><a href="#cb698-3"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-460-1.png" width="960" class="r-stretch"></section>
<section id="diagrama-de-cajas-2" class="slide level2">
<h2>Diagrama de cajas</h2>
<p>Podemos <strong>invertir la posición de los boxplots</strong> indicándole la variable <code>y</code> en lugar de <code>x</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb699"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb699-1"><a href="#cb699-1"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(height)) <span class="sc">+</span></span>
<span id="cb699-2"><a href="#cb699-2"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> height)) <span class="sc">+</span></span>
<span id="cb699-3"><a href="#cb699-3"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-461-1.png" width="960" class="r-stretch"></section>
<section id="diagrama-de-cajas-3" class="slide level2">
<h2>Diagrama de cajas</h2>
<p>Podemos de nuevo incluir lo aprendido sobre atributos estéticos en estos gráficos. Por ejemplo, vamos a pintar un boxplot vertical (es decir <code>y = height</code>) por cada sexo (<code>x = sex</code>) distinguiendo los colores de cada uno.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb700"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb700-1"><a href="#cb700-1"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(height, sex)) <span class="sc">+</span></span>
<span id="cb700-2"><a href="#cb700-2"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> height, <span class="at">fill =</span> sex,</span>
<span id="cb700-3"><a href="#cb700-3"></a>                   <span class="at">color =</span> sex), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb700-4"><a href="#cb700-4"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb700-5"><a href="#cb700-5"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb700-6"><a href="#cb700-6"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-462-1.png" width="960" class="r-stretch"></section>
<section id="diagrama-de-cajas-4" class="slide level2">
<h2>Diagrama de cajas</h2>
<p>La función <code>geom_boxplot()</code> nos permite incluso <span class="hl-yellow"><strong>distinguir outliers</strong></span> en color, forma y tamaño (empiezan todos los parámetros por <code>outlier...</code>)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb701"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb701-1"><a href="#cb701-1"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(height, sex)) <span class="sc">+</span></span>
<span id="cb701-2"><a href="#cb701-2"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> height, <span class="at">fill =</span> sex,</span>
<span id="cb701-3"><a href="#cb701-3"></a>                   <span class="at">color =</span> sex), <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb701-4"><a href="#cb701-4"></a>               <span class="at">outlier.alpha =</span> <span class="fl">0.8</span>, <span class="at">outlier.shape =</span> <span class="dv">23</span>,</span>
<span id="cb701-5"><a href="#cb701-5"></a>               <span class="at">outlier.size =</span> <span class="dv">2</span>, <span class="at">outlier.color =</span> <span class="st">"#d72020"</span>,</span>
<span id="cb701-6"><a href="#cb701-6"></a>               <span class="at">outlier.fill =</span> <span class="st">"#d72020"</span>) <span class="sc">+</span></span>
<span id="cb701-7"><a href="#cb701-7"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb701-8"><a href="#cb701-8"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb701-9"><a href="#cb701-9"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-463-1.png" width="960" class="r-stretch"></section>
<section id="diagrama-de-cajas-5" class="slide level2">
<h2>Diagrama de cajas</h2>
<p>Dichos gráficos podemos combinarlos con un <span class="hl-yellow"><strong>gotelé de las observaciones</strong></span> haciendo uso de <code>geom_jitter()</code>, indicándole con <code>width = ...</code> la anchura del gotelé (a más valor, más disperso y confuso).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb702"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb702-1"><a href="#cb702-1"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(height, sex),</span>
<span id="cb702-2"><a href="#cb702-2"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> height, <span class="at">fill =</span> sex, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb702-3"><a href="#cb702-3"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">outlier.alpha =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb702-4"><a href="#cb702-4"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb702-5"><a href="#cb702-5"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb702-6"><a href="#cb702-6"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb702-7"><a href="#cb702-7"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-464-1.png" width="960" class="r-stretch"></section>
<section id="gráficos-de-violín" class="slide level2">
<h2>Gráficos de violín</h2>
<p>Los gráficos de cajas y bigotes o boxplot son una alternativa que mejora los clásicos gráficos dinámita o error bar plots (ver <a href="https://hausetutorials.netlify.app/posts/2019-02-22-why-we-should-never-use-barplots-use-geomquasirandom-instead/"><strong>incovenientes de boxplots</strong></a>), uno de los gráficos más habituales en artículos científicos en el ámbito de la bioinformática y bioestadística.</p>
<p>A pesar de que son una mejor alternativa que los error bar plots, en muchas ocasiones puede ser interesante acompañar a nuestros boxplot con lo que se conoce como <span class="hl-yellow"><strong>gráficos de violín</strong></span> (algo parecido a dos gráficos de densidad, uno pegado al otro de manera simétrica)</p>

<img data-src="img/clipboard-943497861.png" width="477" class="r-stretch quarto-figure-center"></section>
<section id="gráficos-de-violín-1" class="slide level2">
<h2>Gráficos de violín</h2>
<p>Para el gráfico de violín basta con <code>geom_violin()</code></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb703"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb703-1"><a href="#cb703-1"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(height, sex),</span>
<span id="cb703-2"><a href="#cb703-2"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> height,</span>
<span id="cb703-3"><a href="#cb703-3"></a>           <span class="at">fill =</span> sex, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb703-4"><a href="#cb703-4"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb703-5"><a href="#cb703-5"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb703-6"><a href="#cb703-6"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb703-7"><a href="#cb703-7"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-465-1.png" width="960" class="r-stretch"></section>
<section id="violin-boxplot" class="slide level2">
<h2>Violin + boxplot</h2>
<p>Incluso puedes <strong>combinarlo con un boxplot</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb704"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb704-1"><a href="#cb704-1"></a><span class="fu">ggplot</span>(starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(height, sex),</span>
<span id="cb704-2"><a href="#cb704-2"></a>       <span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> height,</span>
<span id="cb704-3"><a href="#cb704-3"></a>           <span class="at">fill =</span> sex, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb704-4"><a href="#cb704-4"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb704-5"><a href="#cb704-5"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">width =</span> <span class="fl">0.2</span>,</span>
<span id="cb704-6"><a href="#cb704-6"></a>               <span class="at">outlier.alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb704-7"><a href="#cb704-7"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb704-8"><a href="#cb704-8"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_fill_colorblind</span>() <span class="sc">+</span></span>
<span id="cb704-9"><a href="#cb704-9"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-466-1.png" width="960" class="r-stretch"></section>
<section id="recursos-dataviz" class="slide level2">
<h2>Recursos para visualización</h2>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</section>
<section id="tu-turno-4-6" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-14" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-14-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-14-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-14-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-14-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-14-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-14-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-14-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-14-1">
<p>📝 Toma el conjunto ya conocido de <code>starwars</code> del paquete <code>{dplyr}</code>. Realiza un diagrama de barras para contar las modalidades de la variable <code>sex</code> (solo eso, sin más opciones) eliminando antes los ausentes.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb705"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb705-1"><a href="#cb705-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb705-2"><a href="#cb705-2"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb705-3"><a href="#cb705-3"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb705-4"><a href="#cb705-4"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-467-1.png" width="960"></p>
</div>
</div>
</div>
<div id="tabset-14-2">
<p>📝 Añade lo que consideres del gráfico anterior para hacer que el relleno dependa de cada valor de <code>sex</code>. Personaliza tú los colores.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb706"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb706-1"><a href="#cb706-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb706-2"><a href="#cb706-2"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb706-3"><a href="#cb706-3"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb706-4"><a href="#cb706-4"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">fill =</span> sex), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb706-5"><a href="#cb706-5"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#3b9559"</span>, <span class="st">"#e29c4d"</span>, <span class="st">"#4265b0"</span>, <span class="st">"#b0428b"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-468-1.png" width="960"></p>
</div>
</div>
</div>
<div id="tabset-14-3">
<p>📝 Añade lo que consideres del gráfico anterior para personalizar los títulos de los ejes, de la leyenda, poner un título al gráfico.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb707"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb707-1"><a href="#cb707-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb707-2"><a href="#cb707-2"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb707-3"><a href="#cb707-3"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb707-4"><a href="#cb707-4"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">fill =</span> sex), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb707-5"><a href="#cb707-5"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#3b9559"</span>, <span class="st">"#e29c4d"</span>, <span class="st">"#4265b0"</span>, <span class="st">"#b0428b"</span>)) <span class="sc">+</span></span>
<span id="cb707-6"><a href="#cb707-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sexo"</span>, <span class="at">y =</span> <span class="st">"Frec. absoluta"</span>,</span>
<span id="cb707-7"><a href="#cb707-7"></a>       <span class="at">title =</span> <span class="st">"Distribución de sexo en personajes</span><span class="sc">\n</span><span class="st">de Starwars"</span>,</span>
<span id="cb707-8"><a href="#cb707-8"></a>       <span class="at">fill =</span> <span class="st">"Sexo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-469-1.png" width="960"></p>
</div>
</div>
</div>
<div id="tabset-14-4">
<p>📝 Añade lo que consideres del gráfico anterior para hacer que el eje y tenga una marca de 10 en 10 valores. Incluye un tema diferente al de por defecto</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb708"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb708-1"><a href="#cb708-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb708-2"><a href="#cb708-2"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb708-3"><a href="#cb708-3"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb708-4"><a href="#cb708-4"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">fill =</span> sex), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb708-5"><a href="#cb708-5"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#3b9559"</span>, <span class="st">"#e29c4d"</span>, <span class="st">"#4265b0"</span>, <span class="st">"#b0428b"</span>)) <span class="sc">+</span></span>
<span id="cb708-6"><a href="#cb708-6"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">60</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb708-7"><a href="#cb708-7"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sexo"</span>, <span class="at">y =</span> <span class="st">"Frec. absoluta"</span>,</span>
<span id="cb708-8"><a href="#cb708-8"></a>       <span class="at">title =</span> <span class="st">"Distribución de sexo en personajes</span><span class="sc">\n</span><span class="st">de Starwars"</span>,</span>
<span id="cb708-9"><a href="#cb708-9"></a>       <span class="at">fill =</span> <span class="st">"Sexo"</span>) <span class="sc">+</span></span>
<span id="cb708-10"><a href="#cb708-10"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-470-1.png" width="960"></p>
</div>
</div>
</div>
<div id="tabset-14-5">
<p>📝 ¿Cómo podrías modificar el código anterior para que cada barra se divida en función de la variable género? Cada barra (para cada sexo) se dividirá en dos géneros: masculino y femenino.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb709" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb709-1"><a href="#cb709-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb709-2"><a href="#cb709-2"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb709-3"><a href="#cb709-3"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb709-4"><a href="#cb709-4"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">fill =</span> gender), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb709-5"><a href="#cb709-5"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#e29c4d"</span>, <span class="st">"#4265b0"</span>)) <span class="sc">+</span></span>
<span id="cb709-6"><a href="#cb709-6"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">60</span>, <span class="at">by =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb709-7"><a href="#cb709-7"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sexo"</span>, <span class="at">y =</span> <span class="st">"Frec. absoluta"</span>,</span>
<span id="cb709-8"><a href="#cb709-8"></a>       <span class="at">title =</span> <span class="st">"Distribución de sexo y género</span><span class="sc">\n</span><span class="st">en personajes de Starwars"</span>,</span>
<span id="cb709-9"><a href="#cb709-9"></a>       <span class="at">fill =</span> <span class="st">"Género"</span>) <span class="sc">+</span></span>
<span id="cb709-10"><a href="#cb709-10"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-471-1.png" width="960"></p>
</div>
</div>
</div>
<div id="tabset-14-6">
<p>📝 Replica el gráfico del ejercicio 4 pero haciendo uso de las frecuencias relativas (cálculas antes para poder visualizarla)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb710"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb710-1"><a href="#cb710-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb710-2"><a href="#cb710-2"></a>  <span class="fu">drop_na</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb710-3"><a href="#cb710-3"></a>  <span class="fu">count</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb710-4"><a href="#cb710-4"></a>  <span class="fu">mutate</span>(<span class="st">"frec_rel"</span> <span class="ot">=</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb710-5"><a href="#cb710-5"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb710-6"><a href="#cb710-6"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> frec_rel, <span class="at">fill =</span> sex), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb710-7"><a href="#cb710-7"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#3b9559"</span>, <span class="st">"#e29c4d"</span>, <span class="st">"#4265b0"</span>, <span class="st">"#b0428b"</span>)) <span class="sc">+</span></span>
<span id="cb710-8"><a href="#cb710-8"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">0.9</span>, <span class="at">by =</span> <span class="fl">0.1</span>)) <span class="sc">+</span></span>
<span id="cb710-9"><a href="#cb710-9"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sexo"</span>, <span class="at">y =</span> <span class="st">"Frec. absoluta"</span>,</span>
<span id="cb710-10"><a href="#cb710-10"></a>       <span class="at">title =</span> <span class="st">"Distribución de sexo en</span><span class="sc">\n</span><span class="st"> personajes de Starwars"</span>,</span>
<span id="cb710-11"><a href="#cb710-11"></a>       <span class="at">fill =</span> <span class="st">"Sexo"</span>) <span class="sc">+</span></span>
<span id="cb710-12"><a href="#cb710-12"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-472-1.png" width="960"></p>
</div>
</div>
</div>
<div id="tabset-14-7">
<p>📝 Visualiza un boxplot de la variable estatura distinguiendo por sexos</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb711"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb711-1"><a href="#cb711-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb711-2"><a href="#cb711-2"></a>  <span class="fu">drop_na</span>(height, sex) <span class="sc">|&gt;</span> </span>
<span id="cb711-3"><a href="#cb711-3"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="co"># le decimos que los outlier</span></span>
<span id="cb711-4"><a href="#cb711-4"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> height, <span class="at">color =</span> sex, <span class="at">fill =</span> sex), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb711-5"><a href="#cb711-5"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#3b9559"</span>, <span class="st">"#e29c4d"</span>, <span class="st">"#4265b0"</span>, <span class="st">"#b0428b"</span>)) <span class="sc">+</span></span>
<span id="cb711-6"><a href="#cb711-6"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#3b9559"</span>, <span class="st">"#e29c4d"</span>, <span class="st">"#4265b0"</span>, <span class="st">"#b0428b"</span>)) <span class="sc">+</span></span>
<span id="cb711-7"><a href="#cb711-7"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">"none"</span>) <span class="sc">+</span> <span class="co"># para eliminar color de leyenda</span></span>
<span id="cb711-8"><a href="#cb711-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Sexo"</span>, <span class="at">y =</span> <span class="st">"Estatura"</span>,</span>
<span id="cb711-9"><a href="#cb711-9"></a>       <span class="at">title =</span> <span class="st">"Distribución de la estatura vs sexo en</span><span class="sc">\n</span><span class="st"> personajes de Starwars"</span>,</span>
<span id="cb711-10"><a href="#cb711-10"></a>       <span class="at">fill =</span> <span class="st">"Sexo"</span>) <span class="sc">+</span></span>
<span id="cb711-11"><a href="#cb711-11"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-473-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="caso-práctico-visualización-covid" class="slide level2">
<h2>🐣 Caso práctico: visualización covid</h2>
<p>Vamos a practicar la visualización con la <span class="hl-yellow"><strong>base de datos completa de covid del ISCIII</strong></span> que vamos a cargar directamente desde la web: en lugar de poner la ruta del <code>.csv</code> de nuestro ordenador vamos a poder usar el link directamente (clickando con botón derecho del ratón en los archivos de <a href="https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos" class="uri">https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos</a>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb712"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb712-1"><a href="#cb712-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb712-2"><a href="#cb712-2"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://cnecovid.isciii.es/covid19/resources/casos_hosp_uci_def_sexo_edad_provres.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/intro-dataviz-isciii/#caso-pr%C3%A1ctico-visualizaci%C3%B3n-covid"><strong>workbook</strong></a>.</p>
</section></section>
<section>
<section id="descriptiva" class="title-slide slide level1 center">
<h1>Clases 5 y 6: <span class="flow">intro a descriptiva</span></h1>
<p><span style="color:#444442;"><strong>Estadística univariante</strong></span></p>
<ul>
<li><a href="#/tu-turno-5-1">💻 Tu turno: descriptiva univariante</a></li>
<li><a href="#/caso-practico-5-1">🐣 Caso práctico: encuestas de satisfacción</a></li>
<li><a href="#/extra-dataviz">👾 Materiales extras visualización</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="introducción" class="slide level2">
<h2>Introducción</h2>
<p>La estadística descriptiva es una rama de la estadística que se dedica a <span class="hl-yellow"><strong>recolectar, organizar, presentar y analizar un conjunto de datos</strong></span> para describir las características y comportamientos de dicho conjunto.</p>
<p>Además de para conocer y entender los datos es la fase en la que <span class="hl-yellow"><strong>detectaremos errores e incongruencias</strong></span>, teniendo muchas veces que hacer una <span class="hl-yellow"><strong>depuración de datos</strong></span> para dejar la base de datos preparada para su análisis.</p>
</section>
<section id="resumen-de-etapas" class="slide level2">
<h2>Resumen de etapas</h2>
<ol type="1">
<li><p>Recolección de datos.</p></li>
<li><p>Organización y presentación de los datos (estudio de una variable).</p></li>
<li><p>Relación entre variables (estudio bivariado).</p></li>
</ol>
</section>
<section id="fase-1-recolección" class="slide level2">
<h2>Fase 1: recolección</h2>
<p>La podemos hacer a través de <strong>encuestas, experimentos, observaciones, registros</strong>, etc. Lo más importante en esta etapa es que los datos sean representativos del fenómeno o población que se estudia.</p>
<p><span class="hl-green"><strong>Ejemplo</strong></span>: queremos llevar a cabo una <span class="hl-yellow"><strong>investigación para analizar la satisfacción de los pacientes</strong></span> con los servicios de urgencias de la red de hospitales públicos madrileños. ¿Qué muestra será más representativa?</p>
<ol type="a">
<li><p>Los 100 primeros pacientes que lleguen a las urgencias del Hospital 12 de Octubre.</p></li>
<li><p>Los 10 primeros pacientes que lleguen a las urgencias de todos los hospitales de la red de hospitales madrileños.</p></li>
<li><p>Seleccionamos al azar 3 hospitales del grupo 3 (hospitales de gran complejidad), grupo 2 (hospitales de complejidad intermedia) y grupo 3 (hospitales de baja complejidad) y de cada uno de ellos seleccionamos un número proporcional de pacientes según el número total de pacientes que llegan a cada hospital.</p></li>
</ol>
</section>
<section id="fase-1-recolección-1" class="slide level2">
<h2>Fase 1: recolección</h2>
<p><span class="hl-yellow"><strong>Solución</strong></span>:</p>
<ol start="3" type="a">
<li><strong>Seleccionamos al azar 3 hospitales del grupo 3 (hospitales de gran complejidad), grupo 2 (hospitales de complejidad intermedia) y grupo 3 (hospitales de baja complejidad) y de cada uno de ellos seleccionamos un número proporcional de pacientes según el número total de pacientes que llegan a cada hospital</strong>.</li>
</ol>
<p>&nbsp;</p>
<p>Con a) todas las conclusiones que saquemos del estudio serán aplicadas al Hospital 12 de Octubre. Con b) es una forma semi representativa pero válida de conseguir una muestra de forma fácil.</p>
<div class="fragment">
<p>La rama de la estadística que se dedica a estudiar esta parte del análisis se conoce como <span class="hl-yellow"><strong>muestreo</strong></span></p>
</div>
</section>
<section id="fase-2-organización-y-presentación" class="slide level2">
<h2>Fase 2: organización y presentación</h2>
<p>Una vez recopilados los datos deben organizarse de manera que sean comprensibles y manejables. Para ello necesitaremos clasificar los datos en <span class="hl-yellow"><strong>cuantitativos y cualitativos</strong></span> y estudiar sus características según su tipo.</p>
<ul>
<li><p><span class="hl-red"><strong>Messy data</strong></span>: datos mal organizados o desordenados (múltiples individuos en cada fila, misma variable pero separada en varias columnas, etc).</p></li>
<li><p><span class="hl-green"><strong>Tidy data</strong></span>: datos organizados y estandarizados (una variable en cada columna, un registro/individuo en cada fila y un solo valor en cada celda).</p></li>
</ul>
</section>
<section id="fase-2-organización-y-presentación-1" class="slide level2">
<h2>Fase 2: organización y presentación</h2>
<p>La información la poder <strong>resumir o presentar</strong> de distintas maneras.</p>
<ul>
<li><p><span class="hl-yellow"><strong>Estadísticos o medidas</strong></span>:</p>
<ul>
<li><p>Medidas cualitativas: tablas de frecuencias.</p></li>
<li><p>Medidas cuantitativas: medidas numéricas de centralización y dispersión.</p></li>
</ul></li>
<li><p><span class="hl-yellow"><strong>Gráficamente</strong></span>:</p>
<ul>
<li><p>Medidas cualitativas: gráficos de barras, gofres, etc.</p></li>
<li><p>Medidas cuantitativas: histogramas, densidades, boxplots, etc</p></li>
</ul></li>
</ul>
</section>
<section id="fase-3-relación-entre-variables" class="slide level2">
<h2>Fase 3: relación entre variables</h2>
<p>Una vez hecho el estudio de cada variable por separado buscaremos <span class="hl-yellow"><strong>relacionar dos variables de forma simultánea para buscar la asociación</strong></span> entre ellas:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Cuali vs cuali</strong></span>: tablas de frecuencias –&gt; pruebas de Fisher y chi-cuadrado –&gt; interpretación de OR y RR.</p></li>
<li><p><span class="hl-yellow"><strong>Cuanti vs cuanti</strong></span>: correlación –&gt; test de correlaciones (o test de igualdad de distribuciones) –&gt; diagrmas de dispersión.</p></li>
<li><p><span class="hl-yellow"><strong>Cuanti vs cuali</strong></span>: ANOVA.</p></li>
</ul>
</section>
<section id="conceptos-básicos" class="slide level2">
<h2>Conceptos básicos</h2>
<p>En estadística es fundamental entender los conceptos de <span class="hl-yellow"><strong>población, muestra y variable</strong></span>, ya que son la base para cualquier análisis estadístico.</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Población</strong></span></li>
</ul>
<p>La población es el <strong>conjunto completo de elementos o individuos</strong> que tienen una característica común y sobre los cuales se desea obtener información. En la mayoría de casos el acceso a la <strong>totalidad de la población es inviable</strong> por motivos económicos, legales o éticos, así que en la mayoría de situaciones las conclusiones deberemos sacarlas haciendo uso de lo que se conoce como <strong>muestra</strong>.</p>
</div>
<div class="fragment">
<p><strong>Ejemplo</strong>: la diferencia entre censo y encuesta es que el primero recopila datos de todos los individuos de una población, mientras que el segundo trata de estimarlos o inferirlos a partir de una muestra representativa de la misma.</p>
</div>
</section>
<section id="conceptos-básicos-1" class="slide level2">
<h2>Conceptos básicos</h2>
<ul>
<li><span class="hl-yellow"><strong>Muestra</strong></span></li>
</ul>
<p>Una muestra es un subconjunto de la población que se selecciona para su análisis con el fin de hacer inferencias o generalizaciones sobre la población completa. La muestra debe ser <strong>representativa de la población</strong> para que las conclusiones sean válidas.</p>
<ul>
<li><p><strong>Muestreo aleatorio simple</strong>: cada miembro de la población tiene la misma probabilidad de ser seleccionado.</p></li>
<li><p><strong>Muestreo estratificado</strong>: la población se divide en subgrupos (estratos) y se toma una muestra de cada uno.</p></li>
<li><p><strong>Muestreo (no aleatorio) sistemático</strong>: se selecciona cada n-ésimo miembro de la población.</p></li>
<li><p><strong>Muestreo (no aleatorio) por cuotas</strong>: se seleccionan aquellos individuos que cumplan ciertas condiciones.</p></li>
<li><p><strong>Muestreo por conveniencia</strong>: se elige a los miembros que son más fáciles de acceder, aunque este método puede introducir sesgos.</p></li>
</ul>
</section>
<section id="tipos-de-muestreo" class="slide level2">
<h2>Tipos de muestreo</h2>
<p><span class="hl-yellow"><strong>Ejemplo 1</strong></span></p>
<ul>
<li><p><strong>Población</strong>: todos los pacientes que han sido atendidos en un hospital específico durante el último año.</p></li>
<li><p><strong>Muestra (aleatoria simple)</strong>: Seleccionamosseleccionamos 200 pacientes de manera aleatoria del registro de pacientes del último año. Para asegurarnos de que la muestra sea representativa, podemos usar muestreo aleatorio simple, donde cada paciente tiene la misma probabilidad de ser seleccionado.</p></li>
</ul>
</section>
<section id="tipos-de-muestreo-1" class="slide level2">
<h2>Tipos de muestreo</h2>
<p><span class="hl-yellow"><strong>Ejemplo 2</strong></span></p>
<ul>
<li><p><strong>Población</strong>: todos los estudiantes matriculados en una universidad durante el semestre actual.</p></li>
<li><p><strong>Muestra (aleatoria estratificada)</strong>: seleccionamos 500 estudiantes utilizando muestreo estratificado para asegurar que diferentes subgrupos (estratos) de la población estén representados. Los estratos pueden ser facultades (mismo % de facultades representadas que en la población universitaria), género, clase social, etc.</p></li>
</ul>
</section>
<section id="tipos-de-muestreo-2" class="slide level2">
<h2>Tipos de muestreo</h2>
<p><span class="hl-yellow"><strong>Ejemplo 3</strong></span></p>
<ul>
<li><p><strong>Población</strong>: todas las especies de árboles en un bosque determinado.</p></li>
<li><p><strong>Muestra (sistemática no aleatoria)</strong>: Sseleccionamos parcelas de muestreo de 10m x 10m dentro del bosque y contabilizamos todas las especies de árboles presentes en esas parcelas. Esto se puede hacer utilizando muestreo sistemático.</p></li>
</ul>
</section>
<section id="tipos-de-muestreo-3" class="slide level2">
<h2>Tipos de muestreo</h2>
<p><span class="hl-yellow"><strong>Ejemplo 4</strong></span></p>
<ul>
<li><p><strong>Población</strong>: todos los pacientes de covid de un hospital.</p></li>
<li><p><strong>Muestra (por cuotas no aleatoria)</strong>: seleccionamos solo a las personas mayores de 65 años para realizar un estudio clínico inicial sobre los efectos secundarios de una posible vacuna de la covid-19.</p></li>
</ul>
<p>Estos métodos aseguran, de una manera u otra, que las muestras sean representativas de sus respectivas poblaciones, lo que permite realizar análisis precisos y confiables.</p>
</section>
<section id="conceptos-básicos-2" class="slide level2">
<h2>Conceptos básicos</h2>
<ul>
<li><span class="hl-yellow"><strong>Variable</strong></span></li>
</ul>
<p>Una variable es <strong>cualquier característica o atributo</strong> que puede tomar diferentes valores entre los individuos de la población o muestra. Las variables pueden ser de varios tipos según su naturaleza:</p>
<ul>
<li><p><span class="hl-purple"><strong>Cualitativas (o categóricas)</strong></span>: describen cualidades o categorías. Ejemplos:</p>
<ul>
<li>Nominales: no tienen un orden intrínseco (e.g., género, estado civil).</li>
<li>Ordinales: tienen un orden intrínseco (e.g., niveles de satisfacción, grado académico, sano-leve-grave).</li>
</ul></li>
</ul>
</section>
<section id="conceptos-básicos-3" class="slide level2">
<h2>Conceptos básicos</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Variable</strong></span></p></li>
<li><p><span class="hl-purple"><strong>Cuantitativas</strong></span>: describen cantidades y pueden ser medidas numéricamente. Ejemplos:</p>
<ul>
<li>Discretas finitas: toman valores finitos (e.g., número de hijos, número de visitas al médico, escala de dolor).</li>
<li>Discretas infinitas: toman valores infinitos (o que se podrían considerar como tal) pero podemos enumerarlas y sabemos siempre el siguiente elemento (e.g., número de pelos de nuestra cabellera, número de personas que pueden entrar en una tienda en un periodo dado).</li>
<li>Continuas: pueden tomar cualquier valor dentro de un rango (e.g., altura, peso, tiempo de espera).</li>
</ul></li>
</ul>
</section>
<section id="conceptos-básicos-4" class="slide level2">
<h2>Conceptos básicos</h2>
<ul>
<li><span class="hl-yellow"><strong>Modalidades</strong></span></li>
</ul>
<p>Una modalidad es uno de los <strong>valores</strong> que toma una <strong>variable dentro de una muestra</strong>.</p>
<p>El <strong>conjunto de modalidades posibles</strong> que podría haber tomado (en tu población) se suele conocer también como soporte. Algunos ejemplos en función del tipo de variables son:</p>
<ul>
<li>Color de ojos (cualitativa nominal): negro, azul y marrón (3 modalidades en esa muestra de un espectro de colores más amplio que podríamos tener como soporte).</li>
<li>Estado del paciente (cualitativa ordinal): sano, leve y grave (3 modalidades en esa muestra de un conjunto de opciones - por ejemplo, sano, leve, grave, UCI, fallecido - que podríamos tener).</li>
</ul>
</section>
<section id="conceptos-básicos-5" class="slide level2">
<h2>Conceptos básicos</h2>
<ul>
<li><span class="hl-yellow"><strong>Modalidades</strong></span></li>
</ul>
<p>Una modalidad es uno de los valores que toma una variable dentro de una muestra. El <strong>conjunto de modalidades</strong> posibles que podría haber tomado (en tu <strong>población</strong>) se suele conocer también como <strong>soporte</strong>. Algunos ejemplos en función del tipo de variables son:</p>
<ul>
<li><p>Número de hijos (cuantitativa discreta finita): 0, 1, 2 y 3 (4 modalidades en esa muestra de un conjunto de valores posibles - de 0 a…20 hijos - que podríamos tener en la población general).</p></li>
<li><p>Temperatura anual de Madrid (cuantitativa continua): un rango de -5ºC a 45ºC (un rango continuo de valores en los que se mueve nuestra variable en la muestra (de un rango más amplio, por ejemplo desde -20ºC a 50ºC que podría moverse de manera global si tuviésemos otra muestra).</p></li>
</ul>
</section>
<section id="ejercicio-tipo-de-variables" class="slide level2">
<h2>Ejercicio: tipo de variables</h2>
<p>Piensa en tipos de variables que se pueden medir en cada uno de los ejemplos de población y muestra que hemos estudiado.</p>
<p><span class="hl-yellow"><strong>Ejemplo 1</strong></span></p>
<table>
<colgroup>
<col style="width: 45%">
<col style="width: 19%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Población</th>
<th style="text-align: left;">Muestra</th>
<th style="text-align: left;">Variables</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Todos los pacientes de un hospital de los queremos estudiar su grado de satisfcacción con la atención que han recibido</td>
<td style="text-align: left;">200 pacientes seleccionados de forma aleatoria del registro de pacientes en el último año</td>
<td style="text-align: left;"><strong>Cuantitativas</strong>: <strong>Cualitativas</strong>:</td>
</tr>
</tbody>
</table>
</section>
<section id="ejercicio-tipo-de-variables-1" class="slide level2">
<h2>Ejercicio: tipo de variables</h2>
<p><span class="hl-yellow"><strong>Ejemplo 1: solución</strong></span></p>
<table>
<colgroup>
<col style="width: 40%">
<col style="width: 17%">
<col style="width: 38%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Población</th>
<th style="text-align: left;">Muestra</th>
<th style="text-align: left;">Variables</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Todos los pacientes de un hospital de los queremos estudiar su grado de satisfcacción con la atención que han recibido</td>
<td style="text-align: left;">200 pacientes seleccionados de forma aleatoria del registro de pacientes en el último año</td>
<td style="text-align: left;"><strong>Cuantitativas</strong>: edad (discreta), tiempo de espera (continua), grado de satisfacción en una escala del 0 al 10 (discreta), número de visitas en el último año (discreta). | <strong>Cualitativas</strong>: género (nominal), estado civil (nominal), si viene acompañado (nominal), grado de satisfacción como bueno, regular malo (ordinal).</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="ejercicio-tipo-de-variables-2" class="slide level2">
<h2>Ejercicio: tipo de variables</h2>
<p>Piensa en tipos de variables que se pueden medir en cada uno de los ejemplos de población y muestra que hemos estudiado.</p>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 2</strong></span></li>
</ul>
<table>
<colgroup>
<col style="width: 100%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Población | Muestra | Variables</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</section>
<section id="ejercicio-tipo-de-variables-3" class="slide level2">
<h2>Ejercicio: tipo de variables</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 2: solución</strong></span></li>
</ul>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 36%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Población</th>
<th style="text-align: left;">Muestra</th>
<th style="text-align: left;">Variables</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Todos los estudiantes matriculados en una universidad de los que queremos estudiar las calificaciones obtenidas</td>
<td style="text-align: left;">500 estudiantes de las diferentes facultades</td>
<td style="text-align: left;"><strong>Cuantitativas</strong>: calificaciones, edad (discreta), número de veces que se ha presentado al examen (discreta). <strong>Cualitativas</strong>: asignaturas (nominal), facultad (nominal).</td>
</tr>
</tbody>
</table>
</section>
<section id="ejercicio-tipo-de-variables-4" class="slide level2">
<h2>Ejercicio: tipo de variables</h2>
<p>Piensa en tipos de variables que se pueden medir en cada uno de los ejemplos de población y muestra que hemos estudiado.</p>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 3</strong></span></li>
</ul>
<table>
<colgroup>
<col style="width: 100%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Población | Muestra | Variables</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</section>
<section id="ejercicio-tipo-de-variables-5" class="slide level2">
<h2>Ejercicio: tipo de variables</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 3: solución</strong></span></li>
</ul>
<table>
<colgroup>
<col style="width: 8%">
<col style="width: 44%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Población</th>
<th style="text-align: left;">Muestra</th>
<th style="text-align: left;">Variables</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Especies de árboles en un bosque de los que queremos estudiar su estado de salud</td>
<td style="text-align: left;">Selección sistemática de parcelas de 10m x 10m dentro del bosque</td>
<td style="text-align: left;"><strong>Cuantitativas</strong>: altura del árbol (continua), diámetro del árbol (continua), edad del árbol (discreta). <strong>Cualitativas</strong>: especie del árbol (nominal), estado de salud (ordinal), tipo de suelo (nominal).</td>
</tr>
</tbody>
</table>
</section>
<section id="características-numéricas" class="slide level2">
<h2>Características numéricas</h2>
<p>Nos referimos a las medidas con las que se pretende resumir y condensar la información contenida en un conjunto de datos. Las mayoría de características numéricas las mediremos en variables cuantitativas.</p>
<ul>
<li><span class="hl-yellow"><strong>Medidas de centralización y posición</strong></span></li>
</ul>
<p>Son los valores que resumen el conjunto de los datos de forma que reflejan el <strong>centro de la distribución</strong> de la tabla de frecuencias</p>
</section>
<section id="media-1" class="slide level2">
<h2>Media</h2>
<p>Es el <span class="hl-yellow"><strong>valor medio o centro de gravedad</strong></span> (el valor más cercano a todos los puntos a la vez). Es la suma de todos los valores dividida por el número total de valores.</p>
<p><span class="math display">\[\bar x= \frac{\sum^n_{i=1} x_i}{n}\]</span></p>
</section>
<section id="ejemplos" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 1</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3. ¿Cuál es su media?</p>
<p><span class="math inline">\(n=11\)</span></p>
<p><span class="math inline">\(\sum^n_{i=1} x_i = 0+1+2+0+1+1+0+0+2+2+3 = 12\)</span></p>
<p><span class="math inline">\(\bar x= \frac{\sum^n_{i=1} x_i}{n} = \frac{12}{11} = 1.09\)</span> hijos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb713"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb713-1"><a href="#cb713-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb713-2"><a href="#cb713-2"></a><span class="fu">mean</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.090909</code></pre>
</div>
</div>
</section>
<section id="ejemplos-1" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 2</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3,10. ¿Cuál es su media?</p>
<p><span class="math inline">\(\bar x= \frac{\sum^n_{i=1} x_i}{n} = \frac{22}{12} = 1.83\)</span> hijos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb715"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb715-1"><a href="#cb715-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">10</span>)</span>
<span id="cb715-2"><a href="#cb715-2"></a><span class="fu">mean</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.833333</code></pre>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado…</strong></p>
</div>
<div class="callout-content">
<p>La media es una medida útil y ampliamente aplicada de la tendencia central, pero debe ser utilizada con precaución en conjuntos de datos que contienen valores atípicos o están distribuidos de manera asimétrica.</p>
</div>
</div>
</div>
</section>
<section id="mediana" class="slide level2">
<h2>Mediana</h2>
<p>Es el <span class="hl-yellow"><strong>valor del medio SIEMPRE Y CUANDO ordenemos</strong></span> los datos. Divide la distribución de frecuencias en dos partes.</p>
<p>Para calcularla debemos realizar los siguientes pasos:</p>
<ol type="1">
<li><p>Ordenar los datos en orden creciente</p></li>
<li><p>Según el número de observaciones (n):</p>
<ul>
<li><p>Si n es impar: La mediana es el valor que ocupa la posición central</p></li>
<li><p>Si n es par: La mediana es el promedio de los dos valores central</p></li>
</ul></li>
</ol>
</section>
<section id="ejemplos-2" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Variables cuantitativas</strong></span></p></li>
<li><p>Conjunto de datos con un número impar de observaciones:</p></li>
<li><p>Datos: 3, 1, 4, 2, 5 (n=5)</p></li>
<li><p>Ordenados: 1, 2, 3, 4, 5</p></li>
<li><p>Mediana: 3 (el tercer valor)</p></li>
<li><p>Conjunto de datos con un número par de observaciones:</p></li>
<li><p>Datos: 7, 2, 4, 6 (n=4)</p></li>
<li><p>Ordenados: 2, 4, 6, 7</p></li>
<li><p>Mediana: (4 + 6) / 2 = 5</p></li>
</ul>
</section>
<section id="ejemplos-3" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Variables cualitativas</strong></span></li>
</ul>
<p>Conjunto de datos cualitativos ordinales (aunque sean cualitativas admite una jerarquía):</p>
<ul>
<li><p>Datos: “notable”, “suspenso”, “sobresaliente”, “suspenso”, “notable”, “aprobado”, “notable” (n=7).</p></li>
<li><p>Ordenados: “suspenso”, “suspenso”, “aprobado”, “notable”, “notable”, “notable”, “sobresaliente”.</p></li>
<li><p>Mediana: “notable”.</p></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>La mediana es especialmente útil en <strong>distribuciones asimétricas</strong> o cuando se quiere una medida de tendencia central que no sea afectada por valores extremadamente altos o bajos.</p>
</div>
</div>
</div>
</section>
<section id="ejemplos-4" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 1</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3. ¿Cuál es su mediana?</p>
<p><span class="math inline">\(n=11\)</span></p>
<p>Ordenados: 0,0,0,0,1,1,1,2,2,2,3</p>
<p>Mediana: Posición 6 = 1 hijo</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb717"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb717-1"><a href="#cb717-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb717-2"><a href="#cb717-2"></a></span>
<span id="cb717-3"><a href="#cb717-3"></a><span class="fu">median</span>(x)</span>
<span id="cb717-4"><a href="#cb717-4"></a><span class="co"># 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="ejemplos-5" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 2</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3,10. ¿Cuál es su mediana?</p>
<p><span class="math inline">\(n=12\)</span></p>
<p>Ordenados: 0,0,0,0,1,1,1,2,2,2,3,10</p>
<p>Mediana: Posición 6 y 7 = 1 +1 /2 = 1 hijo</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb718"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb718-1"><a href="#cb718-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">10</span>)</span>
<span id="cb718-2"><a href="#cb718-2"></a></span>
<span id="cb718-3"><a href="#cb718-3"></a><span class="fu">median</span>(x)</span>
<span id="cb718-4"><a href="#cb718-4"></a><span class="co"># 1.833333</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="moda" class="slide level2">
<h2>Moda</h2>
<p>Es el valor que <span class="hl-yellow"><strong>presenta la máxima frecuencia</strong></span> y se puede calcular para <strong>todas las variables (también) cualitativas</strong>. Es más, es un valor que suele usarse en el análisis de variables cualitativas.</p>
<ol type="1">
<li><p>Unimodal:</p>
<ul>
<li>Datos: “negro”, “negro”, “amarillo”, “verde”, “amarillo”, “negro”</li>
<li>Moda: “negro” (aparece 3 veces, más que cualquier otro valor)</li>
</ul></li>
<li><p>Bimodal:</p>
<ul>
<li>Datos: 1, 2, 3, 3, 4, 4, 5</li>
<li>Modas: 3 y 4 (ambos aparecen dos veces)</li>
</ul></li>
<li><p>Multimodal:</p>
<ul>
<li>Datos: 2, 2, 3, 3, 4, 4, 5, 5</li>
<li>Modas: 2, 3, 4, y 5 (todos aparecen dos veces)</li>
</ul></li>
<li><p>Sin moda:</p>
<ul>
<li>Datos: 1, 2, 3, 4, 5</li>
<li>Moda: No hay moda (todos los valores aparecen solo una vez)</li>
</ul></li>
</ol>
</section>
<section id="ejemplos-6" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 1</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3. ¿Cuál es su moda?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb719"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb719-1"><a href="#cb719-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb719-2"><a href="#cb719-2"></a>datos <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"x"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb719-3"><a href="#cb719-3"></a></span>
<span id="cb719-4"><a href="#cb719-4"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb719-5"><a href="#cb719-5"></a>  <span class="fu">count</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
      x     n
  &lt;dbl&gt; &lt;int&gt;
1     0     4
2     1     3
3     2     3
4     3     1</code></pre>
</div>
</div>
<p>La modalidad más frecuente es 0 por lo que la moda es 0.</p>
</section>
<section id="cuantiles" class="slide level2">
<h2>Cuantiles</h2>
<p>Los <span class="hl-yellow"><strong>cuantiles son valores que dividen un conjunto de datos en partes iguales</strong></span> según la distribución de los datos (de nuevo asumiento que tenemos los datos ordenados de menor a mayor). Los cuantiles son útiles para comprender la distribución y la dispersión de los datos. Existen diferentes tipos de cuantiles, cada uno con un número específico de divisiones:</p>
<ol type="1">
<li><p>Cuartiles: dividen el conjunto de datos en cuatro partes iguales.</p></li>
<li><p>Deciles: dividen el conjunto de datos en diez partes iguales.</p></li>
<li><p>Percentiles: dividen el conjunto de datos en cien partes iguales.</p></li>
</ol>
</section>
<section id="cuantiles-1" class="slide level2">
<h2>Cuantiles</h2>
<ol type="1">
<li><p><span class="hl-yellow"><strong>Cuartiles</strong></span>: dividen el conjunto de datos en cuatro partes iguales.</p>
<ul>
<li><p>Primer cuartil (Q1): divide el 25% inferior de los datos del 75% superior.</p></li>
<li><p>Mediana (Q2): divide el 50% inferior del 50% superior. Es el segundo cuartil.</p></li>
<li><p>Tercer cuartil (Q3): divide el 75% inferior del 25% superior.</p></li>
</ul></li>
</ol>
</section>
<section id="cuantiles-2" class="slide level2">
<h2>Cuantiles</h2>
<ol start="2" type="1">
<li><p><span class="hl-yellow"><strong>Deciles</strong></span>: dividen el conjunto de datos en diez partes iguales.</p>
<ul>
<li><p>Primer decil (D1): divide el 10% inferior del 90% superior.</p></li>
<li><p>Segundo decil (D2): divide el 20% inferior del 80% superior.</p></li>
<li><p>Y así sucesivamente hasta el noveno decil (D9), que divide el 90% inferior del 10% superior.</p></li>
</ul></li>
</ol>
</section>
<section id="cuantiles-3" class="slide level2">
<h2>Cuantiles</h2>
<ol start="3" type="1">
<li><p><span class="hl-yellow"><strong>Percentiles</strong></span>: dividen el conjunto de datos en cien partes iguales.</p>
<ul>
<li><p>Percentil 1 (P1): divide el 1% inferior del 99% superior.</p></li>
<li><p>Percentil 2 (P2): divide el 2% inferior del 98% superior.</p></li>
<li><p>Y así sucesivamente hasta el percentil 99 (P99), que divide el 99% inferior del 1% superior.</p></li>
</ul></li>
</ol>
</section>
<section id="ejemplos-7" class="slide level2">
<h2>Ejemplos</h2>
<p>Supongamos que tenemos el siguiente conjunto de datos (que podemos ordenar): 10, 25, 4, 2, 14, 6, 18, 16, 8, 12, 20. ¿Cuáles son sus cuartiles?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb721"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb721-1"><a href="#cb721-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"x"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">14</span>, <span class="dv">6</span>, <span class="dv">18</span>, <span class="dv">16</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">20</span>))</span>
<span id="cb721-2"><a href="#cb721-2"></a></span>
<span id="cb721-3"><a href="#cb721-3"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb721-4"><a href="#cb721-4"></a>  <span class="fu">reframe</span>(<span class="st">"cuartiles"</span> <span class="ot">=</span> <span class="fu">quantile</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  cuartiles
      &lt;dbl&gt;
1         2
2         7
3        12
4        17
5        25</code></pre>
</div>
</div>
</section>
<section id="medidas-de-dispersión" class="slide level2">
<h2>Medidas de dispersión</h2>
<p>Medidas (solo disponibles para cuantitativas) que nos indican <span class="hl-yellow"><strong>cómo de lejos o cerca están las observaciones del valor central</strong></span> que hemos calculado, es decir cuánto se alejan de la media o mediana.</p>
<p>&nbsp;</p>
<p>Nos indican el grado de dispersión de la distribución de frecuencias.</p>
</section>
<section id="recorrido-o-rango" class="slide level2">
<h2>Recorrido o rango</h2>
<p>Indica la diferencia entre el valor máximo y el valor mínimo en un conjunto de datos.</p>
</section>
<section id="ejemplos-8" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 1</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3. ¿Cuál es su recorrido?</p>
<ul>
<li><p>Valor máximo = 3</p></li>
<li><p>Valor mínimo = 0</p></li>
<li><p>Recorrido= 3-0 = 3</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb723"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb723-1"><a href="#cb723-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb723-2"><a href="#cb723-2"></a></span>
<span id="cb723-3"><a href="#cb723-3"></a><span class="fu">max</span>(x)<span class="sc">-</span> <span class="fu">min</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="ejemplos-9" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 2</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3,10. ¿Cuál es su recorrido?</p>
<ul>
<li><p>Valor máximo = 10</p></li>
<li><p>Valor mínimo = 0</p></li>
<li><p>Recorrido= 10-0 = 10</p></li>
</ul>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb724"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb724-1"><a href="#cb724-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">10</span>)</span>
<span id="cb724-2"><a href="#cb724-2"></a></span>
<span id="cb724-3"><a href="#cb724-3"></a><span class="fu">max</span>(x)<span class="sc">-</span> <span class="fu">min</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado…</strong></p>
</div>
<div class="callout-content">
<p>El recorrido es útil cuando se necesita una medida rápida y simple de la dispersión, pero para análisis más detallados y robustos, se utilizan otras medidas de dispersión como la desviación estándar, la varianza o el rango intercuartílico.</p>
</div>
</div>
</div>
</section>
<section id="rango-intercuatílico-iqr" class="slide level2">
<h2>Rango Intercuatílico (IQR)</h2>
<p>Mide la <span class="hl-yellow"><strong>amplitud del 50% central de un conjunto de datos</strong></span>. Se calcula como la diferencia entre el tercer cuartil (Q3) y el primer cuartil (Q1), proporcionando una medida robusta de la variabilidad de los datos al no ser afectada por valores atípicos o extremos.</p>
<p><span class="math display">\[IQR = Q_3 - Q_1\]</span></p>
</section>
<section id="varianza" class="slide level2">
<h2>Varianza</h2>
<p>Cuantifica <span class="hl-yellow"><strong>cuánto varían los datos respecto a la media</strong></span> del conjunto. Una varianza alta indica que los datos están más dispersos alrededor de la media, mientras que una varianza baja indica que los datos están más agrupados cerca de la media. <span class="hl-green"><strong>Importante</strong></span>: medimos las desviaciones al cuadrado para que no se cancelen signos.</p>
<p><span class="math display">\[s^2 = \frac{\sum_{i=1}^n (x_i - \bar x)^2}{n-1}\]</span></p>
<ul>
<li><p><span class="math inline">\(x_i\)</span> representa cada valor individual en el conjunto de datos.</p></li>
<li><p><span class="math inline">\(\bar x\)</span> es la media de la muestra.</p></li>
<li><p><span class="math inline">\(n\)</span> es el tamaño de la muestra.</p></li>
</ul>
</section>
<section id="desviación-típica" class="slide level2">
<h2>Desviación típica</h2>
<p>Es la raíz cuadrada de la varianza y se calcula de la siguiente manera:</p>
<p><span class="math display">\[s = \sqrt {s^2} = \sqrt {\frac{\sum_{i=1}^n (x_i - \bar x)^2}{n-1}}\]</span></p>
<p>La <span class="hl-yellow"><strong>desviación estándar</strong></span> se interpreta en las mismas unidades que los datos originales, lo que la hace más intuitiva que la varianza. Indica la dispersión promedio de los datos respecto a la media.</p>
</section>
<section id="estimación-insesgada" class="slide level2">
<h2>Estimación insesgada</h2>
<p>Fíjate que en las <strong>medidas de dispersión el promedio lo estamos realizando diviendo entre n-1 y no entre n</strong>. Esto es debido a que los parámetros que hemos visto hasta ahora se conocen con un apellido: <span class="hl-yellow"><strong>parámetros muestrales</strong></span> (calculados con los datos disponibles en una muestra).</p>
<div class="fragment">
<p>El objetivo con ellos es aproximar los <span class="hl-yellow"><strong>verdaderos parámetros poblacionales</strong></span> (la media real de la población, no la que calculas con tu tabla), y el mejor estimador posible de la varianza población (se conoce como estimador insesgado, sin sesgo) es la que hemos definido dividiendo entre n-1, de ahí que todos los softwares estadísticos nos calculen dicho valor (se la conoce también como cuasivarianza).</p>
</div>
</section>
<section id="ejemplos-10" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 1</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3. ¿Cuál es su varianza y desviación típica?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb725"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb725-1"><a href="#cb725-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb725-2"><a href="#cb725-2"></a></span>
<span id="cb725-3"><a href="#cb725-3"></a><span class="fu">var</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.090909</code></pre>
</div>
<div class="sourceCode cell-code" id="cb727"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb727-1"><a href="#cb727-1"></a><span class="fu">sd</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.044466</code></pre>
</div>
</div>
</section>
<section id="ejemplos-11" class="slide level2">
<h2>Ejemplos</h2>
<ul>
<li><span class="hl-yellow"><strong>Ejemplo 2</strong></span></li>
</ul>
<p>A los enfermeros de un centro de salud se les pregunta por el nº de hijos que tienen. Sus respuestas son 0,1,2,0,1,1,0,0,2,2,3,10. ¿Cuál es su varianza y desviación típica?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb729"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb729-1"><a href="#cb729-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">10</span>)</span>
<span id="cb729-2"><a href="#cb729-2"></a></span>
<span id="cb729-3"><a href="#cb729-3"></a><span class="fu">var</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7.606061</code></pre>
</div>
<div class="sourceCode cell-code" id="cb731"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb731-1"><a href="#cb731-1"></a><span class="fu">sd</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.757909</code></pre>
</div>
</div>
</section>
<section id="coeficiente-de-variación" class="slide level2">
<h2>Coeficiente de variación</h2>
<p>Uno de los problemas al <span class="hl-yellow"><strong>comparar dispersiones</strong></span> de dos variables diferentes es que tanto la varianza como la desviación típica <span class="hl-red"><strong>dependen de la escala de los datos</strong></span>.</p>
<p>Esto implica que una desviación de, por ejemplo, 0.5, puede representar una dispersión pequeña (si el rango de mis datos está entre 100 y 200, por ejemplo) pero puede representar una dispersión enorme si el rango de mis datos es también pequeño (por ejemplo, datos entre 0 y 1).</p>
<p>Para poder comparar dispersiones de variables de diferentes rangos (o incluso unidades) existe el conocido como coeficiente de variación (CV):</p>
<p><span class="math display">\[CV = \frac s {|\bar x|}\]</span></p>
<p>El <strong>coeficiente de variación es siempre adimensional y positivo</strong>.</p>
</section>
<section id="tablas-de-frecuencias" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>Las variables cualitativas o cuantis discretas las vamos a <span class="hl-yellow"><strong>resumir en tablas de frecuencias</strong></span> donde se ordenan y estructuran los valores de una variable x de forma resumida de la siguiente manera:</p>
<ul>
<li><p><strong>Frecuencia absoluta de x</strong>: nº de veces que se repite cada modalidad de x.</p></li>
<li><p><strong>Frecuencia relativa de x</strong>: proporción de veces que se repite cada modalidad de x.</p></li>
<li><p><strong>Frecuencia absoluta acumulada de x</strong>: nº de observaciones menores o iguales que cada modalidad de x (solo apto para cuantitativas o cualitativas ordinales ya que necesitamos una estructura de orden).</p></li>
<li><p><strong>Frecuencia relativa acumulada de x</strong>: proporción de valores menores o iguales que cada modalidad de x (solo apto para cuantitativas o cualitativas ordinales ya que necesitamos una estructura de orden).</p></li>
</ul>
</section>
<section id="tablas-de-frecuencias-1" class="slide level2">
<h2>Tablas de frecuencias</h2>
<table>
<colgroup>
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 24%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Valores de la variable</th>
<th style="text-align: left;">Frecuecias Absolutas</th>
<th style="text-align: left;">Frecuencias relativas</th>
<th style="text-align: left;">Frecuencias Absolutas acumuladas</th>
<th style="text-align: left;">Frecuencias Relativas acumuladas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(x_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(f_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(p_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(F_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(P_i\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="ejemplo" class="slide level2">
<h2>Ejemplo</h2>
<p>En un estudio sobre el <span class="hl-yellow"><strong>grupo sanguíneo realizado con</strong> <span class="math inline">\(n = 6313\)</span> individuos</span> se obtuvo la siguiente tabla de frecuencias La variable tiene <span class="math inline">\(k = 4\)</span> modalidades (O, A, B, AB).</p>
<table>
<colgroup>
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 24%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Valores de la variable</th>
<th style="text-align: left;">Frecuecias Absolutas</th>
<th style="text-align: left;">Frecuencias relativas</th>
<th style="text-align: left;">Frecuencias Absolutas acumuladas</th>
<th style="text-align: left;">Frecuencias Relativas acumuladas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(x_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(f_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(p_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(F_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(P_i\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">O</td>
<td style="text-align: left;">2892</td>
<td style="text-align: left;">2892/6313 = 0.458</td>
<td style="text-align: left;">2892</td>
<td style="text-align: left;">0.458</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">2625</td>
<td style="text-align: left;">1625/6313 = 0.416</td>
<td style="text-align: left;">5517</td>
<td style="text-align: left;">0.874</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">570</td>
<td style="text-align: left;">570/6313 = 0.09</td>
<td style="text-align: left;">6087</td>
<td style="text-align: left;">0.964</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AB</td>
<td style="text-align: left;">226</td>
<td style="text-align: left;">226/6313 = 0.036</td>
<td style="text-align: left;">6313</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">TOTAL</td>
<td style="text-align: left;">6313</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">6313</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p><span class="math display">\[\sum^k_{i=1} f_i=n\]</span> <span class="math display">\[\sum^k_{i=1} p_i = 1\]</span></p>
</section>
<section id="ejemplo-1" class="slide level2">
<h2>Ejemplo</h2>
<p>¿Qué <strong>conclusiones</strong> sacarías al ver esta tabla?</p>
<div class="fragment">
<p>La gran mayoría de esta muestra tiene grupo sanguíneo O ó A con un 46% y 42% respectivamente y que los grupos B y AB son minoritarios, siendo el AB la modalidad minoritaria.</p>
</div>
</section>
<section id="ejemplo-2" class="slide level2">
<h2>Ejemplo</h2>
<p>Otro ejemplo:las edades en un grupo de <span class="math inline">\(n = 25\)</span> estudiantes universitarios</p>
<table>
<colgroup>
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 24%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Valores de la variable</th>
<th style="text-align: left;">Frecuecias Absolutas</th>
<th style="text-align: left;">Frecuencias relativas</th>
<th style="text-align: left;">Frecuencias Absolutas acumuladas</th>
<th style="text-align: left;">Frecuencias Relativas acumuladas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(x_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(f_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(p_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(F_i\)</span></td>
<td style="text-align: left;"><span class="math inline">\(P_i\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">0.24</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">0.24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">0.20</td>
<td style="text-align: left;">11</td>
<td style="text-align: left;">0.44</td>
</tr>
<tr class="even">
<td style="text-align: left;">20</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">0.12</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">0.56</td>
</tr>
<tr class="odd">
<td style="text-align: left;">21</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">0.12</td>
<td style="text-align: left;">17</td>
<td style="text-align: left;">0.68</td>
</tr>
<tr class="even">
<td style="text-align: left;">22</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">0.12</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">0.80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">23</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">0.12</td>
<td style="text-align: left;">23</td>
<td style="text-align: left;">0.92</td>
</tr>
<tr class="even">
<td style="text-align: left;">24</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">0.08</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Total</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
</section>
<section id="ejemplo-3" class="slide level2">
<h2>Ejemplo</h2>
<p>Contesta a las siguientes preguntas sobre la tabla anterior:</p>
<ul>
<li><p>¿Cuántos individuos tienen 21 años?</p></li>
<li><p>¿Qué porcentaje de individuos tiene más de 19 años?</p></li>
</ul>
</section>
<section id="tablas-de-frecuencias-2" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>¿Qué pasa cuando tenemos una <span class="hl-red"><strong>variable cuantitativa continua</strong></span>?</p>
<p>Imagina que anotamos las puntuaciones obtenidas por 100 pacientes en un test psicológico en una escala continua del 0 al 100.</p>
<p><span class="math inline">\(x_i\)</span>: 11,42,58,25,48,18,45,35,59,29,35,2,37,68,70,31,44,84,64,82,26,42,51,29, 59,92,56,5,52,8,1,12,21,6,32,15,67,47,61,47,43,33,48,47,43,69,49,21,9,15,11,22, 29,14,31,46,19,49,51,71,52,32,51,44,58,60,43,65,73,62,3,17,39,22,40,65,30,31,16, 80,41,59,60,41,51,10,63,41,74,81,20,36,59,38,40,43,18,60,71,44.</p>
<p>¿Tiene sentido hacer una tabla de frecuencias? ¿Nos resume la información? ¿Qué podemos hacer?</p>
</section>
<section class="slide level2">

<h3 id="ejemplo-4">Ejemplo</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"><span class="math inline">\(x_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(f_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(p_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(F_i\)</span></th>
<th style="text-align: left;"><span class="math inline">\(P_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">[0,10]</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">0.08</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">0.08</td>
</tr>
<tr class="even">
<td style="text-align: left;">(10,20]</td>
<td style="text-align: left;">12</td>
<td style="text-align: left;">0.12</td>
<td style="text-align: left;">20</td>
<td style="text-align: left;">0.20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">(20,30]</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">0.1</td>
<td style="text-align: left;">30</td>
<td style="text-align: left;">0.30</td>
</tr>
<tr class="even">
<td style="text-align: left;">(30,40]</td>
<td style="text-align: left;">14</td>
<td style="text-align: left;">0.14</td>
<td style="text-align: left;">44</td>
<td style="text-align: left;">0.44</td>
</tr>
<tr class="odd">
<td style="text-align: left;">(40,50]</td>
<td style="text-align: left;">21</td>
<td style="text-align: left;">0.21</td>
<td style="text-align: left;">65</td>
<td style="text-align: left;">0.65</td>
</tr>
<tr class="even">
<td style="text-align: left;">(50,60]</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">0.16</td>
<td style="text-align: left;">81</td>
<td style="text-align: left;">0.81</td>
</tr>
<tr class="odd">
<td style="text-align: left;">(60,70]</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">0.10</td>
<td style="text-align: left;">91</td>
<td style="text-align: left;">0.91</td>
</tr>
<tr class="even">
<td style="text-align: left;">(70,80]</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">0.05</td>
<td style="text-align: left;">96</td>
<td style="text-align: left;">0.96</td>
</tr>
<tr class="odd">
<td style="text-align: left;">(80,90]</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">0.03</td>
<td style="text-align: left;">99</td>
<td style="text-align: left;">0.99</td>
</tr>
<tr class="even">
<td style="text-align: left;">(90,100]</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">0.01</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Total</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</section>
<section id="tablas-de-frecuencias-3" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>Los <strong>resúmenes numéricos</strong> deberíamos saber hacerlos en <code>R</code> con <code>datos |&gt; summarise()</code> pero… <span class="hl-yellow"><strong>¿y las tablas de frecuencia o contigencia (unidimensionales de momento)?</strong></span></p>
<div class="fragment">
<p>Por ejemplo, vamos a realizar un <span class="hl-yellow"><strong>conteo de frecuencias de la variable <code>hair_color</code></strong></span> de starwars. Para ello en tidyverse basta usar <code>count()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb733"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb733-1"><a href="#cb733-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb733-2"><a href="#cb733-2"></a>  <span class="fu">drop_na</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb733-3"><a href="#cb733-3"></a>  <span class="fu">count</span>(hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 2
   hair_color        n
   &lt;chr&gt;         &lt;int&gt;
 1 auburn            1
 2 auburn, grey      1
 3 auburn, white     1
 4 black            13
 5 blond             3
 6 blonde            1
 7 brown            18
 8 brown, grey       1
 9 grey              1
10 none             38
11 white             4</code></pre>
</div>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-4" class="slide level2">
<h2>Tablas de frecuencias</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb735"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb735-1"><a href="#cb735-1"></a>tabla_freq <span class="ot">&lt;-</span></span>
<span id="cb735-2"><a href="#cb735-2"></a>  starwars <span class="sc">|&gt;</span></span>
<span id="cb735-3"><a href="#cb735-3"></a>  <span class="fu">drop_na</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb735-4"><a href="#cb735-4"></a>  <span class="fu">count</span>(hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si te fijas la <span class="hl-yellow"><strong>frecuencia absoluta viene siempre como <span class="math inline">\(n\)</span></strong></span> pero podemos <strong>renombrarla</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb736"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb736-1"><a href="#cb736-1"></a>tabla_freq <span class="ot">&lt;-</span></span>
<span id="cb736-2"><a href="#cb736-2"></a>  tabla_freq <span class="sc">|&gt;</span> </span>
<span id="cb736-3"><a href="#cb736-3"></a>  <span class="fu">rename</span>(<span class="at">frec_abs =</span> n)</span>
<span id="cb736-4"><a href="#cb736-4"></a>tabla_freq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 2
   hair_color    frec_abs
   &lt;chr&gt;            &lt;int&gt;
 1 auburn               1
 2 auburn, grey         1
 3 auburn, white        1
 4 black               13
 5 blond                3
 6 blonde               1
 7 brown               18
 8 brown, grey          1
 9 grey                 1
10 none                38
11 white                4</code></pre>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-5" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>A esa tabla de frecuencias podemos añadirle la <span class="hl-yellow"><strong>frecuencia relativa</strong></span> calculada como cada frecuencia absoluta dividida por el total (la suma de todos)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb738"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb738-1"><a href="#cb738-1"></a>tabla_freq <span class="ot">&lt;-</span></span>
<span id="cb738-2"><a href="#cb738-2"></a>  tabla_freq <span class="sc">|&gt;</span> </span>
<span id="cb738-3"><a href="#cb738-3"></a>  <span class="fu">mutate</span>(<span class="st">"frec_rel"</span> <span class="ot">=</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs))</span>
<span id="cb738-4"><a href="#cb738-4"></a>tabla_freq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 3
   hair_color    frec_abs frec_rel
   &lt;chr&gt;            &lt;int&gt;    &lt;dbl&gt;
 1 auburn               1   0.0122
 2 auburn, grey         1   0.0122
 3 auburn, white        1   0.0122
 4 black               13   0.159 
 5 blond                3   0.0366
 6 blonde               1   0.0122
 7 brown               18   0.220 
 8 brown, grey          1   0.0122
 9 grey                 1   0.0122
10 none                38   0.463 
11 white                4   0.0488</code></pre>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-6" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>Este proceso podemos obtenerlo de forma <span class="hl-yellow"><strong>más sencilla con <code>R base</code></strong></span> (recuerda: funciones aplican a vectores aislados, que debes sacar de la tabla con <code>$</code> y sin tuberías) con la función <code>table()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb740"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb740-1"><a href="#cb740-1"></a>tabla_freq <span class="ot">&lt;-</span></span>
<span id="cb740-2"><a href="#cb740-2"></a> <span class="fu">table</span>(starwars<span class="sc">$</span>hair_color)</span>
<span id="cb740-3"><a href="#cb740-3"></a>tabla_freq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
       auburn  auburn, grey auburn, white         black         blond 
            1             1             1            13             3 
       blonde         brown   brown, grey          grey          none 
            1            18             1             1            38 
        white 
            4 </code></pre>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-7" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>También podemos obtener en <code>R base</code> las <span class="hl-yellow"><strong>frecuencias realtivas</strong></span> aplicando <code>prop.table()</code> a la tabla de frecuencias anterior.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb742"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb742-1"><a href="#cb742-1"></a><span class="fu">prop.table</span>(tabla_freq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
       auburn  auburn, grey auburn, white         black         blond 
   0.01219512    0.01219512    0.01219512    0.15853659    0.03658537 
       blonde         brown   brown, grey          grey          none 
   0.01219512    0.21951220    0.01219512    0.01219512    0.46341463 
        white 
   0.04878049 </code></pre>
</div>
</div>
<div class="fragment">
<p><span class="hl-green"><strong>Moraleja</strong></span>: no te cases de manera acérrima con una forma de hacer las cosas, ambos mundos van a ser necesarios.</p>
</div>
</section>
<section id="paréntesis-sample" class="slide level2">
<h2>Paréntesis: sample</h2>
<p>Imagina que queremos añadir una columna nueva llamada <code>rol</code> tal que a cada persona le asignamos de manera aleatoria <code>"bueno"</code> (con probabilidad 0.45), <code>"malo"</code> (con probabilidad 0.35), <code>"villano"</code> (con probabilidad 0.2)</p>
<div class="fragment">
<p>Para <span class="hl-yellow"><strong>generar experimentos aleatorios de una variable cualitativa</strong></span> contamos con <code>sample(x = ..., size = ..., replace = ..., probs = ...)</code>:</p>
<ul>
<li><code>x = c("cruz", "cara")</code>: las opciones que permitimos que salgan.</li>
<li><code>size = 20</code>: las veces que «tiramos la moneda».</li>
<li><code>replace = TRUE</code>: si permitimos reemplazamiento (pueden salir elementos repetidos) o no (en este caso solo podríamos tirar 2 veces).</li>
<li><code>prob = c(0.3, 0.7)</code>: las probabilidades de los posibles eventos</li>
</ul>
</div>
</section>
<section id="paréntesis-sample-1" class="slide level2">
<h2>Paréntesis: sample</h2>
<ul>
<li><code>x = c("cruz", "cara")</code>: las opciones que permitimos que salgan.</li>
<li><code>size = 20</code>: las veces que «tiramos la moneda».</li>
<li><code>replace = TRUE</code>: si permitimos reemplazamiento (pueden salir elementos repetidos) o no (en este caso solo podríamos tirar 2 veces).</li>
<li><code>prob = c(0.3, 0.7)</code>: las probabilidades de los posibles eventos</li>
</ul>
<p>En nuestro caso de ejemplo estamos tirando una <strong>moneda trucada (más caras que cruces) 20 veces</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb744"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb744-1"><a href="#cb744-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"cruz"</span>, <span class="st">"cara"</span>), <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "cruz" "cara" "cruz" "cara" "cruz" "cara" "cruz" "cruz" "cruz" "cara"
[11] "cruz" "cruz" "cruz" "cara" "cara" "cara" "cara" "cara" "cara" "cara"</code></pre>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-8" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>Imagina que queremos añadir una columna nueva llamada <code>rol</code> tal que a cada persona le asignamos de manera aleatoria <code>"bueno"</code> (con probabilidad 0.45), <code>"malo"</code> (con probabilidad 0.35), <code>"villano"</code> (con probabilidad 0.2)</p>
<p>Tendremos que hacer un <code>sample()</code> con las 3 opciones (y sus probabilidades) de tamaño 87 (tenemos 87 personajes).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb746"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb746-1"><a href="#cb746-1"></a>starwars <span class="ot">&lt;-</span> </span>
<span id="cb746-2"><a href="#cb746-2"></a>  starwars <span class="sc">|&gt;</span> </span>
<span id="cb746-3"><a href="#cb746-3"></a>  <span class="fu">mutate</span>(<span class="st">"rol"</span> <span class="ot">=</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">"bueno"</span>, <span class="st">"malo"</span>, <span class="st">"villano"</span>), <span class="at">size =</span> <span class="dv">87</span>,</span>
<span id="cb746-4"><a href="#cb746-4"></a>                        <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.45</span>, <span class="fl">0.35</span>, <span class="fl">0.2</span>)),</span>
<span id="cb746-5"><a href="#cb746-5"></a>         <span class="at">.after =</span> name)</span>
<span id="cb746-6"><a href="#cb746-6"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 15
   name      rol   height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 Luke Sky… bueno    172    77 blond      fair       blue            19   male 
 2 C-3PO     malo     167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 R2-D2     bueno     96    32 &lt;NA&gt;       white, bl… red             33   none 
 4 Darth Va… bueno    202   136 none       white      yellow          41.9 male 
 5 Leia Org… bueno    150    49 brown      light      brown           19   fema…
 6 Owen Lars malo     178   120 brown, gr… light      blue            52   male 
 7 Beru Whi… malo     165    75 brown      light      blue            47   fema…
 8 R5-D4     vill…     97    32 &lt;NA&gt;       white, red red             NA   none 
 9 Biggs Da… malo     183    84 black      light      brown           24   male 
10 Obi-Wan … vill…    182    77 auburn, w… fair       blue-gray       57   male 
# ℹ 77 more rows
# ℹ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-9" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>Si te fijas esa variable no solo es cualitativa sino ordinal. Entre las variables cualitativas tenemos <span class="hl-yellow"><strong>nominales</strong></span> (género, sexo, estado civil, etc) y <span class="hl-yellow"><strong>ordinales</strong></span> (estado de salud, rol, etc). ¿Cómo distinguirlas?</p>
<div class="fragment">
<p>La forma que tenemos en <code>R</code> de indicarle que una variable de tipo texto (universo informático) es una cualitativa y de qué tipo (universo estadística) es haciendo uso de lo que se conoce como <span class="hl-yellow"><strong>factores</strong></span></p>
</div>
</section>
<section id="paréntesis-factores" class="slide level2">
<h2>Paréntesis: factores</h2>
<p>En <code>R</code> las <span class="hl-yellow"><strong>variables cualitativas pueden ser tratadas como tales</strong></span> convirtiendo una cadena de texto a lo que se conoce como <span class="hl-yellow"><strong>factor</strong></span>. Por ejemplo, supongamos que tenemos un vector de notas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb748"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb748-1"><a href="#cb748-1"></a>notas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"suspenso"</span>, <span class="st">"notable"</span>, <span class="st">"suspenso"</span>, <span class="st">"aprobado"</span>, <span class="st">"notable"</span>, <span class="st">"suspenso"</span>)</span>
<span id="cb748-2"><a href="#cb748-2"></a>notas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "suspenso" "notable"  "suspenso" "aprobado" "notable"  "suspenso"</code></pre>
</div>
</div>
<div class="fragment">
<p>Para <span class="hl-yellow"><strong>convertir a factor nos basta con <code>factor()</code></strong></span>. ¿Qué notas diferente?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb750"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb750-1"><a href="#cb750-1"></a>notas_fct <span class="ot">&lt;-</span> <span class="fu">factor</span>(notas)</span>
<span id="cb750-2"><a href="#cb750-2"></a>notas_fct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] suspenso notable  suspenso aprobado notable  suspenso
Levels: aprobado notable suspenso</code></pre>
</div>
</div>
</div>
</section>
<section id="paréntesis-factores-1" class="slide level2">
<h2>Paréntesis: factores</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb752"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb752-1"><a href="#cb752-1"></a>notas_fct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] suspenso notable  suspenso aprobado notable  suspenso
Levels: aprobado notable suspenso</code></pre>
</div>
</div>
<p>Si te fijas ahora <span class="hl-yellow"><strong>tenemos disponibles unos niveles (levels)</strong></span>: son las posibles modalidades de nuestra variable cualitativa, el soporte, de manera que aunque borremos uno de ellos (vamos a borrar todos los aprobados), la opción sigue disponible si entrase un dato nuevo (algo así como un menú de opciones permitidas)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb754"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb754-1"><a href="#cb754-1"></a>notas_fct[notas_fct <span class="sc">!=</span> <span class="st">"aprobado"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] suspenso notable  suspenso notable  suspenso
Levels: aprobado notable suspenso</code></pre>
</div>
</div>
</section>
<section id="paréntesis-factores-2" class="slide level2">
<h2>Paréntesis: factores</h2>
<p>En el caso de las <span class="hl-yellow"><strong>cualitativas ordinales podemos incluso establecer una jerarquía</strong></span>, indicando explícitamente los niveles y <code>ordered = TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb756"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb756-1"><a href="#cb756-1"></a>notas_fct_ord <span class="ot">&lt;-</span> <span class="fu">factor</span>(notas, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"aprobado"</span>, <span class="st">"notable"</span>, <span class="st">"suspenso"</span>),</span>
<span id="cb756-2"><a href="#cb756-2"></a>                        <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb756-3"><a href="#cb756-3"></a>notas_fct_ord</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] suspenso notable  suspenso aprobado notable  suspenso
Levels: aprobado &lt; notable &lt; suspenso</code></pre>
</div>
</div>
<p>Fíjate que ahora tenemos una <span class="hl-yellow"><strong>jerarquía</strong></span> y aunque sea cualitativa podemos buscar <span class="hl-yellow"><strong>elementos &lt;= o &gt;= que otros</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb758"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb758-1"><a href="#cb758-1"></a>notas_fct_ord[notas_fct_ord <span class="sc">&lt;=</span> <span class="st">"notable"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] notable  aprobado notable 
Levels: aprobado &lt; notable &lt; suspenso</code></pre>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-10" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>Volvamos a nuestro ejemplo: ¿cómo convertir nuestra nueva variable rol en una variable cualitativa ordinal (en orden de maldad)?</p>
<div class="fragment">
<p>Debemos usar el concepto de factor pero para no aislar la variable de su tabla, lo introduciremos en un <code>mutate()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb760"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb760-1"><a href="#cb760-1"></a>starwars <span class="ot">&lt;-</span></span>
<span id="cb760-2"><a href="#cb760-2"></a>  starwars <span class="sc">|&gt;</span> </span>
<span id="cb760-3"><a href="#cb760-3"></a>  <span class="fu">mutate</span>(<span class="st">"rol"</span> <span class="ot">=</span> <span class="fu">factor</span>(rol, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"bueno"</span>, <span class="st">"malo"</span>, <span class="st">"villano"</span>),</span>
<span id="cb760-4"><a href="#cb760-4"></a>                        <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-11" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>Cuando tenemos una variable ordinal no solo vamos a poder calcular la tabla de frecuencias absoluta y relativa…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb761"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb761-1"><a href="#cb761-1"></a>tabla_freq <span class="ot">&lt;-</span></span>
<span id="cb761-2"><a href="#cb761-2"></a>  starwars <span class="sc">|&gt;</span> </span>
<span id="cb761-3"><a href="#cb761-3"></a>  <span class="fu">count</span>(rol) <span class="sc">|&gt;</span> </span>
<span id="cb761-4"><a href="#cb761-4"></a>  <span class="fu">mutate</span>(<span class="st">"frec_rel"</span> <span class="ot">=</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span>
<span id="cb761-5"><a href="#cb761-5"></a>tabla_freq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  rol         n frec_rel
  &lt;ord&gt;   &lt;int&gt;    &lt;dbl&gt;
1 bueno      40    0.460
2 malo       32    0.368
3 villano    15    0.172</code></pre>
</div>
<div class="sourceCode cell-code" id="cb763"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb763-1"><a href="#cb763-1"></a><span class="co"># o bien</span></span>
<span id="cb763-2"><a href="#cb763-2"></a><span class="fu">table</span>(starwars<span class="sc">$</span>rol)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  bueno    malo villano 
     40      32      15 </code></pre>
</div>
</div>
</section>
<section id="tablas-de-frecuencias-12" class="slide level2">
<h2>Tablas de frecuencias</h2>
<p>…sino que al tener una <span class="hl-yellow"><strong>jerarquía de orden</strong></span> (fíjate que salen automáticamente ordenados) vamos a poder calcular las <span class="hl-yellow"><strong>frecuencias acumuladas</strong></span> con <code>cumsum()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb765"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb765-1"><a href="#cb765-1"></a>tabla_freq <span class="ot">&lt;-</span></span>
<span id="cb765-2"><a href="#cb765-2"></a>  tabla_freq <span class="sc">|&gt;</span></span>
<span id="cb765-3"><a href="#cb765-3"></a>  <span class="fu">mutate</span>(<span class="st">"frec_abs_acum"</span> <span class="ot">=</span> <span class="fu">cumsum</span>(n),</span>
<span id="cb765-4"><a href="#cb765-4"></a>         <span class="st">"frec_rel_acum"</span> <span class="ot">=</span> <span class="fu">cumsum</span>(frec_rel))</span>
<span id="cb765-5"><a href="#cb765-5"></a>tabla_freq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  rol         n frec_rel frec_abs_acum frec_rel_acum
  &lt;ord&gt;   &lt;int&gt;    &lt;dbl&gt;         &lt;int&gt;         &lt;dbl&gt;
1 bueno      40    0.460            40         0.460
2 malo       32    0.368            72         0.828
3 villano    15    0.172            87         1    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb767"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb767-1"><a href="#cb767-1"></a><span class="co"># o bien</span></span>
<span id="cb767-2"><a href="#cb767-2"></a><span class="fu">cumsum</span>(<span class="fu">table</span>(starwars<span class="sc">$</span>rol))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  bueno    malo villano 
     40      72      87 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb769"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb769-1"><a href="#cb769-1"></a><span class="fu">cumsum</span>(<span class="fu">prop.table</span>(<span class="fu">table</span>(starwars<span class="sc">$</span>rol)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    bueno      malo   villano 
0.4597701 0.8275862 1.0000000 </code></pre>
</div>
</div>
</section>
<section id="tu-turno-5-1" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-15" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-15-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-15-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-15-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-15-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-15-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-15-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-15-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li><li><a href="#tabset-15-8"><span class="hl-yellow"><strong>Ejercicio 8</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-15-1">
<p>📝 Para repasar lo aprendido vamos a poner todo en práctica con el dataset <code>SatisfaccionPacientes.csv</code> que tenéis subido al campus. <span class="hl-yellow"><strong>¿Cómo importarlo?</strong></span>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb771"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb771-1"><a href="#cb771-1"></a><span class="fu">library</span>(readr) <span class="co"># dentro de tidyverse</span></span>
<span id="cb771-2"><a href="#cb771-2"></a><span class="co"># en mi caso tengo el .csv en una carpeta datos dentro del proyecto</span></span>
<span id="cb771-3"><a href="#cb771-3"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb771-4"><a href="#cb771-4"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/SatisfaccionPacientes.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb771-5"><a href="#cb771-5"></a>  <span class="co"># la función clean_names del paquete janitor </span></span>
<span id="cb771-6"><a href="#cb771-6"></a>  <span class="co"># nos normaliza nombres de variables</span></span>
<span id="cb771-7"><a href="#cb771-7"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-2">
<p>📝 Aplica el código que sea necesario para responder a estas preguntas. ¿Cuál es el tamaño muestral? ¿Cuántas variables tenemos? ¿Cuántas modalidades tenemos en la variable <code>estado_civil</code> (y cuantas observaciones en cada una)?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb772"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb772-1"><a href="#cb772-1"></a><span class="co"># Tamaño muestral / número de observaciones</span></span>
<span id="cb772-2"><a href="#cb772-2"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(datos)</span>
<span id="cb772-3"><a href="#cb772-3"></a></span>
<span id="cb772-4"><a href="#cb772-4"></a><span class="co"># Número de variables</span></span>
<span id="cb772-5"><a href="#cb772-5"></a>p <span class="ot">&lt;-</span> <span class="fu">ncol</span>(datos)</span>
<span id="cb772-6"><a href="#cb772-6"></a></span>
<span id="cb772-7"><a href="#cb772-7"></a><span class="co"># ¿Qué modalidades tenemos?</span></span>
<span id="cb772-8"><a href="#cb772-8"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb772-9"><a href="#cb772-9"></a>  <span class="fu">count</span>(estado_civil)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-3">
<p>📝 Determina el tipo de variable (cuantitativa vs.&nbsp;cualitativa).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb773"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb773-1"><a href="#cb773-1"></a><span class="co"># Variables cuantitativas: tiempo, grado satisfacción, número de visitas</span></span>
<span id="cb773-2"><a href="#cb773-2"></a><span class="co"># Variables cualitativas: género, estado civil, estado salud</span></span>
<span id="cb773-3"><a href="#cb773-3"></a><span class="fu">glimpse</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-4">
<p>📝 Obten tablas de frecuencias (absoluta y relativa) en el caso de las cualitativas NOMINALES. Con ella intenta responder a las preguntas: a) ¿cuántas mujeres hay? b) ¿qué % de individuos están casados?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb774"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb774-1"><a href="#cb774-1"></a><span class="co"># no podemos calcular acumulados ya que  genero es nominal</span></span>
<span id="cb774-2"><a href="#cb774-2"></a>freq_genero <span class="ot">&lt;-</span></span>
<span id="cb774-3"><a href="#cb774-3"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb774-4"><a href="#cb774-4"></a>  <span class="fu">count</span>(genero) <span class="sc">|&gt;</span> </span>
<span id="cb774-5"><a href="#cb774-5"></a>  <span class="fu">rename</span>(<span class="at">frecuencia_abs =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb774-6"><a href="#cb774-6"></a>  <span class="fu">mutate</span>(<span class="at">frecuencia_rel =</span> frecuencia_abs<span class="sc">/</span><span class="fu">sum</span>(frecuencia_abs))</span>
<span id="cb774-7"><a href="#cb774-7"></a><span class="co"># Hay 53 mujeres</span></span>
<span id="cb774-8"><a href="#cb774-8"></a></span>
<span id="cb774-9"><a href="#cb774-9"></a>freq_estado_civil <span class="ot">&lt;-</span></span>
<span id="cb774-10"><a href="#cb774-10"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb774-11"><a href="#cb774-11"></a>  <span class="fu">count</span>(estado_civil) <span class="sc">|&gt;</span> </span>
<span id="cb774-12"><a href="#cb774-12"></a>  <span class="fu">rename</span>(<span class="at">frecuencia_abs =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb774-13"><a href="#cb774-13"></a>  <span class="fu">mutate</span>(<span class="at">frecuencia_rel =</span> frecuencia_abs<span class="sc">/</span><span class="fu">sum</span>(frecuencia_abs))</span>
<span id="cb774-14"><a href="#cb774-14"></a><span class="co"># Hay 26% personas casadas</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-5">
<p>📝 Resúmenes</p>
</div>
<div id="tabset-15-6">
<p>📝 Resúmenes</p>
</div>
<div id="tabset-15-7">
<p>📝 Resúmenes</p>
</div>
<div id="tabset-15-8">
<p>📝 gráfico</p>
</div>
</div>
</div>
</section>
<section id="caso-practico-5-1" class="slide level2">
<h2>🐣 Caso práctico: encuesta de satisfacción</h2>
<p>Vamos a seguir poniendo en práctica lo aprendido el dataset <code>SatisfaccionPacientes.csv</code> que tenéis subido al campus.</p>
<p>&nbsp;</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/descriptiva-inferencia-isciii/#caso-pr%C3%A1ctico-encuesta-de-satisfacci%C3%B3n"><strong>workbook</strong></a></p>
</section></section>
<section>
<section id="descriptiva-bivariante" class="title-slide slide level1 center">
<h1>Clase 7: <span class="flow">bivariante cualitativa</span></h1>
<p><span style="color:#444442;"><strong>Inferencia y análisis de variables cualitativas</strong></span></p>
<ul>
<li><a href="#/caso-practico-5-6">🐣 Caso práctico: encuestas de satisfacción</a></li>
<li><a href="#/extra-dataviz">👾 Materiales extras visualización</a></li>
<li><a href="#/planificacion">📆 Planificación</a></li>
</ul>
</section>
<section id="introducción-a-inferencia" class="slide level2">
<h2>Introducción a inferencia</h2>
<p>La <span class="hl-yellow"><strong>inferencia estadística</strong></span> es un conjunto de métodos y técnicas que permite <span class="hl-yellow"><strong>inferir conclusiones sobre una población a partir de una muestra</strong></span> de datos.</p>
<div class="fragment">
<p>Su propósito es utilizar la información muestral para estimar características de la población, probar hipótesis y realizar predicciones, basado en el cálculo de <span class="hl-yellow"><strong>estadísticos</strong></span></p>
<ul>
<li><p><span class="hl-yellow"><strong>Parámetro</strong></span>: medida que describe una característica de la <strong>población</strong> (ejemplo: la media poblacional <span class="math inline">\(\mu\)</span> de la estatura de las mujeres en España).</p></li>
<li><p><span class="hl-yellow"><strong>Estadístico</strong></span>: medida que describe una característica de la <strong>muestra</strong> (ejemplo: la media muestral <span class="math inline">\(\overline{x}\)</span> de un conjunto de 100 mujeres).</p></li>
</ul>
</div>
</section>
<section id="introducción-a-inferencia-1" class="slide level2">
<h2>Introducción a inferencia</h2>
<p>Haciendo uso de <strong>estadísticos que aproximen una correcta estimación de los parámetros</strong>, los <span class="hl-yellow"><strong>contraste de hipótesis</strong></span> son procedimientos estadísticos para <span class="hl-yellow"><strong>tomar decisiones sobre la validez de una afirmación acerca de una población</strong></span> en función de los datos muestrales.</p>
<div class="fragment">
<p>La idea es muy parecido a un <strong>juicio</strong>: con las pruebas (muestra) el jurado (estadístico) deben decidir sobre tu culpabilidad real (población), pudiendo ser declarado <strong>culpable</strong> o <strong>no culpable</strong>.</p>
</div>
<div class="fragment">
<p>Este proceso implica formula</p>
<ul>
<li><p><span class="hl-yellow"><strong>Hipótesis nula</strong> <span class="math inline">\(H_0\)</span></span>: es una afirmación generalmente representa una <strong>posición de no efecto o no diferencia</strong> (ejemplo: entras siendo no culpable a un juicio)</p></li>
<li><p><span class="hl-yellow"><strong>Hipótesis alternativa</strong> <span class="math inline">\(H_0\)</span></span>: es una afirmación que <span class="hl-yellow"><strong>se acepta si se rechaza la hipótesis nula</strong></span>. Representa un efecto o diferencia (ejemplo: culpable)</p></li>
</ul>
</div>
</section>
<section id="introducción-a-inferencia-2" class="slide level2">
<h2>Introducción a inferencia</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Hipótesis nula</strong> <span class="math inline">\(H_0\)</span></span>: es una afirmación generalmente representa una <strong>posición de no efecto o no diferencia</strong> (ejemplo: entras siendo no culpable a un juicio)</p></li>
<li><p><span class="hl-yellow"><strong>Hipótesis alternativa</strong> <span class="math inline">\(H_1\)</span></span>: es una afirmación que <span class="hl-yellow"><strong>se acepta si se rechaza la hipótesis nula</strong></span>. Representa un efecto o diferencia (ejemplo: culpable)</p></li>
</ul>
<p>La idea es similar a la del juicio: solo vamos a <span class="hl-yellow"><strong>rechazar</strong> <span class="math inline">\(H_0\)</span> (es decir, aceptar <span class="math inline">\(H_1\)</span>) si hay MUCHAS EVIDENCIAS en la muestra</span> (solo se condena culpable a una persona si hay muchas evidencias que demuestran su culpabilidad, pero el acusado no tiene que demostrar su inocencia).</p>
<div class="fragment">
<p>Llamaremos <span class="hl-yellow"><strong>nivel de significancia</strong> <span class="math inline">\(\alpha\)</span></span> a la probabilidad de <span class="hl-red"><strong>rechazar la hipótesis nula cuando es verdadera</strong></span> (condenar a un inocente, conocido como <strong>error tipo I</strong>. Normalmente <span class="math inline">\(\alpha = 0.05\)</span> aunque se pueden usar otros valores como 0.01 o 0.10 (a decidir ANTES de realizar el contraste.)</p>
</div>
</section>
<section id="introducción-a-inferencia-3" class="slide level2">
<h2>Introducción a inferencia</h2>
<p><span class="hl-yellow"><strong>Ejemplo</strong></span>: supongamos que estamos probando si un nuevo medicamento tiene un efecto en la presión arterial <span class="math inline">\(\mu\)</span></p>
<p><span class="math display">\[H_0:~\mu = \mu_0~\text{(medicamento no tiene efecto sobre la presión arterial)}\]</span> <span class="math display">\[H_1:~\mu \neq \mu_0~\text{(medicamento SI tiene efecto sobre la presión arterial)}\]</span></p>
<p>donde <span class="math inline">\(\mu_0\)</span> es la media de la presión arterial antes del tratamiento.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Decisión</th>
<th style="text-align: center;"><span class="math inline">\(H_0\)</span> es cierta</th>
<th style="text-align: center;"><span class="math inline">\(H_1\)</span> es cierta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Se decide rechazar <span class="math inline">\(H_0\)</span></td>
<td style="text-align: center;">Error de tipo I</td>
<td style="text-align: center;">Acierto</td>
</tr>
<tr class="even">
<td style="text-align: center;">Se decide no rechazar <span class="math inline">\(H_0\)</span></td>
<td style="text-align: center;">Acierto</td>
<td style="text-align: center;">Error de tipo II</td>
</tr>
</tbody>
</table>
</section>
<section id="introducción-a-inferencia-4" class="slide level2">
<h2>Introducción a inferencia</h2>
<p>pva-lor</p>
<p>El p-valor Es uno de los conceptos más importantes en Estadística</p>
<p>Es la probabilidad de obtener el valor muestral u otro más discrepante o contradictorio con la H 0 H 0 ​ , si H 0 H 0 ​ fuera cierta.</p>
<p>Si los datos son muy discrepantes con la H 0 H 0 ​ , sería poco probable obtener otrps más discrepantes (p-valor pequeño &lt; 0.05)</p>
<p>Si los dayos son poco discrepantes con la H 0 H 0 ​ , sería bastante probable obtener otros más discrepantes. (p-valor grande &gt; 0.05)</p>
<p>Interpretación:</p>
<p>Si p-valor &lt; 0.05 =&gt; Se rechaza H 0 H 0 ​ (resultado significativo)</p>
<p>Si p-valor &gt; 0.05 =&gt; No se rechaza H 0 H 0 ​ (resultado no significativo) —</p>
</section>
<section id="tablas-de-frecuencia" class="slide level2">
<h2>Tablas de frecuencia</h2>
</section>
<section id="contrastes-de-independencia" class="slide level2">
<h2>Contrastes de independencia</h2>
</section>
<section id="test-exacto-de-fisher" class="slide level2">
<h2>Test exacto de Fisher</h2>
</section>
<section id="medidas-de-asociación" class="slide level2">
<h2>Medidas de asociación</h2>
<p>OR/RR</p>
</section></section>
<section>
<section id="descriptiva-bi-cuanti" class="title-slide slide level1 center">
<h1>Clase 8: <span class="flow">inferencia cuanti</span></h1>
<p><span style="color:#444442;"><strong>Estadística bivariante: análisis de variables cuantitativas. Correlación</strong></span></p>
</section>
<section id="correlación" class="slide level2">
<h2>Correlación</h2>
</section>
<section id="biserial" class="slide level2">
<h2>Biserial…</h2>
</section>
<section id="intro-regresión-lineal" class="slide level2">
<h2>Intro regresión lineal</h2>
</section></section>
<section>
<section id="reg-lineal" class="title-slide slide level1 center">
<h1>Clase 9: <span class="flow">regresión lineal</span></h1>
<p><span style="color:#444442;"><strong>Primer modelo: regresión lineal</strong></span></p>
</section>
<section id="pendiente" class="slide level2">
<h2>pendiente…</h2>
</section>
<section class="slide level2">

</section></section>
<section id="materiales-extra" class="title-slide slide level1 center">
<h1>Materiales extras</h1>
<ul>
<li><a href="#/extra-Rbase">💻 R base</a></li>
<li><a href="#/extra-tidyverse">💻 Tidyverse</a></li>
<li><a href="#/extra-dataviz">💻 Dataviz en R</a></li>
<li><a href="#/github">💻 Github</a></li>
</ul>
</section>

<section>
<section id="extra-Rbase" class="title-slide slide level1 center">
<h1>Materiales extras: R base</h1>
<ul>
<li><a href="#/bucles">💻 Bucles en R</a></li>
<li><a href="https://javieralvarezliebana.quarto.pub/if-else-bucles-funciones-isciii/">🐣 Casos prácticos bucles + if-else</a></li>
<li><a href="#/bucles">💻 Funciones en R</a></li>
<li><a href="https://javieralvarezliebana.quarto.pub/if-else-bucles-funciones-isciii/">🐣 Casos prácticos bucles + if-else</a></li>
</ul>
</section>
<section id="creando-funciones-funciones" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones {#funciones}</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, además podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>. ¿Cómo <span class="hl-purple"><strong>crear nuestra propia función</strong></span>? Veamos su <strong>esquema básico</strong>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extraños). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</p></li>
<li><p>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</p></li>
<li><p><span class="hl-yellow"><strong>Cuerpo</strong></span> de la función dentro de <code>{ }</code>.</p></li>
<li><p>Finalizamos la función con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb775"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb775-1" class="hljs-ln-code"><a href="#cb775-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb775-2" class="hljs-ln-code"><a href="#cb775-2"></a>  </span>
<span id="cb775-3" class="hljs-ln-code"><a href="#cb775-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, además podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>. ¿Cómo <span class="hl-purple"><strong>crear nuestra propia función</strong></span>? Veamos su <strong>esquema básico</strong>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extraños). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</p></li>
<li><p>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</p></li>
<li><p><span class="hl-yellow"><strong>Cuerpo</strong></span> de la función dentro de <code>{ }</code>.</p></li>
<li><p>Finalizamos la función con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb776"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb776-1" class="hljs-ln-code"><a href="#cb776-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb776-2" class="hljs-ln-code"><a href="#cb776-2"></a>  </span>
<span id="cb776-3" class="hljs-ln-code"><a href="#cb776-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, además podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>. ¿Cómo <span class="hl-purple"><strong>crear nuestra propia función</strong></span>? Veamos su <strong>esquema básico</strong>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extraños). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</p></li>
<li><p>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</p></li>
<li><p><span class="hl-yellow"><strong>Cuerpo</strong></span> de la función dentro de <code>{ }</code>.</p></li>
<li><p>Finalizamos la función con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb777"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb777-1" class="hljs-ln-code"><a href="#cb777-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb777-2" class="hljs-ln-code"><a href="#cb777-2"></a>  </span>
<span id="cb777-3" class="hljs-ln-code"><a href="#cb777-3"></a>  código a ejecutar</span>
<span id="cb777-4" class="hljs-ln-code"><a href="#cb777-4"></a>  </span>
<span id="cb777-5" class="hljs-ln-code"><a href="#cb777-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, además podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>. ¿Cómo <span class="hl-purple"><strong>crear nuestra propia función</strong></span>? Veamos su <strong>esquema básico</strong>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extraños). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</p></li>
<li><p>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</p></li>
<li><p><span class="hl-yellow"><strong>Cuerpo</strong></span> de la función dentro de <code>{ }</code>.</p></li>
<li><p>Finalizamos la función con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb778"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb778-1" class="hljs-ln-code"><a href="#cb778-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb778-2" class="hljs-ln-code"><a href="#cb778-2"></a>  </span>
<span id="cb778-3" class="hljs-ln-code"><a href="#cb778-3"></a>  código a ejecutar</span>
<span id="cb778-4" class="hljs-ln-code"><a href="#cb778-4"></a>  </span>
<span id="cb778-5" class="hljs-ln-code"><a href="#cb778-5"></a>  <span class="fu">return</span>(var_salida)</span>
<span id="cb778-6" class="hljs-ln-code"><a href="#cb778-6"></a>  </span>
<span id="cb778-7" class="hljs-ln-code"><a href="#cb778-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-3" class="slide level2">
<h2>Creando funciones</h2>
<ul>
<li><p><code>arg1, arg2, ...</code>: serán los <span class="hl-yellow"><strong>argumentos de entrada</strong></span>, los argumentos que toma la función para ejecutar el código que tiene dentro</p></li>
<li><p><code>código</code>: líneas de código que queramos que <span class="hl-yellow"><strong>ejecute la función</strong></span>.</p></li>
<li><p><code>return(var_salida)</code>: se introducirán los <span class="hl-yellow"><strong>argumentos de salida</strong></span>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb779"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb779-1"><a href="#cb779-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb779-2"><a href="#cb779-2"></a>  </span>
<span id="cb779-3"><a href="#cb779-3"></a>  <span class="co"># Código que queramos ejecutar</span></span>
<span id="cb779-4"><a href="#cb779-4"></a>  código</span>
<span id="cb779-5"><a href="#cb779-5"></a>  </span>
<span id="cb779-6"><a href="#cb779-6"></a>  <span class="co"># Salida</span></span>
<span id="cb779-7"><a href="#cb779-7"></a>  <span class="fu">return</span>(var_salida)</span>
<span id="cb779-8"><a href="#cb779-8"></a>  </span>
<span id="cb779-9"><a href="#cb779-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Todas las variables que definamos dentro de la función son <span class="hl-yellow"><strong>variables LOCALES: solo existirán dentro de la función</strong></span> salvo que especifiquemos lo contrario.</p>
</div>
</div>
</div>
</section>
<section id="creando-funciones-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>Veamos un ejemplo muy simple de función para <span class="hl-yellow"><strong>calcular el área de un rectángulo</strong></span>.</p>
<p>Dado que el área de un rectángulo se calcula como el <strong>producto de sus lados</strong>, necesitaremos precisamente eso, sus lados: esos serán los <span class="hl-yellow"><strong>argumentos de entrada</strong></span> y el <span class="hl-purple"><strong>valor a devolver</strong></span> será justo su <strong>área</strong> (<span class="math inline">\(lado_1 * lado_2\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb780"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb780-1" class="hljs-ln-code"><a href="#cb780-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb780-2" class="hljs-ln-code"><a href="#cb780-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb780-3" class="hljs-ln-code"><a href="#cb780-3"></a>  </span>
<span id="cb780-4" class="hljs-ln-code"><a href="#cb780-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-5" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>Veamos un ejemplo muy simple de función para <span class="hl-yellow"><strong>calcular el área de un rectángulo</strong></span>.</p>
<p>Dado que el área de un rectángulo se calcula como el <strong>producto de sus lados</strong>, necesitaremos precisamente eso, sus lados: esos serán los <span class="hl-yellow"><strong>argumentos de entrada</strong></span> y el <span class="hl-purple"><strong>valor a devolver</strong></span> será justo su <strong>área</strong> (<span class="math inline">\(lado_1 * lado_2\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb781"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb781-1" class="hljs-ln-code"><a href="#cb781-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb781-2" class="hljs-ln-code"><a href="#cb781-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb781-3" class="hljs-ln-code"><a href="#cb781-3"></a>  </span>
<span id="cb781-4" class="hljs-ln-code"><a href="#cb781-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb781-5" class="hljs-ln-code"><a href="#cb781-5"></a>  </span>
<span id="cb781-6" class="hljs-ln-code"><a href="#cb781-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-6" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>Veamos un ejemplo muy simple de función para <span class="hl-yellow"><strong>calcular el área de un rectángulo</strong></span>.</p>
<p>Dado que el área de un rectángulo se calcula como el <strong>producto de sus lados</strong>, necesitaremos precisamente eso, sus lados: esos serán los <span class="hl-yellow"><strong>argumentos de entrada</strong></span> y el <span class="hl-purple"><strong>valor a devolver</strong></span> será justo su <strong>área</strong> (<span class="math inline">\(lado_1 * lado_2\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb782"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb782-1" class="hljs-ln-code"><a href="#cb782-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb782-2" class="hljs-ln-code"><a href="#cb782-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb782-3" class="hljs-ln-code"><a href="#cb782-3"></a>  </span>
<span id="cb782-4" class="hljs-ln-code"><a href="#cb782-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb782-5" class="hljs-ln-code"><a href="#cb782-5"></a>  <span class="fu">return</span>(area)</span>
<span id="cb782-6" class="hljs-ln-code"><a href="#cb782-6"></a>  </span>
<span id="cb782-7" class="hljs-ln-code"><a href="#cb782-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="uso-de-funciones" class="slide level2">
<h2>Uso de funciones</h2>
<p>También podemos hacer una definición directa de las variables <strong>sin almacenar por el camino</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb783"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb783-1"><a href="#cb783-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb783-2"><a href="#cb783-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb783-3"><a href="#cb783-3"></a>  </span>
<span id="cb783-4"><a href="#cb783-4"></a>  <span class="fu">return</span>(lado_1 <span class="sc">*</span> lado_2)</span>
<span id="cb783-5"><a href="#cb783-5"></a>  </span>
<span id="cb783-6"><a href="#cb783-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>¿Cómo aplicar la función?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb784"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb784-1"><a href="#cb784-1"></a><span class="fu">calcular_area</span>(<span class="dv">5</span>, <span class="dv">3</span>) <span class="co"># área de un rectángulo 5 x 3 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb786"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb786-1"><a href="#cb786-1"></a><span class="fu">calcular_area</span>(<span class="dv">1</span>, <span class="dv">5</span>) <span class="co"># área de un rectángulo 1 x 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
</section>
<section id="uso-de-funciones-1" class="slide level2">
<h2>Uso de funciones</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Aunque no sea necesario, es <span class="hl-green"><strong>recomendable hacer explícita la llamada de los argumentos</strong></span>, especificando en el código qué valor es para cada argumento para que no dependa de su orden, haciendo el código más legible</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb788"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb788-1"><a href="#cb788-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>, <span class="at">lado_2 =</span> <span class="dv">3</span>) <span class="co"># área de un rectángulo 5 x 3 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb790"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb790-1"><a href="#cb790-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_2 =</span> <span class="dv">3</span>, <span class="at">lado_1 =</span> <span class="dv">5</span>) <span class="co"># área de un rectángulo 5 x 3 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
</div>
</section>
<section id="argumentos-por-defecto" class="slide level2">
<h2>Argumentos por defecto</h2>
<p>Imagina ahora que nos damos cuenta que el 90% de las veces usamos dicha función para <span class="hl-yellow"><strong>calcular por defecto el área de un cuadrado</strong></span> (es decir, solo necesitamos un lado). Para ello, podemos definir <span class="hl-yellow"><strong>argumentos por defecto</strong></span> en la función: tomarán dicho valor salvo que le asignemos otro.</p>
<p>¿Por qué no asignar <code>lado_2 = lado_1</code> <strong>por defecto</strong>, para ahorrar líneas de código y tiempo?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb792"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb792-1"><a href="#cb792-1"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb792-2"><a href="#cb792-2"></a>  </span>
<span id="cb792-3"><a href="#cb792-3"></a>  <span class="co"># Cuerpo de la función</span></span>
<span id="cb792-4"><a href="#cb792-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb792-5"><a href="#cb792-5"></a>  </span>
<span id="cb792-6"><a href="#cb792-6"></a>  <span class="co"># Resultado que devolvemos</span></span>
<span id="cb792-7"><a href="#cb792-7"></a>  <span class="fu">return</span>(area)</span>
<span id="cb792-8"><a href="#cb792-8"></a>  </span>
<span id="cb792-9"><a href="#cb792-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="argumentos-por-defecto-1" class="slide level2">
<h2>Argumentos por defecto</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb793"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb793-1"><a href="#cb793-1"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb793-2"><a href="#cb793-2"></a>  </span>
<span id="cb793-3"><a href="#cb793-3"></a>  <span class="co"># Cuerpo de la función</span></span>
<span id="cb793-4"><a href="#cb793-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb793-5"><a href="#cb793-5"></a>  </span>
<span id="cb793-6"><a href="#cb793-6"></a>  <span class="co"># Resultado que devolvemos</span></span>
<span id="cb793-7"><a href="#cb793-7"></a>  <span class="fu">return</span>(area)</span>
<span id="cb793-8"><a href="#cb793-8"></a>  </span>
<span id="cb793-9"><a href="#cb793-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora <span class="hl-yellow"><strong>por defecto</strong></span> el segundo lado será igual al primero (si se lo añadimos usará ambos).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb794"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb794-1"><a href="#cb794-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>) <span class="co"># cuadrado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb796"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb796-1"><a href="#cb796-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>, <span class="at">lado_2 =</span> <span class="dv">7</span>) <span class="co"># rectángulo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35</code></pre>
</div>
</div>
</section>
<section id="salida-múltiple" class="slide level2">
<h2>Salida múltiple</h2>
<p>Compliquemos un poco la función y añadamos en la salida los valores de cada lado, etiquetados como <code>lado_1</code> y <code>lado_2</code>, <span class="hl-yellow"><strong>empaquetando la salida en una vector</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb798" data-code-line-numbers="7-8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb798-1"><a href="#cb798-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb798-2"><a href="#cb798-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb798-3"><a href="#cb798-3"></a>  </span>
<span id="cb798-4"><a href="#cb798-4"></a>  <span class="co"># Cuerpo de la función</span></span>
<span id="cb798-5"><a href="#cb798-5"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb798-6"><a href="#cb798-6"></a>  </span>
<span id="cb798-7"><a href="#cb798-7"></a>  <span class="co"># Resultado</span></span>
<span id="cb798-8"><a href="#cb798-8"></a>  <span class="fu">return</span>(<span class="fu">c</span>(<span class="st">"area"</span> <span class="ot">=</span> area, <span class="st">"lado_1"</span> <span class="ot">=</span> lado_1, <span class="st">"lado_2"</span> <span class="ot">=</span> lado_2))</span>
<span id="cb798-9"><a href="#cb798-9"></a>  </span>
<span id="cb798-10"><a href="#cb798-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="salida-múltiple-1" class="slide level2">
<h2>Salida múltiple</h2>
<p>Podemos complicar un poco más la salida añadiendo una cuarta variable que nos diga, en función de los argumentos, <span class="hl-yellow"><strong>si rectángulo o cuadrado</strong></span>, teniendo que añadir en la salida una variable que de tipo caracter (o lógica).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb799" data-code-line-numbers="7-9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb799-1"><a href="#cb799-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb799-2"><a href="#cb799-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb799-3"><a href="#cb799-3"></a>  </span>
<span id="cb799-4"><a href="#cb799-4"></a>  <span class="co"># Cuerpo de la función</span></span>
<span id="cb799-5"><a href="#cb799-5"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb799-6"><a href="#cb799-6"></a>  </span>
<span id="cb799-7"><a href="#cb799-7"></a>  <span class="co"># Resultado</span></span>
<span id="cb799-8"><a href="#cb799-8"></a>  <span class="fu">return</span>(<span class="fu">c</span>(<span class="st">"area"</span> <span class="ot">=</span> area, <span class="st">"lado_1"</span> <span class="ot">=</span> lado_1, <span class="st">"lado_2"</span> <span class="ot">=</span> lado_2,</span>
<span id="cb799-9"><a href="#cb799-9"></a>           <span class="st">"tipo"</span> <span class="ot">=</span> <span class="fu">if_else</span>(lado_1 <span class="sc">==</span> lado_2, <span class="st">"cuadrado"</span>, <span class="st">"rectángulo"</span>)))</span>
<span id="cb799-10"><a href="#cb799-10"></a>  </span>
<span id="cb799-11"><a href="#cb799-11"></a>}</span>
<span id="cb799-12"><a href="#cb799-12"></a><span class="fu">calcular_area</span>(<span class="dv">5</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        area       lado_1       lado_2         tipo 
        "15"          "5"          "3" "rectángulo" </code></pre>
</div>
</div>
<div class="fragment">
<p><span class="hl-red"><strong>Problema</strong></span>: al intentar juntar números y texto, lo convierte todo a números. Podríamos guardarlo todo en un <code>tibble()</code> como hemos aprendido o en un objeto conocido en <code>R</code> como <span class="hl-yellow"><strong>listas</strong></span></p>
</div>
</section>
<section id="introducción-a-listas" class="slide level2">
<h2>Introducción a listas</h2>
<p>Veamos un pequeño resumen de los datos que ya conocemos:</p>
<ul>
<li><p><span class="hl-yellow"><strong>vectores</strong></span>: colección de elementos de igual tipo. Pueden ser números, caracteres o valores lógicos, entre otros.</p></li>
<li><p><span class="hl-yellow"><strong>matrices</strong></span>: colección BIDIMENSIONAL de elementos de igual tipo e igual longitud.</p></li>
<li><p><span class="hl-yellow"><strong>data.frame / tibble</strong></span>: colección BIDIMENSIONAL de elementos de igual longitud pero de cualquier tipo.</p></li>
</ul>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>listas</strong></span> serán <span class="hl-purple"><strong>colecciones de variables de diferente tipo y diferente longitud</strong></span>, con estructuras totalmente heterógeneas (incluso una lista puede tener dentro a su vez otra lista).</p>
</div>
</section>
<section id="introducción-a-listas-1" class="slide level2">
<h2>Introducción a listas</h2>
<p>Vamos a crear <span class="hl-yellow"><strong>nuestra primera lista</strong></span> con <code>list()</code> con tres elementos: el nombre de nuestros padres/madres, nuestro lugar de nacimiento y edades de nuestros hermanos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb801"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb801-1"><a href="#cb801-1"></a>var_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Paloma"</span>, <span class="st">"Gregorio"</span>)</span>
<span id="cb801-2"><a href="#cb801-2"></a>var_2 <span class="ot">&lt;-</span> <span class="st">"Madrid"</span></span>
<span id="cb801-3"><a href="#cb801-3"></a>var_3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">26</span>)</span>
<span id="cb801-4"><a href="#cb801-4"></a></span>
<span id="cb801-5"><a href="#cb801-5"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"progenitores"</span> <span class="ot">=</span> var_1, <span class="st">"lugar_nac"</span> <span class="ot">=</span> var_2, <span class="st">"edad_hermanos"</span> <span class="ot">=</span> var_3)</span>
<span id="cb801-6"><a href="#cb801-6"></a>lista</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$progenitores
[1] "Paloma"   "Gregorio"

$lugar_nac
[1] "Madrid"

$edad_hermanos
[1] 25 30 26</code></pre>
</div>
</div>
</section>
<section id="introducción-a-listas-2" class="slide level2">
<h2>Introducción a listas</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb803"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb803-1"><a href="#cb803-1"></a><span class="fu">length</span>(lista)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Si observas el objeto que hemos definido como lista, su <span class="hl-yellow"><strong>longitud</strong></span> del es de 3 ya que tenemos <strong>guardados tres elementos</strong>: un vector de caracteres (de longitud 2), un caracter (vector de longitud 1), y un vector de números (de longitud 3)</p>
<div class="fragment">
<p>Tenemos guardados elementos de <span class="hl-yellow"><strong>distinto tipo</strong></span> (algo que ya podíamos hacer) pero, además, de <strong>longitudes dispares</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb805"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb805-1"><a href="#cb805-1"></a><span class="fu">dim</span>(lista) <span class="co"># devolverá NULL al no tener dos dimensiones</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb807"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb807-1"><a href="#cb807-1"></a><span class="fu">class</span>(lista) <span class="co"># de tipo lista</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
</div>
</section>
<section id="introducción-a-listas-3" class="slide level2">
<h2>Introducción a listas</h2>
<p>Si los juntásemos con un <code>tibble()</code>, al tener distinta longitud, obtendríamos un <span class="hl-red"><strong>error</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb809"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb809-1"><a href="#cb809-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb809-2"><a href="#cb809-2"></a><span class="fu">tibble</span>(<span class="st">"progenitores"</span> <span class="ot">=</span> var_1, <span class="st">"lugar_nac"</span> <span class="ot">=</span> va_2, <span class="st">"edad_hermanos"</span> <span class="ot">=</span> var_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval_tidy(xs[[j]], mask): object 'va_2' not found</code></pre>
</div>
</div>
</section>
<section id="introducción-a-listas-4" class="slide level2">
<h2>Introducción a listas</h2>
<ul>
<li><span class="hl-yellow"><strong>Acceder por índice</strong></span>: con el operador <code>[[i]]</code> accedemos al <strong>elemento i-ésimo</strong> de la lista.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb811"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb811-1"><a href="#cb811-1"></a>lista[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Paloma"   "Gregorio"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Acceder por nombre</strong></span>: con <code>$nombre_elemento</code> accedemos por su nombre.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb813"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb813-1"><a href="#cb813-1"></a>lista<span class="sc">$</span>progenitores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Paloma"   "Gregorio"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>En contraposición, el <span class="hl-yellow"><strong>corchete simple</strong></span> nos permite acceder a <span class="hl-yellow"><strong>varios elementos</strong></span> a la vez</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb815"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb815-1"><a href="#cb815-1"></a><span class="co"># Varios elementos</span></span>
<span id="cb815-2"><a href="#cb815-2"></a>lista[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$progenitores
[1] "Paloma"   "Gregorio"

$lugar_nac
[1] "Madrid"</code></pre>
</div>
</div>
</div>
</section>
<section id="salida-múltiple-listas" class="slide level2">
<h2>Salida múltiple: listas</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb817" data-code-line-numbers="7-9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb817-1"><a href="#cb817-1"></a><span class="co"># Definición del nombre de función y argumentos de entrada</span></span>
<span id="cb817-2"><a href="#cb817-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb817-3"><a href="#cb817-3"></a>  </span>
<span id="cb817-4"><a href="#cb817-4"></a>  <span class="co"># Cuerpo de la función</span></span>
<span id="cb817-5"><a href="#cb817-5"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb817-6"><a href="#cb817-6"></a>  </span>
<span id="cb817-7"><a href="#cb817-7"></a>  <span class="co"># Resultado</span></span>
<span id="cb817-8"><a href="#cb817-8"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"area"</span> <span class="ot">=</span> area, <span class="st">"lado_1"</span> <span class="ot">=</span> lado_1, <span class="st">"lado_2"</span> <span class="ot">=</span> lado_2,</span>
<span id="cb817-9"><a href="#cb817-9"></a>           <span class="st">"tipo"</span> <span class="ot">=</span> <span class="fu">if_else</span>(lado_1 <span class="sc">==</span> lado_2, <span class="st">"cuadrado"</span>, <span class="st">"rectángulo"</span>)))</span>
<span id="cb817-10"><a href="#cb817-10"></a>  </span>
<span id="cb817-11"><a href="#cb817-11"></a>}</span>
<span id="cb817-12"><a href="#cb817-12"></a><span class="fu">calcular_area</span>(<span class="dv">5</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$area
[1] 15

$lado_1
[1] 5

$lado_2
[1] 3

$tipo
[1] "rectángulo"</code></pre>
</div>
</div>
</section>
<section id="orden-de-los-argumentos" class="slide level2">
<h2>Orden de los argumentos</h2>
<p>Antes nos daba igual el orden de los argumentos pero ahora el <span class="hl-yellow"><strong>orden de los argumentos de entrada importa</strong></span>, ya que en la salida incluimos <code>lado_1</code> y <code>lado_2</code>.</p>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Recomendación</strong></p>
</div>
<div class="callout-content">
<p>Como se comentaba, altamente recomendable hacer la llamada a la función <span class="hl-yellow"><strong>indicando explícitamente los argumentos</strong></span> para mejorar <strong>legibilidad e interpretabilidad</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb819"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb819-1"><a href="#cb819-1"></a><span class="co"># Equivalente a calcular_area(5, 3)</span></span>
<span id="cb819-2"><a href="#cb819-2"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>, <span class="at">lado_2 =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$area
[1] 15

$lado_1
[1] 5

$lado_2
[1] 3

$tipo
[1] "rectángulo"</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="funciones-generando-conocimiento" class="slide level2">
<h2>Funciones: generando conocimiento</h2>
<p>Parece una tontería lo que hemos hecho pero hemos cruzado una frontera importante: hemos pasado de <span class="hl-yellow"><strong>consumir conocimiento</strong></span> (código de otros paquetes, elaborado por otros/as), a <span class="hl-purple"><strong>generar conocimiento</strong></span>, creando nuestras propias funciones.</p>
<div class="fragment">
<p>Las funciones van a ser claves en tu día a día ya que te permitirá automatizar código que vas a repetir una y otra vez: empaquetando ese código bajo un alias (nombre de la función) vas a <span class="hl-yellow"><strong>poder usarlo una y otra vez sin necesidad de programarlo (por lo que hacer el doble de trabajo no implicará trabajar el doble)</strong></span></p>
</div>
</section>
<section id="variables-locales-vs-globales" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Un aspecto importante sobre el que reflexionar con las funciones: ¿qué sucede si <span class="hl-yellow"><strong>nombramos a una variable dentro</strong></span> de una función a la que se nos ha <strong>olvidado asignar</strong> un valor dentro de la misma?</p>
<div class="fragment">
<p>Debemos ser cautos al usar funciones en <code>R</code>, ya que debido a la <span class="hl-yellow"><strong>«regla lexicográfica»</strong></span>, si una variable no se define dentro de la función, <code>R</code> <span class="hl-purple"><strong>buscará dicha variable en el entorno</strong></span> de variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb821"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb821-1"><a href="#cb821-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb821-2"><a href="#cb821-2"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb821-3"><a href="#cb821-3"></a>    </span>
<span id="cb821-4"><a href="#cb821-4"></a>  <span class="fu">print</span>(x) <span class="co"># No devuelve nada, solo realiza la acción </span></span>
<span id="cb821-5"><a href="#cb821-5"></a>}</span>
<span id="cb821-6"><a href="#cb821-6"></a><span class="fu">funcion_ejemplo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-locales-vs-globales-1" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Si una variable <span class="hl-yellow"><strong>ya está definida fuera de la función (entorno global)</strong></span>, y además es usada dentro de cambiando su valor, el valor <span class="hl-yellow"><strong>solo cambia dentro</strong></span> pero <span class="hl-red"><strong>no en el entorno global</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb823"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb823-1"><a href="#cb823-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb823-2"><a href="#cb823-2"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb823-3"><a href="#cb823-3"></a>    </span>
<span id="cb823-4"><a href="#cb823-4"></a>  x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb823-5"><a href="#cb823-5"></a>  <span class="fu">print</span>(x) <span class="co"># lo que vale dentro</span></span>
<span id="cb823-6"><a href="#cb823-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb824"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb824-1"><a href="#cb824-1"></a><span class="co"># lo que vale dentro</span></span>
<span id="cb824-2"><a href="#cb824-2"></a><span class="fu">funcion_ejemplo</span>() <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb826"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb826-1"><a href="#cb826-1"></a><span class="co"># lo que vale fuera</span></span>
<span id="cb826-2"><a href="#cb826-2"></a><span class="fu">print</span>(x) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="variables-locales-vs-globales-2" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Si queremos que además de cambiar localmente lo haga <span class="hl-yellow"><strong>globalmente</strong></span> deberemos usar la <span class="hl-yellow"><strong>doble asignación</strong></span> (<code>&lt;&lt;-</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb828"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb828-1"><a href="#cb828-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb828-2"><a href="#cb828-2"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb828-3"><a href="#cb828-3"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb828-4"><a href="#cb828-4"></a>  </span>
<span id="cb828-5"><a href="#cb828-5"></a>  <span class="co"># no cambia globalmente, solo localmente</span></span>
<span id="cb828-6"><a href="#cb828-6"></a>  x <span class="ot">&lt;-</span> <span class="dv">3</span> </span>
<span id="cb828-7"><a href="#cb828-7"></a>  <span class="co"># cambia globalmente</span></span>
<span id="cb828-8"><a href="#cb828-8"></a>  y <span class="ot">&lt;&lt;-</span> <span class="dv">0</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb828-9"><a href="#cb828-9"></a>  </span>
<span id="cb828-10"><a href="#cb828-10"></a>  <span class="fu">print</span>(x)</span>
<span id="cb828-11"><a href="#cb828-11"></a>  <span class="fu">print</span>(y)</span>
<span id="cb828-12"><a href="#cb828-12"></a>}</span>
<span id="cb828-13"><a href="#cb828-13"></a></span>
<span id="cb828-14"><a href="#cb828-14"></a><span class="fu">funcion_ejemplo</span>() <span class="co"># lo que vale dentro</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3
[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb830"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb830-1"><a href="#cb830-1"></a>x <span class="co"># lo que vale fuera</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb832"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb832-1"><a href="#cb832-1"></a>y <span class="co"># lo que vale fuera</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="tu-turno-3-3" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-16" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-16-1"><span class="hl-yellow"><strong>Ej 1</strong></span></a></li><li><a href="#tabset-16-2"><span class="hl-yellow"><strong>Ej 2</strong></span></a></li><li><a href="#tabset-16-3"><span class="hl-yellow"><strong>Ej 3</strong></span></a></li><li><a href="#tabset-16-4"><span class="hl-yellow"><strong>Ej 4</strong></span></a></li><li><a href="#tabset-16-5"><span class="hl-yellow"><strong>Ej 5</strong></span></a></li><li><a href="#tabset-16-6"><span class="hl-yellow"><strong>Ej 6</strong></span></a></li><li><a href="#tabset-16-7"><span class="hl-yellow"><strong>Ej 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-16-1">
<p>📝 Modifica el código inferior para definir una función llamada <code>funcion_suma</code>, de forma que dados dos elementos, devuelve su suma.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb834"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb834-1"><a href="#cb834-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb834-2"><a href="#cb834-2"></a>  suma <span class="ot">&lt;-</span> <span class="co"># código a ejecutar</span></span>
<span id="cb834-3"><a href="#cb834-3"></a>  <span class="fu">return</span>()</span>
<span id="cb834-4"><a href="#cb834-4"></a>}</span>
<span id="cb834-5"><a href="#cb834-5"></a><span class="co"># Aplicamos la función</span></span>
<span id="cb834-6"><a href="#cb834-6"></a><span class="fu">suma</span>(<span class="dv">3</span>, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb835"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb835-1"><a href="#cb835-1"></a>funcion_suma <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb835-2"><a href="#cb835-2"></a>  suma <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb835-3"><a href="#cb835-3"></a>  <span class="fu">return</span>(suma)</span>
<span id="cb835-4"><a href="#cb835-4"></a>}</span>
<span id="cb835-5"><a href="#cb835-5"></a><span class="fu">funcion_suma</span>(<span class="dv">3</span>, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-2">
<p>📝 Modifica el código inferior para definir una función llamada <code>funcion_producto</code>, de forma que dados dos elementos, devuelve su producto, pero que por defecto calcule el cuadrado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb836"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb836-1"><a href="#cb836-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb836-2"><a href="#cb836-2"></a>  producto <span class="ot">&lt;-</span> <span class="co"># código de la multiplicación</span></span>
<span id="cb836-3"><a href="#cb836-3"></a>  <span class="fu">return</span>()</span>
<span id="cb836-4"><a href="#cb836-4"></a>}</span>
<span id="cb836-5"><a href="#cb836-5"></a><span class="fu">producto</span>(<span class="dv">3</span>)</span>
<span id="cb836-6"><a href="#cb836-6"></a><span class="fu">producto</span>(<span class="dv">3</span>, <span class="sc">-</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb837"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb837-1"><a href="#cb837-1"></a>funcion_producto <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">y =</span> x) {</span>
<span id="cb837-2"><a href="#cb837-2"></a>  producto <span class="ot">&lt;-</span> x <span class="sc">*</span> y</span>
<span id="cb837-3"><a href="#cb837-3"></a>  <span class="fu">return</span>(producto)</span>
<span id="cb837-4"><a href="#cb837-4"></a>}</span>
<span id="cb837-5"><a href="#cb837-5"></a><span class="fu">funcion_producto</span>(<span class="dv">3</span>)</span>
<span id="cb837-6"><a href="#cb837-6"></a><span class="fu">funcion_producto</span>(<span class="dv">3</span>, <span class="sc">-</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-3">
<p>📝 Define una función llamada <code>igualdad_nombres</code> que, dados dos nombres, nos diga si son iguales o no. Hazlo considerando importantes las mayúsculas, y sin que importen las mayúsculas. Usa el paquete <code>{stringr}</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb838"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb838-1"><a href="#cb838-1"></a><span class="co"># Distinguiendo mayúsculas</span></span>
<span id="cb838-2"><a href="#cb838-2"></a>igualdad_nombres <span class="ot">&lt;-</span> <span class="cf">function</span>(persona_1, persona_2) {</span>
<span id="cb838-3"><a href="#cb838-3"></a>  <span class="fu">return</span>(persona_1 <span class="sc">==</span> persona_2)</span>
<span id="cb838-4"><a href="#cb838-4"></a>}</span>
<span id="cb838-5"><a href="#cb838-5"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"javi"</span>)</span>
<span id="cb838-6"><a href="#cb838-6"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"Lucía"</span>)</span>
<span id="cb838-7"><a href="#cb838-7"></a></span>
<span id="cb838-8"><a href="#cb838-8"></a><span class="co"># Sin importar mayúsculas (ver también str_equal)</span></span>
<span id="cb838-9"><a href="#cb838-9"></a>igualdad_nombres <span class="ot">&lt;-</span> <span class="cf">function</span>(persona_1, persona_2) {</span>
<span id="cb838-10"><a href="#cb838-10"></a>  <span class="fu">return</span>(<span class="fu">str_to_upper</span>(persona_1) <span class="sc">==</span> <span class="fu">str_to_upper</span>(persona_2))</span>
<span id="cb838-11"><a href="#cb838-11"></a>}</span>
<span id="cb838-12"><a href="#cb838-12"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"javi"</span>)</span>
<span id="cb838-13"><a href="#cb838-13"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"Lucía"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-4">
<p>📝 Crea una función llamada <code>calculo_IMC</code> que, dados dos argumentos (peso y estatura en metros) y un nombre, devuelva una lista con el IMC (<span class="math inline">\(peso/(estatura_m^2)\)</span>) y el nombre.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb839"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb839-1"><a href="#cb839-1"></a>calculo_IMC <span class="ot">&lt;-</span> <span class="cf">function</span>(nombre, peso, estatura) {</span>
<span id="cb839-2"><a href="#cb839-2"></a>  </span>
<span id="cb839-3"><a href="#cb839-3"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"nombre"</span> <span class="ot">=</span> nombre, <span class="st">"IMC"</span> <span class="ot">=</span> peso<span class="sc">/</span>(estatura<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb839-4"><a href="#cb839-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-5">
<p>📝 Repite el ejercicio anterior pero con otro argumento opcional que se llame unidades (por defecto, <code>unidades = "metros"</code>). Desarrolla la función de forma que haga lo correcto si <code>unidades = "metros"</code> y si <code>unidades = "centímetros"</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb840"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb840-1"><a href="#cb840-1"></a>calculo_IMC <span class="ot">&lt;-</span> <span class="cf">function</span>(nombre, peso, estatura, <span class="at">unidades =</span> <span class="st">"metros"</span>) {</span>
<span id="cb840-2"><a href="#cb840-2"></a>  </span>
<span id="cb840-3"><a href="#cb840-3"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"nombre"</span> <span class="ot">=</span> nombre,</span>
<span id="cb840-4"><a href="#cb840-4"></a>              <span class="st">"IMC"</span> <span class="ot">=</span> peso<span class="sc">/</span>(<span class="fu">if_else</span>(unidades <span class="sc">==</span> <span class="st">"metros"</span>, estatura, estatura<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb840-5"><a href="#cb840-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-6">
<p>📝 Crea un tibble ficticio de 7 personas, con tres variables (inventa nombre, y simula peso, estatura en centímetros), y adapta la función <code>calculo_IMC()</code> de forma que obtengamos una cuarta columna con su IMC.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb841"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb841-1"><a href="#cb841-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"nombres"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>, <span class="st">"eva"</span>, <span class="st">"ana"</span>, <span class="st">"carlos"</span>, <span class="st">"leo"</span>, <span class="cn">NA</span>),</span>
<span id="cb841-2"><a href="#cb841-2"></a>                <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">7</span>, <span class="at">mean =</span> <span class="dv">70</span>, <span class="at">sd =</span> <span class="dv">1</span>),</span>
<span id="cb841-3"><a href="#cb841-3"></a>                <span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">7</span>, <span class="at">mean =</span> <span class="dv">168</span>, <span class="at">sd =</span> <span class="dv">5</span>))</span>
<span id="cb841-4"><a href="#cb841-4"></a></span>
<span id="cb841-5"><a href="#cb841-5"></a><span class="co"># IMPORTANTE. if_else trabaja de manera vectorial, elemento a elemento: la longitud de la</span></span>
<span id="cb841-6"><a href="#cb841-6"></a><span class="co"># condición (unidades == "metros" es un vector lógico de longitud uno) debe ser igual que</span></span>
<span id="cb841-7"><a href="#cb841-7"></a><span class="co"># lo que le decimos que haga cuando es TRUE y FALSE (en este caso, condicion tiene longitud 1</span></span>
<span id="cb841-8"><a href="#cb841-8"></a><span class="co"># pero al aplicarla lo que devuelve es vector de tamaño 7, por eso hay que usar ifelse (sin _))</span></span>
<span id="cb841-9"><a href="#cb841-9"></a>calculo_IMC <span class="ot">&lt;-</span> <span class="cf">function</span>(nombre, peso, estatura, <span class="at">unidades =</span> <span class="st">"metros"</span>) {</span>
<span id="cb841-10"><a href="#cb841-10"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"nombre"</span> <span class="ot">=</span> nombre,</span>
<span id="cb841-11"><a href="#cb841-11"></a>              <span class="st">"IMC"</span> <span class="ot">=</span> peso<span class="sc">/</span>(<span class="fu">ifelse</span>(unidades <span class="sc">==</span> <span class="st">"metros"</span>, estatura, estatura<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb841-12"><a href="#cb841-12"></a>}</span>
<span id="cb841-13"><a href="#cb841-13"></a>datos <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">IMC =</span> <span class="fu">calculo_IMC</span>(nombres, peso, estatura, <span class="at">unidades =</span> <span class="st">"centímetros"</span>)<span class="sc">$</span>IMC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-7">
<p>📝 Crea una función llamada <code>atajo</code> que tenga dos argumentos numéricos <code>x</code> e <code>y</code>. Si ambos son iguales, debes devolver <code>"iguales"</code> y hacer que la función acaba automáticamente (piensa cuándo una función sale). OJO: <code>x</code> e <code>y</code> podrían ser vectores. Si son distintos (de igual de longitud) calcula la proporción de elementos diferentes. Si son distintos (por ser distinta longitud), devuelve los elementos que no sean comunes.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb842"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb842-1"><a href="#cb842-1"></a>atajo <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb842-2"><a href="#cb842-2"></a>  </span>
<span id="cb842-3"><a href="#cb842-3"></a>  <span class="cf">if</span> (<span class="fu">all</span>(x <span class="sc">==</span> y) <span class="sc">&amp;</span> <span class="fu">length</span>(x) <span class="sc">==</span> <span class="fu">length</span>(y)) { <span class="fu">return</span>(<span class="st">"iguales"</span>) }</span>
<span id="cb842-4"><a href="#cb842-4"></a>  <span class="cf">else</span> {</span>
<span id="cb842-5"><a href="#cb842-5"></a>   </span>
<span id="cb842-6"><a href="#cb842-6"></a>    <span class="cf">if</span> (<span class="fu">length</span>(x) <span class="sc">==</span> <span class="fu">length</span>(y)) {</span>
<span id="cb842-7"><a href="#cb842-7"></a>      </span>
<span id="cb842-8"><a href="#cb842-8"></a>      n_diff <span class="ot">&lt;-</span> <span class="fu">sum</span>(x <span class="sc">!=</span> y) <span class="sc">/</span> <span class="fu">length</span>(x)</span>
<span id="cb842-9"><a href="#cb842-9"></a>      <span class="fu">return</span>(n_diff)</span>
<span id="cb842-10"><a href="#cb842-10"></a>      </span>
<span id="cb842-11"><a href="#cb842-11"></a>    } <span class="cf">else</span> {</span>
<span id="cb842-12"><a href="#cb842-12"></a>      </span>
<span id="cb842-13"><a href="#cb842-13"></a>      diff_elem <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">c</span>(<span class="fu">setdiff</span>(x, y), <span class="fu">setdiff</span>(y, x)))</span>
<span id="cb842-14"><a href="#cb842-14"></a>      <span class="fu">return</span>(diff_elem)</span>
<span id="cb842-15"><a href="#cb842-15"></a>    }</span>
<span id="cb842-16"><a href="#cb842-16"></a>    </span>
<span id="cb842-17"><a href="#cb842-17"></a>  }</span>
<span id="cb842-18"><a href="#cb842-18"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-4-1" class="slide level2">
<h2>🐣 Caso práctico I: conversor</h2>
<p>Para practicar con funciones vamos a crear un completo <strong>conversor de temperaturas</strong> que, dada una temperatura en Fahrenheit, Celsius o Kelvin, la convierta a cualquiera de las otras</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/if-else-bucles-funciones-isciii/"><strong>workbook</strong></a> hasta construirlo.</p>
</section></section>
<section>
<section id="extra-tidyverse" class="title-slide slide level1 center">
<h1>Materiales extras: tidyverse</h1>
<ul>
<li><a href="#/dplyr-filas">💻 Operaciones por filas</a></li>
<li><a href="#/dplyr-columnas">💻 Operaciones por columnas</a></li>
<li><a href="#/dplyr-resumenes">💻 Resúmenes</a></li>
<li><a href="#/importar-exportar">💻 Importar y exportar</a></li>
<li><a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-vi-tabla-en-spss">🐣 Casos prácticos</a></li>
</ul>
</section>
<section id="dplyr-filas" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb843"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb843-1"><a href="#cb843-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb844"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb844-1"><a href="#cb844-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces nos puede interesar realizar un <span class="hl-yellow"><strong>muestreo no aleatorio discreccional</strong></span>, o lo que es lo mismo, <span class="hl-yellow"><strong>filtrar por posición</strong></span>: con <code>slice(posiciones)</code> podremos seleccionar filas concretas pasando como argumento un <span class="hl-yellow"><strong>vector de índices</strong></span></p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb845"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb845-1"><a href="#cb845-1"></a><span class="co"># fila 1</span></span>
<span id="cb845-2"><a href="#cb845-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb845-3"><a href="#cb845-3"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  name           rol   height  mass hair_color
  &lt;chr&gt;          &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker bueno    172    77 blond     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb847"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb847-1"><a href="#cb847-1"></a><span class="co"># filas de la 7 a la 9</span></span>
<span id="cb847-2"><a href="#cb847-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb847-3"><a href="#cb847-3"></a>  <span class="fu">slice</span>(<span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  name               rol     height  mass hair_color
  &lt;chr&gt;              &lt;ord&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Beru Whitesun Lars malo       165    75 brown     
2 R5-D4              villano     97    32 &lt;NA&gt;      
3 Biggs Darklighter  malo       183    84 black     </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb849"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb849-1"><a href="#cb849-1"></a><span class="co"># filas 2, 7, 10 y 31</span></span>
<span id="cb849-2"><a href="#cb849-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb849-3"><a href="#cb849-3"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">31</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 9
  name       rol   height  mass hair_color skin_color eye_color birth_year sex  
  &lt;chr&gt;      &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 C-3PO      malo     167    75 &lt;NA&gt;       gold       yellow           112 none 
2 Beru Whit… malo     165    75 brown      light      blue              47 fema…
3 Obi-Wan K… vill…    182    77 auburn, w… fair       blue-gray         57 male 
4 Qui-Gon J… vill…    193    89 brown      fair       blue              92 male </code></pre>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb851"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb851-1"><a href="#cb851-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb851-2"><a href="#cb851-2"></a>  <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb852"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb852-1"><a href="#cb852-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb852-2"><a href="#cb852-2"></a>  <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Disponemos de opciones por defecto:</p>
<ul>
<li>con <code>slice_head(n = ...)</code> y <code>slice_tail(n = ...)</code> podemos obtener la <span class="hl-yellow"><strong>cabecera y cola</strong></span> de la tabla</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb853"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb853-1"><a href="#cb853-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  name           rol   height  mass hair_color
  &lt;chr&gt;          &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker bueno    172    77 blond     
2 C-3PO          malo     167    75 &lt;NA&gt;      </code></pre>
</div>
</div>
</div><div class="column" style="width:&quot;50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb855"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb855-1"><a href="#cb855-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  name           rol   height  mass hair_color
  &lt;chr&gt;          &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 BB8            bueno     NA    NA none      
2 Captain Phasma malo      NA    NA none      </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice-1" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb857"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb857-1"><a href="#cb857-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb857-2"><a href="#cb857-2"></a>  <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb858"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb858-1"><a href="#cb858-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb858-2"><a href="#cb858-2"></a>  <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Disponemos de opciones por defecto:</p>
<ul>
<li>con <code>slice_max()</code> y <code>slice_min()</code> obtenemos la <span class="hl-yellow"><strong>filas con menor/mayor valor de una variable</strong></span> (si empate, todas salvo que <code>with_ties = FALSE</code>) que indicamos en <code>order_by = ...</code></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb859"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb859-1"><a href="#cb859-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_min</span>(mass, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  name         rol   height  mass hair_color
  &lt;chr&gt;        &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Ratts Tyerel bueno     79    15 none      
2 Yoda         malo      66    17 white     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb861"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb861-1"><a href="#cb861-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  name        rol     height  mass hair_color
  &lt;chr&gt;       &lt;ord&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Yarael Poof bueno      264    NA none      
2 Tarfful     villano    234   136 brown     </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="aleatorio-slice_sample" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb863"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb863-1"><a href="#cb863-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb863-2"><a href="#cb863-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb864"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb864-1"><a href="#cb864-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb864-2"><a href="#cb864-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>El conocido como <span class="hl-yellow"><strong>muestreo aleatorio simple</strong></span> se basa en <span class="hl-yellow"><strong>seleccionar individuos aleatoriamente</strong></span>, de forma que cada uno tenga ciertas <span class="hl-yellow"><strong>probabilidades</strong></span> de ser seleccionado. Con <code>slice_sample(n = ...)</code> podemos extraer n registros aleatoriamente (a priori equiprobables).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb865"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb865-1"><a href="#cb865-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 15
  name       rol   height  mass hair_color skin_color eye_color birth_year sex  
  &lt;chr&gt;      &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 Jek Tono … bueno    180   110 brown      fair       blue              NA &lt;NA&gt; 
2 Ki-Adi-Mu… vill…    198    82 white      pale       yellow            92 male 
# ℹ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante…</strong></p>
</div>
<div class="callout-content">
<p><span class="hl-yellow"><strong>«Aleatorio» no implica equiprobable</strong></span>: es igual de aleatorio un dado normal que uno trucado. No hay cosas «más aleatorias» que otras, simplemente tienen subyacente distintas leyes de probabilidad.</p>
</div>
</div>
</div>
</div>
</section>
<section id="aleatorio-slice_sample-1" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb867"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb867-1"><a href="#cb867-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb867-2"><a href="#cb867-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb868"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb868-1"><a href="#cb868-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb868-2"><a href="#cb868-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>También podremos indicarle la <span class="hl-yellow"><strong>proporción de datos a samplear</strong></span> (en lugar del número) y si queremos que sea <span class="hl-yellow"><strong>con reemplazamiento (que se puedan repetir)</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb869"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb869-1"><a href="#cb869-1"></a><span class="co"># 5% de registros aleatorios con reemplazamiento</span></span>
<span id="cb869-2"><a href="#cb869-2"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb869-3"><a href="#cb869-3"></a>  <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.05</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 15
  name       rol   height  mass hair_color skin_color eye_color birth_year sex  
  &lt;chr&gt;      &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 Jango Fett vill…    183  79   black      tan        brown             66 male 
2 C-3PO      malo     167  75   &lt;NA&gt;       gold       yellow           112 none 
3 Luminara … vill…    170  56.2 black      yellow     blue              58 fema…
4 Gregar Ty… malo     185  85   black      dark       brown             NA &lt;NA&gt; 
# ℹ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="aleatorio-slice_sample-2" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb871"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb871-1"><a href="#cb871-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb871-2"><a href="#cb871-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb872"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb872-1"><a href="#cb872-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb872-2"><a href="#cb872-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Como decíamos, «aleatorio» no es igual que «equiprobable», así que podemos pasarle un <span class="hl-yellow"><strong>vector de probabilidades</strong></span>. Por ejemplo, vamos a forzar que sea muy improbable sacar una fila que no sean las dos primeras</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb873"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb873-1"><a href="#cb873-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb873-2"><a href="#cb873-2"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">weight_by =</span> <span class="fu">c</span>(<span class="fl">0.495</span>, <span class="fl">0.495</span>, <span class="fu">rep</span>(<span class="fl">0.01</span><span class="sc">/</span><span class="dv">85</span>, <span class="dv">85</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 15
  name       rol   height  mass hair_color skin_color eye_color birth_year sex  
  &lt;chr&gt;      &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 C-3PO      malo     167    75 &lt;NA&gt;       gold       yellow           112 none 
2 Luke Skyw… bueno    172    77 blond      fair       blue              19 male 
# ℹ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb875"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb875-1"><a href="#cb875-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb875-2"><a href="#cb875-2"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">weight_by =</span> <span class="fu">c</span>(<span class="fl">0.495</span>, <span class="fl">0.495</span>, <span class="fu">rep</span>(<span class="fl">0.01</span><span class="sc">/</span><span class="dv">85</span>, <span class="dv">85</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 15
  name       rol   height  mass hair_color skin_color eye_color birth_year sex  
  &lt;chr&gt;      &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 C-3PO      malo     167    75 &lt;NA&gt;       gold       yellow           112 none 
2 Luke Skyw… bueno    172    77 blond      fair       blue              19 male 
# ℹ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-4-2-bis" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-17" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-17-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-17-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-17-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-17-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-17-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-17-1">
<p>📝 Extrae 3 registros aleatoriamente.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb877"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb877-1"><a href="#cb877-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-17-2">
<p>📝 Extrae el 10% de los registros aleatoriamente.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb878"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb878-1"><a href="#cb878-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-17-3">
<p>📝 Extrae aleatoriamente 10 personajes pero de forma que la probabilidad de que salga cada uno sea proporcional a su peso (más pesados, más probable)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb879"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb879-1"><a href="#cb879-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb879-2"><a href="#cb879-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb879-3"><a href="#cb879-3"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">weight_by =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-17-4">
<p>📝 Selecciona los 3 personajes más mayores.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb880"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb880-1"><a href="#cb880-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(birth_year, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-17-5">
<p>📝 De los personajes que son humanos y miden más de 160 cm, elimina duplicados en color de ojos, elimina ausentes en peso, selecciona los 3 más altos, y orden de mayor a menor peso. Devuelve la tabla.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb881"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb881-1"><a href="#cb881-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb881-2"><a href="#cb881-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">160</span>) <span class="sc">|&gt;</span> </span>
<span id="cb881-3"><a href="#cb881-3"></a>  <span class="fu">distinct</span>(eye_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb881-4"><a href="#cb881-4"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb881-5"><a href="#cb881-5"></a>  <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb881-6"><a href="#cb881-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-4-2" class="slide level2">
<h2>🐣 Caso práctico: airquality</h2>
<p>Vamos a volver aun viejo conocido: en el paquete <code>{datasets}</code> (ya instalado por defecto) teníamos diversos conjuntos de datos y uno de ellos era <code>airquality</code> con el que ya trabajamos. Los datos capturan <span class="hl-yellow"><strong>medidas diarias (n = 153 observaciones) de la calidad del aire</strong></span> en Nueva York, de mayo a septiembre de 1973.</p>
<p>En ese momento lo trabajamos desde la perspectiva de R base y extrayendo algunas variables del mismo. El objetivo ahora será trabajarlo desde la perspectiva de <code>{tidyverse}</code> fijándonos en las diferencias de una y otra forma.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb882"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb882-1"><a href="#cb882-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb882-2"><a href="#cb882-2"></a>airquality</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-ii-airquality-tidyverse"><strong>workbook</strong></a>.</p>
</section>
<section id="dplyr-columnas" class="slide level2">
<h2>Recategorizar: case_when()</h2>
<p>Para <span class="hl-yellow"><strong>recategorizaciones más complejas</strong></span> tenemos <code>case_when()</code>, por ejemplo, para crear una categoría de los personajes en función de su altura.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb883"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb883-1"><a href="#cb883-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb883-2"><a href="#cb883-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb883-3"><a href="#cb883-3"></a>  <span class="fu">mutate</span>(<span class="at">altura =</span> <span class="fu">case_when</span>(height <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">~</span> <span class="st">"enanos"</span>,</span>
<span id="cb883-4"><a href="#cb883-4"></a>                            height <span class="sc">&lt;</span> <span class="dv">160</span> <span class="sc">~</span> <span class="st">"bajito"</span>,</span>
<span id="cb883-5"><a href="#cb883-5"></a>                            height <span class="sc">&lt;</span> <span class="dv">180</span> <span class="sc">~</span> <span class="st">"normal"</span>,</span>
<span id="cb883-6"><a href="#cb883-6"></a>                            height <span class="sc">&lt;</span> <span class="dv">200</span> <span class="sc">~</span> <span class="st">"alto"</span>,</span>
<span id="cb883-7"><a href="#cb883-7"></a>                            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"gigante"</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 81 × 16
   altura  name    rol   height  mass hair_color skin_color eye_color birth_year
   &lt;chr&gt;   &lt;chr&gt;   &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
 1 normal  Luke S… bueno    172    77 blond      fair       blue            19  
 2 normal  C-3PO   malo     167    75 &lt;NA&gt;       gold       yellow         112  
 3 enanos  R2-D2   bueno     96    32 &lt;NA&gt;       white, bl… red             33  
 4 gigante Darth … bueno    202   136 none       white      yellow          41.9
 5 bajito  Leia O… bueno    150    49 brown      light      brown           19  
 6 normal  Owen L… malo     178   120 brown, gr… light      blue            52  
 7 normal  Beru W… malo     165    75 brown      light      blue            47  
 8 enanos  R5-D4   vill…     97    32 &lt;NA&gt;       white, red red             NA  
 9 alto    Biggs … malo     183    84 black      light      brown           24  
10 alto    Obi-Wa… vill…    182    77 auburn, w… fair       blue-gray       57  
# ℹ 71 more rows
# ℹ 7 more variables: sex &lt;chr&gt;, gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="mover-columnas-relocate" class="slide level2">
<h2>Mover columnas: relocate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb885"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb885-1"><a href="#cb885-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb885-2"><a href="#cb885-2"></a>  <span class="fu">recolocar</span>(var1, <span class="at">despues_de =</span> var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb886"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb886-1"><a href="#cb886-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb886-2"><a href="#cb886-2"></a>  <span class="fu">relocate</span>(var1, <span class="at">.after =</span> var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Para facilitar la <span class="hl-yellow"><strong>recolocación de variables</strong></span> tenemos una función para ello, <code>relocate()</code>, indicándole en <code>.after</code> o <code>.before</code> <span class="hl-purple"><strong>detrás</strong></span> o <span class="hl-purple"><strong>delante</strong></span> de qué columnas queremos moverlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb887"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb887-1"><a href="#cb887-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">relocate</span>(species, <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 15
   species name    rol   height  mass hair_color skin_color eye_color birth_year
   &lt;chr&gt;   &lt;chr&gt;   &lt;ord&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
 1 Human   Luke S… bueno    172    77 blond      fair       blue            19  
 2 Droid   C-3PO   malo     167    75 &lt;NA&gt;       gold       yellow         112  
 3 Droid   R2-D2   bueno     96    32 &lt;NA&gt;       white, bl… red             33  
 4 Human   Darth … bueno    202   136 none       white      yellow          41.9
 5 Human   Leia O… bueno    150    49 brown      light      brown           19  
 6 Human   Owen L… malo     178   120 brown, gr… light      blue            52  
 7 Human   Beru W… malo     165    75 brown      light      blue            47  
 8 Droid   R5-D4   vill…     97    32 &lt;NA&gt;       white, red red             NA  
 9 Human   Biggs … malo     183    84 black      light      brown           24  
10 Human   Obi-Wa… vill…    182    77 auburn, w… fair       blue-gray       57  
# ℹ 77 more rows
# ℹ 6 more variables: sex &lt;chr&gt;, gender &lt;chr&gt;, homeworld &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="tu-turno-4-3" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-18" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-18-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-18-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-18-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-18-1">
<p>📝 Con los datos obtenidos del ejercicio anterior, traduce el nombre de las columnas a castellano.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb889"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb889-1"><a href="#cb889-1"></a>starwars_2 <span class="sc">|&gt;</span> </span>
<span id="cb889-2"><a href="#cb889-2"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height, <span class="at">color_pelo =</span> hair_color,</span>
<span id="cb889-3"><a href="#cb889-3"></a>         <span class="at">color_piel =</span> skin_color, <span class="at">color_ojos =</span> eye_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-18-2">
<p>📝 Con los datos obtenidos del ejercicio 1, coloca la variable de color de pelo justo detrás de la variable de nombres.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb890"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb890-1"><a href="#cb890-1"></a>starwars_2 <span class="sc">|&gt;</span></span>
<span id="cb890-2"><a href="#cb890-2"></a>  <span class="fu">relocate</span>(hair_color, <span class="at">.after =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-18-3">
<p>📝 Del dataset original, incluye una columna que calcule el IMC. Tras ello, crea una nueva variable que valga <code>NA</code> si no es humano, <code>delgadez</code> por debajo de 18, <code>normal</code> entre 18 y 30, <code>sobrepeso</code> por encima de 30.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb891"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb891-1"><a href="#cb891-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb891-2"><a href="#cb891-2"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> mass <span class="sc">/</span> ((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>),</span>
<span id="cb891-3"><a href="#cb891-3"></a>         <span class="at">IMC_recat =</span> <span class="fu">case_when</span>(species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb891-4"><a href="#cb891-4"></a>                               IMC <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"delgadez"</span>,</span>
<span id="cb891-5"><a href="#cb891-5"></a>                               IMC <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"normal"</span>,</span>
<span id="cb891-6"><a href="#cb891-6"></a>                               <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"sobrepeso"</span>),</span>
<span id="cb891-7"><a href="#cb891-7"></a>         <span class="at">.after =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-4-3" class="slide level2">
<h2>🐣 Caso práctico: Taylor Swift</h2>
<p>Vamos a volver al <span class="hl-yellow"><strong>análisis de Taylor Swift</strong></span> pero esta vez desde una perspectiva <span class="hl-yellow"><strong>tidyverse</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb892"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb892-1"><a href="#cb892-1"></a><span class="fu">library</span>(taylor)</span>
<span id="cb892-2"><a href="#cb892-2"></a>taylor_album_songs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 29
  album_name   ep    album_release track_number track_name      artist featuring
  &lt;chr&gt;        &lt;lgl&gt; &lt;date&gt;               &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;    
1 Taylor Swift FALSE 2006-10-24               1 Tim McGraw      Taylo… &lt;NA&gt;     
2 Taylor Swift FALSE 2006-10-24               2 Picture To Burn Taylo… &lt;NA&gt;     
3 Taylor Swift FALSE 2006-10-24               3 Teardrops On M… Taylo… &lt;NA&gt;     
4 Taylor Swift FALSE 2006-10-24               4 A Place In Thi… Taylo… &lt;NA&gt;     
5 Taylor Swift FALSE 2006-10-24               5 Cold As You     Taylo… &lt;NA&gt;     
# ℹ 22 more variables: bonus_track &lt;lgl&gt;, promotional_release &lt;date&gt;,
#   single_release &lt;date&gt;, track_release &lt;date&gt;, danceability &lt;dbl&gt;,
#   energy &lt;dbl&gt;, key &lt;int&gt;, loudness &lt;dbl&gt;, mode &lt;int&gt;, speechiness &lt;dbl&gt;,
#   acousticness &lt;dbl&gt;, instrumentalness &lt;dbl&gt;, liveness &lt;dbl&gt;, valence &lt;dbl&gt;,
#   tempo &lt;dbl&gt;, time_signature &lt;int&gt;, duration_ms &lt;int&gt;, explicit &lt;lgl&gt;,
#   key_name &lt;chr&gt;, mode_name &lt;chr&gt;, key_mode &lt;chr&gt;, lyrics &lt;list&gt;</code></pre>
</div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-iii-taylor-swift"><strong>workbook</strong></a></p>
</section>
<section id="caso-práctico-el-señor-de-los-anillos" class="slide level2">
<h2>🐣 Caso práctico: el señor de los anillos</h2>
<p>Para practicar algunas funciones de <code>{dplyr}</code> vamos a usar datos de las películas de la <span class="hl-yellow"><strong>trilogía de El Señor de los Anillos</strong></span>. Los datos los cargaremos directamente desde la web (Github en este caso), sin pasar por el ordenador antes, simplemente <strong>indicando como ruta la web donde está el archivo</strong></p>
<ul>
<li><p>La comunidad del anillo -&gt; <a href="https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Fellowship_Of_The_Ring.csv" class="uri">https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Fellowship_Of_The_Ring.csv</a></p></li>
<li><p>Las 2 torres -&gt; <a href="https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Two_Towers.csv" class="uri">https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Two_Towers.csv</a></p></li>
<li><p>El Retorno del Rey -&gt; <a href="https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Return_Of_The_King.csv" class="uri">https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Return_Of_The_King.csv</a></p></li>
</ul>
</section>
<section id="caso-práctico-el-señor-de-los-anillos-1" class="slide level2">
<h2>🐣 Caso práctico: el señor de los anillos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb894"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb894-1"><a href="#cb894-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb894-2"><a href="#cb894-2"></a>lotr_1 <span class="ot">&lt;-</span></span>
<span id="cb894-3"><a href="#cb894-3"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Fellowship_Of_The_Ring.csv"</span>)</span>
<span id="cb894-4"><a href="#cb894-4"></a>lotr_2 <span class="ot">&lt;-</span></span>
<span id="cb894-5"><a href="#cb894-5"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Two_Towers.csv"</span>)</span>
<span id="cb894-6"><a href="#cb894-6"></a>lotr_3 <span class="ot">&lt;-</span></span>
<span id="cb894-7"><a href="#cb894-7"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Return_Of_The_King.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-iii-extra-el-se%C3%B1or-de-los-anillos"><strong>workbook</strong></a></p>
</section>
<section id="dplyr-resumenes" class="slide level2">
<h2>Selectores: across()</h2>
<p>Un truco es <span class="hl-yellow"><strong>hacer uso de selectores</strong></span> <code>across()</code> y <code>where()</code>. El primero nos permite <span class="hl-purple"><strong>actuar sobre varias columnas por nombre</strong></span> (con <code>mutate()</code> o <code>summarise()</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb895"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb895-1"><a href="#cb895-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">medias =</span> <span class="fu">across</span>(height<span class="sc">:</span>mass, mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  sex            medias$height  $mass
  &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt;
1 male                    179.   80.2
2 none                    131.   69.8
3 female                  172.   54.7
4 hermaphroditic          175  1358  
5 &lt;NA&gt;                    175    81  </code></pre>
</div>
</div>
<div class="fragment">
<p>El segundo, <code>where()</code>, nos permite hacer lo mismo pero <span class="hl-yellow"><strong>seleccionando por tipo</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb897"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb897-1"><a href="#cb897-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb897-2"><a href="#cb897-2"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> <span class="fu">c</span>(sex, gender))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  sex            gender    height   mass birth_year
  &lt;chr&gt;          &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 male           masculine   179.   80.2       84.8
2 none           masculine   140    69.8       53.3
3 female         feminine    172.   54.7       47.2
4 hermaphroditic masculine   175  1358        600  
5 &lt;NA&gt;           &lt;NA&gt;        175    81        NaN  
6 none           feminine     96   NaN        NaN  </code></pre>
</div>
</div>
</div>
</section>
<section id="caso-practico-4-4" class="slide level2">
<h2>🐣 Caso práctico: billboard</h2>
<p>Vamos a hacer un <strong>repaso de lo aprendido</strong> en <code>{tidyverse}</code> con la tabla billboard del paquete <code>{tidyr}</code>. El dataset representa algo parecido a Los 40 principales (pero versión americana y un top 100 en lugar de 40): para cada artista y canción se guarda la fecha en la que entró en el ranking, y la posición que ocupaba en el ranking en cada una de las semanas (<code>wk1</code>, <code>wk2</code>, …)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb899"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb899-1"><a href="#cb899-1"></a>billboard</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 317 × 8
   artist         track               date.entered   wk1   wk2   wk3   wk4   wk5
   &lt;chr&gt;          &lt;chr&gt;               &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 2 Pac          Baby Don't Cry (Ke… 2000-02-26      87    82    72    77    87
 2 2Ge+her        The Hardest Part O… 2000-09-02      91    87    92    NA    NA
 3 3 Doors Down   Kryptonite          2000-04-08      81    70    68    67    66
 4 3 Doors Down   Loser               2000-10-21      76    76    72    69    67
 5 504 Boyz       Wobble Wobble       2000-04-15      57    34    25    17    17
 6 98^0           Give Me Just One N… 2000-08-19      51    39    34    26    26
 7 A*Teens        Dancing Queen       2000-07-08      97    97    96    95   100
 8 Aaliyah        I Don't Wanna       2000-01-29      84    62    51    41    38
 9 Aaliyah        Try Again           2000-03-18      59    53    38    28    21
10 Adams, Yolanda Open My Heart       2000-08-26      76    76    74    69    68
# ℹ 307 more rows</code></pre>
</div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-iv-billboard"><strong>workbook</strong></a></p>
</section>
<section id="caso-practico-4-5" class="slide level2">
<h2>🐣 Caso práctico: fútbol</h2>
<p>Vamos a seguir <strong>practicando lo aprendido</strong> en <code>{tidyverse}</code> con el fichero <code>futbol.csv</code>, donde tenemos <strong>datos de los jugadores de las 5 principales ligas de futbol masculinas</strong>, desde 2005 hasta 2019, recopilando diferentes estadísticas. Los datos se han extraído directamente haciendo uso del paquete <code>{worldfootballR}</code>, que nos permite extraer datos de <a href="https://www.fbref.com" class="uri">https://www.fbref.com</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb901"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb901-1"><a href="#cb901-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/futbol.csv"</span>)</span>
<span id="cb901-2"><a href="#cb901-2"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40,393 × 16
   season team    league  player     country position date_birth minutes_playing
    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;           &lt;dbl&gt;
 1   2005 Ajaccio Ligue 1 Djamel Ab… ALG     MF             1986              30
 2   2005 Ajaccio Ligue 1 Gaspar Az… POR     DF             1975            1224
 3   2005 Ajaccio Ligue 1 Yacine Be… ALG     MF             1981             140
 4   2005 Ajaccio Ligue 1 Nicolas B… FRA     MF             1976             892
 5   2005 Ajaccio Ligue 1 Marcelinh… BRA     MF             1971             704
 6   2005 Ajaccio Ligue 1 Cyril Cha… FRA     FW             1979            1308
 7   2005 Ajaccio Ligue 1 Xavier Co… FRA     DF             1974            2734
 8   2005 Ajaccio Ligue 1 Renaud Co… FRA     MF             1980             896
 9   2005 Ajaccio Ligue 1 Yohan Dem… FRA     DF,MF          1978            2658
10   2005 Ajaccio Ligue 1 Christoph… FRA     DF             1973              74
# ℹ 40,383 more rows
# ℹ 8 more variables: minutes_per_match_playing &lt;dbl&gt;, goals &lt;dbl&gt;,
#   assist &lt;dbl&gt;, goals_minus_pk &lt;dbl&gt;, pk &lt;dbl&gt;, pk_attemp &lt;dbl&gt;,
#   yellow_card &lt;dbl&gt;, red_card &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="caso-práctico-fútbol" class="slide level2">
<h2>🐣 Caso práctico: fútbol</h2>
<p>Las variables capturan la siguiente información:</p>
<ul>
<li><code>season</code>, <code>team</code>, <code>league</code>: temporada, equipo y liga</li>
<li><code>player</code>, <code>country</code>, <code>position</code>, <code>date_birth</code>: nombre del jugador, país, posición y año de nacimiento.</li>
<li><code>minutes_playing</code>, <code>matches</code>: minutos totales jugados y partidos jugados en media (es decir, cuantos partidos de 90 minutos ha jugado con los minutos jugados).</li>
<li><code>goals</code>, <code>assist</code>: goles y asistencias totales</li>
<li><code>pk</code>, <code>pk_attemp</code>, <code>goals_minus_pk</code>: penalties marcados, penalties tirados y goles marcados sin contar los penalties.</li>
<li><code>yellow_card</code>, <code>red_card</code>: tarjetas amarillas/rojas.</li>
</ul>
<p><span class="hl-red"><strong>Importante</strong></span>: la variable <code>matches</code> debes crearla tú haciendo uso de <code>minutes_playing</code> (por ejemplo, si ha jugado 315 minutos, cuentan como 3.5 partidos)</p>
</section>
<section id="caso-práctico-fútbol-1" class="slide level2">
<h2>🐣 Caso práctico: fútbol</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb903"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb903-1"><a href="#cb903-1"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40,393 × 16
   season team    league  player     country position date_birth minutes_playing
    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;           &lt;dbl&gt;
 1   2005 Ajaccio Ligue 1 Djamel Ab… ALG     MF             1986              30
 2   2005 Ajaccio Ligue 1 Gaspar Az… POR     DF             1975            1224
 3   2005 Ajaccio Ligue 1 Yacine Be… ALG     MF             1981             140
 4   2005 Ajaccio Ligue 1 Nicolas B… FRA     MF             1976             892
 5   2005 Ajaccio Ligue 1 Marcelinh… BRA     MF             1971             704
 6   2005 Ajaccio Ligue 1 Cyril Cha… FRA     FW             1979            1308
 7   2005 Ajaccio Ligue 1 Xavier Co… FRA     DF             1974            2734
 8   2005 Ajaccio Ligue 1 Renaud Co… FRA     MF             1980             896
 9   2005 Ajaccio Ligue 1 Yohan Dem… FRA     DF,MF          1978            2658
10   2005 Ajaccio Ligue 1 Christoph… FRA     DF             1973              74
# ℹ 40,383 more rows
# ℹ 8 more variables: minutes_per_match_playing &lt;dbl&gt;, goals &lt;dbl&gt;,
#   assist &lt;dbl&gt;, goals_minus_pk &lt;dbl&gt;, pk &lt;dbl&gt;, pk_attemp &lt;dbl&gt;,
#   yellow_card &lt;dbl&gt;, red_card &lt;dbl&gt;</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-v-messi-vs-ronaldo"><strong>workbook</strong></a></p>
</section>
<section id="importar-exportar" class="slide level2">
<h2>Importar desde web</h2>
<p>Una de las principales ventajas de <code>R</code> es que podemos hacer uso de todas las funciones anteriores de <span class="hl-yellow"><strong>importar pero directamente desde una web</strong></span>, sin necesidad de realizar la descarga manual: en lugar de pasarle la ruta local le indicaremos el <span class="hl-yellow"><strong>enlace</strong></span>. Por ejemplo, vamos a descargar los datos covid del ISCIII (<a href="https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos" class="uri">https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos</a>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb905"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb905-1"><a href="#cb905-1"></a>covid_data <span class="ot">&lt;-</span></span>
<span id="cb905-2"><a href="#cb905-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://cnecovid.isciii.es/covid19/resources/casos_hosp_uci_def_sexo_edad_provres.csv"</span>)</span>
<span id="cb905-3"><a href="#cb905-3"></a>covid_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 500 × 8
   provincia_iso sexo  grupo_edad fecha      num_casos num_hosp num_uci num_def
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;      &lt;date&gt;         &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 A             H     0-9        2020-01-01         0        0       0       0
 2 A             H     10-19      2020-01-01         0        0       0       0
 3 A             H     20-29      2020-01-01         0        0       0       0
 4 A             H     30-39      2020-01-01         0        0       0       0
 5 A             H     40-49      2020-01-01         0        0       0       0
 6 A             H     50-59      2020-01-01         0        0       0       0
 7 A             H     60-69      2020-01-01         0        0       0       0
 8 A             H     70-79      2020-01-01         0        0       0       0
 9 A             H     80+        2020-01-01         0        0       0       0
10 A             H     NC         2020-01-01         0        0       0       0
# ℹ 490 more rows</code></pre>
</div>
</div>
</section>
<section id="importar-desde-wikipedia" class="slide level2">
<h2>Importar desde wikipedia</h2>
<p>El paquete <code>{rvest}</code>, uno de los más útiles de <code>{tidyverse}</code> nos permite <span class="hl-yellow"><strong>importar (scrappear) directamente desde un <code>html</code></strong></span>. Por ejemplo, para exportar tablas de wikipedia basta con <code>read_html()</code> para importar el html, <code>html_element(«table»)</code> para extraer los objetos tabla, y <code>html_table()</code> para convertir la tabla html a <code>tibble</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb907"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb907-1"><a href="#cb907-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb907-2"><a href="#cb907-2"></a>wiki_jump <span class="ot">&lt;-</span> <span class="st">'https://en.wikipedia.org/wiki/Men%27s_long_jump_world_record_progression'</span></span>
<span id="cb907-3"><a href="#cb907-3"></a>wiki_jump <span class="sc">|&gt;</span> <span class="fu">read_html</span>() <span class="sc">|&gt;</span> </span>
<span id="cb907-4"><a href="#cb907-4"></a>  <span class="fu">html_element</span>(<span class="st">"table"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb907-5"><a href="#cb907-5"></a>  <span class="fu">html_table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 × 5
   Mark                       Wind   Athlete                  Place        Date 
   &lt;chr&gt;                      &lt;chr&gt;  &lt;chr&gt;                    &lt;chr&gt;        &lt;chr&gt;
 1 7.61&nbsp;m (24&nbsp;ft 11+1⁄2&nbsp;in)   ""     Peter O'Connor&nbsp;(IRE)     Dublin, Ire… 5 Au…
 2 7.69&nbsp;m (25&nbsp;ft 2+3⁄4&nbsp;in)    ""     Edward Gourdin&nbsp;(USA)     Cambridge, … 23 J…
 3 7.76&nbsp;m (25&nbsp;ft 5+1⁄2&nbsp;in)    ""     Robert LeGendre&nbsp;(USA)    Paris, Fran… 7 Ju…
 4 7.89&nbsp;m (25&nbsp;ft 10+1⁄2&nbsp;in)   ""     DeHart Hubbard&nbsp;(USA)     Chicago, Un… 13 J…
 5 7.90&nbsp;m (25&nbsp;ft 11&nbsp;in)       ""     Edward Hamm&nbsp;(USA)        Cambridge, … 7 Ju…
 6 7.93&nbsp;m (26&nbsp;ft 0&nbsp;in)        "0.0"  Sylvio Cator&nbsp;(HAI)       Paris, Fran… 9 Se…
 7 7.98&nbsp;m (26&nbsp;ft 2&nbsp;in)        "0.5"  Chuhei Nambu&nbsp;(JPN)       Tokyo, Japan 27 O…
 8 8.13&nbsp;m (26&nbsp;ft 8&nbsp;in)        "1.5"  Jesse Owens&nbsp;(USA)        Ann Arbor, … 25 M…
 9 8.21&nbsp;m (26&nbsp;ft 11&nbsp;in)       "0.0"  Ralph Boston&nbsp;(USA)       Walnut, Uni… 12 A…
10 8.24&nbsp;m (27&nbsp;ft 1⁄4&nbsp;in)      "1.8"  Ralph Boston&nbsp;(USA)       Modesto, Un… 27 M…
11 8.28&nbsp;m (27&nbsp;ft 1+3⁄4&nbsp;in)    "1.2"  Ralph Boston&nbsp;(USA)       Moscow, Sov… 16 J…
12 8.31&nbsp;m (27&nbsp;ft 3&nbsp;in)&nbsp;A      "−0.1" Igor Ter-Ovanesyan&nbsp;(URS) Yerevan, So… 10 J…
13 8.33&nbsp;m (27&nbsp;ft 3+3⁄4&nbsp;in)[2] ""     Phil Shinnick&nbsp;(USA)      Modesto, Un… 25 M…
14 8.31&nbsp;m (27&nbsp;ft 3&nbsp;in)        "0.0"  Ralph Boston&nbsp;(USA)       Kingston, J… 15 A…
15 8.34&nbsp;m (27&nbsp;ft 4+1⁄4&nbsp;in)    "1.0"  Ralph Boston&nbsp;(USA)       Los Angeles… 12 S…
16 8.35&nbsp;m (27&nbsp;ft 4+1⁄2&nbsp;in)[5] "0.0"  Ralph Boston&nbsp;(USA)       Modesto, Un… 29 M…
17 8.35&nbsp;m (27&nbsp;ft 4+1⁄2&nbsp;in)&nbsp;A  "0.0"  Igor Ter-Ovanesyan&nbsp;(URS) Mexico City… 19 O…
18 8.90&nbsp;m (29&nbsp;ft 2+1⁄4&nbsp;in)&nbsp;A  "2.0"  Bob Beamon&nbsp;(USA)         Mexico City… 18 O…
19 8.95&nbsp;m (29&nbsp;ft 4+1⁄4&nbsp;in)    "0.3"  Mike Powell&nbsp;(USA)        Tokyo, Japan 30 A…</code></pre>
</div>
</div>
</section>
<section id="importar-desde-google-drive" class="slide level2">
<h2>Importar desde google drive</h2>
<p>Otra opción disponible (especialmente si trabajamos con otras personas trabajando) es <span class="hl-yellow"><strong>importar desde una hoja de cálculo de Google Drive</strong></span>, haciendo uso de <code>read_sheet()</code> del paquete <code>{googlesheets4}</code>.</p>
<p>La primera vez se te pedirá un permiso tidyverse para interactuar con tu drive</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb909"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb909-1"><a href="#cb909-1"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb909-2"><a href="#cb909-2"></a>google_sheet <span class="ot">&lt;-</span></span>
<span id="cb909-3"><a href="#cb909-3"></a>  <span class="fu">read_sheet</span>(<span class="st">"https://docs.google.com/spreadsheets/d/1Uz38nHjl3bmftxDpcXj--DYyPo1I39NHVf-xjeg1_wI/edit?usp=sharing"</span>)</span>
<span id="cb909-4"><a href="#cb909-4"></a>google_sheet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  a         b     c d     
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
1 d1      0.5     1 hombre
2 d2     -0.3     2 hombre
3 d3      1.1     3 mujer </code></pre>
</div>
</div>
</section>
<section id="importar-desde-api-aemet" class="slide level2">
<h2>Importar desde API (aemet)</h2>
<p>En muchas ocasiones para conectarnos a la API primero tendremos que <span class="hl-yellow"><strong>registrarnos y obtener una clave</strong></span>, este es el caso del paquete <code>{climaemet}</code> para acceder a <span class="hl-yellow"><strong>datos meteorológicos de España</strong></span> (<a href="https://opendata.aemet.es/centrodedescargas/inicio" class="uri">https://opendata.aemet.es/centrodedescargas/inicio</a>).</p>
<p>Una vez tengamos la clave API la registramos en nuestro RStudio para poder utilizarla en el futuro.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb911"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb911-1"><a href="#cb911-1"></a><span class="fu">library</span>(climaemet)</span>
<span id="cb911-2"><a href="#cb911-2"></a></span>
<span id="cb911-3"><a href="#cb911-3"></a><span class="co"># Api key</span></span>
<span id="cb911-4"><a href="#cb911-4"></a>apikey <span class="ot">&lt;-</span> <span class="st">"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqYXZhbHYwOUB1Y20uZXMiLCJqdGkiOiI4YTU1ODUxMS01MTE3LTQ4MTYtYmM4OS1hYmVkNDhiODBkYzkiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTY2NjQ2OTcxNSwidXNlcklkIjoiOGE1NTg1MTEtNTExNy00ODE2LWJjODktYWJlZDQ4YjgwZGM5Iiwicm9sZSI6IiJ9.HEMR77lZy2ASjmOxJa8ppx2J8Za1IViurMX3p1reVBU"</span></span>
<span id="cb911-5"><a href="#cb911-5"></a></span>
<span id="cb911-6"><a href="#cb911-6"></a><span class="fu">aemet_api_key</span>(apikey, <span class="at">install =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importar-desde-api-aemet-1" class="slide level2">
<h2>Importar desde API (aemet)</h2>
<p>Con este paquete podemos hacer una <span class="hl-yellow"><strong>búsqueda de estaciones</strong></span> para conocer tanto su código postal como su código identificador dentro de la red AEMET</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb912"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb912-1"><a href="#cb912-1"></a>stations <span class="ot">&lt;-</span> <span class="fu">aemet_stations</span>()</span>
<span id="cb912-2"><a href="#cb912-2"></a>stations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 947 × 7
   indicativo indsinop nombre                 provincia altitud longitud latitud
   &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;                  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
 1 B013X      "08304"  ESCORCA, LLUC          ILLES BA…     490     2.89    39.8
 2 B051A      "08316"  SÓLLER, PUERTO         ILLES BA…       5     2.69    39.8
 3 B087X      ""       BANYALBUFAR            ILLES BA…      60     2.51    39.7
 4 B103B      "99103"  ANDRATX - SANT ELM     ILLES BA…      52     2.37    39.6
 5 B158X      ""       CALVIÀ, ES CAPDELLÀ    ILLES BA…      50     2.47    39.6
 6 B228       "08301"  PALMA, PUERTO          ILLES BA…       3     2.63    39.6
 7 B236C      ""       PALMA, UNIVERSIDAD     ILLES BA…      95     2.64    39.6
 8 B248       "08303"  SIERRA DE ALFABIA, BU… ILLES BA…    1030     2.71    39.7
 9 B275E      "08302"  SON BONET, AEROPUERTO  BALEARES       49     2.71    39.6
10 B278       "08306"  PALMA DE MALLORCA, AE… ILLES BA…       8     2.74    39.6
# ℹ 937 more rows</code></pre>
</div>
</div>
</section>
<section id="importar-desde-api-aemet-2" class="slide level2">
<h2>Importar desde API (aemet)</h2>
<p>Por ejemplo, para obtener datos de la estación del aeropuerto de El Prat, Barcelona, el código a proporcionar es <code>«0076»</code>, obteniendo <strong>datos horarios</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb914"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb914-1"><a href="#cb914-1"></a><span class="fu">aemet_last_obs</span>(<span class="st">"0076"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 23
   idema   lon fint                 prec   alt  vmax    vv    dv   lat  dmax
   &lt;chr&gt; &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 0076   2.07 2024-11-08 10:00:00     0     4   6.7   4.4   360  41.3   350
 2 0076   2.07 2024-11-08 11:00:00     0     4   5.7   2.8    10  41.3   350
 3 0076   2.07 2024-11-08 12:00:00     0     4   5.1   2.1    90  41.3    80
 4 0076   2.07 2024-11-08 13:00:00     0     4   6.2   3.8   130  41.3   120
 5 0076   2.07 2024-11-08 14:00:00     0     4   6.7   4.3   120  41.3   120
 6 0076   2.07 2024-11-08 15:00:00     0     4   5.7   3.3   130  41.3   120
 7 0076   2.07 2024-11-08 16:00:00     0     4   4.1   2.4   150  41.3   140
 8 0076   2.07 2024-11-08 17:00:00     0     4   3.1   1.5   210  41.3   160
 9 0076   2.07 2024-11-08 18:00:00     0     4   3.1   1.6   190  41.3   120
10 0076   2.07 2024-11-08 19:00:00     0     4   3.1   0.7   310  41.3   160
11 0076   2.07 2024-11-08 20:00:00     0     4   2.6   1.9   360  41.3   360
12 0076   2.07 2024-11-08 21:00:00     0     4   5.1   2.5   360  41.3    20
# ℹ 13 more variables: ubi &lt;chr&gt;, pres &lt;dbl&gt;, hr &lt;dbl&gt;, stdvv &lt;dbl&gt;, ts &lt;dbl&gt;,
#   pres_nmar &lt;dbl&gt;, tamin &lt;dbl&gt;, ta &lt;dbl&gt;, tamax &lt;dbl&gt;, tpr &lt;dbl&gt;, vis &lt;dbl&gt;,
#   stddv &lt;dbl&gt;, inso &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="importar-desde-api" class="slide level2">
<h2>Importar desde API</h2>
<p>Otras opciones</p>
<ul>
<li><p><code>{tidycensus}</code>: una herramienta para <span class="hl-yellow"><strong>facilitar el proceso de descarga de datos censales</strong></span> de Estados Unidos desde <code>R</code></p></li>
<li><p><code>{chessR}</code>: datos de partidas de ajedrez de las plataformas chess.com y lychess. Ver más en <a href="https://github.com/JaseZiv/chessR" class="uri">https://github.com/JaseZiv/chessR</a></p></li>
<li><p><code>{spotifyr}</code>: datos de canciones de Spotify. Ver más en <a href="https://www.rcharlie.com/spotifyr/" class="uri">https://www.rcharlie.com/spotifyr/</a></p></li>
<li><p><code>{gtrendsR}</code>: datos de Google Trends. Ver más en <a href="https://github.com/PMassicotte/gtrendsR" class="uri">https://github.com/PMassicotte/gtrendsR</a></p></li>
<li><p><code>{scholar}</code>: datos de Google Scholar. Ver más en <a href="https://github.com/jkeirstead/scholar" class="uri">https://github.com/jkeirstead/scholar</a></p></li>
</ul>
</section>
<section id="caso-practico-4-6" class="slide level2">
<h2>🐣 Caso práctico: encuesta CIS</h2>
<p><a href="https://drive.google.com/drive/folders/1zDc_XqXnTxx8auEYW7aFfIsnzDXOcAiZ?usp=sharing">📊 Datos</a></p>
<p>Vamos a poner en práctica la carga y preprocesado de un fichero generado por uno de los programas informáticos más utilizados (SPSS). El fichero contiene <span class="hl-yellow"><strong>datos del barómetro del CIS (Centro de Investigaciones Sociológicas) «Percepciones sobre igualdad entre hombres y mujeres y estereotipos de género»</strong></span> cuyo trabajo muestral se realizó del 6 al 14 de noviembre (4000 entrevistas a mayores de 16 años de ambos sexos en 1174 municipios y 50 provincias).</p>
<p>&nbsp;</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-import-isciii/#caso-pr%C3%A1ctico-vi-tabla-en-spss"><strong>workbook (pendiente)</strong></a></p>
</section></section>
<section>
<section id="extra-dataviz" class="title-slide slide level1 center">
<h1>Materiales extra: intro a dataviz en R</h1>
<ul>
<li><a href="#/historia">💻 Historia del dataviz</a></li>
</ul>
</section>
<section id="historia" class="slide level2">
<h2>Dataviz: historia</h2>
<p>La aparición de gráficos estadísticos es <span class="hl-yellow"><strong>relativamente reciente en la ciencia</strong></span> ya que hasta la Edad Media la única visualización estaba en los <span class="hl-yellow"><strong>mapas</strong></span>. <sup>1</sup> Las propias palabras <em>chart</em> y <em>cartography</em> derivan del mismo origen latino, <em>charta</em>, aunque el primer uso de coordenadas viene de los egipcios. <sup>2</sup> <sup>3</sup></p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:55%;">
<p>No es hasta la Edad Media, cuando la <span class="hl-yellow"><strong>navegación y la astronomía</strong></span> empezaban a tomar relevancia, cuando aparece la primera gráfica (no propiamente estadística), del <strong>movimiento cíclico de los planetas</strong> (siglos X y XI)</p>
</div><div class="column" style="width:45%;">
<p><img data-src="img/dataviz_historico_1.png" width="370"></p>
</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p><a href="http://academica-e.unavarra.es/bitstream/handle/2454/15785/Gram%C3%A1tica.pdf">«Gramática de las gráficas: pistas para mejorar las representaciones de datos» de Joaquín Sevilla</a></p></li><li id="fn2"><p><a href="https://www.cs.uic.edu/~wilkinson/Publications/iesbs.pdf">«Presentation Graphics» de Leland Wilkinson. International Encyclopedia of the Social &amp; Behavioral Sciences</a></p></li><li id="fn3"><p><a href="https://www.jstor.org/stable/2683467">«Quantitative Graphics in Statistics: A Brief History» de James R. Beniger y Dorothy L. Robyn. The American Statistician (1978)</a>]</p></li></ol></aside></section>
<section id="primer-gráfico-estadístico" class="slide level2">
<h2>Primer gráfico estadístico</h2>
<p>La mayoría de expertos, como Tufte <sup>1</sup> <sup>2</sup>, consideran este gráfico casi longitudinal como la <span class="hl-yellow"><strong>primera visualización de datos</strong></span> de la historia, hecha por <strong>Van Langren</strong> en 1644, representando la <span class="hl-yellow"><strong>distancia entre Toledo y Roma</strong></span>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="./img/longitud_dataviz.jpg" width="546"></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="./img/dataviz_historico_3.jpeg" width="557"></p>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn4"><p><a href="https://archive.org/details/visualexplanatio00tuft">«Visual explanations: images and quantities, evidence and narrative» de E. Tufte</a></p></li><li id="fn5"><p><a href="https://www.wired.com/2003/09/ppt2/">«PowerPoint is evil» de E. Tufte</a></p></li></ol></aside></section>
<section id="vizfails" class="slide level2">
<h2>Vizfails</h2>
<div class="columns">
<div class="column" style="width:55%;">
<p><img data-src="img/persona_dataviz.jpg"></p>
</div><div class="column" style="width:45%;">
<ul>
<li><p>La figura elegida (persona caminando) sin relación con lo visualizado: <span class="hl-red"><strong>mala metáfora</strong></span>.</p></li>
<li><p>Los <span class="hl-red"><strong>sectores señalados sin relación con el ítem</strong></span> a representar, lo que dificulta su interpretación.</p></li>
<li><p>Los <span class="hl-red"><strong>colores sin codificar</strong></span>: no dan información de ningún tipo.</p></li>
<li><p>Las <span class="hl-red"><strong>formas irregulares impiden la comparación</strong></span> de las áreas (amén de que la suma total supera el 100%).</p></li>
<li><p><strong>Sin fuente</strong></p></li>
</ul>
</div>
</div>
</section>
<section id="vizfails-1" class="slide level2">
<h2>Vizfails</h2>

<img data-src="img/viz_fail_covid.jpg" class="r-stretch"></section>
<section id="vizfails-2" class="slide level2">
<h2>Vizfails</h2>

<img data-src="img/viz_fail_uk.jpg" class="r-stretch"></section>
<section id="la-importancia-del-contexto" class="slide level2">
<h2>La importancia del CONTEXTO</h2>
<p>Una <strong>buena idea</strong> puede estar mal ejecutada: la forma de llevarla a cabo es importante</p>

<img data-src="img/semaforos.jpg" class="r-stretch"></section>
<section id="dataviz-historia" class="slide level2">
<h2>Dataviz: historia</h2>
<p>En el siglo XVII hubo un boom de la estadística al empezar a aplicarse en <span class="hl-yellow"><strong>demografía</strong></span>. Uno de los autores más importantes fue <span class="hl-purple"><strong>J. Graunt</strong></span>, autor de «Natural and Political Observations Made upon the Bills of Mortality» (1662), estimando la población de Londres con las <span class="hl-yellow"><strong>primeras tablas de natalidad y mortalidad</strong></span>.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p>Son precisamente las tablas de Graunt las que usó <span class="hl-yellow"><strong>Christiaan Huygens</strong></span> para generar la <span class="hl-yellow"><strong>primera gráfica de densidad</strong></span> de una distribución continua (esperanza de vida vs edad).</p>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./img/primera_densidad.jpg" style="width:100.0%"></p>
<figcaption>Primera función de densidad, extraída de https://omeka.lehigh.edu/exhibits/show/data_visualization/vital_statistics/huygen</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="gráficos-de-playfair" class="slide level2">
<h2>Gráficos de Playfair</h2>
<p>La figura que cambió el dataviz fue, sin lugar a dudas, el economista y político <span class="hl-yellow"><strong>William Playfair (1759-1823)</strong></span>, publicando en 1786 el <strong>«Atlas político y comercial»</strong> <sup>1</sup> <sup>2</sup> con 44 gráficas (43 series temporales y el diagrama de barras más famoso de la historia).</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./img/playfair_1.jpg" style="width:70.0%"></p>
<figcaption>Extraídas de Funkhouser y Walker (1935)</figcaption>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./img/playfair_2.jpg" style="width:25.0%"></p>
<figcaption>Extraídas de Funkhouser y Walker (1935)</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn6"><p><a href="https://www.jstor.org/stable/45366440">«Playfair and his charts» de H. Gray Funkhouser and Helen M. Walker (1935)</a></p></li><li id="fn7"><p><a href="http://onlinebooks.library.upenn.edu/webbin/book/lookupid?key=ha009726110">«A Letter on Our Agricultural Distresses, Their Causes and Remedies» de W. Playfair (1821)</a></p></li></ol></aside></section>
<section id="gráficos-de-playfair-1" class="slide level2">
<h2>Gráficos de Playfair</h2>
<p>Playfair es además el autor del <span class="hl-yellow"><strong>gráfico de barras más famoso</strong></span> (no fue el primero pero sí quien lo hizo <em>mainstream</em>).</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./img/playfair_5.jpg" style="width:90.0%"></p>
<figcaption>Gráficas de Playfair de importaciones (barras grises) y exportaciones (negras) de Escocia en 1781, extraídas de la wikipedia.</figcaption>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./img/playfair_6.jpg" style="width:90.0%"></p>
<figcaption>Primer diagrama de barras (P. Buache y G. de L’Isle), visualizando los niveles del Sena (1732 - 1766), extraída de https://friendly.github.io/HistDataVis</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="gráficos-de-playfair-2" class="slide level2">
<h2>Gráficos de Playfair</h2>
<p>Playfair además fue el primero en <span class="hl-yellow"><strong>combinar gráficos en la misma visualización</strong></span> <sup>1</sup> <sup>2</sup></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./img/playfair_7.jpg" style="width:85.0%"></p>
<figcaption>Visualiza 3 series temporales: precios (barras) del trigo, salarios (línea) y time-line con reinados, extraída de https://friendly.github.io/HistDataVis.</figcaption>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./img/playfair_8.png" style="width:85.0%"></p>
<figcaption>Time-line histórico, extraída de https://friendly.github.io/HistDataVis.</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn8"><p><a href="http://onlinebooks.library.upenn.edu/webbin/book/lookupid?key=ha009726110">«A Letter on Our Agricultural Distresses, Their Causes and Remedies» de W. Playfair (1821)</a></p></li><li id="fn9"><p><a href="https://www.amazon.com/Permanent-Powerful-Nations-Prosperity-Prolonged/dp/140691830X">«An Inquiry Into the Permanent Causes of the Decline and Fall of Powerful and Wealthy Nations» de William Playfair (1821)</a></p></li></ol></aside></section>
<section id="primer-scatter-plot" class="slide level2">
<h2>Primer scatter plot</h2>
<p>Según J. Sevilla, se considera al astrónomo británico <strong>John Frederick William Herschel</strong> el autor del <span class="hl-yellow"><strong>primer diagrama de dispersión o scatterplot</strong></span> en 1833, visualizando el movimiento de la estrella doble Virginis (tiempo en el eje horizontal, posición angular en el eje vertical)</p>

<img data-src="./img/herschel.jpg" style="width:35.0%" class="r-stretch quarto-figure-center"><p class="caption">Extraído de https://friendly.github.io/HistDataVis.</p></section>
<section id="florence-nigthingale" class="slide level2">
<h2>Florence Nigthingale</h2>
<div class="columns">
<div class="column" style="width:65%;">
<ul>
<li><p>El 21 de octubre de 1854 <span class="hl-yellow"><strong>Florence Nigthingale</strong></span> fue enviada para mejorar las <strong>condiciones sanitarias</strong> de los soldados británicos en la guerra de Crimea.</p></li>
<li><p>A su regreso demostró que los <span class="hl-yellow"><strong>soldados fallecían por las condiciones sanitarias</strong></span>. Nigthingale es la creadora del famoso <span class="hl-yellow"><strong>diagrama de rosa</strong></span>, visualizando tres variables a la vez y su estacionalidad.</p></li>
<li><p>El 8 de febrero de 1955, The Times la describió como la <strong>«ángel guardián» de los hospitales</strong>, y acabó siendo conocida como <span class="hl-yellow"><strong>«The Lady with the Lamp»</strong></span> tras un poema de H. W. Longfellow (1857).</p></li>
<li><p>Años después se convirtió en la <span class="hl-yellow"><strong>primera mujer en la Royal Statistical Society</strong></span>.</p></li>
</ul>
</div><div class="column" style="width:35%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./img/the_lady_with_the_lamp.png" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="diagrama-de-rosa" class="slide level2">
<h2>Diagrama de rosa</h2>
<p>Florence Nigthingale es la creadora del famoso <span class="hl-yellow"><strong>diagrama de rosa</strong></span>, permitiendo pintar <span class="hl-yellow"><strong>tres variables a la vez y su estacionalidad</strong></span>: <strong>tiempo</strong> (cada <strong>gajo</strong> es un mes), <strong>nº de muertes</strong> (<strong>área</strong> del gajo) y <strong>causa</strong> de la muerte (<strong>color</strong> del gajo: azules enfermedades infecciosas, rojas por heridas, negras otras causas).</p>

<img data-src="./img/rosa_nightingale.jpg" style="width:75.0%" class="r-stretch quarto-figure-center"></section>
<section id="recursos-de-dataviz" class="slide level2">
<h2>Recursos de dataviz</h2>
<p>📚 <a href="https://www.amazon.es/Functional-Art-Voices-That-Matter/dp/0321834739">«The Functional Art: an introduction to information graphics and visualization» de Alberto Cairo</a></p>
<p>📚 <a href="https://academica-e.unavarra.es/bitstream/handle/2454/15785/Gram%C3%A1tica.pdf">«Gramática de las gráficas: pistas para mejorar las representaciones de datos» de Joaquín Sevilla</a></p>
<p>📚 <a href="https://www.researchgate.net/publication/226400313_A_Brief_History_of_Data_Visualization">«A Brief History of Visualization» de Friendly et al.&nbsp;(2008)</a></p>
<p>📚 <a href="https://www.jstor.org/stable/2683467">«Quantitative Graphics in Statistics: A Brief History» de James R. Beniger y Dorothy L. Robyn. The American Statistician (1978)</a>]</p>
<p>📚 <a href="https://www.cs.uic.edu/~wilkinson/Publications/iesbs.pdf">«Presentation Graphics» de Leland Wilkinson. International Encyclopedia of the Social &amp; Behavioral Sciences</a></p>
<p>📚 <a href="https://www.amazon.es/Grammar-Graphics-Statistics-Computing/dp/0387245448">«The Grammar of Graphics» de Leland Wilkinson</a></p>
<p>📚 <a href="https://www.amazon.es/gp/product/1616896337/ref=sw_img_1?smid=A1AT7YVPFBWXBL&amp;psc=1">«The Minard System: The Graphical Works of Charles-Joseph Minard» de Sandra Rendgen</a></p>
<p>📚 <a href="https://www.amazon.es/Visual-Display-Quantitative-Information/dp/0961392142">«The Visual Display of Quantitative Information» de E. W. Tufte</a></p>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="github" class="title-slide slide level1 center">
<h1>Github</h1>

</section>
<section id="qué-es-github" class="slide level2">
<h2>¿Qué es Github?</h2>
<p><span class="hl-yellow"><strong>GitHub</strong></span> es la plataforma colaborativa más conocida basada en el <span class="hl-yellow"><strong>sistema de control de versiones Git</strong></span></p>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>¿Qué es Git?</strong></span> Git es un sistema de <span class="hl-yellow"><strong>control de versiones</strong></span>: una especie de <span class="hl-yellow"><strong>Dropbox</strong></span> para facilitar la <span class="hl-yellow"><strong>programación colaborativa</strong></span> entre un grupo de personas, permitiendo llevar la <span class="hl-yellow"><strong>trazabilidad de los cambios</strong></span> realizados.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>¿Qué es Github?</strong></span> Nuestra <span class="hl-yellow"><strong>plataforma/interfaz</strong></span> para ejecutar el control de versiones: nos servirá no solo para trabajar colaborativamente sino para <span class="hl-yellow"><strong>hacer transparente</strong></span> el proceso de construcción de nuestros proyectos de código.</li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Desde el 4 de junio de 2018 Github es de Microsoft (ergo el código que subas también)</p>
</div>
</div>
</div>
</div>
</section>
<section id="visión-general" class="slide level2">
<h2>Visión general</h2>
<p>Tras hacernos una cuenta en Github, <span class="hl-purple"><strong>arriba a la derecha</strong></span> tendremos un círculo, y haciendo click en <span class="hl-purple"><strong>Your Profile</strong></span>, veremos algo similar a esto</p>
<div class="columns">
<div class="column" style="width:55%;">
<p><img data-src="img/github_1.png"></p>
</div><div class="column" style="width:45%;">
<ul>
<li><p><span class="hl-purple"><strong>Edit profile</strong></span>: nos permite añadir una <span class="hl-yellow"><strong>descripción y foto de perfil</strong></span>.</p></li>
<li><p><span class="hl-purple"><strong>Overview</strong></span>: en ese panel de cuadrados se <span class="hl-yellow"><strong>visualizará nuestra actividad</strong></span> a lo largo del tiempo.</p></li>
<li><p><span class="hl-purple"><strong>Repositories</strong></span>: el códugo será subido a <span class="hl-yellow"><strong>repositorios</strong></span>, el equivalente a nuestras carpetas compartidas en Dropbox.</p></li>
</ul>
</div>
</div>
</section>
<section id="primer-uso-consumidor" class="slide level2">
<h2>Primer uso: consumidor</h2>
<p>Antes de aprender como crear repositorios, Github también nos servirá para</p>
<ul>
<li><span class="hl-purple"><strong>Acceder a código</strong></span> ajeno</li>
<li><span class="hl-purple"><strong>Proponer mejoras</strong></span> a otros usuarios, e incluso proponer <span class="hl-yellow"><strong>correcciones de error que detectemos</strong></span> de software que usemos</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Instalar paquetes de R</strong></span>. En muchas ocasiones los desarrolladores de paquetes suben las actualizaciones a CRAN cada cierto tiempo, y en otras el software no es suficientemente «amplio» para poder ser subido como paquete.</li>
</ul>
<p>El código de paquetes que no tengamos subido en CRAN podremos <span class="hl-yellow"><strong>instalarlo como código desde Github</strong></span></p>
</div>
</section>
<section id="instalar-desde-github" class="slide level2">
<h2>Instalar desde Github</h2>
<p>Por ejemplo, vamos a instalar un paquete llamado <a href="https://github.com/jbgb13/peRReo"><code>{peRReo}</code></a>, cuya única función es darnos <span class="hl-yellow"><strong>paletas de colores</strong></span> basadas en portadas de <span class="hl-yellow"><strong>álbumes de música urbana</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/perrreo.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rosalia.png" width="360"></p>
</div>
</div>
<div class="fragment">
<p>Para ello antes tendremos que instalar un <span class="hl-yellow"><strong>conjunto de paquetes para desarrolladores</strong></span> llamado <code>{devtools}</code>, que nos permitirá la instalación desde Github</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb916"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb916-1"><a href="#cb916-1"></a><span class="fu">install.packages</span>(<span class="st">"devtools"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="instalar-desde-github-1" class="slide level2">
<h2>Instalar desde Github</h2>
<p>Las <span class="hl-yellow"><strong>instrucciones de instalación</strong></span> suelen venir detalladas en la portada del repositorio</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/install_perreo.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rosalia.png" width="310"></p>
</div>
</div>
<div class="fragment">
<p>En la mayoría de casos bastará con la función <code>install_github()</code> (del paquete que acabamos de instalar), pasándole como argumento la <span class="hl-yellow"><strong>ruta del repositorio</strong></span> (sin “github.com/”).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb917"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb917-1"><a href="#cb917-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"jbgb13/peRReo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ya puedes perrear con ggplot ;)</p>
</div>
</section>
<section id="descargar-desde-github" class="slide level2">
<h2>Descargar desde Github</h2>
<p>La mayoría de veces lo que subamos no será un paquete de R como tal sino que <span class="hl-yellow"><strong>subiremos un código más o menos organizado</strong></span> y comentado. En ese caso podremos <span class="hl-yellow"><strong>descargar el repo entero</strong></span> haciendo click <span class="hl-green"><strong>Code</strong></span> y luego Download ZIP.</p>
<p>Por ejemplo, vamos a descargarnos los scripts de dataviz que han subido desde el <a href="https://github.com/ceopinio/bop-grafics">Centre d’Estudis d’Opinió</a></p>

<img data-src="img/ceo_github.png" class="r-stretch"></section>
<section id="ideal" class="slide level2">
<h2>Ideal</h2>

<img data-src="img/abogados_simpson.jpeg" width="600" class="r-stretch"><p><span class="hl-purple"><strong>¿Lo ideal en caso de RTVE?</strong></span> Tener dos tipos de repositorios</p>
<ul>
<li><p>Una <span class="hl-yellow"><strong>colección de repositorios públicos (producción)</strong></span> donde hacer transparente el código y los datos (<span class="hl-purple"><strong>ya validados</strong></span>), coordinado por un nº reducido de personas.</p></li>
<li><p>Una <span class="hl-yellow"><strong>colección de repositorios privados (desarrollo)</strong></span> donde esté todo el equipo colaborando y donde se haga el <span class="hl-purple"><strong>trabajo del día</strong></span>, con trazabilidad interna.</p></li>
</ul>
</section>
<section id="nuestro-primer-repositorio" class="slide level2">
<h2>Nuestro primer repositorio</h2>
<p>Vamos a <span class="hl-yellow"><strong>crear nuestro primero repositorio</strong></span> que servirá además como <span class="hl-yellow"><strong>carta de presentación</strong></span> de nuestro perfil en Github.</p>
<ol type="1">
<li><p><span class="hl-purple"><strong>Repositories</strong></span>: hacemos click en las pestaña de Repositories.</p></li>
<li><p><span class="hl-purple"><strong>New</strong></span>: hacemos click en el <span class="hl-green"><strong>botón verde New</strong></span> para crear un nuevo repositorio</p></li>
</ol>

<img data-src="img/new_repo.png" class="r-stretch"></section>
<section id="nuestro-primer-repositorio-1" class="slide level2">
<h2>Nuestro primer repositorio</h2>
<ul>
<li><p><span class="hl-purple"><strong>Repository name</strong></span>: el <span class="hl-yellow"><strong>nombre del repositorio</strong></span>. En este caso vamos a crear un repositorio muy concreto: el nombre debe <span class="hl-yellow"><strong>coincidir exactamente con tu nombre de usuario</strong></span></p></li>
<li><p><span class="hl-purple"><strong>Description</strong></span>: descripción de tu repositorio. En este caso será un repo de presentación.</p></li>
</ul>

<img data-src="img/repo_init_1.png" class="r-stretch"></section>
<section id="nuestro-primer-repositorio-2" class="slide level2">
<h2>Nuestro primer repositorio</h2>
<ul>
<li><p><span class="hl-purple"><strong>Public vs private</strong></span>: con cada repositorio tendremos la opción de hacer el repositorio</p>
<ul>
<li><span class="hl-purple"><strong>público</strong></span>: todos los usuarios podrán ver el código así cómo la trazabilidad de su desarrollo (qué se añade y cuándo). Es para mí la opción más recomendable cuando quieres darle <span class="hl-yellow"><strong>visibilidad y transparencia</strong></span> a tu trabajo</li>
<li><span class="hl-purple"><strong>privado</strong></span>: solo tendrán acceso al repositorio aquellos usuarios a los que se lo permitas. No se podrá visualizar ni instalar nada de él fuera de Github.</li>
</ul></li>
</ul>

<img data-src="img/repo_init_2.png" class="r-stretch"><p>En este caso concreto, dado que será un repositorio de presentación, lo <span class="hl-yellow"><strong>haremos público</strong></span>.</p>
</section>
<section id="nuestro-primer-repositorio-3" class="slide level2">
<h2>Nuestro primer repositorio</h2>
<ul>
<li><span class="hl-purple"><strong>Add a README file</strong></span>: un README file será el archivo donde incluiremos las <span class="hl-yellow"><strong>instrucciones y detalles de uso</strong></span> a los demás (en el caso de <code>{peRReo}</code> era el archivo que contenía los detalles de instalación)</li>
</ul>

<img data-src="img/repo_init_3.png" class="r-stretch"><p>De momento <span class="hl-red"><strong>ignoraremos los demás campos</strong></span> para este primer repositorio.</p>
</section>
<section id="nuestro-primer-repositorio-4" class="slide level2">
<h2>Nuestro primer repositorio</h2>

<img data-src="img/repo_init_1.png" class="r-stretch"><p>Por defecto Github asume que este repositorio, con el <span class="hl-yellow"><strong>mismo nombre que nuestro usuario</strong></span> será el repositorio que querremos que se presente de inicio cuando alguien entra en nuestro perfil, y será el repositorio donde [<strong>incluir en el README.md</strong>] una presentación de nosotros y un índice de tu trabajo (si quieres).</p>
</section>
<section id="nuestro-primer-repositorio-5" class="slide level2">
<h2>Nuestro primer repositorio</h2>

<img data-src="img/profile_github_md.png" class="r-stretch"><p>Fíjate que ahora en nuestra <span class="hl-yellow"><strong>portada tenemos dicho README.md</strong></span> que podemos personalizar a nuestro gusto haciendo uso de <span class="hl-yellow"><strong>html y markdown</strong></span>.</p>
<p>Aquí puedes ver <a href="https://github.com/matiassingers/awesome-readme"><strong>algunos ejemplos de README.MD</strong></a></p>
</section>
<section id="repo-de-código" class="slide level2">
<h2>Repo de código</h2>
<p>Una vez que tenemos nuestro README de presentación (recuerda que puedes <span class="hl-yellow"><strong>personalizar a tu gusto con html y markdown</strong></span>) vamos a crear un <span class="hl-yellow"><strong>repositorio de código</strong></span>.</p>
<div class="fragment">
<p>Si ya era importante <span class="hl-yellow"><strong>trabajar con proyectos</strong></span> en <code>RStudio</code>, cuando lo combinamos con Github es aún más crucial que creemos un proyecto antes de subir el código, así que vamos a crear uno de prueba que se llame <code>repo-github-1</code>.</p>
</div>
<div class="fragment">
<p>En dicho proyecto vamos a <span class="hl-yellow"><strong>crear un script</strong></span> (en mi caso llamado <strong>codigo.R</strong>) en el que deberás hacer los siguientes pasos:</p>
</div>
</section>
<section id="repo-de-código-1" class="slide level2">
<h2>Repo de código</h2>
<ol type="1">
<li><span class="hl-yellow"><strong>Carga</strong></span> directamente desde la página del <a href="https://cnecovid.isciii.es/covid19/resources">ISCIII</a> el archivo llamado <code>casos_hosp_uci_def_sexo_edad_provres.csv</code></li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb918"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb918-1"><a href="#cb918-1"></a><span class="co"># Carga de datos desde ISCIII</span></span>
<span id="cb918-2"><a href="#cb918-2"></a>datos_covid <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://cnecovid.isciii.es/covid19/resources/casos_hosp_uci_def_sexo_edad_provres.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><span class="hl-yellow"><strong>Filtra</strong></span> datos de Madrid (<code>"M"</code>), de 2020 y con sexo conocido (hombre/mujer). Tras ello quédate con las columnas <code>fecha</code>, <code>sexo</code>, <code>grupo_edad</code>, <code>num_casos</code> (ese orden). Por último obtén la suma de casos diarios por fecha y sexo.</li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb919"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb919-1"><a href="#cb919-1"></a><span class="co"># Depuración</span></span>
<span id="cb919-2"><a href="#cb919-2"></a>datos_madrid <span class="ot">&lt;-</span></span>
<span id="cb919-3"><a href="#cb919-3"></a>  datos_covid <span class="sc">|&gt;</span></span>
<span id="cb919-4"><a href="#cb919-4"></a>  <span class="co"># Filtrado por Madrid y fecha</span></span>
<span id="cb919-5"><a href="#cb919-5"></a>  <span class="fu">filter</span>(provincia_iso <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">&amp;</span> fecha <span class="sc">&lt;=</span> <span class="st">"2020-12-31"</span> <span class="sc">&amp;</span> sexo <span class="sc">!=</span> <span class="st">"NC"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb919-6"><a href="#cb919-6"></a>  <span class="co"># Selección de columnas</span></span>
<span id="cb919-7"><a href="#cb919-7"></a>  <span class="fu">select</span>(provincia_iso<span class="sc">:</span>fecha, num_casos) <span class="sc">|&gt;</span> </span>
<span id="cb919-8"><a href="#cb919-8"></a>  <span class="co"># Resumen de casos diarios por fecha y sexo</span></span>
<span id="cb919-9"><a href="#cb919-9"></a>  <span class="fu">summarise</span>(<span class="at">num_casos =</span> <span class="fu">sum</span>(num_casos), <span class="at">.by =</span> <span class="fu">c</span>(fecha, sexo))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section>
<section id="repo-de-código-2" class="slide level2">
<h2>Repo de código</h2>
<ol start="3" type="1">
<li><span class="hl-yellow"><strong>Exporta el dataset a un csv</strong></span> en una carpeta que se llame <code>exportado</code></li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb920"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb920-1"><a href="#cb920-1"></a><span class="co"># Exportamos datos</span></span>
<span id="cb920-2"><a href="#cb920-2"></a><span class="fu">write_csv</span>(datos_madrid, <span class="at">file =</span> <span class="st">"./exportado/datos_madrid.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:40%;">
<ol start="4" type="1">
<li>Crea una <span class="hl-yellow"><strong>gráfica de líneas</strong></span> que tenga en el eje x fecha, en el eje y casos, con una curva por sexo (gráficas separadas).</li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb921"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb921-1"><a href="#cb921-1"></a><span class="co"># Gráfica</span></span>
<span id="cb921-2"><a href="#cb921-2"></a><span class="fu">ggplot</span>(datos_madrid) <span class="sc">+</span></span>
<span id="cb921-3"><a href="#cb921-3"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y =</span> num_casos, <span class="at">color =</span> sexo),</span>
<span id="cb921-4"><a href="#cb921-4"></a>            <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">linewidth =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb921-5"><a href="#cb921-5"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#85519D"</span>, <span class="st">"#278862"</span>)) <span class="sc">+</span></span>
<span id="cb921-6"><a href="#cb921-6"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sexo) <span class="sc">+</span></span>
<span id="cb921-7"><a href="#cb921-7"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb921-8"><a href="#cb921-8"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:60%;">
<p><img data-src="./img/ggplot.png" width="380"></p>
</div>
</div>
</div>
<div class="fragment">
<ol start="5" type="1">
<li>Tras ello <span class="hl-yellow"><strong>exportamos la gráfica</strong></span></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb922"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb922-1"><a href="#cb922-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"./exportado/ggplot.png"</span>, <span class="at">plot =</span> <span class="fu">last_plot</span>(),</span>
<span id="cb922-2"><a href="#cb922-2"></a>       <span class="at">bg =</span> <span class="st">"white"</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">height =</span> <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="repo-de-código-3" class="slide level2">
<h2>Repo de código</h2>
<p>¿Cómo <span class="hl-yellow"><strong>subimos el proyecto</strong></span>? Vamos de nuevo a <span class="hl-yellow"><strong>crear un proyecto de cero</strong></span>. Antes no hemos hablado de dos campos importantes:</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="./img/repo-1.png" width="460"></p>
</div><div class="column" style="width:50%;">
<ul>
<li><p><code>Add .gitignore</code> nos permitirá <span class="hl-yellow"><strong>seleccionar el lenguaje</strong></span> en el que estará nuestro proyecto para que Github lo entienda al sincronizar (y no actualice cosas que no deba).</p></li>
<li><p><code>Choose a license</code> nos permitirá <span class="hl-yellow"><strong>seleccionar la licencia</strong></span> que determinará las condiciones en las que otros podrán reusar tu código.</p></li>
</ul>
</div>
</div>
</section>
<section id="repo-de-código-4" class="slide level2">
<h2>Repo de código</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="./img/repo-1-1.png"></p>
</div><div class="column" style="width:50%;">
<p>Si te fijas traer crearlo tenemos solo 3 archivos: el de licencia, el .gitignore y el readme.md (donde deberíamos escribir una guía de uso de lo que hayamos subido)</p>
</div>
</div>
<p>Para subir los archivos vamos a clickar en <span class="hl-purple"><strong>Add file &lt; Upload File</strong></span> y <span class="hl-yellow"><strong>arrastraremos TODOS los archivos</strong></span> de la carpeta de nuestro proyecto.</p>
</section>
<section id="repo-de-código-5" class="slide level2">
<h2>Repo de código</h2>
<p>Tras la subida de archivos tendremos un cuadro llamado <span class="hl-purple"><strong>Commit changes</strong></span></p>

<img data-src="./img/commit-1.png" class="r-stretch"><p>Un <span class="hl-purple"><strong>commit</strong></span> es una <span class="hl-yellow"><strong>modificación del repositorio</strong></span> con algo que se añade/elimine/modifique, y dicho cuadro es recomendable usarlo para <span class="hl-yellow"><strong>resumir en qué consiste la modificación</strong></span>, de manera que quede trazado el cambio.</p>
</section>
<section id="repo-de-código-6" class="slide level2">
<h2>Repo de código</h2>
<p>Haciendo click en el reloj donde indica el <span class="hl-yellow"><strong>número de commits</strong></span> accedemos al <span class="hl-yellow"><strong>histórico de commits (cambios)</strong></span> con hora, día, autor, comentarios, etc.</p>

<img data-src="./img/commit-reloj.png" class="r-stretch"></section>
<section id="repo-de-código-7" class="slide level2">
<h2>Repo de código</h2>
<p>Vamos a realizar un <span class="hl-yellow"><strong>cambio en nuestro código</strong></span>: en tu código local (local –&gt; tu ordenador), en lugar de filtrar por Madrid haz el <span class="hl-yellow"><strong>filtro por Barcelona</strong></span>, guarda el código y sube en el repositorio el nuevo archivo (con el mismo nombre, Github hará la sobrescritura)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb923" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb923-1"><a href="#cb923-1"></a>datos_bcn <span class="ot">&lt;-</span></span>
<span id="cb923-2"><a href="#cb923-2"></a>  datos_covid <span class="sc">|&gt;</span></span>
<span id="cb923-3"><a href="#cb923-3"></a>  <span class="fu">filter</span>(provincia_iso <span class="sc">==</span> <span class="st">"B"</span> <span class="sc">&amp;</span> fecha <span class="sc">&lt;=</span> <span class="st">"2020-12-31"</span> <span class="sc">&amp;</span> sexo <span class="sc">!=</span> <span class="st">"NC"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb923-4"><a href="#cb923-4"></a>  <span class="fu">select</span>(fecha, sexo, grupo_edad, num_casos) <span class="sc">|&gt;</span> </span>
<span id="cb923-5"><a href="#cb923-5"></a>  <span class="fu">summarise</span>(<span class="at">num_casos =</span> <span class="fu">sum</span>(num_casos), <span class="at">.by =</span> <span class="fu">c</span>(fecha, sexo))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="consulta-de-commits" class="slide level2">
<h2>Consulta de commits</h2>
<p><img data-src="./img/barcelona_covid.png" width="550"></p>
<div class="columns">
<div class="column" style="width:40%;">
<p>Si ahora <span class="hl-yellow"><strong>consultamos el commit</strong></span>, al lado hay un número que lo identifica, y clickando en él nos resume los cambios: no solo <span class="hl-yellow"><strong>almacena todas las versiones pasadas</strong></span> sino que además nos <span class="hl-yellow"><strong>muestra las diferencias entre los archivos cambiados</strong></span></p>
</div><div class="column" style="width:60%;">
<p><img data-src="./img/commit_cambio.png"></p>
</div>
</div>
</section>
<section id="trazabilidad-de-cambios" class="slide level2">
<h2>Trazabilidad de cambios</h2>
<div class="columns">
<div class="column" style="width:72%;">
<p><img data-src="./img/commit_split.png"> <img data-src="./img/commit_unified.png"></p>
</div><div class="column" style="width:28%;">
<p>Tenemos <span class="hl-yellow"><strong>dos modos de visualización</strong></span> de los cambios: el modo split nos muestra el antiguo y el nuevo, con las inclusiones en verde y lo que ya no está en rojo; y el modo unified nos muestra todo en un mismo documento.</p>
</div>
</div>
</section>
<section id="recuperación-de-commits" class="slide level2">
<h2>Recuperación de commits</h2>

<img data-src="./img/browse-repo.png" class="r-stretch"><p>Github nos permite incluso <span class="hl-yellow"><strong>recuperar una versión del pasado</strong></span> de nuestro repositorio, haciendo click en el tercer icono del commit.</p>
</section>
<section id="recuperación-de-commits-1" class="slide level2">
<h2>Recuperación de commits</h2>

<img data-src="./img/branch-commit.png" class="r-stretch"><p>Si te fijas ahora al lado de <code>1 branch</code> tenemos un <span class="hl-yellow"><strong>menú desplegable</strong></span> en el que antes ponía <code>main</code> y ahora un número identificador del commit. Ya hablaremos de la idea de <span class="hl-yellow"><strong>rama (branch)</strong></span></p>
</section>
<section id="repo-con-rmdqmd" class="slide level2">
<h2>Repo con rmd/qmd</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Vamos a poner en práctica lo aprendido:</p>
<ol type="1">
<li><p>Crea un nuevo repositorio en Github (llamado <code>repo-github-2</code>) donde habrá alojado con proyecto de R.</p></li>
<li><p>Crea un proyecto en <code>RStudio</code> que se llame (por ejemplo) <code>proyecto-qmd</code></p></li>
<li><p>Una vez dentro del proyecto en <code>RStudio</code> haz click en <code>File &lt; New File &lt; Quarto Document</code></p></li>
</ol>
</div><div class="column" style="width:40%;">
<p><img data-src="./img/primer-qmd.png"></p>
</div>
</div>
<p>Deberás tener un documento similar a este: un <span class="hl-yellow"><strong>quarto markdown (.qmd)</strong></span>, un documento que nos permitirá incluir <span class="hl-yellow"><strong>markdown + código</strong></span> (puede ser <code>R</code> o puede ser <code>Observable</code>, <code>D3</code>, etc).</p>
</section>
<section id="repo-con-rmdqmd-1" class="slide level2">
<h2>Repo con rmd/qmd</h2>
<p>Este formato es ideal para:</p>
<ul>
<li><span class="hl-yellow"><strong>Trabajar en equipo</strong></span> construyendo el borrador de una pieza.</li>
<li>Tomar <span class="hl-yellow"><strong>apuntes o informes</strong></span> para uno mismo.</li>
<li><span class="hl-yellow"><strong>Presentar</strong></span> tu trabajo a tus compañeros.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="./img/prueba-qmd-html.png"></p>
</div><div class="column" style="width:50%;">
<p>Si te fijas ahora nuestro repositorio tiene un archivo con formato <code>.html</code>…es decir…</p>
<p><span class="hl-yellow"><strong>¡Es una web!</strong></span></p>
</div>
</div>
</section>
<section id="github-pages" class="slide level2">
<h2>Github pages</h2>
<p>¿Cómo <span class="hl-yellow"><strong>convertir nuestro repositorio en una web</strong></span>?</p>

<img data-src="./img/github-pages.png" class="r-stretch"><ol type="1">
<li>Haz click en <code>Settings</code></li>
<li>Ve al apartado <code>Pages</code></li>
<li>En el subapartado <code>branch</code> selecciona la única rama que tenemos ahora (<code>main</code>)</li>
<li>Selecciona la carpeta donde tengas el <code>.html</code> (en web complejas estará como en cualquier web en <code>docs</code>, en algo simple estará en la ruta raiz del repositorio)</li>
<li>Haz click en <code>Save</code></li>
</ol>
</section>
<section id="github-pages-1" class="slide level2">
<h2>Github pages</h2>
<p>Si te fijas en la <span class="hl-yellow"><strong>parte superior del repositorio</strong></span> ahora tenemos un icono naranja, que nos indica que la <span class="hl-orange"><strong>web está en proceso de ser desplegada (deploy)</strong></span></p>

<img data-src="./img/github-naranja.png" class="r-stretch"></section>
<section id="github-pages-2" class="slide level2">
<h2>Github pages</h2>
<p>Pasados unos segundos (dependiendo del tamaño de la web y tu conexión a internet) ese <span class="hl-green"><strong>icono pasará a ser un check verde</strong></span>: habemus web</p>

<img data-src="./img/github-verde.png" class="r-stretch"><p>El <span class="hl-yellow"><strong>link de la web por defecto</strong></span> será <code>{nombre_usuario}.github.io/{nombre_repo}</code></p>
</section>
<section id="github-pages-3" class="slide level2">
<h2>Github pages</h2>

<img data-src="./img/github-pages-deploy.png" class="r-stretch"><p>¡Un momento! Ahora mismo nuestra web <span class="hl-red"><strong>no nos está mostrando nuestro .qmd</strong></span>, sino por defecto el <span class="hl-yellow"><strong>README.md</strong></span>.</p>
<div class="fragment">
<p>Para que Github entienda que queremos visualizar ese <code>.html</code> que hemos generado a partir del <code>.qmd</code> vamos en nuestro proyecto local a <span class="hl-yellow"><strong>borrar</strong></span> todo lo que no sea nuestro archivo <code>.Rproj</code> y nuestro archivo <code>.qmd</code>, y vamos a <span class="hl-yellow"><strong>cambiar el nombre</strong></span> a este último llamándolo <code>index.qmd</code>, y volvemos a compilarlo para <span class="hl-yellow"><strong>generar un index.html</strong></span></p>
</div>
</section>
<section id="github-pages-4" class="slide level2">
<h2>Github pages</h2>
<p>Vamos a <span class="hl-yellow"><strong>subir a Github ese nuevo proyecto</strong></span> con el cambio de nombre (llamado <code>repo-github-3</code>) para ver luego las diferencias entre uno y otro</p>

<img data-src="./img/repo-index-html.png" class="r-stretch"></section>
<section id="github-pages-5" class="slide level2">
<h2>Github pages</h2>
<p>Si <span class="hl-yellow"><strong>repetimos el proceso para hacer una Page</strong></span> y esperamos al tick verde…</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="./img/index-html-qmd.png"></p>
</div><div class="column" style="width:50%;">
<p>Si a tu <code>.qmd</code> ya le llamas de inicio <code>index.qmd</code>, automáticamente, al detectar Github un <code>index.html</code>, interpreta que ese <span class="hl-yellow"><strong>archivo index.html</strong></span> es el que define la web (y puedes personalizar añadiendo un archivo <code>css</code> de estilos)</p>
<p><span class="hl-green"><strong>Habemus web</strong></span> simplemente clickando en Pages :)</p>
</div>
</div>
</section>
<section id="repo-con-diapositivas" class="slide level2">
<h2>Repo con diapositivas</h2>
<p>Vamos a crear el último repositorio que se llamará <code>repo-diapos</code>, y crear un proyecto en <code>RStudio</code> del mismo nombre (por ejemplo). Una vez creado le daremos a <code>File &lt; New File &lt; Quarto Presentation</code>.</p>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/quarto-slides.png"></p>
</div><div class="column" style="width:55%;">
<p>La forma de escribir será igual que un <code>.qmd</code> normal solo que ahora <span class="hl-yellow"><strong>cada diapositiva la separaremos</strong></span> con un <code>---</code> (usando archivos de estilos podemos personalizar lo que queramos)</p>
<p>Llama al archivo directamente <code>index.qmd</code>, súbelo a Github y con un click en Pages tienes una <span class="hl-yellow"><strong>web con tus diapositivas</strong></span></p>
</div>
</div>
</section>
<section id="uso-de-gitkraken" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>La forma más <span class="hl-yellow"><strong>sencilla para trabajar de manera colaborativa</strong></span> en Github, y tenerlo sincronizado con nuestro local, es hacer uso de <a href="https://www.gitkraken.com/download">Gitkraken</a></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/gitkraken-repo.png"></p>
</div><div class="column" style="width:50%;">
<p>Una vez dentro clickamos en el icono de la carpeta (<code>Repo Management</code>) y si ya tenemos el repositorio en Github seleccionamos <code>Clone</code>, indicando donde queremos clonar (en nuestro local) y que <span class="hl-yellow"><strong>repositorio de Github queremos clonar</strong></span>.</p>
</div>
</div>
</section>
<section id="uso-de-gitkraken-1" class="slide level2">
<h2>Uso de Gitkraken</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/view-change.png"></p>
</div><div class="column" style="width:50%;">
<p>Una vez clonado, la idea es que cada <span class="hl-yellow"><strong>cambio que hagamos en local nos aparecerá en Gitkraken</strong></span> como <code>View changes</code>.</p>
</div>
</div>
</section>
<section id="uso-de-gitkraken-2" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>Cuando tengas suficientes cambios como para <span class="hl-yellow"><strong>actualizar el repositorio</strong></span> (tampoco tiene sentido actualizar con cada edición), verás algo similar a esto con todos los <span class="hl-yellow"><strong>commits realizados</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/stage-all-changes.png"></p>
</div><div class="column" style="width:50%;">
<p>Podrás decidir cuáles de los <span class="hl-yellow"><strong>commits locales quieres incluir en remoto</strong></span>, bien uno a uno o en <code>Stage all changes</code> (para todos)</p>
</div>
</div>
</section>
<section id="uso-de-gitkraken-3" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>Tras incluir los commits deberás incluir un <span class="hl-yellow"><strong>título y descripción del commit</strong></span></p>

<img data-src="img/titulo-commit.png" class="r-stretch"></section>
<section id="uso-de-gitkraken-4" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>Tras hacerlo verás que ahora tenemos <span class="hl-yellow"><strong>dos iconos separados en una especie de árbol</strong></span> (¿te acuerdas de la <code>branch</code> o rama?):</p>
<ul>
<li><p><span class="hl-purple"><strong>Ordenador</strong></span>: la versión del repositorio que tienes en tu <span class="hl-yellow"><strong>ordenador</strong></span>.</p></li>
<li><p><span class="hl-purple"><strong>Logo</strong></span>: la versión del repositorio que tienes <span class="hl-yellow"><strong>subida en remoto</strong></span></p></li>
</ul>

<img data-src="img/split-gitkraken.png" class="r-stretch"></section>
<section id="uso-de-gitkraken-5" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>Mientras eso suceda solo tendrás sincronizado tu ordenador con Gitkraken, pero no con Github. Para ello haremos <span class="hl-yellow"><strong>click en Push</strong></span> (con <code>Pull</code> podrás forzar a tener en local lo mismo que en remoto).</p>

<img data-src="img/push-gitkraken.png" class="r-stretch"></section>
<section id="branchs" class="slide level2">
<h2>Branchs</h2>
<p>Como hemos mencionado ya en varias ocasiones, hay un elefante en la habitación que aún no hemos mentado: las <span class="hl-yellow"><strong>ramas o branchs</strong></span> de un repositorio.</p>
<div class="fragment">
<p>Imagina que estáis trabajando varios en un proyecto y teneís una versión que funciona pero que queréis <span class="hl-yellow"><strong>modificar en paralelo a partir del estado actual</strong></span> del repositorio.</p>
</div>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>ramas</strong></span> nos permiten partir de una versión común del repositorio y hacer cambios que <span class="hl-yellow"><strong>no afecten a los demás</strong></span></p>
</div>
</section>
<section id="branchs-1" class="slide level2">
<h2>Branchs</h2>
<p>Para <span class="hl-yellow"><strong>crear una rama</strong></span> a partir del estado actual de repositorio haremos click en <code>Branch</code> y le pondremos un nombre</p>

<img data-src="img/branch-button.png" class="r-stretch"><p>Una vez creada verás <span class="hl-yellow"><strong>dos iconos</strong></span> y un <span class="hl-yellow"><strong>menú desplegable</strong></span> con las distintas ramas en las que quieres hacer el commit. Imagina que realizas un cambio pero <span class="hl-yellow"><strong>no quieres añadirlo a la rama principal</strong></span>: puedes hacer el <span class="hl-yellow"><strong>commit en tu rama propia en LOCAL</strong></span> (lo harás en la rama activa de tu menú de branchs).</p>
</section>
<section id="branchs-2" class="slide level2">
<h2>Branchs</h2>
<p>La primera vez te pedirá que escribas la <span class="hl-yellow"><strong>rama en REMOTO</strong></span> con la quieres sincronizar tu rama en local. <span class="hl-green"><strong>Consejo</strong></span>: ponle el mismo nombre en remoto que en local.</p>

<img data-src="img/name-branch.png" class="r-stretch"></section>
<section id="branchs-3" class="slide level2">
<h2>Branchs</h2>
<p>Fíjate que ahora tenemos el ordenador y el logo en el mismo sitio. Esto no significa que tengas ambas ramas en tu local, solo que <span class="hl-yellow"><strong>Gitkraken tiene ambas sincronizadas</strong></span>: clickando en cualquiera de ellas, tus archivos en tu ordenador cambiarán.</p>

<img data-src="img/both-branchs.png" class="r-stretch"></section>
<section id="pull-request" class="slide level2">
<h2>Pull request</h2>
<p>Lo más recomendable es que <span class="hl-yellow"><strong>solo se incorpore de una rama secundaria</strong></span> a la rama principal aquello que está <span class="hl-yellow"><strong>validado por un/a coordinador/a</strong></span> del repositorio, asegurándose que todo funciona correctamente.</p>
<p>Cuando queramos incluirlo haremos <span class="hl-yellow"><strong>click con botón derecho</strong></span> en el icono de la rama secundaria y seleccionamos <code>Start a pull request to origin from...</code></p>

<img data-src="img/pull-request-menu.png" class="r-stretch"><div class="fragment">
<p>Una <span class="hl-yellow"><strong>pull request</strong></span> será una <span class="hl-yellow"><strong>petición al responsable de la rama principal</strong></span> para incluir los cambios</p>
</div>
</section>
<section id="pull-request-1" class="slide level2">
<h2>Pull request</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/create-pull-request.png"></p>
</div><div class="column" style="width:40%;">
<p>En el cuadro que no se abre deberemos escribir:</p>
<ul>
<li>La <span class="hl-yellow"><strong>rama</strong></span> a la que hacer el <code>merge</code> (normalmente la <code>main</code>)</li>
<li>Título y resumen de los cambios</li>
<li>Puedes incluso asignar un <span class="hl-yellow"><strong>revisor</strong></span> entre los colaboradores del repo.</li>
<li>Puedes asignar <span class="hl-yellow"><strong>etiquetas</strong></span></li>
</ul>
</div>
</div>
</section>
<section id="pull-request-2" class="slide level2">
<h2>Pull request</h2>
<p>Mientras no se acepte aparecerá un <span class="hl-yellow"><strong>icono de rama</strong></span> y un +1 en Pull Requests</p>
<p><img data-src="img/pending-branch.png" width="500"></p>
<div class="fragment">
<p>Si somos al mantenedor del repositorio, haciendo click en el menú nos saldrán las ramas que nos quieren hacer hacer <code>merge</code></p>
<p><img data-src="img/menu-pr.png" width="500"></p>
</div>
</section>
<section id="pull-request-3" class="slide level2">
<h2>Pull request</h2>
<p>Al hacer click se abrirá un <span class="hl-yellow"><strong>cuadro de Pull Request</strong></span> para decidir si</p>
<ul>
<li><span class="hl-yellow"><strong>Revisar</strong></span> los cambios</li>
<li><span class="hl-yellow"><strong>Aprobar</strong></span> el <code>merge</code></li>
<li><span class="hl-yellow"><strong>Añadir comentarios</strong></span> al que ha solicitado el <code>merge</code> por si queremos solicitar algún cambio <span class="hl-yellow"><strong>antes de ser aprobado</strong></span></li>
</ul>
</section>
<section id="section" class="slide level2">
<h2><img data-src="img/menu-pr-2.png"></h2>
</section>
<section id="pull-request-4" class="slide level2">
<h2>Pull request</h2>
<p>Tras revisar todo y aprobarlo clickaremos en <code>Confirm merge</code>, y tras ello podremos decidir si esa rama que era paralela a la principal la queremos <span class="hl-yellow"><strong>eliminar</strong></span> o dejar visible a todos (consejo: dejar visible para tene <span class="hl-yellow"><strong>trazabilidad</strong></span> del proyecto de trabajo)</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/merge-branch.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/delete-branch.png"></p>
</div>
</div>
<div class="footer footer-default">
<p><a href="..."><strong>Javier Álvarez Liébana</strong></a> • Máster de Bioinformática (ISCIII)</p>
</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true,"width":"normal"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>