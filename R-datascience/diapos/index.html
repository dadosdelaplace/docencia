<!DOCTYPE html>
<html lang="es"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="Grado en Ciencia de Datos Aplicada ‚Ä¢ Javier √Ålvarez Li√©bana">
  <title>SOFTWARE II</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/data-science-2.jpeg" data-background-opacity="0.2" data-background-size="cover" class="quarto-title-block center">
  <h1 class="title">SOFTWARE II</h1>
  <p class="subtitle">An√°lisis de datos en R para Ciencia de Datos</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Grado en Ciencia de Datos Aplicada ‚Ä¢ Javier √Ålvarez Li√©bana 
</div>
</div>
</div>

</section>
<section class="slide level2">

<div class="r-fit-text">
<p><span class="flow">¬°Bienvenidos a R!</span></p>
</div>
<p><span style="color:#444442;"><strong>Dejad vuestras hojas de c√°lculo, Anacondas y SAS a un lado</strong></span></p>
</section>
<section id="buenas" class="slide level2">
<h2>¬°Buenas!</h2>
<p><span class="hl-green"><strong>Correo</strong></span>: <strong><a href="mailto:javalv09@ucm.es" class="email">javalv09@ucm.es</a></strong>. <span class="hl-green"><strong>Despacho</strong></span>: 722 (3¬™ planta). <span class="hl-green"><strong>Tutor√≠as (curso 2024-2025)</strong></span>: lunes y martes de 11 a 13.</p>
<div class="columns">
<div class="column" style="width:25%;">
<p><img data-src="img/me.jpeg"></p>
</div><div class="column" style="width:75%;">
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Javier √Ålvarez Li√©bana</strong></span>, de Carabanchel. Licenciado en Matem√°ticas (UCM). <span class="hl-yellow"><strong>Doctor en estad√≠stica</strong></span> (UGR)</p></li>
<li class="fragment"><p>Encargado de la <span class="hl-yellow"><strong>visualizaci√≥n y an√°lisis de datos covid</strong></span> del Principado de Asturias (2021-2022).</p></li>
<li class="fragment"><p>Miembro de la <span class="hl-yellow"><strong>Sociedad Espa√±ola de Estad√≠stica e IO</strong></span> y la <span class="hl-yellow"><strong>Real Sociedad Matem√°tica Espa√±ola</strong></span>.</p></li>
<li class="fragment"><p>Formador de <code>R</code> en RTVE y ISCIII (actualmente) y el Ayuntamiento de Madrid (2024).</p></li>
</ul>
</div>
</div>
</div>
<p>Actualmente, <span class="hl-yellow"><strong>investigador y docente en la Facultad de Estad√≠stica de la UCM</strong></span>, e investigador colaborador del <span class="hl-yellow"><strong>Network Science Institute</strong></span> de la Northeastern University (Boston). Divulgando por <a href="https://twitter.com/dadosdelaplace"><strong>Twitter</strong></a> e <a href="https://instagram.com/javieralvarezliebana"><strong>Instagram</strong></a></p>
</section>
<section id="objetivos" class="slide level2">
<h2>Objetivos</h2>
<div class="columns">
<div class="column" style="width:37%;">
<p><img data-src="https://assets-global.website-files.com/6092cb6b4ac959f39728dd26/6188a97fa499b5fbfe410417_target%20(1).png"></p>
</div><div class="column" style="width:63%;">
<div>
<ul>
<li class="fragment"><p>Quitarnos el <span class="hl-yellow"><strong>miedo a los errores en programaci√≥n</strong></span> ‚Üí a programar se aprende programando</p></li>
<li class="fragment"><p>Entender los <span class="hl-yellow"><strong>conceptos b√°sicos de R</strong></span> desde cero ‚Üí aprender a abstraer ideas y algoritmos</p></li>
<li class="fragment"><p>Utilidad de programar ‚Üí flujos de trabajo <span class="hl-yellow"><strong>reproducibles</strong>, <strong>transparentes</strong></span> y mantenibles</p></li>
<li class="fragment"><p>Introducci√≥n al <span class="hl-yellow"><strong>an√°lisis y preprocesamiento</strong></span> de datos ‚Üí <code>{tidyverse}</code></p></li>
<li class="fragment"><p>Adquirir habilidades en la <span class="hl-yellow"><strong>visualizaci√≥n de datos</strong></span> ‚Üí <code>{ggplot2}</code></p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="evaluaci√≥n" class="slide level2">
<h2>Evaluaci√≥n</h2>
<ul>
<li><span class="hl-yellow"><strong>Asistencia</strong></span>. No ser√° obligatoria pero se <span class="hl-purple"><strong>valorar√° positivamente</strong></span> la participaci√≥n.</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Evaluaci√≥n continua</strong></span>: se han planteado <span class="hl-purple"><strong>4 entregas individuales (5%-15%-25%-30%)</strong></span>, as√≠ como una <span class="hl-purple"><strong>entrega final grupal (25%)</strong></span> (entre 4 y 7 personas).</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Examen final</strong></span>: solo <span class="hl-purple"><strong>obligatorio en caso de que en la continua individual (sin contar la grupal) no superes el 3.5 sobre 10</strong></span> de nota media. En caso contrario el d√≠a de la entrega final grupal (d√≠a del examen oficial de enero) deber√°s realizar un examen final en lugar de la grupal.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Nota m√°xima</strong></span>: para tener una nota final superior al 9 deber√°s tener al menos un 8.5 de nota media en la evaluaci√≥n continua individual (sin contar la grupal).</li>
</ul>
</div>
</section>
<section id="planificaci√≥n-entregas" class="slide level2">
<h2>Planificaci√≥n entregas</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Entrega I (5%)</strong></span>: 26 de septiembre (segunda mitad de clase, 60 minutos).</p></li>
<li><p><span class="hl-yellow"><strong>Entrega II (15%)</strong></span>: 10 de octubre (120 minutos).</p></li>
<li><p><span class="hl-yellow"><strong>Entrega III (25%)</strong></span>: 11 de noviembre (120 minutos).</p></li>
<li><p><span class="hl-yellow"><strong>Entrega IV (30%)</strong></span>: aprox 19 de diciembre (120 minutos).</p></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><span class="hl-yellow"><strong>Entrega grupal (25%)</strong> o examen final</span>: 20 de enero (10:00-13:30)</li>
</ul>
<p>&nbsp;</p>
<p>Se podr√°n modificar las fechas por saturaci√≥n con otras asignaturas siempre y cuando el/la delegado/a lo solicite con <strong>m√°s de 7 d√≠as de antelaci√≥n</strong>.</p>
</section>
<section id="planificacion" class="slide level2">
<h2>Planificaci√≥n (parte I)</h2>
<div class="column-screen-inset-right">
<div style="font-size:20px">
<table>
<thead>
<tr class="header">
<th style="text-align: center;">CLASE</th>
<th style="text-align: center;">SEMANA</th>
<th style="text-align: center;">FECHAS</th>
<th style="text-align: center;">TOPIC</th>
<th style="text-align: center;">EJ.</th>
<th style="text-align: center;">WORKBOOK</th>
<th style="text-align: center;">ENTREGA</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-1">1</a></td>
<td style="text-align: center;">S1</td>
<td style="text-align: center;">9 sep</td>
<td style="text-align: center;">Primeros pasos en R</td>
<td style="text-align: center;"><a href="#/tu-turno-1">üíª</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-2">2</a></td>
<td style="text-align: center;">S1</td>
<td style="text-align: center;">12 sep</td>
<td style="text-align: center;">Tipos b√°sicos de datos y vectores</td>
<td style="text-align: center;"><a href="#/tu-turno-2-1">üíª</a> <a href="#/tu-turno-2-2">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-2">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-3">3</a></td>
<td style="text-align: center;">S2</td>
<td style="text-align: center;">16 sep</td>
<td style="text-align: center;">Textos</td>
<td style="text-align: center;"><a href="#/tu-turno-3-1">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-3-1">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-4">4</a></td>
<td style="text-align: center;">S2</td>
<td style="text-align: center;">19 sep</td>
<td style="text-align: center;">Primeras bases de datos</td>
<td style="text-align: center;"><a href="#/tu-turno-3-2">üíª</a> <a href="#/tu-turno-3-3">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-3-2">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-5">5</a></td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">26 sep</td>
<td style="text-align: center;">Quarto y entrega I</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/caso-practico-4">üê£</a></td>
<td style="text-align: center;"><a href="#/clase-5">üéØ 5%</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-6">6</a></td>
<td style="text-align: center;">S4</td>
<td style="text-align: center;">30 sep</td>
<td style="text-align: center;">Estructuras de control</td>
<td style="text-align: center;"><a href="#/tu-turno-6-1">üíª</a> <a href="#/tu-turno-6-2">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-6">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-7">7</a></td>
<td style="text-align: center;">S4</td>
<td style="text-align: center;">3 oct</td>
<td style="text-align: center;">Funciones</td>
<td style="text-align: center;"><a href="#/tu-turno-7">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-7">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-8">8</a></td>
<td style="text-align: center;">S5</td>
<td style="text-align: center;">7 oct</td>
<td style="text-align: center;">Tidy data</td>
<td style="text-align: center;"><a href="#/tu-turno-8">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-8">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-9">9</a></td>
<td style="text-align: center;">S5</td>
<td style="text-align: center;">10 oct</td>
<td style="text-align: center;">Entrega II</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/clase-9">üéØ 15%</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-10">10</a></td>
<td style="text-align: center;">S6</td>
<td style="text-align: center;">14 oct</td>
<td style="text-align: center;">Tidyverse: filas</td>
<td style="text-align: center;"><a href="#/tu-turno-10-1">üíª</a> <a href="#/tu-turno-10-2">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-10">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-11">11</a></td>
<td style="text-align: center;">S6</td>
<td style="text-align: center;">17 oct</td>
<td style="text-align: center;">Tidyverse: columnas</td>
<td style="text-align: center;"><a href="#/tu-turno-11-1">üíª</a> <a href="#/tu-turno-11-2">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-11-1">üê£</a> <a href="#/caso-practico-11-2">üê£</a> <a href="#/caso-practico-11-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-12">12</a></td>
<td style="text-align: center;">S7</td>
<td style="text-align: center;">21 oct</td>
<td style="text-align: center;">Tidyverse: res√∫menes</td>
<td style="text-align: center;"><a href="#/tu-turno-12-1">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-12-1">üê£</a> <a href="#/caso-practico-12-2">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-13">13</a></td>
<td style="text-align: center;">S7</td>
<td style="text-align: center;">24 oct</td>
<td style="text-align: center;">Joins. Import/export</td>
<td style="text-align: center;"><a href="#/tu-turno-13-1">üíª</a> <a href="#/tu-turno-13-2">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-13-1">üê£</a> <a href="#/caso-practico-13-2">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="planificacion-II" class="slide level2">
<h2>Planificaci√≥n (parte II)</h2>
<div class="column-screen-inset-right">
<div style="font-size:20px">
<table>
<thead>
<tr class="header">
<th style="text-align: center;">CLASE</th>
<th style="text-align: center;">SEMANA</th>
<th style="text-align: center;">FECHAS</th>
<th style="text-align: center;">TOPIC</th>
<th style="text-align: center;">EJ.</th>
<th style="text-align: center;">WORKBOOK</th>
<th style="text-align: center;">ENTREGA</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-14">14-15-16</a></td>
<td style="text-align: center;">S8</td>
<td style="text-align: center;">28 y 31 oct</td>
<td style="text-align: center;">Concurso</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-17">17</a></td>
<td style="text-align: center;">S9</td>
<td style="text-align: center;">4 nov</td>
<td style="text-align: center;">Listas. Casos reales</td>
<td style="text-align: center;"><a href="#/tu-turno-17-1">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-practico-17-1">üê£</a> <a href="#/caso-practico-17-2">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-18">18</a></td>
<td style="text-align: center;">S9</td>
<td style="text-align: center;">7 nov</td>
<td style="text-align: center;">Casos reales</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/caso-practico-18-1">üê£</a> <a href="#/caso-practico-18-2">üê£</a> <a href="#/caso-practico-18-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-19">19</a></td>
<td style="text-align: center;">S10</td>
<td style="text-align: center;">11 nov</td>
<td style="text-align: center;">Entrega III</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/clase-19">üéØ 25%</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-20">20</a></td>
<td style="text-align: center;">S10</td>
<td style="text-align: center;">14 nov</td>
<td style="text-align: center;">Intro al dataviz</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-21">21</a></td>
<td style="text-align: center;">S11</td>
<td style="text-align: center;">18 nov</td>
<td style="text-align: center;">ggplot1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-22">22</a></td>
<td style="text-align: center;">S11</td>
<td style="text-align: center;">21 nov</td>
<td style="text-align: center;">ggplot2</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-23">23</a></td>
<td style="text-align: center;">S12</td>
<td style="text-align: center;">25 nov</td>
<td style="text-align: center;">ggplot3</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-24">24</a></td>
<td style="text-align: center;">S12</td>
<td style="text-align: center;">28 nov</td>
<td style="text-align: center;">ggplot4</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-25">25</a></td>
<td style="text-align: center;">S13</td>
<td style="text-align: center;">2 dic</td>
<td style="text-align: center;">casos pr√°cticos (factores)</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-26">26</a></td>
<td style="text-align: center;">S13</td>
<td style="text-align: center;">5 dic</td>
<td style="text-align: center;">inferencia</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-27">27</a></td>
<td style="text-align: center;">S14</td>
<td style="text-align: center;">9 dic</td>
<td style="text-align: center;">casos pr√°cticos (r base tambi√©n)</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-28">28</a></td>
<td style="text-align: center;">S14</td>
<td style="text-align: center;">12 dic</td>
<td style="text-align: center;">sql + arrow</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-29">29</a></td>
<td style="text-align: center;">S15</td>
<td style="text-align: center;">16 dic</td>
<td style="text-align: center;">‚Ä¶</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-30">30</a></td>
<td style="text-align: center;">S15</td>
<td style="text-align: center;">19 dic</td>
<td style="text-align: center;">Entrega IV</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><a href="#/clase-30">üéØ 30%</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="materiales" class="slide level2">
<h2>Materiales</h2>
<ul>
<li><span class="hl-yellow"><strong>Diapositivas</strong></span>: diapositivas en <code>Quarto</code> disponibles y actualizadas en <strong><a href="https://javieralvarezliebana.es/docencia/R-datascience" class="uri">https://javieralvarezliebana.es/docencia/R-datascience</a></strong>. En el men√∫ de las diapositivas (abajo a la izquierda) tienes una <span class="hl-yellow"><strong>opci√≥n para descargarlas en pdf</strong></span> en <code>Tools</code></li>
</ul>
<p>&nbsp;</p>
<ul>
<li><p><span class="hl-yellow"><strong>Material</strong></span>: <a href="https://javieralvarezliebana.es/docencia/R-datascience/material/"><strong>cuadernos de trabajo</strong></a> y materiales extras y <strong>res√∫menes de paquetes</strong></p></li>
<li><p><span class="hl-yellow">üóÉ <strong>Datos</strong></span>: datasets que usaremos a lo largo de la asignatura, disponibles en Github <strong><a href="https://javieralvarezliebana.es/docencia/R-datascience/material" class="uri">https://javieralvarezliebana.es/docencia/R-datascience/material</a></strong> y drive <a href="https://drive.google.com/drive/folders/1iG_wzHOavm8PB6pvrXk7jnGJ5lJCpUFK?usp=sharing" class="uri">https://drive.google.com/drive/folders/1iG_wzHOavm8PB6pvrXk7jnGJ5lJCpUFK?usp=sharing</a></p></li>
<li><p><span class="hl-yellow">üìö <strong>Recursos de apoyo</strong></span>: en ingl√©s <a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a> y en castellano <a href="https://cdr-book.github.io/" class="uri">https://cdr-book.github.io/</a>, y <a href="https://ivelasq.quarto.pub/intro-to-quarto/" class="uri">https://ivelasq.quarto.pub/intro-to-quarto/</a> para Quarto.</p></li>
</ul>
</section>
<section>
<section id="clase-1" class="title-slide slide level1 center">
<h1>Clase 1: <span class="flow">primeros pasos</span></h1>
<p><span style="color:#444442;"><strong>Instalando R y RStudio. Primeros pasos. Scripts y proyectos</strong></span></p>
<ul>
<li><a href="#/tu-turno-1">üíª Ejercicios resueltos</a></li>
<li><a href="#/planificacion">üìÜ Planificaci√≥n</a></li>
</ul>
</section>
<section id="requisitos" class="slide level2">
<h2>Requisitos</h2>
<p>Para el curso los √∫nicos requisitos ser√°n:</p>
<ol type="1">
<li><span class="hl-yellow"><strong>Conexi√≥n a internet</strong></span> (para la descarga de algunos datos y paquetes).</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li><span class="hl-yellow"><strong>Instalar R</strong></span>: ser√° nuestro lenguaje. La descarga la haremos (gratuitamente) desde <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a></li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li><span class="hl-yellow"><strong>Instalar RStudio</strong></span> desde <a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a></li>
</ol>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/cranR.jpg" width="420"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rstudio.jpg" width="420"></p>
</div>
</div>
</div>
</section>
<section id="r-vs-rstudio" class="slide level2">
<h2>R vs RStudio</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/gramatica.webp" width="360"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/word.jpg" width="430"></p>
</div>
</div>
<div class="fragment fade-in-then-out">
<p>Programaremos como escribimos (castellano, por ejemplo) ‚Üí <code>R</code> es <span class="hl-yellow"><strong>lenguaje</strong></span></p>
</div>
<div class="fragment fade-up">
<ul>
<li>Necesitaremos una <span class="hl-yellow"><strong>gram√°tica, un lenguaje</strong></span> (<code>R</code>)</li>
</ul>
<div class="fragment fade-in">
<ul>
<li>Y un entorno, por ejemplo un <span class="hl-yellow"><strong>Word</strong></span> (<code>RStudio</code>), para escribirlo</li>
</ul>
</div>
</div>
</section>
<section id="instalaci√≥n-de-r" class="slide level2">
<h2>Instalaci√≥n de R</h2>
<p>El lenguaje <code>R</code> ser√° nuestra <span class="hl-yellow"><strong>gram√°tica y ortograf√≠a</strong></span> (nuestras reglas de juego)</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 1</strong></span>: entra en <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a> y selecciona tu sistema operativo.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 2</strong></span>: para Mac basta con que hacer click en el <strong>archivo .pkg</strong>, y abrirlo una vez descargado. Para sistemas Windows, debemos clickar en <strong>install R for the first time</strong> y despu√©s en <strong>Download R for Windows</strong>. Una vez descargado, abrirlo como cualquier archivo de instalaci√≥n.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 3</strong></span>: abrir el ejecutable de instalaci√≥n.</p></li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Siempre que tengas que descargar algo de CRAN (ya sea el propio R o un paquete), <span class="hl-orange"><strong>aseg√∫rate de tener conexi√≥n a internet</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-operaci√≥n" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Primera operaci√≥n</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Para comprobar la instalaci√≥n, tras abrir <code>R</code>, deber√≠as ver el <code>R GUI</code> (Graphical User Interface) con una <strong>pantalla blanca</strong> similar a esta (<span class="hl-yellow"><strong>consola</strong></span>).</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>Primer c√≥digo</strong></span>: a una variable llamada <code>a</code> le <strong>asignaremos</strong> el valor <code>1</code> (escribiremos el c√≥digo en la consola y daremos ¬´enter¬ª). Tras ello haremos la suma <code>a + b</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb1-1" class="hljs-ln-code"><a href="#cb1-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="primera-operaci√≥n-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Primera operaci√≥n</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Para comprobar la instalaci√≥n, tras abrir <code>R</code>, deber√≠as ver el <code>R GUI</code> (Graphical User Interface) con una <strong>pantalla blanca</strong> similar a esta (<span class="hl-yellow"><strong>consola</strong></span>).</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Primer c√≥digo</strong></span>: a una variable llamada <code>a</code> le <strong>asignaremos</strong> el valor <code>1</code> (escribiremos el c√≥digo en la consola y daremos ¬´enter¬ª). Tras ello haremos la suma <code>a + b</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb2-1" class="hljs-ln-code"><a href="#cb2-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-2" class="hljs-ln-code"><a href="#cb2-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="primera-operaci√≥n-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Primera operaci√≥n</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Para comprobar la instalaci√≥n, tras abrir <code>R</code>, deber√≠as ver el <code>R GUI</code> (Graphical User Interface) con una <strong>pantalla blanca</strong> similar a esta (<span class="hl-yellow"><strong>consola</strong></span>).</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Primer c√≥digo</strong></span>: a una variable llamada <code>a</code> le <strong>asignaremos</strong> el valor <code>1</code> (escribiremos el c√≥digo en la consola y daremos ¬´enter¬ª). Tras ello haremos la suma <code>a + b</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb3-1" class="hljs-ln-code"><a href="#cb3-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-2" class="hljs-ln-code"><a href="#cb3-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb3-3" class="hljs-ln-code"><a href="#cb3-3"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>F√≠jate que‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>En la consola aparece un n√∫mero <code>[1]</code>: simplemente es un contador de elementos (como contar filas en un Word)</p>
</div>
</div>
</div>
</div>
</section>
<section id="instalaci√≥n-de-r-studio" class="slide level2">
<h2>Instalaci√≥n de R Studio</h2>
<p><code>RStudio</code> ser√° el <span class="hl-yellow"><strong>Word</strong></span> que usaremos para escribir (lo que se conoce como un <span class="hl-yellow"><strong>IDE: entorno integrado de desarrollo</strong></span>).</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 1</strong></span>: entra la <a href="https://posit.co/download/rstudio-desktop/">web oficial de RStudio</a> (ahora llamado Posit) y selecciona la descarga gratuita.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 2</strong></span>: selecciona el ejecutable que te aparezca acorde a tu sistema operativo.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 3</strong></span>: tras descargar el ejecutable, hay que abrirlo como otro cualquier otro y dejar que termine la instalaci√≥n.</p></li>
</ul>
</div>
</section>
<section id="organizaci√≥n-de-rstudio" class="slide level2">
<h2>Organizaci√≥n de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Consola</strong></span>: es el nombre para llamar a la ventana grande que te ocupa buena parte de tu pantalla. Prueba a escribir el mismo c√≥digo que antes (la suma de las variables) en ella. La consola ser√° donde <strong>ejecutaremos √≥rdenes y mostraremos resultados</strong>.</li>
</ul>

<img data-src="img/consola_rstudio.jpg" width="420" class="r-stretch"></section>
<section id="organizaci√≥n-de-rstudio-1" class="slide level2">
<h2>Organizaci√≥n de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Environment</strong></span>: la pantalla peque√±a (puedes ajustar los m√°rgenes con el rat√≥n a tu gusto) que tenemos en la parte superior derecha. Nos mostrar√° las <strong>variables que tenemos definidas</strong>.</li>
</ul>

<img data-src="img/environment.jpg" width="420" class="r-stretch"></section>
<section id="organizaci√≥n-de-rstudio-2" class="slide level2">
<h2>Organizaci√≥n de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Panel multiusos</strong></span>: la ventana que tenemos en la parte inferior derecha no servir√° para buscar <strong>ayuda de funciones</strong>, adem√°s de para <strong>visualizar gr√°ficos</strong>.</li>
</ul>

<img data-src="img/multiusos.jpg" width="420" class="r-stretch"></section>
<section id="qu√©-es-r-por-qu√©-r" class="slide level2">
<h2>¬øQu√© es R? ¬øPor qu√© R?</h2>

<img data-src="img/meme_barco.jpg" class="r-stretch"></section>
<section id="qu√©-es-r-por-qu√©-r-1" class="slide level2">
<h2>¬øQu√© es R? ¬øPor qu√© R?</h2>

<img data-src="img/incel_excel.png" class="r-stretch"><p><code>R</code> es la evoluci√≥n del trabajo de los laboratorios Bell con el lenguaje <code>S</code>, que fue llevado al mundo del software libre por Ross Ihaka y Robert Gentleman en los a√±os 90. La version <code>R 1.0.0</code> se public√≥ el 29 de febrero de 2000.</p>
</section>
<section id="qu√©-es-r-por-qu√©-r-2" class="slide level2">
<h2>¬øQu√© es R? ¬øPor qu√© R?</h2>
<p><code>R</code> es el <span class="hl-yellow"><strong>lenguaje estad√≠stico por excelencia</strong></span>, creado por y para estad√≠sticos/as, con 6 ventajas fundamentales <span class="hl-red"><strong>frente a Excel, SAS, Stata o SPSS</strong></span>:</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Lenguaje de programaci√≥n</strong></span>: la obviedad ‚Üí an√°lisis <span class="hl-purple"><strong>replicables</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Gratuito</strong></span>: la filosof√≠a de la comunidad de <code>R</code> es el compartir c√≥digo bajo <strong>copyleft</strong> ‚Üí <strong>uso √©tico de dinero y algoritmos</strong></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Software libre</strong></span>: no solo es gratis sino que permite acceder libremente a c√≥digo ajeno, incluso al <strong>propio c√≥digo fuente</strong> ‚Üí <span class="hl-purple"><strong>flexibilidad y transparencia</strong></span> (Free and Open Source Software FOSS)</li>
</ul>
</div>
</section>
<section id="qu√©-es-r-por-qu√©-r-3" class="slide level2">
<h2>¬øQu√© es R? ¬øPor qu√© R?</h2>
<p><code>R</code> es el <span class="hl-yellow"><strong>lenguaje estad√≠stico por excelencia</strong></span>, creado por y para estad√≠sticos/as, con 6 ventajas fundamentales <span class="hl-red"><strong>frente a Excel, SAS, Stata o SPSS</strong></span>:</p>
<ul>
<li><span class="hl-yellow"><strong>Lenguaje modular</strong></span>: hemos instalado lo m√≠nimo, pero existen c√≥digos de otras personas que podemos reusar (casi 20 000 <span class="hl-yellow"><strong>paquetes</strong></span>) ‚Üí <span class="hl-purple"><strong>ahorro de tiempo</strong></span> e <span class="hl-purple"><strong>innovaci√≥n inmediata</strong></span></li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Lenguaje de alto nivel</strong></span>: facilita la programaci√≥n (como Python) ‚Üí <span class="hl-purple"><strong>menor curva de aprendizaje</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Comunidad y empleabilidad</strong></span>: junto con Python es el lenguaje m√°s utilizado en el campo de la estad√≠stica y la ciencia de datos en investigaci√≥n, docencia, empresas (L√≠nea Directa, Mapfre, Telef√≥nica, Orange, Apple, Spotify, Netflix, El Pa√≠s, Civio, HP, etc) y organismos p√∫blicos (ISCIII, CNIC, CNIO, INE, IGN, CIS, CEO, DGT, AEMET, RTVE, etc)</li>
</ul>
</div>
</section>
<section id="por-qu√©-programar" class="slide level2">
<h2>¬øPor qu√© programar?</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Automatizar</strong></span> ‚Üí te permitir√° automatizar tareas recurrentes.</p></li>
<li><p><span class="hl-yellow"><strong>Replicabilidad</strong></span> ‚Üí podr√°s replicar tu an√°lisis siempre de la misma manera.</p></li>
<li><p><span class="hl-yellow"><strong>Flexibilidad</strong></span> ‚Üí podr√°s adaptar el software a tus necesidades.</p></li>
<li><p><span class="hl-yellow"><strong>Transparencia</strong></span> ‚Üí ser auditado por la comunidad.</p></li>
</ul>

<img data-src="img/the_general_problem.png" class="r-stretch"></section>
<section id="idea-fundamental-paquetes" class="slide level2">
<h2>Idea fundamental: paquetes</h2>
<p>Una de las ideas claves de <code>R</code> es el <span class="hl-yellow"><strong>uso de paquetes</strong></span>: c√≥digos que otras personas han implementado para <strong>resolver un problema</strong></p>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Instalaci√≥n</strong></span>: descargamos los c√≥digos de la web (necesitamos internet) ‚Üí <span class="hl-purple"><strong>comprar un libro</strong></span>, solo una vez (por ordenador)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Carga</strong></span>: con el paquete descargado, indicamos qu√© paquetes queremos usar cada vez que abramos <code>RStudio</code> ‚Üí <span class="hl-purple"><strong>traer el libro de la estanter√≠a</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="idea-fundamental-paquetes-1" class="slide level2">
<h2>Idea fundamental: paquetes</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<p>Una vez instalado, hay <strong>dos manera de usar un paquete</strong> (traerlo de la estanter√≠a)</p>
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Paquete entero</strong></span>: con <code>library()</code>, usando el nombre del paquete sin comillas, cargamos en la sesi√≥n <span class="hl-purple"><strong>todo el libro</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Funciones concretas</strong></span> usando <code>paquete::funcion</code> le √≠ndicamos que solo queremos una <span class="hl-purple"><strong>p√°gina concreta de ese libro</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="te-vas-equivocar" class="slide level2">
<h2>Te vas equivocar</h2>
<p>Durante tu aprendizaje va a ser muy habitual que las cosas no salgan a la primera ‚Üí <span class="hl-yellow"><strong>te vas equivocar</strong></span>. No solo ser√° importante asumirlo sino que es <span class="hl-yellow"><strong>importante leer los mensajes de error</strong></span> para aprender de ellos.</p>
<div class="fragment">
<ul>
<li><span class="hl-red"><strong>Mensajes de error</strong></span>: precedidos de <strong>¬´Error in‚Ä¶¬ª</strong> y ser√°n aquellos fallos que <span class="hl-red"><strong>impidan la ejecuci√≥n</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="st">"a"</span> <span class="sc">+</span> <span class="dv">1</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "a" + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-orange"><strong>Mensajes de warning</strong></span>: precedidos de <strong>¬´Warning in‚Ä¶¬ª</strong> son los (posibles) fallos m√°s delicados ya que son incoherencias que <span class="hl-orange"><strong>no impiden la ejecuci√≥n</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Ejecuta la orden pero el resultado es NaN, **Not A Number**, un valor que no existe</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(-1): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="scripts-documentos-.r" class="slide level2">
<h2>Scripts (documentos .R)</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/abrir_script.jpg" width="350"></p>
</div><div class="column" style="width:65%;">
<p>Un <span class="hl-yellow"><strong>script</strong></span> ser√° el documento en el que programamos, nuestro archivo <code>.doc</code> (aqu√≠ con extensi√≥n <code>.R</code>) donde escribiremos las √≥rdenes. Para <strong>abrir nuestro primero script</strong>, haz click en el men√∫ en <code>File &lt; New File &lt; R Script</code>.</p>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Es importante <strong>no abusar de la consola</strong>: todo lo que no escribas en un script, cuando cierres, <span class="hl-orange"><strong>lo habr√°s perdido</strong></span>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p><code>R</code> es <span class="hl-orange"><strong>case-sensitive</strong></span>: es sensible a may√∫sculas y min√∫sculas por lo que <code>x</code> y <code>X</code> representa variables distintas.</p>
</div>
</div>
</div>
</section>
<section id="ejecutando-el-primer-script" class="slide level2">
<h2>Ejecutando el primer script</h2>
<p>Ahora tenemos una <strong>cuarta ventana</strong>: la ventana donde <span class="hl-yellow"><strong>escribiremos nuestros c√≥digos</strong></span>. ¬øC√≥mo ejecutarlo?</p>
<div class="fragment">
<ol type="1">
<li><strong>Escribimos</strong> el c√≥digo a ejecutar.</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><strong>Guardamos</strong> el archivo .R haciendo click en <code>Save current document</code>.</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>El c√≥digo no se ejecuta salvo que se lo indiquemos. Tenemos <strong>tres opciones de ejecutar un script</strong>:</li>
</ol>
<ul>
<li><span class="hl-yellow"><strong>Copiar y pegar</strong></span> en consola.</li>
<li><span class="hl-yellow"><strong>Seleccionar l√≠neas</strong></span> y <code>Ctrl+Enter</code></li>
<li><span class="hl-yellow"><strong>Activar Source on save</strong></span> a la derecha de guardar: no solo guarda sino que ejecuta el c√≥digo <strong>completo</strong>.</li>
</ul>
</div>
</section>
<section id="s√©-organizado-proyectos" class="slide level2">
<h2>S√© organizado: proyectos</h2>
<p>De la misma manera que en el ordenador solemos trabajar de manera <span class="hl-yellow"><strong>ordenada por carpetas</strong></span>, en <code>RStudio</code> podemos hacer lo mismo para trabajar de <span class="hl-yellow"><strong>manera eficaz creando proyectos</strong></span>.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:60%;">
<p>Un <span class="hl-yellow"><strong>proyecto ser√° una ¬´carpeta¬ª</strong></span> dentro de <code>RStudio</code>, de manera que nuestro directorio ra√≠z autom√°ticamente ser√° la propia carpeta de proyecto (pudiendo pasar de un proyecto a otro con el menu superior derecho).</p>
<p>Podemos crear uno en una carpeta nueva o en una carpeta ya existente.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/rstudio_proyectos.png" width="370"></p>
</div>
</div>
</div>
</section>
<section id="tu-turno-1" class="slide level2">
<h2>üíª Tu turno</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-1-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-1-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-1-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-1-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-1-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-1-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li><li><a href="#tabset-1-8"><span class="hl-yellow"><strong>Ejercicio 8</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>üìù Crea en tu ordenador una carpeta de la asignatura y crea dentro de ella el proyecto de <code>RStudio</code>: es ah√≠ donde vas a guardar todo lo que hagamos a lo largo de este curso.Tras crear el proyecto tendr√°s un archivo <code>R Project</code>. A continuaci√≥n crea en dicha carpeta dos subcarpetas: <code>datos</code> (es ah√≠ donde ir√°s guardando los distintos datasets que usaremos) y <code>scripts</code> (es ah√≠ donde ir√°s guardando los archivos <code>.R</code> de cada clase)</p>
</div>
<div id="tabset-1-2">
<p>üìù Dentro del proyecto crea un script <code>ejercicios-clase1.R</code> (dentro de la carpeta <code>scripts</code>). Una vez creado define en √©l una variable de nombre <code>a</code> y cuyo valor sea -1. Ejecuta el c√≥digo de las 3 maneras explicadas.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>a <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-3">
<p>üìù A√±ade debajo otra l√≠nea para definir una variable <code>b</code> con el valor 5. Tras ello guarda la multiplicaci√≥n de ambas variables. Ejecuta el c√≥digo como consideres.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>a <span class="sc">*</span> b <span class="co"># sin guardar</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>multiplicacion <span class="ot">&lt;-</span> a <span class="sc">*</span> b <span class="co"># guardado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-4">
<p>üìù Modifica el c√≥digo inferior para definir dos variables c y d, con valores 3 y -1. Tras ello divide las variables y guarda el resultado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>c <span class="ot">&lt;-</span> <span class="co"># deber√≠as asignarle el valor 3</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>d <span class="ot">&lt;-</span> <span class="co"># deber√≠as asignarle el valor -1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>d <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>c <span class="sc">/</span> d <span class="co"># sin guardar</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>division <span class="ot">&lt;-</span> c <span class="sc">/</span> d <span class="co"># guardado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-5">
<p>üìù Asigna un valor positivo a <code>x</code> y calcula su ra√≠z cuadrada; asigna otro negativo <code>y</code> y calcula su valor absoluto con la funci√≥n <code>abs()</code>.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">sqrt</span>(x)</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="fu">abs</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Toma nota</strong></p>
</div>
<div class="callout-content">
<p>Comandos como <code>sqrt()</code>, <code>abs()</code> o <code>max()</code> son lo que llamamos <span class="hl-purple"><strong>funciones</strong></span>: l√≠neas de c√≥digo que hemos ¬´encapsulado¬ª bajo un nombre, y dado unos argumentos de entrada, ejecuta las √≥rdenes (una especie de atajo). En las funciones los <span class="hl-yellow"><strong>argumentos ir√°n SIEMPRE entre par√©ntesis</strong></span></p>
</div>
</div>
</div>
</div>
<div id="tabset-1-6">
<p>üìù Usando la variable <code>x</code> ya definida, completa/modifica el c√≥digo inferior para guardar en una nueva variable <code>z</code> el resultado guardado en <code>x</code> menos 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>z <span class="ot">&lt;-</span> ? <span class="sc">-</span> ? <span class="co"># completa el c√≥digo</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="dv">5</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-7">
<p>üìù Define una variable <code>x</code> y as√≠gnale el valor <code>-1</code>. Define otra <code>y</code> y as√≠gnale el valor <code>0</code>. Tras ello realiza las operaciones a) <code>x</code> entre <code>y</code>; b) ra√≠z cuadrada de <code>x</code>. ¬øQu√© obtienes?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>y <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb21-3"><a href="#cb21-3"></a></span>
<span id="cb21-4"><a href="#cb21-4"></a>x <span class="sc">/</span> y</span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="fu">sqrt</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-8">
<p>üìù Escribe el c√≥digo inferior en tu script. ¬øPor qu√© crees que no funciona?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>y <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb22-3"><a href="#cb22-3"></a></span>
<span id="cb22-4"><a href="#cb22-4"></a>X <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'X' not found</code></pre>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="clase-2" class="title-slide slide level1 center">
<h1>Clase 2: <span class="flow">primeros datos y vectores</span></h1>
<p><span style="color:#444442;"><strong>¬øQu√© tipos de celdas (datos) existen? Concatenando celdas: vectores</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-2-1">üíª Ejercicios resueltos: tipos de datos</a></p></li>
<li><p><a href="#/tu-turno-2-2">üíª Ejercicios resueltos: vectores</a></p></li>
<li><p><a href="#/caso-pr√°ctico-2">üê£ Workbook/caso pr√°ctico</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="de-la-celda-a-la-tabla" class="slide level2">
<h2>De la CELDA a la TABLA</h2>
<p>¬øQu√© <span class="hl-yellow"><strong>tipo de dato</strong></span> podemos tener en cada celda de una <strong>tabla</strong>?</p>

<img data-src="img/celdas.jpg" class="r-stretch"><div>
<ul>
<li class="fragment"><span class="hl-yellow"><strong>Celda</strong></span>: dato individual de un tipo concreto.</li>
<li class="fragment"><span class="hl-yellow"><strong>Variable</strong></span>: <strong>concatenaci√≥n</strong> de valores del mismo tipo (<span class="hl-purple"><strong>vectores en R</strong></span>).</li>
<li class="fragment"><span class="hl-yellow"><strong>Matriz</strong></span>: concatenaci√≥n de variables del <strong>mismo tipo y longitud</strong>.</li>
<li class="fragment"><span class="hl-yellow"><strong>Tabla</strong></span>: concatenaci√≥n de variables de <span class="hl-purple"><strong>distinto tipo pero igual longitud</strong></span></li>
<li class="fragment"><span class="hl-yellow"><strong>Lista</strong></span>: concatenaci√≥n de variables de <span class="hl-purple"><strong>distinto tipo y distinta longitud</strong></span></li>
</ul>
</div>
</section>
<section id="pero-antesbuenas-pr√°cticas" class="slide level2">
<h2>Pero antes‚Ä¶buenas pr√°cticas</h2>
<p>Antes de seguir, es importante que sepas algo cu√°nto antes: <span class="hl-yellow"><strong>empezar en la programaci√≥n puede ser frustrante</strong></span></p>
<div class="fragment">
<p>Al igual que cuando aprendes un idioma nuevo, el primer obst√°culo a solventar no es tanto qu√© decir sino c√≥mo decirlo de manera correcta. Y en <code>R</code> pasa lo mismo, as√≠ que vamos a <span class="hl-yellow"><strong>normalizar nuestra forma de programar</strong></span> lo m√°ximo posible para evitar errores futuros.</p>
</div>
<div class="fragment">
<ul>
<li><span class="hl-green"><strong>Tip 1</strong></span>: <span class="hl-yellow"><strong>asignar, evaluar y comparar no es lo mismo</strong></span>. Si te has fijado en <code>R</code> estamos usando <code>&lt;-</code> para asignar valores a variables. Usaremos <code>=</code> para evaluar argumentos en funciones y <code>==</code> para saber si dos elementos son iguales.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># asignar</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>x <span class="ot">=</span> <span class="dv">1</span> <span class="co"># evaluar</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>x <span class="sc">==</span> <span class="dv">1</span> <span class="co"># comparar</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="pero-antesbuenas-pr√°cticas-1" class="slide level2">
<h2>Pero antes‚Ä¶buenas pr√°cticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 2</strong></span>: programa como escribes. Al igual que cuando redactas en castellano, acost√∫mbrate a incorporar <span class="hl-yellow"><strong>espacios y saltos de l√≠nea</strong></span> paranoquedarteciego (es una buena pr√°ctica y no un requisito porque <code>R</code> no procesa los espacios)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># √≥ptimo</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>x<span class="ot">&lt;-</span><span class="dv">1</span> <span class="co"># regu</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>x<span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># peor (dec√≠dete)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-green"><strong>Tip 3</strong></span>: no seas ca√≥tico/a, <span class="hl-yellow"><strong>estandariza nombres</strong></span>. Acost√∫mbrate siempre a nombrar las variables de la misma manera. El √∫nico requisito es que <strong>debe empezar siempre por una letra</strong> (y sin tildes). La forma m√°s recomendable es la conocida como <code>snake_case</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>variable_en_modo_snake_case</span>
<span id="cb26-2"><a href="#cb26-2"></a>otraFormaMasDificilDeLeer</span>
<span id="cb26-3"><a href="#cb26-3"></a>hay.gente.que.usa.esto</span>
<span id="cb26-4"><a href="#cb26-4"></a>Incluso_Haygente.Caotica_que.NoMereceNuestraATENCION</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="pero-antesbuenas-pr√°cticas-2" class="slide level2">
<h2>Pero antes‚Ä¶buenas pr√°cticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 4</strong></span>: facilita la lectura y escritura, <span class="hl-yellow"><strong>pon l√≠mites</strong></span>. En <code>Tools &lt; Global Options</code> puedes personalizar algunas opciones de <code>RStudio</code>. En <code>Code &lt; Display</code> podemos indicarle en <code>Show margin</code> que los scripts nos muestren un margen ‚Äúimaginario‚Äù (no interacciona con el c√≥digo) para ‚Äúforzarnos‚Äù a realizar un salto de l√≠nea.</li>
</ul>

<img data-src="img/show_margin.jpg" class="r-stretch"></section>
<section id="pero-antesbuenas-pr√°cticas-3" class="slide level2">
<h2>Pero antes‚Ä¶buenas pr√°cticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 5</strong></span>: el <span class="hl-yellow"><strong>tabulador es tu mejor amigo</strong></span>. En <code>RStudio</code> tenemos una herramienta maravillosa: si escribes parte del nombre de una variable o funci√≥n y tabulas, <code>RStudio</code> te autocompleta</li>
</ul>

<img data-src="img/tab-autocompletar.png" class="r-stretch"></section>
<section id="pero-antesbuenas-pr√°cticas-4" class="slide level2">
<h2>Pero antes‚Ä¶buenas pr√°cticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 6</strong></span>: ni un par√©ntesis soltero. Siempre que abras un par√©ntesis deber√°s cerrarlo. Para facilitar esta tarea entra en <code>Tools &lt; Global Options &lt; Code &lt; Display</code> y activa la opci√≥n <code>Rainbow parentheses</code></li>
</ul>

<img data-src="img/rainbow-parentheses.jpg" class="r-stretch"></section>
<section id="pero-antesbuenas-pr√°cticas-5" class="slide level2">
<h2>Pero antes‚Ä¶buenas pr√°cticas</h2>
<ul>
<li><span class="hl-green"><strong>Tip 7</strong></span>: f√≠jate en el lateral izquierdo. No solo podr√°s ver la l√≠nea de c√≥digo por la que vas sino que, en caso de estar cometiendo un <span class="hl-red"><strong>error de sintaxis</strong></span>, el propio <code>RStudio</code> te avisar√°.</li>
</ul>

<img data-src="img/rstudio-error-sintaxis.png" class="r-stretch"><ul>
<li><span class="hl-green"><strong>Tip 8</strong></span>: intenta <span class="hl-yellow"><strong>trabajar siempre por proyectos</strong></span> (para esta clase, crea un script <code>clase2.R</code> en el proyecto que creamos en la anterior clase)</li>
</ul>
<p>&nbsp;</p>
<p>Ver m√°s tips en <a href="https://r4ds.had.co.nz/workflow-basics.html#whats-in-a-name" class="uri">https://r4ds.had.co.nz/workflow-basics.html#whats-in-a-name</a></p>
</section>
<section id="celdas-tipos-de-datos" class="slide level2">
<h2>Celdas: tipos de datos</h2>
<p>¬øExisten <span class="hl-yellow"><strong>variables m√°s all√° de los n√∫meros en la ciencia de datos</strong></span>? Piensa por ejemplo en los datos que podr√≠as guardar de una persona:</p>
<div class="fragment fade-up">
<ul>
<li>La edad o el peso ser√° un <span class="hl-yellow"><strong>n√∫mero</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Su nombre ser√° una cadena de <span class="hl-yellow"><strong>texto (conocida como string o char)</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>A la pregunta ¬´¬øest√°s matriculado en la Facultad?¬ª la respuesta ser√° lo que llamamos una <span class="hl-yellow"><strong>variable l√≥gica</strong></span> (<code>TRUE</code> si est√° matriculado o <code>FALSE</code> en otro caso).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>matriculado <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Su fecha de nacimiento ser√° precisamente eso, una <span class="hl-yellow"><strong>fecha</strong></span>.</li>
</ul>
</div>
</section>
<section id="variables-num√©ricas" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Variables num√©ricas</h2>
<p>El dato m√°s sencillo (ya lo hemos usado) ser√°n las <span class="hl-yellow"><strong>variables num√©ricas</strong></span>. Para saber la <span class="hl-yellow"><strong>clase de dato en R</strong></span> de una variable tenemos la funci√≥n <code>class()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb30-1" class="hljs-ln-code"><a href="#cb30-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="variables-num√©ricas-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Variables num√©ricas</h2>
<p>El dato m√°s sencillo (ya lo hemos usado) ser√°n las <span class="hl-yellow"><strong>variables num√©ricas</strong></span>. Para saber la <span class="hl-yellow"><strong>clase de dato en R</strong></span> de una variable tenemos la funci√≥n <code>class()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="fu">class</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Para saber su <span class="hl-yellow"><strong>tipolog√≠a (naturaleza o formato)</strong></span> variable tenemos <code>typeof()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">typeof</span>(<span class="dv">1</span>) <span class="co"># 1 pero almacenado como un valor real (double, con decimales)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">typeof</span>(<span class="fu">as.integer</span>(<span class="dv">1</span>)) <span class="co"># 1 pero almacenado como un entero.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>F√≠jate que‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>En <code>R</code> tenemos una colecci√≥n de funciones que empiezan por <code>as.x()</code> y que sirven como <span class="hl-yellow"><strong>funciones de conversi√≥n</strong></span>: un dato que era de un tipo, lo convertimos a tipo <code>x</code>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="variables-num√©ricas-2" class="slide level2">
<h2>Variables num√©ricas</h2>
<p>Adem√°s de los n√∫meros ¬´normales¬ª tendremos el <span class="hl-yellow"><strong>valor m√°s/menos infinito</strong></span> codificado como <code>Inf</code> o <code>-Inf</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -Inf</code></pre>
</div>
</div>
<div class="fragment">
<p>Y valores que <span class="hl-yellow"><strong>no son n√∫meros reales</strong></span> <em>not a number</em> (indeterminaciones, complejos, etc) codificado como <code>NaN</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-num√©ricas-3" class="slide level2">
<h2>Variables num√©ricas</h2>
<p>Con las variables num√©ricas podemos realizar las <span class="hl-yellow"><strong>operaciones aritm√©ticas</strong></span> de una calculadora: sumar (<code>+</code>)‚Ä¶</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<div class="fragment">
<p>‚Ä¶ra√≠z cuadrada (<code>sqrt()</code>)‚Ä¶</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">sqrt</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.236068</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>‚Ä¶ potencias (<code>^2</code>, <code>^3</code>)‚Ä¶</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>a<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>‚Ä¶valor absoluto (<code>abs()</code>), etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="fu">abs</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-texto" class="slide level2">
<h2>Variables de texto</h2>
<p>Imagina que adem√°s de la edad de una persona queremos guardar su nombre: ahora la variable ser√° de tipo <code>character</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javier"</span></span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="fu">class</span>(nombre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>cadenas de texto</strong></span> son un tipo con el que obviamente <span class="hl-red"><strong>no podremos hacer operaciones aritm√©ticas</strong></span> (s√≠ otras operaciones como pegar o localizar patrones).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>nombre <span class="sc">+</span> <span class="dv">1</span> <span class="co"># error al sumar n√∫mero a texto</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in nombre + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Recuerda que‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>Las variables de tipo texto (character o string) van <span class="hl-orange"><strong>SIEMPRE entre comillas</strong></span>: no es lo mismo <code>TRUE</code> (valor l√≥gico, binario) que <code>"TRUE"</code> (texto).</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-funci√≥n-paste" class="slide level2">
<h2>Primera funci√≥n: paste</h2>
<p>Como hemos comentado <code>R</code> llamaremos <span class="hl-yellow"><strong>funci√≥n</strong></span> a un trozo de <span class="hl-yellow"><strong>c√≥digo encapsulado</strong></span> bajo un nombre, y que depende de unos <span class="hl-yellow"><strong>argumentos</strong></span> de entrada. Nuestra primera funci√≥n ser√° <code>paste()</code>: dadas dos cadenas de texto nos permite pegarlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"√Ålvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier √Ålvarez"</code></pre>
</div>
</div>
<div class="fragment">
<p>F√≠jate que <span class="hl-yellow"><strong>por defecto</strong></span> nos pega las cadenas con un espacio, pero podemos a√±adir un <span class="hl-yellow"><strong>argumento opcional</strong></span> para indicarle el separador (en <code>sep = ...</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"√Ålvarez"</span>, <span class="at">sep =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier*√Ålvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="primera-funci√≥n-paste-1" class="slide level2">
<h2>Primera funci√≥n: paste</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/paste_help.jpg"></p>
</div><div class="column" style="width:50%;">
<p>¬øC√≥mo saber <span class="hl-yellow"><strong>qu√© argumentos necesita una funci√≥n</strong></span>? Escribiendo en consola <code>? paste</code> te aparecer√° una <span class="hl-yellow"><strong>ayuda</strong></span> en el panel multiusos.</p>
<p>En dicha ayuda podr√°s ver en su cabecera que argumentos ya tiene <span class="hl-yellow"><strong>asignados por defecto</strong></span> la funci√≥n</p>
</div>
</div>
<div class="fragment">
<p>Existe una funci√≥n similar llamada <code>paste0()</code> que pega por defecto con <code>sep = ""</code> (sin nada).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="fu">paste0</span>(<span class="st">"Javier"</span>, <span class="st">"√Ålvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier√Ålvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="primera-funci√≥n-paste-2" class="slide level2">
<h2>Primera funci√≥n: paste</h2>
<p>Los argumentos (y su detalle) tambi√©n pueden ser consultado <strong>tabulando (detras una coma)</strong>.</p>

<img data-src="img/tab-functions.png" class="r-stretch"></section>
<section id="funciones-argumentos-por-defecto" class="slide level2">
<h2>Funciones: argumentos por defecto</h2>
<p>Es muy importante entender el concepto de <span class="hl-yellow"><strong>argumento por defecto de una funci√≥n</strong></span> en <code>R</code>: es un valor que la funci√≥n usa pero a veces podemos no ver porque <span class="hl-yellow"><strong>ya tiene un valor asignado</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="co"># Hacen lo mismo</span></span>
<span id="cb62-2"><a href="#cb62-2"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"√Ålvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier √Ålvarez"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"√Ålvarez"</span>, <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier √Ålvarez"</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Toma nota</strong></p>
</div>
<div class="callout-content">
<p>El operador <code>=</code> lo <span class="hl-yellow"><strong>reservaremos para asignar argumentos</strong></span> dentro de funciones. Para todas las dem√°s asignaciones usaremos <code>&lt;-</code></p>
</div>
</div>
</div>
</div>
</section>
<section id="primer-paquete-glue" class="slide level2">
<h2>Primer paquete: glue</h2>
<p>Una forma m√°s intuitiva de trabajar con textos es usar el paquete <code>{glue}</code>: lo primero que haremos ser√° ¬´comprar el libro¬ª (si nunca lo hemos hecho). Tras ello <span class="hl-yellow"><strong>cargamos el paquete</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">install.packages</span>(<span class="st">"glue"</span>) <span class="co"># solo la primra vez</span></span>
<span id="cb66-2"><a href="#cb66-2"></a><span class="fu">library</span>(glue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con la funci√≥n <code>glue()</code> de dicho paquete podemos usar <span class="hl-yellow"><strong>variables dentro de cadenas de texto</strong></span>. Por ejemplo, ¬´la edad es de ‚Ä¶ a√±os¬ª, donde la edad est√° guardada en una variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb67-2"><a href="#cb67-2"></a><span class="fu">glue</span>(<span class="st">"La edad es de {edad} a√±os"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La edad es de 33 a√±os</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Dentro de las llaves tambi√©n podemos <span class="hl-yellow"><strong>ejecutar operaciones</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>unidades <span class="ot">&lt;-</span> <span class="st">"d√≠as"</span></span>
<span id="cb69-2"><a href="#cb69-2"></a><span class="fu">glue</span>(<span class="st">"La edad es de {edad * 365} {unidades}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La edad es de 12045 d√≠as</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-l√≥gicas" class="slide level2">
<h2>Variables l√≥gicas</h2>
<p>Otro tipo fundamental ser√°n las <span class="hl-yellow"><strong>variables l√≥gicas o binarias</strong></span> (<strong>dos valores</strong>):</p>
<ul>
<li><code>TRUE</code>: <span class="hl-yellow"><strong>verdadero</strong></span> guardado internamente como un 1.</li>
<li><code>FALSE</code>: <span class="hl-yellow"><strong>falso</strong></span> guardado internamente como un 0.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>soltero <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># ¬øEs soltero? --&gt; S√ç</span></span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="fu">class</span>(soltero)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que internamente est√°n guardados como variables binarias, podemos <span class="hl-yellow"><strong>realizar operaciones aritm√©ticas</strong></span> con ellas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a><span class="cn">FALSE</span> <span class="sc">-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-l√≥gicas-1" class="slide level2">
<h2>Variables l√≥gicas</h2>
<p>Como veremos en breve, las variables l√≥gicas en realidad puede tomar un tercer valor: <code>NA</code> o <span class="hl-yellow"><strong>dato ausente</strong></span>, representando las siglas de <em>not available</em>, y ser√° muy habitual encontrarlo dentro de una base de datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>ausente <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>ausente <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Las variables l√≥gicas <span class="hl-red"><strong>NO son variables de texto</strong></span>: <code>"TRUE"</code> es un texto, <code>TRUE</code> es un valor l√≥gico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="cn">TRUE</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="st">"TRUE"</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "TRUE" + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="condiciones-l√≥gicas" class="slide level2">
<h2>Condiciones l√≥gicas</h2>
<p>Los valores l√≥gicos suelen ser resultado de <span class="hl-yellow"><strong>evaluar condiciones l√≥gicas</strong></span>. Por ejemplo, imaginemos que queremos <span class="hl-yellow"><strong>comprobar</strong></span> si una persona se llama Javi.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Mar√≠a"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con el <span class="hl-yellow"><strong>operador l√≥gico</strong></span> <code>==</code> preguntamos s√≠ lo que tenemos guardado a la izquierda es <span class="hl-purple"><strong>igual que</strong></span> lo que tenemos a la derecha: es una <span class="hl-yellow"><strong>pregunta</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a>nombre <span class="sc">==</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Con su opuesto <code>!=</code> preguntamos <span class="hl-purple"><strong>si es distinto</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a>nombre <span class="sc">!=</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>F√≠jate que‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>No es lo mismo <code>&lt;-</code> (<span class="hl-yellow"><strong>asignaci√≥n</strong></span>) que <code>==</code> (estamos <span class="hl-yellow"><strong>preguntando</strong></span>, es una comparaci√≥n l√≥gica).</p>
</div>
</div>
</div>
</div>
</section>
<section id="condiciones-l√≥gicas-1" class="slide level2">
<h2>Condiciones l√≥gicas</h2>
<p>Adem√°s de las comparaciones ¬´igual a¬ª frente ¬´distinto¬ª, tambi√©n comparaciones de orden como <span class="hl-purple"><strong>menor que</strong></span> <code>&lt;</code>, <span class="hl-purple"><strong>mayor que</strong></span> <code>&gt;</code>, <code>&lt;=</code> o <code>&gt;=</code>.</p>
<p><strong>¬øTiene la persona menos de 32 a√±os?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">34</span></span>
<span id="cb88-2"><a href="#cb88-2"></a>edad <span class="sc">&lt;</span> <span class="dv">32</span> <span class="co"># ¬øEs la edad menor de 32 a√±os?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="fragment">
<p><strong>¬øLa edad es mayor o igual que 38 a√±os?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a>edad <span class="sc">&gt;=</span> <span class="dv">38</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><strong>¬øEl nombre guardado es Javi?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span>
<span id="cb92-2"><a href="#cb92-2"></a>nombre <span class="sc">==</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha" class="slide level2">
<h2>Variables de fecha</h2>
<p>Un tipo de datos muy especial: los <span class="hl-yellow"><strong>datos de tipo fecha</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a>fecha_char <span class="ot">&lt;-</span> <span class="st">"2021-04-21"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Parece una simple cadena de texto pero <span class="hl-yellow"><strong>deber√≠a representar un instante en el tiempo</strong></span>. ¬øQu√© deber√≠a suceder si <span class="hl-purple"><strong>sumamos un 1 a una fecha</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a>fecha_char <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fecha_char + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
<p>Las fechas <span class="hl-red"><strong>NO pueden ser texto</strong></span>: debemos convertir la cadena de texto a fecha.</p>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>Para trabajar con fechas usaremos el paquete <code>{lubridate}</code>, que deberemos instalar antes de poder usarlo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a><span class="fu">install.packages</span>(<span class="st">"lubridate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="variables-de-fecha-1" class="slide level2">
<h2>Variables de fecha</h2>
<p>Una vez instalado, de todos los paquetes (libros) que tenemos, le indicaremos que nos cargue ese concretamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a><span class="fu">library</span>(lubridate) <span class="co"># instala si no lo has hecho</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Para <span class="hl-yellow"><strong>convertir a tipo fecha</strong></span> usaremos la funci√≥n <code>as_date()</code> del paquete <code>{lubridate}</code> (por defecto en formato <code>yyyy-mm-dd</code>)</p>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a><span class="co"># ¬°no es una fecha, es un texto!</span></span>
<span id="cb99-2"><a href="#cb99-2"></a>fecha_char <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fecha_char + 1: non-numeric argument to binary operator</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a><span class="fu">class</span>(fecha_char)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a>fecha <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"2023-03-28"</span>)</span>
<span id="cb103-2"><a href="#cb103-2"></a>fecha <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-29"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a><span class="fu">class</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha-2" class="slide level2">
<h2>Variables de fecha</h2>
<p>En <code>as_date()</code> el formato de fecha por defecto es <code>yyyy-mm-dd</code> as√≠ si la cadena de texto no se introduce de manera adecuada‚Ä¶</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a><span class="fu">as_date</span>(<span class="st">"28-03-2023"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<div class="fragment">
<p>Para <span class="hl-yellow"><strong>cualquier otro formato debemos especificarlo</strong></span> en el argumento opcional <code>format = ...</code> tal que <code>%d</code> representa d√≠as, <code>%m</code> meses, <code>%Y</code> en formato de 4 a√±os y <code>%y</code> en formato de 2 a√±os.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a><span class="fu">as_date</span>(<span class="st">"28-03-2023"</span>, <span class="at">format =</span> <span class="st">"%d-%m-%Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-28"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1"></a><span class="fu">as_date</span>(<span class="st">"28-03-23"</span>, <span class="at">format =</span> <span class="st">"%d-%m-%y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-28"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1"></a><span class="fu">as_date</span>(<span class="st">"03-28-2023"</span>, <span class="at">format =</span> <span class="st">"%m-%d-%Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-28"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1"></a><span class="fu">as_date</span>(<span class="st">"28/03/2023"</span>, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-28"</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha-3" class="slide level2">
<h2>Variables de fecha</h2>
<p>En dicho paquete tenemos funciones muy √∫tiles para <span class="hl-yellow"><strong>manejar fechas</strong></span>:</p>
<ul>
<li>Con <code>today()</code> podemos obtener directamente la <span class="hl-purple"><strong>fecha actual</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1"></a><span class="fu">today</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-11-03"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Con <code>now()</code> podemos obtener la <span class="hl-purple"><strong>fecha y hora actual</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1"></a><span class="fu">now</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-11-03 12:51:58 CET"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Con <code>year()</code>, <code>month()</code> o <code>day()</code> podemos <span class="hl-purple"><strong>extraer el a√±o, mes y d√≠a</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a>fecha <span class="ot">&lt;-</span> <span class="fu">today</span>()</span>
<span id="cb121-2"><a href="#cb121-2"></a><span class="fu">year</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2024</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1"></a><span class="fu">month</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
</div>
</section>
<section id="res√∫menes-de-paquetes" class="slide level2">
<h2>Res√∫menes de paquetes</h2>

<img data-src="img/lubridate.png" class="r-stretch"><div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Amplia contenido</strong></p>
</div>
<div class="callout-content">
<p>Tienes un resumen en pdf de los paquetes m√°s importantes en la <span class="hl-green"><strong>carpeta correspondiente en el campus</strong></span></p>
</div>
</div>
</div>
</section>
<section id="tu-turno-2-1" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-2-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-2-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-2-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-2-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-2-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-2-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<p>üìù Define una variable que guarde tu edad (llamada <code>edad</code>) y otra con tu nombre (llamada <code>nombre</code>)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb125-2"><a href="#cb125-2"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-2">
<p>üìù Comprueba con dicha variable <code>edad</code> si NO tiene 60 a√±os o si se llama <code>"Ornitorrinco"</code> (debes obtener variables l√≥gicas como resultado)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1"></a>edad <span class="sc">!=</span> <span class="dv">60</span> <span class="co"># distinto de</span></span>
<span id="cb126-2"><a href="#cb126-2"></a>nombre <span class="sc">==</span> <span class="st">"Ornitorrinco"</span> <span class="co"># igual a</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-3">
<p>üìù ¬øPor qu√© el c√≥digo inferior da error?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1"></a>edad <span class="sc">+</span> nombre</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in edad + nombre: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div id="tabset-2-4">
<p>üìù Define otra variable llamada <code>hermanos</code> que responda la pregunta ¬´¬øtienes hermanos?¬ª y otra variable que almacene tu fecha de nacimiento (llamada <code>fecha_nacimiento</code>).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1"></a>hermanos <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb129-2"><a href="#cb129-2"></a></span>
<span id="cb129-3"><a href="#cb129-3"></a><span class="fu">library</span>(lubridate) <span class="co"># sino lo ten√≠as ya cargado</span></span>
<span id="cb129-4"><a href="#cb129-4"></a>fecha_nacimiento <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"1989-09-10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-5">
<p>üìù Define otra variable con tus apellidos (llamada <code>apellidos</code>) y usa <code>glue()</code> para tener, en una sola variable llamada <code>nombre_completo</code>, tu nombre y apellidos separando nombre y apellido por una coma</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1"></a>apellidos <span class="ot">&lt;-</span> <span class="st">"√Ålvarez Li√©bana"</span></span>
<span id="cb130-2"><a href="#cb130-2"></a><span class="fu">glue</span>(<span class="st">"{nombre}, {apellidos}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-6">
<p>üìù De <code>fecha_nacimiento</code> extrae el mes.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1"></a><span class="fu">month</span>(fecha_nacimiento)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-7">
<p>üìù Calcula los d√≠as que han pasado desde la fecha de tu nacimiento hasta hoy (con la fecha de nacimiento definida en el ejercicio 4).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1"></a><span class="fu">today</span>() <span class="sc">-</span> fecha_nacimiento</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="vectores-concatenar" class="slide level2">
<h2>Vectores: concatenar</h2>
<p>Cuando trabajamos con datos normalmente tendremos <span class="hl-yellow"><strong>columnas que representan variables</strong></span>: llamaremos <span class="hl-yellow"><strong>vectores</strong></span> a una <span class="hl-purple"><strong>concatenaci√≥n</strong></span> de celdas (valores) del <span class="hl-purple"><strong>mismo tipo</strong></span> (lo que ser√≠a una columna de una tabla).</p>
<div class="fragment">
<p>La forma m√°s sencilla es con el comando <code>c()</code> (c de <strong>concatenar</strong>), y basta con introducir sus <strong>elementos entre par√©ntesis y separados por comas</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">27</span>, <span class="dv">60</span>, <span class="dv">61</span>)</span>
<span id="cb133-2"><a href="#cb133-2"></a>edades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>Un n√∫mero individual <code>x &lt;- 1</code> (o bien <code>x &lt;- c(1)</code>) es en realidad un <strong>vector de longitud uno</strong> ‚Äì&gt; todo lo que sepamos <span class="hl-green"><strong>hacer con un n√∫mero podemos hacerlo con un vector de ellos</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="vectores-concatenar-1" class="slide level2">
<h2>Vectores: concatenar</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/edades_environment.jpg"></p>
</div><div class="column" style="width:60%;">
<p>Como ves ahora en el <code>environment</code> tenemos una <strong>colecci√≥n de elementos</strong> guardada</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1"></a>edades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61</code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>La <span class="hl-yellow"><strong>longitud de un vector</strong></span> se puede calcular con <code>length()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1"></a><span class="fu">length</span>(edades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Tambi√©n podemos <span class="hl-yellow"><strong>concatenar vectores</strong></span> entre s√≠ (los repite uno tras otro)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1"></a><span class="fu">c</span>(edades, edades, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 27 60 61 32 27 60 61  8</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-num√©ricas" class="slide level2">
<h2>Secuencias num√©ricas</h2>
<p>El vector m√°s famoso ser√° el de tipo num√©rico, y en concreto, las conocidas como <span class="hl-yellow"><strong>secuencias num√©ricas</strong></span> (por ejemplo, los d√≠as del mes), usadas para, entre otras cosas, indexar bucles.</p>
<div class="fragment">
<p>El comando <code>seq(inicio, fin)</code> nos permite crear una <span class="hl-yellow"><strong>secuencia num√©rica</strong></span> desde un elemento inicial hasta uno final, <span class="hl-purple"><strong>avanzando de uno en uno</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">31</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>F√≠jate que si hacemos eso con <span class="hl-red"><strong>caracteres no podremos hacerlo</strong></span> ya que no hay un orden a priori entre textos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1"></a><span class="st">"a"</span><span class="sc">:</span><span class="st">"z"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "a":"z": NA/NaN argument</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-num√©ricas-1" class="slide level2">
<h2>Secuencias num√©ricas</h2>
<p>Un atajo es el comando <code>1:n</code>, que nos devuelve lo mismo que <code>seq(1, n)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6 7</code></pre>
</div>
</div>
<p>Si el elemento inicial es mayor que el final, entender√° que la secuencia es <span class="hl-purple"><strong>en orden decreciente</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1"></a><span class="dv">7</span><span class="sc">:-</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  7  6  5  4  3  2  1  0 -1 -2 -3</code></pre>
</div>
</div>
<div class="fragment">
<p>Tambi√©n podemos definir <span class="hl-yellow"><strong>otro tipo de distancia</strong></span> (paso) entre consecutivos con el argumento <code>by = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="at">by =</span> <span class="fl">0.5</span>) <span class="co"># secuencia desde 1 a 7 de 0.5 en 0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-num√©ricas-2" class="slide level2">
<h2>Secuencias num√©ricas</h2>
<p>Otras veces nos interesar√° definir una <span class="hl-yellow"><strong>secuencia con una longitud concreta</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="at">l =</span> <span class="dv">7</span>) <span class="co"># secuencia desde 1 a 50 de longitud 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.000000  9.166667 17.333333 25.500000 33.666667 41.833333 50.000000</code></pre>
</div>
</div>
<div class="fragment">
<p>Incluso puede nos interese generar un vector de <span class="hl-yellow"><strong>n elementos repetidos</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1"></a><span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>) <span class="co"># vector de 7 ceros</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0 0 0</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Dado que internamente son guardados como n√∫meros tambi√©n podremos hacer esto con <span class="hl-yellow"><strong>fechas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1"></a><span class="fu">seq</span>(<span class="fu">as_date</span>(<span class="st">"2023-09-01"</span>), <span class="fu">as_date</span>(<span class="st">"2023-09-10"</span>), <span class="at">by =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2023-09-01" "2023-09-02" "2023-09-03" "2023-09-04" "2023-09-05"
 [6] "2023-09-06" "2023-09-07" "2023-09-08" "2023-09-09" "2023-09-10"</code></pre>
</div>
</div>
</div>
</section>
<section id="vectores-de-caracteres" class="slide level2">
<h2>Vectores de caracteres</h2>
<p>Un vector es una <strong>concatenaci√≥n</strong> de elementos del <span class="hl-yellow"><strong>mismo tipo</strong></span>, pero no tienen porque ser necesariamente n√∫meros. Vamos a crear una frase de ejemplo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1"></a>frase <span class="ot">&lt;-</span> <span class="st">"Me llamo Javi"</span></span>
<span id="cb157-2"><a href="#cb157-2"></a>frase</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me llamo Javi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1"></a><span class="fu">length</span>(frase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<div class="fragment">
<p>En el caso anterior no era un vector, era un solo elemento de texto. Para crear un vector debemos usar de nuevo <code>c()</code> y separar elementos entre comas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Me"</span>, <span class="st">"llamo"</span>, <span class="st">"Javi"</span>)</span>
<span id="cb161-2"><a href="#cb161-2"></a>vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me"    "llamo" "Javi" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1"></a><span class="fu">length</span>(vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</section>
<section id="vectores-de-caracteres-1" class="slide level2">
<h2>Vectores de caracteres</h2>
<p>¬øQu√© suceder√° si <span class="hl-yellow"><strong>concatenamos elementos de diferente tipo</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">"javi"</span>, <span class="st">"3"</span>, <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"    "2"    "javi" "3"    "TRUE"</code></pre>
</div>
</div>
<p>F√≠jate que como todos tienen que ser del mismo tipo, lo que hace <code>R</code> es <span class="hl-yellow"><strong>convertir</strong></span> todo a texto, violando la <span class="hl-red"><strong>integridad del dato</strong></span></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1"></a><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 1 0</code></pre>
</div>
</div>
<p>Es importante entender que los valores l√≥gicos en realidad est√°n <span class="hl-yellow"><strong>almacenados internamente como 0/1</strong></span></p>
</div>
</section>
<section id="operaciones-con-vectores" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Con los vectores num√©ricos podemos hacer las mismas <span class="hl-yellow"><strong>operaciones aritm√©ticas</strong></span> que con los n√∫meros ‚Üí un <span class="hl-purple"><strong>n√∫mero es un vector</strong></span> (de longitud uno)</p>
<div class="fragment">
<p>¬øQu√© suceder√° si <span class="hl-yellow"><strong>sumamos o restamos un valor</strong></span> a un vector?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb169-2"><a href="#cb169-2"></a>x <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1"></a>x <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  6 10 14</code></pre>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Salvo que indiquemos lo contrario, en <code>R</code> las operaciones con vectores son siempre <span class="hl-orange"><strong>elemento a elemento</strong></span></p>
</div>
</div>
</div>
</div>
</section>
<section id="suma-de-vectores" class="slide level2">
<h2>Suma de vectores</h2>
<p>Los vectores tambi√©n pueden interactuar entre ellos, as√≠ que podemos definir, por ejemplo, <span class="hl-yellow"><strong>sumas de vectores</strong></span> (elemento a elemento)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb173-2"><a href="#cb173-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb173-3"><a href="#cb173-3"></a>x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que la operaci√≥n (por ejemplo, una suma) se realiza elemento a elemento, ¬øqu√© suceder√° si <span class="hl-yellow"><strong>sumamos dos vectores de distinta longitud</strong></span>?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb175-2"><a href="#cb175-2"></a>x <span class="sc">+</span> z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11  9</code></pre>
</div>
</div>
<p>Lo que hace es <span class="hl-yellow"><strong>reciclar elementos</strong></span>: si tiene un vector de 4 elementos y sumamos otro de 3 elementos, lo que har√° ser√° reciclar del vector con menor longitud.</p>
</div>
</section>
<section id="comparar-vectores" class="slide level2">
<h2>Comparar vectores</h2>
<p>Una operaci√≥n muy habitual es <span class="hl-yellow"><strong>preguntar a los datos</strong></span> mediante el uso de <span class="hl-purple"><strong>condiciones l√≥gicas</strong></span>. Por ejemplo, si definimos un vector de temperaturas‚Ä¶</p>
<p><span class="hl-yellow"><strong>¬øQu√© d√≠as hizo menos de 22 grados?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">15</span>, <span class="dv">29</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1"></a>x <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>Nos devolver√° un <span class="hl-yellow"><strong>vector l√≥gico</strong></span>, en funci√≥n de si <strong>cada elemento</strong> cumple o no la condici√≥n pedida (de <strong>igual longitud</strong> que el vector preguntado)</p>
</div>
<div class="fragment">
<p>Si tuvi√©ramos un <span class="hl-yellow"><strong>dato ausente</strong></span> (por error del aparato ese d√≠a), la condici√≥n evaluada tambi√©n ser√≠a <code>NA</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="cn">NA</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">7</span>, <span class="dv">29</span>, <span class="dv">10</span>)</span>
<span id="cb180-2"><a href="#cb180-2"></a>y <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE    NA FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="comparar-vectores-1" class="slide level2">
<h2>Comparar vectores</h2>
<p>Las <span class="hl-yellow"><strong>condiciones l√≥gicas pueden ser combinadas</strong></span> de dos maneras:</p>
<ul>
<li><span class="hl-yellow"><strong>Intersecci√≥n</strong></span>: <span class="hl-purple"><strong>todas</strong></span> las condiciones concatenadas se deben cumplir (<span class="hl-purple"><strong>conjunci√≥n y</strong></span> con <code>&amp;</code>) para devolver un <code>TRUE</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<ul>
<li><span class="hl-yellow"><strong>Uni√≥n</strong></span>: basta con que <span class="hl-purple"><strong>al menos una</strong></span> se cumpla (<span class="hl-purple"><strong>conjunci√≥n o</strong></span> con <code>|</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">|</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="fragment">
<p>Con <code>any()</code> y <code>all()</code> podemos comprobar que <span class="hl-yellow"><strong>todos los elementos</strong></span> cumplen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1"></a><span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="acceder-a-elementos" class="slide level2">
<h2>Acceder a elementos</h2>
<p>Otra operaci√≥n muy habitual es la de <span class="hl-yellow"><strong>acceder a elementos</strong></span>. La forma m√°s sencilla es usar el operador <code>[i]</code> (acceder al elemento i-√©simo)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">33</span>, <span class="cn">NA</span>, <span class="dv">61</span>) </span>
<span id="cb190-2"><a href="#cb190-2"></a>edades[<span class="dv">3</span>] <span class="co"># accedemos a la edad de la tercera persona </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que un n√∫mero no es m√°s que un vector de longitud uno, esta operaci√≥n tambi√©n la podemos aplicar usando un <span class="hl-yellow"><strong>vector de √≠ndices a seleccionar</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hola"</span>, <span class="st">"qu√©"</span>, <span class="st">"tal"</span>, <span class="st">"est√°s"</span>, <span class="st">"?"</span>)</span>
<span id="cb192-2"><a href="#cb192-2"></a>y[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span>)] <span class="co"># primer, segundo y cuarto elemento</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "qu√©"   "est√°s"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>Para acceder al √∫ltimo, sin preocuparnos de cu√°l es, podemos pasarle como √≠ndice la propia longitud <code>x[length(x)]</code></p>
</div>
</div>
</div>
</div>
</section>
<section id="eliminar-elementos" class="slide level2">
<h2>Eliminar elementos</h2>
<p>Otras veces no querremos seleccionar sino <span class="hl-yellow"><strong>eliminar algunos elementos</strong></span>. Deberemos repetir la misma operaci√≥n pero con el signo - delante: el operador <code>[-i]</code> no selecciona el elemento i-√©simo del vector sino que lo ¬´des-selecciona¬ª</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "qu√©"   "tal"   "est√°s" "?"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1"></a>y[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "tal"   "est√°s" "?"    </code></pre>
</div>
</div>
<div class="fragment">
<p>En muchas ocasiones los queremos <span class="hl-yellow"><strong>seleccionar o eliminar en base a condiciones l√≥gicas</strong></span>, en funci√≥n de los valores, as√≠ que pasaremos como √≠ndice la propia condici√≥n (recuerda, <code>x &lt; 2</code> nos devuelve un vector l√≥gico)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">30</span>, <span class="dv">17</span>, <span class="dv">45</span>)</span>
<span id="cb198-2"><a href="#cb198-2"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"mar√≠a"</span>, <span class="st">"laura"</span>, <span class="st">"carla"</span>, <span class="st">"luis"</span>)</span>
<span id="cb198-3"><a href="#cb198-3"></a>nombres[edades <span class="sc">&lt;</span> <span class="dv">18</span>] <span class="co"># nombres de los menores de edad</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "carla"</code></pre>
</div>
</div>
</div>
</section>
<section id="sumar-vectores" class="slide level2">
<h2>Sumar vectores</h2>
<p>Tambi√©n podemos hacer uso de <span class="hl-yellow"><strong>operaciones estad√≠sticas</strong></span> como por ejemplo <code>sum()</code> que, dado un vector, nos devuelve la suma de todos sus elementos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb200-2"><a href="#cb200-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>¬øQu√© sucede cuando falta un dato (ausente)?</strong></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb202-2"><a href="#cb202-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>Por defecto, si tenemos un dato ausente, la <span class="hl-yellow"><strong>operaci√≥n tambi√©n ser√° ausente</strong></span>. Para poder <span class="hl-purple"><strong>obviar ese dato</strong></span>, usamos un argumento opcional <code>na.rm = TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="sumar-vectores-1" class="slide level2">
<h2>Sumar vectores</h2>
<p>Como hemos comentado que los valores l√≥gicos son guardados internamente como 0 y 1, podremos usarlos en operaciones aritm√©ticas.</p>
<p>Por ejemplo, si queremos <span class="hl-yellow"><strong>averiguar el n√∫mero de elementos que cumplen una condici√≥n</strong></span> (por ejemplo, menores que 3), los que lo hagan tendr√°n asignado un 1 (<code>TRUE</code>) y los que no un 0 (<code>FALSE</code>) , por lo que basta con sumar dicho vector l√≥gico para obtener el n√∫mero de elementos que cumplen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb206-2"><a href="#cb206-2"></a><span class="fu">sum</span>(x <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="suma-acumulada" class="slide level2">
<h2>Suma acumulada</h2>
<p>Otra operaci√≥n habitual que puede sernos √∫til es la <span class="hl-yellow"><strong>suma acumulada</strong></span> con <code>cumsum()</code> que, dado un vector, nos devuelve un vector a su vez con el primero, el primero m√°s el segundo, el primero m√°s el segundo m√°s el tercero‚Ä¶y as√≠ sucesivamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">8</span>)</span>
<span id="cb208-2"><a href="#cb208-2"></a><span class="fu">cumsum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1  6  8  7 15</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>¬øQu√© sucede cuando falta un dato (ausente)?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb210-2"><a href="#cb210-2"></a><span class="fu">cumsum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -1  2 NA NA</code></pre>
</div>
</div>
<p>En el caso de la suma acumulada lo que sucede es que <span class="hl-yellow"><strong>a partir de ese valor, todo lo acumulado posterior ser√° ausente</strong></span>.</p>
</section>
<section id="diferencia" class="slide level2">
<h2>Diferencia</h2>
<p>Otra operaci√≥n habitual que puede sernos √∫til es la <span class="hl-yellow"><strong>diferencia (con retardo)</strong></span> con <code>diff()</code> que, dado un vector, nos devuelve un vector con el segundo menos el primero, el tercero menos el segundo, el cuarto menos el tercero‚Ä¶y as√≠ sucesivamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb212-2"><a href="#cb212-2"></a><span class="fu">diff</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7 -3 -2  6 -9 -1  6</code></pre>
</div>
</div>
<div class="fragment">
<p>Con el argumento <code>lag =</code> podemos indicar el <span class="hl-yellow"><strong>retardo</strong></span> de dicha diferencia (por ejemplo, <code>lag = 3</code> implica que se resta el cuarto menos el primero, el quinto menos el segundo, etc)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb214-2"><a href="#cb214-2"></a><span class="fu">diff</span>(x, <span class="at">lag =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  1 -5 -4 -4</code></pre>
</div>
</div>
</div>
</section>
<section id="media" class="slide level2">
<h2>Media</h2>
<p>Otras operaciones habituales son la <span class="hl-yellow"><strong>media</strong></span>, <span class="hl-yellow"><strong>mediana</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<ul>
<li><span class="hl-yellow"><strong>Media</strong></span>: medida de centralidad que consiste en sumar todos los elementos y dividirlos entre la cantidad de elementos sumados. La m√°s conocida pero la <span class="hl-red"><strong>menos robusta</strong></span>: dado un conjunto, si se introducen valores at√≠picos o outliers (valores muy grandes o muy peque√±os), la media se perturba con mucha facilidad.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="cn">NA</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb216-2"><a href="#cb216-2"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 169.8889</code></pre>
</div>
</div>
</section>
<section id="percentiles" class="slide level2">
<h2>Percentiles</h2>
<p>Otras operaciones habituales son la <span class="hl-yellow"><strong>media</strong></span>, <span class="hl-yellow"><strong>mediana</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<ul>
<li><span class="hl-yellow"><strong>Mediana</strong></span>: medida de centralidad que consiste en ordenar los elementos y quedarse con el que ocupa la mitad.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb218-2"><a href="#cb218-2"></a><span class="fu">median</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 170</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Percentiles</strong></span>: medidas de posici√≥n (nos dividen en partes iguales los datos).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1"></a><span class="fu">quantile</span>(x) <span class="co"># por defecto percentiles 0-25-50-75-100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0%  25%  50%  75% 100% 
 150  165  170  177  191 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1"></a><span class="fu">quantile</span>(x, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  10%   40%   90% 
154.0 167.6 183.0 </code></pre>
</div>
</div>
</div>
</section>
<section id="ordenar-vectores" class="slide level2">
<h2>Ordenar vectores</h2>
<p>Por √∫ltimo, una acci√≥n habitual es saber <span class="hl-yellow"><strong>ordenar valores</strong></span>:</p>
<ul>
<li><code>sort()</code>: devuelve el <span class="hl-yellow"><strong>vector ordenado</strong></span>. Por defecto de menor a mayor pero con <code>decreasing = TRUE</code> podemos cambiarlo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">81</span>, <span class="dv">7</span>, <span class="dv">25</span>, <span class="dv">41</span>, <span class="dv">65</span>, <span class="dv">20</span>, <span class="dv">33</span>, <span class="dv">23</span>, <span class="dv">77</span>)</span>
<span id="cb224-2"><a href="#cb224-2"></a><span class="fu">sort</span>(edades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7 20 23 25 33 41 65 77 81</code></pre>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1"></a><span class="fu">sort</span>(edades, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 81 77 65 41 33 25 23 20  7</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>order()</code>: devuelve el <span class="hl-yellow"><strong>vector de √≠ndices</strong></span> que tendr√≠amos que usar para tener el vector ordenado</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1"></a><span class="fu">order</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 6 1 7 2 8 9 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1"></a>x[<span class="fu">order</span>(x)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 155 165 167 170 173 177 181 191</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-2-2" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-3-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-3-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-3-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-3-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-3-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-3-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li><li><a href="#tabset-3-8"><span class="hl-yellow"><strong>Ejercicio 8</strong></span></a></li><li><a href="#tabset-3-9"><span class="hl-yellow"><strong>Ejercicio 9</strong></span></a></li><li><a href="#tabset-3-10"><span class="hl-yellow"><strong>Ejercicio 10</strong></span></a></li><li><a href="#tabset-3-11"><span class="hl-yellow"><strong>Ejercicio 11</strong></span></a></li><li><a href="#tabset-3-12"><span class="hl-yellow"><strong>Ejercicio 12</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<p>üìù Define el vector <code>x</code> como la concatenaci√≥n de los 5 primeros n√∫meros impares. Calcula la longitud del vector</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1"></a><span class="co"># Dos formas</span></span>
<span id="cb232-2"><a href="#cb232-2"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)</span>
<span id="cb232-3"><a href="#cb232-3"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb232-4"><a href="#cb232-4"></a></span>
<span id="cb232-5"><a href="#cb232-5"></a><span class="fu">length</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-2">
<p>üìù Accede al tercer elemento de <code>x</code>. Accede al √∫ltimo elemento (sin importar la longitud, un c√≥digo que pueda ejecutarse siempre). Elimina el primer elemento.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1"></a>x[<span class="dv">3</span>]</span>
<span id="cb233-2"><a href="#cb233-2"></a>x[<span class="fu">length</span>(x)]</span>
<span id="cb233-3"><a href="#cb233-3"></a>x[<span class="sc">-</span><span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-3">
<p>üìù Obt√©n los elementos de <code>x</code> mayores que 4. Calcula el vector <code>1/x</code> y gu√°rdalo en una variable.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">4</span>]</span>
<span id="cb234-2"><a href="#cb234-2"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb234-3"><a href="#cb234-3"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-4">
<p>üìù Crea un vector que represente los nombres de 5 personas, de los cuales uno es desconocido.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Javi"</span>, <span class="st">"Sandra"</span>, <span class="cn">NA</span>, <span class="st">"Laura"</span>, <span class="st">"Carlos"</span>)</span>
<span id="cb235-2"><a href="#cb235-2"></a>nombres</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-5">
<p>üìù Encuentra del vector <code>x</code> de ejercicios anteriores los elementos mayores (estrictos) que 1 Y ADEM√ÅS menores (estrictos) que 7. Encuentra una forma de averiguar si todos los elementos son o no positivos.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">7</span>]</span>
<span id="cb236-2"><a href="#cb236-2"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-6">
<p>üìù Dado el vector <code>x &lt;- c(1, -5, 8, NA, 10, -3, 9)</code>, ¬øpor qu√© su media no devuelve un n√∫mero sino lo que se muestra en el c√≥digo inferior?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">8</span>, <span class="cn">NA</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb237-2"><a href="#cb237-2"></a><span class="fu">mean</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</div>
<div id="tabset-3-7">
<p>üìù Dado el vector <code>x &lt;- c(1, -5, 8, NA, 10, -3, 9)</code>, extrae los elementos que ocupan los lugares 1, 2, 5, 6.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">8</span>, <span class="cn">NA</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb239-2"><a href="#cb239-2"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>)]</span>
<span id="cb239-3"><a href="#cb239-3"></a>x[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-8">
<p>üìù Dado el vector <code>x</code> del ejercicio anterior, ¬øcuales tienen un dato ausente? Pista: las funciones <code>is.algo()</code> comprueban si el elemento es tipo <code>algo</code> (tabula)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1"></a><span class="fu">is.na</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-9">
<p>üìù Define el vector <code>x</code> como la concatenaci√≥n de los 4 primeros n√∫meros pares. Calcula el n√∫mero de elementos de <code>x</code> menores estrictamente que 5.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1"></a>x[x <span class="sc">&lt;</span> <span class="dv">5</span>] </span>
<span id="cb241-2"><a href="#cb241-2"></a><span class="fu">sum</span>(x <span class="sc">&lt;</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-10">
<p>üìù Calcula el vector <code>1/x</code> y obt√©n la versi√≥n ordenada (de menor a mayor) de las dos formas posibles</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb242-2"><a href="#cb242-2"></a><span class="fu">sort</span>(z)</span>
<span id="cb242-3"><a href="#cb242-3"></a>z[<span class="fu">order</span>(z)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-11">
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1"></a><span class="fu">min</span>(x)</span>
<span id="cb243-2"><a href="#cb243-2"></a><span class="fu">max</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-12">
<p>üìù Encuentra del vector <code>x</code> los elementos mayores (estrictos) que 1 y menores (estrictos) que 6. Encuentra una forma de averiguar si todos los elementos son o no negativos.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">7</span>]</span>
<span id="cb244-2"><a href="#cb244-2"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-2" class="slide level2">
<h2>üê£ Caso pr√°ctico</h2>
<p>En el paquete <code>{datasets}</code> (ya instalado por defecto) tenemos diversos conjuntos de datos y uno de ellos es <code>airquality</code>. Debajo te he extra√≠do 3 variables de dicho dataset (f√≠jate que se hace con <code>datos$variable</code>, ese dolar ser√° importante en el futuro).</p>
<p>Los datos capturan <span class="hl-yellow"><strong>medidas diarias (n = 153 observaciones) de la calidad del aire</strong></span> en Nueva York, de mayo a septiembre de 1973. Se midieron <strong>6 variables</strong>: niveles de ozono, radiaci√≥n solar, viento, temperatura, mes y d√≠a.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb245-2"><a href="#cb245-2"></a>temperature <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp</span>
<span id="cb245-3"><a href="#cb245-3"></a>month <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Month</span>
<span id="cb245-4"><a href="#cb245-4"></a>day <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Day</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/intro-r-base/"><strong>workbook</strong></a></p>
</section></section>
<section>
<section id="clase-3" class="title-slide slide level1 center">
<h1>Clase 3: <span class="flow">textos</span></h1>
<p><span style="color:#444442;"><strong>Profundizando en variables de tipo texto</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-3-1">üíª Ejercicios resueltos: variables de texto</a></p></li>
<li><p><a href="#/caso-practico-3-1">üê£ Workbook/caso pr√°ctico</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="profundizando-en-textos" class="slide level2">
<h2>Profundizando en textos</h2>
<p>Aunque no podamos hacer operaciones aritm√©ticas con ellos si ser√°n importante algunas <span class="hl-yellow"><strong>operaciones que podamos realizar con las cadenas de texto</strong></span></p>
<p>Para eso usaremos el paquete <code>{stringr}</code> (dentro del mismo ¬´universo de paquetes¬ª de <code>{lubridate}</code>, del que hablaremos m√°s adelante)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1"></a><span class="fu">library</span>(stringr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="profundizando-en-textos-1" class="slide level2">
<h2>Profundizando en textos</h2>
<p>En dicho paquete vamos a trabajar particularmente con <span class="hl-yellow"><strong>cuatro familias de funciones</strong></span></p>
<ul>
<li><p><span class="hl-purple"><strong>Manipulaci√≥n</strong></span></p></li>
<li><p><span class="hl-purple"><strong>Tratamiento de espacios</strong></span></p></li>
<li><p><span class="hl-purple"><strong>B√∫squeda de patrones</strong></span></p></li>
</ul>
</section>
<section id="utilidades-b√°sicas" class="slide level2">
<h2>Utilidades b√°sicas</h2>
<ul>
<li><span class="hl-yellow"><strong>Longitud de un texto</strong></span>: para calcular la longitud de una cadena de texto podemos usar <code>str_length()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1"></a><span class="fu">str_length</span>(<span class="st">"abc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1"></a><span class="fu">str_length</span>(<span class="st">"abc 123 *"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
<div class="fragment">
<p>Como ves <strong>cuenta tanto n√∫meros como espacios como caracteres que no sean alfanum√©ricos</strong>. Adem√°s si el texto es ausente devuelve ausente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1"></a><span class="fu">str_length</span>(<span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>funciones del paquete est√°n preparadas para ser vectorizadas</strong></span> por lo que si aplicamos una funci√≥n a un vector de dos elementos la aplica a ambos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1"></a><span class="fu">str_length</span>(<span class="fu">c</span>(<span class="st">"abc"</span>, <span class="st">"defghi"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 6</code></pre>
</div>
</div>
</div>
</section>
<section id="utilidades-b√°sicas-1" class="slide level2">
<h2>Utilidades b√°sicas</h2>
<ul>
<li><span class="hl-yellow"><strong>Ordenar</strong></span>: con <code>str_order()</code> podemos ordenar cadenas de texto seg√∫n su orden alfab√©tico (distinguiendo <code>..._sort()</code> y <code>..._order()</code> como con los n√∫meros)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"y"</span>, <span class="st">"i"</span>, <span class="st">"k"</span>)</span>
<span id="cb255-2"><a href="#cb255-2"></a><span class="fu">str_order</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1"></a><span class="fu">str_sort</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "i" "k" "y"</code></pre>
</div>
</div>
</section>
<section id="manipulaci√≥n" class="slide level2">
<h2>Manipulaci√≥n</h2>
<ul>
<li><span class="hl-yellow"><strong>Extraer subcadenas</strong></span>: dada una cadena de texto, <code>str_sub(texto, star = ..., end = ...)</code> nos extrae la subcadena desde la posici√≥n <code>star</code> hasta <code>end</code> (si es negativo empieza a contar por detr√°s).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1"></a><span class="fu">str_sub</span>(<span class="st">"abcd efg"</span>, <span class="at">star =</span> <span class="dv">4</span>, <span class="at">end =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "d e"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1"></a><span class="fu">str_sub</span>(<span class="st">"abcd efg"</span>, <span class="at">star =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " efg"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1"></a><span class="fu">str_sub</span>(<span class="st">"abcd efg"</span>, <span class="at">star =</span> <span class="dv">4</span>, <span class="at">end =</span> <span class="sc">-</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "d ef"</code></pre>
</div>
</div>
</section>
<section id="manipulaci√≥n-1" class="slide level2">
<h2>Manipulaci√≥n</h2>
<ul>
<li><span class="hl-yellow"><strong>Extraer subcadenas</strong></span>: la funci√≥n <code>str_sub()</code> permite aplicarlo a de manera vectorial a m√∫ltiples cadenas de texto, e incluso usarla para asignar valores.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"abcdef"</span>, <span class="st">"ghifjk"</span>)</span>
<span id="cb265-2"><a href="#cb265-2"></a><span class="fu">str_sub</span>(x, <span class="at">star =</span> <span class="dv">3</span>, <span class="at">end =</span> <span class="sc">-</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cde" "ifj"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1"></a><span class="fu">str_sub</span>(x, <span class="at">star =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "f" "k"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1"></a><span class="co"># En ambas cadenas, sustituimos por * en la posici√≥n 2</span></span>
<span id="cb269-2"><a href="#cb269-2"></a><span class="fu">str_sub</span>(x, <span class="at">star =</span> <span class="dv">2</span>, <span class="at">end =</span> <span class="dv">2</span>) <span class="ot">&lt;-</span> <span class="st">"*"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="manipulaci√≥n-2" class="slide level2">
<h2>Manipulaci√≥n</h2>
<ul>
<li><span class="hl-yellow"><strong>Duplicar cadenas</strong></span>: con <code>str_dup(..., times = ...)</code>, dada una cadena de texto (o varias), podemos repetir una cadena <code>times</code> veces.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1"></a><span class="fu">str_dup</span>(<span class="st">"abc"</span>, <span class="at">times =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abcabcabc"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"abcdef"</span>, <span class="st">"ghifjk"</span>)</span>
<span id="cb272-2"><a href="#cb272-2"></a><span class="fu">str_dup</span>(x, <span class="at">times =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abcdefabcdef"                   "ghifjkghifjkghifjkghifjkghifjk"</code></pre>
</div>
</div>
</section>
<section id="manipulaci√≥n-3" class="slide level2">
<h2>Manipulaci√≥n</h2>
<ul>
<li><span class="hl-yellow"><strong>Concatenar cadenas</strong></span>: con <code>str_c</code> podemos concatenar distintas cadenas de texto (con <code>sep = ...</code> indicamos el caracter que har√° de separador)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1"></a><span class="fu">str_c</span>(<span class="st">"Buenos d√≠as"</span>, <span class="st">"Mi nombre es Javier"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Buenos d√≠asMi nombre es Javier"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1"></a><span class="fu">str_c</span>(<span class="st">"Buenos d√≠as"</span>, <span class="st">"Mi nombre es Javier"</span>, <span class="at">sep =</span> <span class="st">". "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Buenos d√≠as. Mi nombre es Javier"</code></pre>
</div>
</div>
</section>
<section id="manipulaci√≥n-4" class="slide level2">
<h2>Manipulaci√≥n</h2>
<ul>
<li><span class="hl-yellow"><strong>May√∫sculas/min√∫sculas</strong></span>: con <code>str_to_...()</code> podemos convertir textos a may√∫sculas (<code>..._upper</code>), a min√∫sculas (<code>..._lower</code>) y a t√≠tulo (<code>..._title</code>, primera letra de cada palabra en may√∫scula)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1"></a><span class="fu">str_to_upper</span>(<span class="st">"me llamo Javi"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ME LLAMO JAVI"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1"></a><span class="fu">str_to_lower</span>(<span class="st">"me llamo Javi"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "me llamo javi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1"></a><span class="fu">str_to_title</span>(<span class="st">"me llamo Javi"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me Llamo Javi"</code></pre>
</div>
</div>
</section>
<section id="manipulaci√≥n-5" class="slide level2">
<h2>Manipulaci√≥n</h2>
<ul>
<li><span class="hl-yellow"><strong>Reemplazar</strong></span>: <code>str_replace()</code> busca un patr√≥n dado en una cadena de texto y, si la encuentra, la sustituye pro otra de reemplazo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1"></a><span class="fu">str_replace</span>(<span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>, <span class="st">"carlos"</span>), <span class="at">pattern =</span> <span class="st">"i"</span>, <span class="at">replacement =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "jav*"   "sandra" "carlos"</code></pre>
</div>
</div>
<div class="fragment">
<p>Con <code>str_replace_all()</code> reemplazamos todas las coincidencias (por defecto sino solo se reemplaza la primera)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1"></a><span class="fu">str_replace</span>(<span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>, <span class="st">"carlos"</span>), <span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">replacement =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "j*vi"   "s*ndra" "c*rlos"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1"></a><span class="fu">str_replace_all</span>(<span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>, <span class="st">"carlos"</span>), <span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">replacement =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "j*vi"   "s*ndr*" "c*rlos"</code></pre>
</div>
</div>
</div>
</section>
<section id="espacios-en-blanco" class="slide level2">
<h2>Espacios en blanco</h2>
<ul>
<li><span class="hl-yellow"><strong>Rellenar</strong></span>: la funci√≥n <code>str_pad()</code> rellena una cadena con espacios (al inicio por defecto) para que tenga anchura indicada. Con <code>side = "both"</code> como argumento extra nos a√±ade en ambos lados. Con <code>side = "right"</code> los a√±ade al final. Con <code>pad = ...</code> podemos decidir si queremos rellenar con otro tipo de caracter (espacio por defecto).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1"></a><span class="fu">str_pad</span>(<span class="st">"abc"</span>, <span class="at">width =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   abc"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb292"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1"></a><span class="fu">str_pad</span>(<span class="st">"abc"</span>, <span class="dv">12</span>, <span class="at">side =</span> <span class="st">"both"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "    abc     "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb294"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1"></a><span class="fu">str_pad</span>(<span class="st">"abc"</span>, <span class="dv">6</span>, <span class="at">side =</span> <span class="st">"right"</span>, <span class="at">pad =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abc***"</code></pre>
</div>
</div>
<div class="fragment">
<p>Si <code>width</code> es menor que la longitud de la cadena, no hace nada.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1"></a><span class="fu">str_pad</span>(<span class="st">"abc"</span>,  <span class="at">width =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abc"</code></pre>
</div>
</div>
</div>
</section>
<section id="espacios-en-blanco-1" class="slide level2">
<h2>Espacios en blanco</h2>
<ul>
<li><span class="hl-yellow"><strong>Eliminar espacios</strong></span>: con <code>str_trim()</code> podemos eliminar espacios en blanco al inicio y al final de la cadena. Si a√±adimos <code>side = ...</code> podemos cambiar si queremos que solo los elimine al final o al inicio (por defecto, en ambos). Con <code>str_squish()</code> cambiamos cualquier sucesi√≥n de espacios en blanco en medio del texto por uno solo (y elimina al inicio y final)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1"></a><span class="fu">str_trim</span>(<span class="st">" abcde   fghi "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abcde   fghi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1"></a><span class="fu">str_trim</span>(<span class="st">" abcde   "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abcde"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1"></a><span class="fu">str_trim</span>(<span class="st">" abcde   "</span>, <span class="at">side =</span> <span class="st">"left"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abcde   "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1"></a><span class="fu">str_squish</span>(<span class="st">" abcde   fghi "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "abcde fghi"</code></pre>
</div>
</div>
</section>
<section id="patrones" class="slide level2">
<h2>Patrones</h2>
<ul>
<li><span class="hl-yellow"><strong>Detectar</strong></span>: con <code>str_detect()</code> podemos detectar si una cadena de texto contiene o no una secuencia de caracteres</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"javi √°lvarez"</span>, <span class="st">"javi reyes"</span>, <span class="st">"sandra reyes"</span>), <span class="at">pattern =</span> <span class="st">"javi"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"javi √°lvarez"</span>, <span class="st">"javi reyes"</span>, <span class="st">"sandra reyes"</span>), <span class="at">pattern =</span> <span class="st">"reyes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE  TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"javi √°lvarez"</span>, <span class="st">"javi reyes"</span>, <span class="st">"sandra reyes"</span>), <span class="at">pattern =</span> <span class="st">"carlos"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE</code></pre>
</div>
</div>
</section>
<section id="patrones-1" class="slide level2">
<h2>Patrones</h2>
<ul>
<li><span class="hl-yellow"><strong>Expresiones regulares</strong></span>: no solo vamos a poder detectar patrones simples sino que podemos hacer uso de las conocidas como <strong>expresiones regulares</strong>, indic√°ndole por ejemplo que queremos localizar todo patr√≥n que sea, al menos una letra</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"ab"</span>, <span class="st">"abc"</span>, <span class="st">"abcd"</span>), <span class="at">pattern =</span> <span class="st">"[a-z]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="fragment">
<p>Si tras los corchetes indicamos <code>{n}</code> podemos detectar aquellas cadenas con n letras consecutivas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"ab"</span>, <span class="st">"abc"</span>, <span class="st">"abcd"</span>), <span class="at">pattern =</span> <span class="st">"[a-z]{3}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE  TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="patrones-2" class="slide level2">
<h2>Patrones</h2>
<ul>
<li><span class="hl-yellow"><strong>Expresiones regulares</strong></span>: un buen manejo de estas expresiones puede sernos muy √∫til para, por ejemplo, detectar formatos correctos en DNI o n√∫meros de tel√©fono (de Madrid, por ejemplo).</li>
</ul>
<p>Vamos a considerar que un formato correcto de DNI es aquel seguido por 8 n√∫meros (<code>[0-9]{8}</code>) seguido directamente de una letra may√∫scula (<code>[A-Z]</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"5055A198-W"</span>, <span class="st">"50508040W"</span>, <span class="st">"5050505W"</span>, <span class="st">"50508040-W"</span>),</span>
<span id="cb316-2"><a href="#cb316-2"></a>           <span class="at">pattern =</span> <span class="st">"[0-9]{8}[A-Z]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<div class="fragment">
<p>Podemos buscar distintos patrones a la vez concaten√°ndolos con una <code>|</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"5055A198-W"</span>, <span class="st">"50508040W"</span>, <span class="st">"5050505W"</span>, <span class="st">"50508040-W"</span>),</span>
<span id="cb318-2"><a href="#cb318-2"></a>           <span class="at">pattern =</span> <span class="st">"[0-9]{8}[A-Z]|[0-9]{8}[-][A-Z]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="patrones-3" class="slide level2">
<h2>Patrones</h2>
<ul>
<li><span class="hl-yellow"><strong>Contar patrones</strong></span>: con <code>str_count()</code> podemos contar cuantas veces aparece un mismo patr√≥n</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1"></a><span class="fu">str_count</span>(<span class="fu">c</span>(<span class="st">"abcd defg"</span>, <span class="st">"ab defg"</span>, <span class="st">"ab cd"</span>), <span class="at">pattern =</span> <span class="st">"[a-z]{4}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 1 0</code></pre>
</div>
</div>
</section>
<section id="patrones-4" class="slide level2">
<h2>Patrones</h2>
<ul>
<li><span class="hl-yellow"><strong>Localizar posiciones</strong></span>: <code>str_locate()</code> nos permite localizar la primera posici√≥n en la que se produce un patr√≥n. Con <code>str_locate_all()</code> obtenemos todos</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1"></a><span class="fu">str_locate</span>(<span class="fu">c</span>(<span class="st">"abcde abcd"</span>, <span class="st">"cba"</span>, <span class="st">"*a*"</span>), <span class="at">pattern =</span> <span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     start end
[1,]     1   1
[2,]     3   3
[3,]     2   2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1"></a><span class="fu">str_locate_all</span>(<span class="fu">c</span>(<span class="st">"abcde abcd"</span>, <span class="st">"cba"</span>, <span class="st">"*a*"</span>), <span class="at">pattern =</span> <span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     start end
[1,]     1   1
[2,]     7   7

[[2]]
     start end
[1,]     3   3

[[3]]
     start end
[1,]     2   2</code></pre>
</div>
</div>
</section>
<section id="patrones-5" class="slide level2">
<h2>Patrones</h2>
<ul>
<li><span class="hl-yellow"><strong>Extraer patrones</strong></span>: con <code>str_extract()</code> podemos extraer patrones (con <code>str_extract_all()</code> todos ellos) de una cadena de texto.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1"></a><span class="fu">str_extract</span>(<span class="fu">c</span>(<span class="st">"DNI: 5050W"</span>, <span class="st">"DNI: 50558040W, DNI: 50558080-W"</span>, <span class="st">"DNI: 50558080-W"</span>),</span>
<span id="cb326-2"><a href="#cb326-2"></a>            <span class="at">pattern =</span> <span class="st">"[0-9]{8}[A-Z]|[0-9]{8}[-][A-Z]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA           "50558040W"  "50558080-W"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1"></a><span class="fu">str_extract_all</span>(<span class="fu">c</span>(<span class="st">"DNI: 5050W"</span>, <span class="st">"DNI: 50558040W, DNI: 50558080-W"</span>, <span class="st">"DNI: 50558080-W"</span>),</span>
<span id="cb328-2"><a href="#cb328-2"></a>            <span class="at">pattern =</span> <span class="st">"[0-9]{8}[A-Z]|[0-9]{8}[-][A-Z]"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
character(0)

[[2]]
[1] "50558040W"  "50558080-W"

[[3]]
[1] "50558080-W"</code></pre>
</div>
</div>
</section>
<section id="patrones-6" class="slide level2">
<h2>Patrones</h2>
<ul>
<li><span class="hl-yellow"><strong>Dividir</strong></span>: con <code>str_split()</code> podemos localizar un patr√≥n y dividir la cadena de texto siempre que aparezca (con <code>str_split_fixed()</code> podemos dividir en un n√∫mero concreto de trozos)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1"></a><span class="fu">str_split</span>(<span class="fu">c</span>(<span class="st">"a-b-c"</span>, <span class="st">"ab-c-d-e"</span>), <span class="at">pattern =</span> <span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "a" "b" "c"

[[2]]
[1] "ab" "c"  "d"  "e" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1"></a><span class="fu">str_split_fixed</span>(<span class="fu">c</span>(<span class="st">"a-b-c"</span>, <span class="st">"ab-c-d-e"</span>), <span class="at">pattern =</span> <span class="st">"-"</span>, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]   
[1,] "a"  "b-c"  
[2,] "ab" "c-d-e"</code></pre>
</div>
</div>
<div class="fragment">
<p>Si usamos <code>boundary()</code> como patr√≥n podemos dividir en base a caracteres, frases, palabras, etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1"></a>x <span class="ot">&lt;-</span> <span class="st">"Esto es una frase. Y esto otra."</span></span>
<span id="cb334-2"><a href="#cb334-2"></a><span class="fu">str_split</span>(x, <span class="fu">boundary</span>(<span class="st">"word"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "Esto"  "es"    "una"   "frase" "Y"     "esto"  "otra" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1"></a><span class="fu">str_split</span>(x, <span class="fu">boundary</span>(<span class="st">"sentence"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "Esto es una frase. " "Y esto otra."       </code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-3-1" class="slide level2">
<h2>üíª Tu turno (textos)</h2>
<p>El dataset ser√° <code>discursos</code> (extra√≠do de <a href="https://github.com/lirondos/discursos-de-navidad" class="uri">https://github.com/lirondos/discursos-de-navidad</a>) con los discursos de navidad de los jefes de Estado (1946-2021).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"./datos/discursos.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1"><span class="hl-yellow"><strong>Ej 1</strong></span></a></li><li><a href="#tabset-4-2"><span class="hl-yellow"><strong>Ej 2</strong></span></a></li><li><a href="#tabset-4-3"><span class="hl-yellow"><strong>Ej 3</strong></span></a></li><li><a href="#tabset-4-4"><span class="hl-yellow"><strong>Ej 4</strong></span></a></li><li><a href="#tabset-4-5"><span class="hl-yellow"><strong>Ej 5</strong></span></a></li><li><a href="#tabset-4-6"><span class="hl-yellow"><strong>Ej 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<p>üìù Convierte todos los discurso a min√∫scula (y reemplaza la variable <code>texto</code>)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1"></a><span class="co"># Convertimos a min√∫scula</span></span>
<span id="cb339-2"><a href="#cb339-2"></a>discursos<span class="sc">$</span>texto <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(discursos<span class="sc">$</span>texto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-2">
<p>üìù Elimina los: ‚Äú:‚Äù, ‚Äú,‚Äù, ‚Äú.‚Äù, ‚Äú;‚Äù, ‚Äú¬°‚Äù, ‚Äú!‚Äù, ‚Äú¬ø‚Äù y ‚Äú?‚Äù. Tras ello elimina espacios adelante y atr√°s, y en medio si existen solo deja uno (busca en las diapos y pdf del paquete). Como son <strong>caracteres especiales</strong> debes indic√°rselos con <code>\\</code> delante</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"hola"</span>, <span class="st">"hola. adios"</span>), <span class="at">pattern =</span> <span class="st">"."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">"hola"</span>, <span class="st">"hola. adios"</span>), <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1"></a><span class="co"># Eliminamos los signos de puntuaci√≥n</span></span>
<span id="cb344-2"><a href="#cb344-2"></a>discursos<span class="sc">$</span>texto <span class="ot">&lt;-</span></span>
<span id="cb344-3"><a href="#cb344-3"></a>  <span class="fu">str_remove_all</span>(discursos<span class="sc">$</span>texto, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">:|</span><span class="sc">\\</span><span class="st">,|</span><span class="sc">\\</span><span class="st">.|</span><span class="sc">\\</span><span class="st">;|</span><span class="sc">\\</span><span class="st">¬°|</span><span class="sc">\\</span><span class="st">!|</span><span class="sc">\\</span><span class="st">¬ø|</span><span class="sc">\\</span><span class="st">?"</span>)</span>
<span id="cb344-4"><a href="#cb344-4"></a></span>
<span id="cb344-5"><a href="#cb344-5"></a><span class="co"># Tras ello eliminamos espacios adelante, atr√°s y en medio solo dejamos uno</span></span>
<span id="cb344-6"><a href="#cb344-6"></a>discursos<span class="sc">$</span>texto <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(discursos<span class="sc">$</span>texto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-3">
<p>üìù Crea una nueva variable <code>long</code> con la longitud de cada discurso</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1"></a><span class="co"># Eliminamos los signos de puntuaci√≥n</span></span>
<span id="cb345-2"><a href="#cb345-2"></a>discursos<span class="sc">$</span>long <span class="ot">&lt;-</span> <span class="fu">str_length</span>(discursos<span class="sc">$</span>texto)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-4">
<p>üìù Determina los 5 a√±os con mayor longitud</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1"></a><span class="co"># 5 a√±os con mayor longitud (usamos order para obtener √≠ndices)</span></span>
<span id="cb346-2"><a href="#cb346-2"></a>discursos<span class="sc">$</span>year[<span class="fu">order</span>(discursos<span class="sc">$</span>long, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-5">
<p>üìù Incorpora una nueva variable llamada <code>spain</code> que calcule el n√∫mero de veces que se dice ‚Äúespa√±oles‚Äù, ‚Äúespa√±olas‚Äù o ‚Äúespa√±a‚Äù en el discurso. Determina los 5 a√±os d√≥nde menos se menten dichas palabras</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb347"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1"></a><span class="co"># Contamos</span></span>
<span id="cb347-2"><a href="#cb347-2"></a>discursos<span class="sc">$</span>spain <span class="ot">&lt;-</span> <span class="fu">str_count</span>(discursos<span class="sc">$</span>texto, <span class="at">pattern =</span> <span class="st">"espa√±oles|espa√±olas|espa√±a"</span>)</span>
<span id="cb347-3"><a href="#cb347-3"></a></span>
<span id="cb347-4"><a href="#cb347-4"></a><span class="co"># A√±os con menos menciones</span></span>
<span id="cb347-5"><a href="#cb347-5"></a>discursos<span class="sc">$</span>year[<span class="fu">order</span>(discursos<span class="sc">$</span>spain)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-6">
<p>üìù De los 76 a√±os calcula el n√∫mero de discursos en los que las palabras ‚Äúmujer‚Äù o ‚Äúmujeres‚Äù se nombren m√°s que las palabras ‚Äúhombre‚Äù u ‚Äúhombres‚Äù</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1"></a><span class="fu">sum</span>(<span class="fu">str_count</span>(discursos<span class="sc">$</span>texto, <span class="at">pattern =</span> <span class="st">"mujer|mujeres"</span>) <span class="sc">&gt;</span></span>
<span id="cb348-2"><a href="#cb348-2"></a>      <span class="fu">str_count</span>(discursos<span class="sc">$</span>texto, <span class="at">pattern =</span> <span class="st">"hombre|hombres"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-3-1" class="slide level2">
<h2>üê£ Caso pr√°ctico I: textos</h2>
<p>Para practicar textos y tibbles vamos a usar el dataset <code>salto_longitud</code> que tienes guardado en la carpeta de datos, que guarda c√≥mo ha <strong>progresado el r√©cord de salto de longitud masculino</strong>. Dicha tabla ha sido extra√≠da directamente de la wikipedia <a href="https://en.wikipedia.org/wiki/Men%27s_long_jump_world_record_progression#Low_altitude_record_progression_1965%E2%80%931991" class="uri">https://en.wikipedia.org/wiki/Men%27s_long_jump_world_record_progression#Low_altitude_record_progression_1965%E2%80%931991</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"./datos/salto_longitud.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Aunque m√°s adelante veremos como extraerlo, puedes ver debajo si quieres el c√≥digo que se ha usado para extraer la tabla</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb350-2"><a href="#cb350-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb350-3"><a href="#cb350-3"></a>wiki_jump <span class="ot">&lt;-</span> <span class="st">'https://en.wikipedia.org/wiki/Men%27s_long_jump_world_record_progression'</span></span>
<span id="cb350-4"><a href="#cb350-4"></a>long_jump <span class="ot">&lt;-</span> <span class="fu">read_html</span>(wiki_jump)</span>
<span id="cb350-5"><a href="#cb350-5"></a>salto_longitud <span class="ot">&lt;-</span> <span class="fu">html_table</span>(<span class="fu">html_node</span>(long_jump, <span class="st">'table'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/textos-primeras-bbdd/"><strong>workbook</strong></a></p>
</section></section>
<section>
<section id="clase-4" class="title-slide slide level1 center">
<h1>Clase 4: <span class="flow">primeras tablas</span></h1>
<p><span style="color:#444442;"><strong>Primeras bases de datos</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-3-2">üíª Ejercicios resueltos: matrices</a></p></li>
<li><p><a href="#/tu-turno-3-3">üíª Ejercicios resueltos: data.frame y tibble</a></p></li>
<li><p><a href="#/caso-practico-3-2">üê£ Workbook/caso pr√°ctico</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="primera-base-de-datos" class="slide level2">
<h2>Primera base de datos</h2>
<p>Cuando analizamos datos solemos tener <span class="hl-yellow"><strong>varias variables</strong></span> de cada individuo: necesitamos una ¬´tabla¬ª que las recopile. La opci√≥n m√°s inmediata son las <span class="hl-yellow"><strong>matrices</strong></span>: concatenaci√≥n de variables del <span class="hl-purple"><strong>mismo tipo e igual longitud</strong></span>.</p>
<p>Imagina que tenemos estaturas y pesos de 4 personas. ¬øC√≥mo <span class="hl-yellow"><strong>crear un dataset con las dos variables</strong></span>?</p>
<div class="fragment">
<p>La opci√≥n m√°s habitual es usando <code>cbind()</code>: <span class="hl-yellow"><strong>concatenamos (bind) vectores en forma de columnas (c)</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb351" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb351-1"><a href="#cb351-1"></a>estaturas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">160</span>, <span class="dv">170</span>, <span class="dv">180</span>)</span>
<span id="cb351-2"><a href="#cb351-2"></a>pesos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">63</span>, <span class="dv">70</span>, <span class="dv">85</span>, <span class="dv">95</span>)</span>
<span id="cb351-3"><a href="#cb351-3"></a>datos_matriz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(estaturas, pesos)</span>
<span id="cb351-4"><a href="#cb351-4"></a>datos_matriz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     estaturas pesos
[1,]       150    63
[2,]       160    70
[3,]       170    85
[4,]       180    95</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>Tambi√©n podemos <span class="hl-yellow"><strong>construir la matriz por filas</strong></span> con la funci√≥n <code>rbind()</code> (concatenar - bind - por filas - rows), aunque lo <span class="hl-green"><strong>recomendable es tener cada variable en columna</strong></span> e individuo en fila como luego veremos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1"></a><span class="fu">rbind</span>(estaturas, pesos) <span class="co"># Construimos la matriz por filas</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1] [,2] [,3] [,4]
estaturas  150  160  170  180
pesos       63   70   85   95</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Podemos <span class="hl-yellow"><strong>¬´visualizar¬ª la matriz</strong></span> con <code>View(matriz)</code>.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Podemos <span class="hl-yellow"><strong>comprobar las dimensiones</strong></span> con <code>dim()</code>, <code>nrow()</code> y <code>ncol()</code>: las matrices son un tipo de <strong>datos tabulados</strong> (organizados en filas y columnas)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1"></a><span class="fu">dim</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1"></a><span class="fu">nrow</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1"></a><span class="fu">ncol</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-1" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>Tambi√©n podemos <span class="hl-yellow"><strong>¬´darle vuelta¬ª (matriz transpuesta)</strong></span> con <code>t()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1"></a><span class="fu">t</span>(datos_matriz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1] [,2] [,3] [,4]
estaturas  150  160  170  180
pesos       63   70   85   95</code></pre>
</div>
</div>
<div class="fragment">
<p>Dado que ahora tenemos dos dimensiones en nuestros datos, para <span class="hl-yellow"><strong>acceder a elementos con <code>[]</code></strong></span> deberemos proporcionar <strong>dos √≠ndices separados por comas</strong>: √≠ndice de la fila y de la columna</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1"></a>datos_matriz[<span class="dv">2</span>, <span class="dv">1</span>] <span class="co"># segunda fila, primera columna</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas 
      160 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1"></a>datos_matriz[<span class="dv">1</span>, <span class="dv">2</span>] <span class="co"># primera fila, segunda columna </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>pesos 
   63 </code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-2" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>En algunas casos querremos obtener los <span class="hl-yellow"><strong>datos totales de un individuo</strong></span> (una fila concreta pero todas las columnas) o los valores de <span class="hl-yellow"><strong>toda una variable</strong></span> para todos los individuos (una columna concreta pero todas las filas). Para ello dejaremos <span class="hl-yellow"><strong>sin rellenar uno de los √≠ndices</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1"></a>datos_matriz[<span class="dv">2</span>, ] <span class="co"># segundo individuo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas     pesos 
      160        70 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1"></a>datos_matriz[, <span class="dv">1</span>] <span class="co"># primera variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 160 170 180</code></pre>
</div>
</div>
<div class="fragment">
<p>Mucho de lo aprendido con vectores podemos hacerlo con matrices, as√≠ podemos por ejemplo acceder a varias filas y/o columnas haciendo uso de las <span class="hl-yellow"><strong>secuencias de enteros 1:n</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb371-1"><a href="#cb371-1"></a>datos_matriz[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="dv">1</span>] <span class="co"># primera variable para el primer y tercer individuo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 170</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-intento-matrices-3" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>Tambi√©n podemos definir una <span class="hl-yellow"><strong>matriz a partir de un vector num√©rico</strong></span>, reorganizando los valores en forma de matriz (sabiendo que los elementos se van <span class="hl-purple"><strong>colocando por columnas</strong></span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb373-1"><a href="#cb373-1"></a>z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">ncol =</span> <span class="dv">3</span>) </span>
<span id="cb373-2"><a href="#cb373-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9</code></pre>
</div>
</div>
<div class="fragment">
<p>Incluso podemos <span class="hl-yellow"><strong>definir una matriz de valores constantes</strong></span>, por ejemplo de ceros (para luego rellenar)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb375"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb375-1"><a href="#cb375-1"></a><span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    0    0    0</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-matrices" class="slide level2">
<h2>Operaciones con matrices</h2>
<p>Con las matrices sucede como con los vectores: cuando aplicamos una <span class="hl-yellow"><strong>operaci√≥n aritm√©tica lo hacemos elemento a elemento</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb377"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb377-1"><a href="#cb377-1"></a>z<span class="sc">/</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]  0.2  0.8  1.4
[2,]  0.4  1.0  1.6
[3,]  0.6  1.2  1.8</code></pre>
</div>
</div>
<div class="fragment">
<p>Para realizar <span class="hl-yellow"><strong>operaciones en un sentido matricial</strong></span> deberemos a√±adir <code>%%</code>, por ejemplo, para multiplicar matrices ser√° <code>%*%</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb379"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb379-1"><a href="#cb379-1"></a>z <span class="sc">*</span> <span class="fu">t</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    8   21
[2,]    8   25   48
[3,]   21   48   81</code></pre>
</div>
<div class="sourceCode cell-code" id="cb381"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb381-1"><a href="#cb381-1"></a>z <span class="sc">%*%</span> <span class="fu">t</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]   66   78   90
[2,]   78   93  108
[3,]   90  108  126</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-matrices-1" class="slide level2">
<h2>Operaciones con matrices</h2>
<p>Tambi√©n podemos <span class="hl-yellow"><strong>realizar operaciones por columnas/filas</strong></span> sin recurrir a bucles con la funci√≥n <code>apply()</code>, y le indicaremos como <strong>argumentos</strong></p>
<ul>
<li>la matriz</li>
<li>el sentido de la operaci√≥n (<code>MARGIN = 1</code> por filas, <code>MARGIN = 2</code> por columnas)</li>
<li>la funci√≥n a aplicar</li>
<li>argumentos extra que necesite la funci√≥n</li>
</ul>
<div class="fragment">
<p>Por ejemplo, para aplicar una media a cada variable, ser√° <code>mean</code> aplicada con <code>MARGIN = 2</code> (misma funci√≥n para cada columna)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb383"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb383-1"><a href="#cb383-1"></a><span class="co"># Media (mean) por columnas (MARGIN = 2)</span></span>
<span id="cb383-2"><a href="#cb383-2"></a><span class="fu">apply</span>(datos_matriz, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>estaturas     pesos 
   165.00     78.25 </code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-3-2" class="slide level2">
<h2>üíª Tu turno (matrices)</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-5-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-5-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-5-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-5-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-5-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<p>üìù Modifica el c√≥digo inferior para definir una matriz <code>x</code> de unos, de 3 filas y 7 columnas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb385-2"><a href="#cb385-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">7</span>)</span>
<span id="cb386-2"><a href="#cb386-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-2">
<p>üìù A la matriz anterior, suma un 1 a cada n√∫mero de la matriz y divide el resultado entre 5. Tras ello calcula su transpuesta</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1"></a>new_matrix <span class="ot">&lt;-</span> (x <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">/</span><span class="dv">5</span></span>
<span id="cb387-2"><a href="#cb387-2"></a><span class="fu">t</span>(new_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-3">
<p>üìù ¬øPor qu√© el c√≥digo inferior nos devuelve dicho mensaje de aviso?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in matrix(1:15, nrow = 4): data length [15] is not a sub-multiple or
multiple of the number of rows [4]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    5    9   13
[2,]    2    6   10   14
[3,]    3    7   11   15
[4,]    4    8   12    1</code></pre>
</div>
</div>
</div>
<div id="tabset-5-4">
<p>üìù Define la matriz <code>x &lt;- matrix(1:12, nrow = 4)</code>. Tras ello obt√©n los datos del primer individuo, los datos de la tercera variable, y el elemento <code>(4, 1)</code>.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb391"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb391-1"><a href="#cb391-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb391-2"><a href="#cb391-2"></a>x[<span class="dv">1</span>, ] <span class="co"># primera fila</span></span>
<span id="cb391-3"><a href="#cb391-3"></a>x[, <span class="dv">3</span>] <span class="co"># tercera columna</span></span>
<span id="cb391-4"><a href="#cb391-4"></a>x[<span class="dv">4</span>, <span class="dv">1</span>] <span class="co"># elemento (4, 1)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-5">
<p>üìù Define una matriz de 2 variables y 3 individuos tal que cada variable capture la estatura y la edad 3 personas, de manera que la edad de la segunda persona sea desconocida (ausente). Tras ello calcula la media de cada variable (¬°nos debe de volver un n√∫mero!)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="st">"edad"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="cn">NA</span>, <span class="dv">25</span>), <span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">160</span>, <span class="dv">165</span>, <span class="dv">170</span>))</span>
<span id="cb392-2"><a href="#cb392-2"></a><span class="fu">apply</span>(datos, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="co"># media por columnas</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-6">
<p>üìù ¬øPor qu√© devuelve error el c√≥digo inferior? ¬øQu√© est√° mal?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb393"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb393-1"><a href="#cb393-1"></a>matriz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="st">"edad"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>), <span class="st">"nombres"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>, <span class="st">"carlos"</span>))</span>
<span id="cb393-2"><a href="#cb393-2"></a>matriz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     edad nombres 
[1,] "15" "javi"  
[2,] "20" "sandra"
[3,] "25" "carlos"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb395"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb395-1"><a href="#cb395-1"></a>matriz <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in matriz + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Las matrices tienen el mismo problema que los vectores: si juntamos datos de distinto tipo, se <span class="hl-red"><strong>perturba la integridad del dato</strong></span> ya que los convierte (f√≠jate en el c√≥digo inferior: las edades y los <code>TRUE/FALSE</code> los ha convertido a texto)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb397" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb397-1"><a href="#cb397-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">24</span>, <span class="cn">NA</span>)</span>
<span id="cb397-2"><a href="#cb397-2"></a>soltero <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>)</span>
<span id="cb397-3"><a href="#cb397-3"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>, <span class="st">"luc√≠a"</span>)</span>
<span id="cb397-4"><a href="#cb397-4"></a>matriz <span class="ot">&lt;-</span> <span class="fu">cbind</span>(edades, soltero, nombres)</span>
<span id="cb397-5"><a href="#cb397-5"></a>matriz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     edades soltero nombres
[1,] "14"   "TRUE"  "javi" 
[2,] "24"   NA      "laura"
[3,] NA     "FALSE" "luc√≠a"</code></pre>
</div>
</div>
<div class="fragment">
<p>De hecho al no ser n√∫meros ya no podemos realizar operaciones aritm√©ticas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb399"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1"></a>matriz <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in matriz + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-1" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Para poder trabajar con <span class="hl-yellow"><strong>variables de distinto tipo</strong></span> tenemos en <code>R</code> lo que se conoce como <span class="hl-yellow"><strong>data.frame</strong></span>: concatenaci√≥n de variables de igual longitud pero que pueden ser de <span class="hl-purple"><strong>tipo distinto</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb401"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(edades, soltero, nombres)</span>
<span id="cb401-2"><a href="#cb401-2"></a><span class="fu">class</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb403"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edades soltero nombres
1     14    TRUE    javi
2     24      NA   laura
3     NA   FALSE   luc√≠a</code></pre>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-2" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Dado que un <code>data.frame</code> es ya un intento de ¬´base de datos¬ª las variables no son meros vectores matem√°ticos: <span class="hl-yellow"><strong>tienen un significado</strong></span> y podemos (debemos) <span class="hl-purple"><strong>ponerles nombres</strong></span> que describan su significado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb405"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb405-2"><a href="#cb405-2"></a>tabla <span class="ot">&lt;-</span></span>
<span id="cb405-3"><a href="#cb405-3"></a>  <span class="fu">data.frame</span>(<span class="st">"edad"</span> <span class="ot">=</span> edades, <span class="st">"estado"</span> <span class="ot">=</span> soltero, <span class="st">"nombre"</span> <span class="ot">=</span> nombres,</span>
<span id="cb405-4"><a href="#cb405-4"></a>             <span class="st">"f_nacimiento"</span> <span class="ot">=</span> <span class="fu">as_date</span>(<span class="fu">c</span>(<span class="st">"1989-09-10"</span>, <span class="st">"1992-04-01"</span>, <span class="st">"1980-11-27"</span>)))</span>
<span id="cb405-5"><a href="#cb405-5"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento
1   14   TRUE   javi   1989-09-10
2   24     NA  laura   1992-04-01
3   NA  FALSE  luc√≠a   1980-11-27</code></pre>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-3" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p><span class="hl-yellow"><strong>¬°TENEMOS NUESTRO PRIMER CONJUNTO DE DATOS!</strong></span> (estrictamente no podemos hablar de base de datos pero de momento como lo si fuesen). Puedes visualizarlo escribiendo su nombre en consola o con <code>View(tabla)</code></p>

<img data-src="img/view_tabla.jpg" class="r-stretch"></section>
<section id="acceso-a-variables" class="slide level2">
<h2>Acceso a variables</h2>
<p>Si queremos acceder a sus elementos, al ser de nuevo <strong>datos tabulados</strong>, podemos acceder como en las matrices (<span class="hl-red"><strong>no recomendable</strong></span>): de nuevo <span class="hl-yellow"><strong>tenemos dos √≠ndices</strong></span> (filas y columnas, dejando libre la que no usemos)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb407"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1"></a>tabla[<span class="dv">2</span>, ]  <span class="co"># segunda fila (todas sus variables)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento
2   24     NA  laura   1992-04-01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1"></a>tabla[, <span class="dv">3</span>]  <span class="co"># tercera columna (de todos los individuos)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "laura" "luc√≠a"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb411"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb411-1"><a href="#cb411-1"></a>tabla[<span class="dv">2</span>, <span class="dv">1</span>]  <span class="co"># primera caracter√≠stica de la segunda persona</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:25%;">
<p><img data-src="img/menu_data_frame.jpg"></p>
</div><div class="column" style="width:75%;">
<p>Pero tambi√©n tiene las ventajas de una <span class="hl-yellow"><strong>¬´base¬ª de datos</strong></span> : podemos <span class="hl-purple"><strong>aceder a las variables por su nombre</strong></span> (<span class="hl-green"><strong>lo recomendable</strong></span> ya que las variables pueden cambiar de posici√≥n y ahora s√≠ tienen un significado), poniendo el nombre de la tabla seguido del s√≠mbolo <code>$</code> (con el <strong>tabulador</strong>, nos aparecer√° un men√∫ de columnas a elegir)</p>
</div>
</div>
</div>
</section>
<section id="funciones-de-consulta" class="slide level2">
<h2>Funciones de consulta</h2>
<ul>
<li><code>names()</code>: nos muestra los nombres de las variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb413"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1"></a><span class="fu">names</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "edad"         "estado"       "nombre"       "f_nacimiento"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>dim()</code>: nos muestra las dimensiones (tambi√©n <code>nrow()</code> y <code>ncol()</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb415"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb415-1"><a href="#cb415-1"></a><span class="fu">dim</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Podemos acceder a las variables por su nombre</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb417"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb417-1"><a href="#cb417-1"></a>tabla[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="st">"nombre"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "luc√≠a"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb419"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1"></a>tabla<span class="sc">$</span>nombre[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "luc√≠a"</code></pre>
</div>
</div>
</div>
</section>
<section id="a√±adir-variable" class="slide level2">
<h2>A√±adir variable</h2>
<p>Si tenemos uno ya creado y queremos <span class="hl-yellow"><strong>a√±adir una columna</strong></span> es tan simple como usar la funci√≥n <code>data.frame()</code> que ya hemos visto para concatenar la columna. Vamos a√±adir por ejemplo una nueva variable, el n√∫mero de hermanos de cada individuo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb421"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb421-1"><a href="#cb421-1"></a><span class="co"># A√±adimos una nueva columna con n¬∫ de hermanos/as</span></span>
<span id="cb421-2"><a href="#cb421-2"></a>hermanos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb421-3"><a href="#cb421-3"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(tabla, <span class="st">"n_hermanos"</span> <span class="ot">=</span> hermanos)</span>
<span id="cb421-4"><a href="#cb421-4"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento n_hermanos
1   14   TRUE   javi   1989-09-10          0
2   24     NA  laura   1992-04-01          2
3   NA  FALSE  luc√≠a   1980-11-27          3</code></pre>
</div>
</div>
</section>
<section id="intento-final-tibble" class="slide level2">
<h2>Intento final: tibble</h2>
<p>Las tablas en formato <code>data.frame</code> tienen algunas <span class="hl-red"><strong>limitaciones</strong></span>. La principal es que <span class="hl-red"><strong>no permite la recursividad</strong></span>: imagina que definimos una base de datos con estaturas y pesos, y queremos una tercera variable con el IMC</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb423"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb423-1"><a href="#cb423-1"></a><span class="fu">data.frame</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb423-2"><a href="#cb423-2"></a>           <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in data.frame(estatura = c(1.7, 1.8, 1.6), peso = c(80, 75, 70), : object 'peso' not found</code></pre>
</div>
</div>
<div class="fragment">
<p>En adelante usaremos el formato <code>tibble</code> (<span class="hl-yellow"><strong>data.frame mejorado</strong></span>) del paquete <code>{tibble}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb425"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb425-2"><a href="#cb425-2"></a>datos_tb <span class="ot">&lt;-</span> </span>
<span id="cb425-3"><a href="#cb425-3"></a>  <span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>), <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb425-4"><a href="#cb425-4"></a><span class="fu">class</span>(datos_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb427"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb427-1"><a href="#cb427-1"></a>datos_tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
</div>
</section>
<section id="intento-final-tibble-1" class="slide level2">
<h2>Intento final: tibble</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb429"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1"></a>datos_tb <span class="ot">&lt;-</span></span>
<span id="cb429-2"><a href="#cb429-2"></a>  <span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>), <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb429-3"><a href="#cb429-3"></a>datos_tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
<p>Las tablas en formato <code>tibble</code> nos permitir√° una <span class="hl-yellow"><strong>gesti√≥n m√°s √°gil, eficiente y coherente</strong></span> de los datos, con 4 ventajas principales:</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Metainformaci√≥n</strong></span>: si te fijas en la cabecera, nos dice ya autom√°ticamente el n√∫mero de filas y columnas, y el tipo de cada variable</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Recursividad</strong></span>: permite definir las variables secuencialmente (como hemos visto)</li>
</ul>
</div>
</section>
<section id="intento-final-tibble-2" class="slide level2">
<h2>Intento final: tibble</h2>
<ul>
<li><span class="hl-yellow"><strong>Consistencia</strong></span>: si accedes a una columna que no existe avisa con un warning</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb431"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1"></a>datos_tb<span class="sc">$</span>invent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `invent`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Por filas</strong></span>: crear por filas (copiar y pegar de una tabla) con <code>tribble()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb434"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb434-1"><a href="#cb434-1"></a><span class="fu">tribble</span>(<span class="sc">~</span>colA, <span class="sc">~</span>colB,</span>
<span id="cb434-2"><a href="#cb434-2"></a>        <span class="st">"a"</span>,   <span class="dv">1</span>,</span>
<span id="cb434-3"><a href="#cb434-3"></a>        <span class="st">"b"</span>,   <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  colA   colB
  &lt;chr&gt; &lt;dbl&gt;
1 a         1
2 b         2</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>El paquete <code>{datapasta}</code> nos permite <span class="hl-green"><strong>copiar y pegar</strong></span> tablas de p√°ginas web y documentos sencillos</p>
</div>
</div>
</div>
</div>
</section>
<section id="recapitulando" class="slide level2">
<h2>Recapitulando</h2>
<ul>
<li>Cada <span class="hl-yellow"><strong>celda puede ser de un tipo diverso</strong></span>: n√∫meros, texto, fechas, valores l√≥gicos, etc</li>
</ul>
<div class="fragment">
<ul>
<li>Un <span class="hl-yellow"><strong>vector es una concatenaci√≥n de celdas</strong></span> (las futuras columnas de nuestras tablas) ‚Äì&gt; En <code>R</code> por defecto las operaciones se hacen <span class="hl-yellow"><strong>elemento a elemento</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Una <span class="hl-yellow"><strong>matriz</strong></span> nos permite concatenar <span class="hl-yellow"><strong>variables del MISMO tipo y MISMA longitud</strong></span> ‚Äì&gt; datos tabulados</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Un <span class="hl-yellow"><strong>data.frame</strong></span> nos permite concatenar <span class="hl-yellow"><strong>variables de DISTINTO tipo y MISMA longitud</strong></span> ‚Äì&gt; usaremos <span class="hl-yellow"><strong>tibble</strong></span> como una opci√≥n mejorada de base de datos</li>
</ul>
</div>
</section>
<section id="tu-turno-3-3" class="slide level2">
<h2>üíª Tu turno (tb/df)</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-6-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-6-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-6-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-6-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-6-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-6-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li><li><a href="#tabset-6-8"><span class="hl-yellow"><strong>Ejercicio 8</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<p>üìù Carga del paquete <code>{datasets}</code> el conjunto de datos <code>airquality</code> (variables de la calidad del aire de Nueva York desde mayo hasta septiembre de 1973). ¬øEs el conjunto de datos airquality de tipo tibble? En caso negativo, convi√©rtelo a tibble (busca en la documentaci√≥n del paquete en <a href="https://tibble.tidyverse.org/index.html" class="uri">https://tibble.tidyverse.org/index.html</a>).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb436"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb436-2"><a href="#cb436-2"></a><span class="fu">class</span>(datasets<span class="sc">::</span>airquality)</span>
<span id="cb436-3"><a href="#cb436-3"></a>airquality_tb <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(datasets<span class="sc">::</span>airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-2">
<p>üìù Una vez convertido a <code>tibble</code> obt√©n el nombre de las variables y las dimensiones del conjunto de datos. ¬øCu√°ntas variables hay? ¬øCu√°ntos d√≠as se han medido?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb437"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb437-1"><a href="#cb437-1"></a><span class="fu">names</span>(airquality_tb)</span>
<span id="cb437-2"><a href="#cb437-2"></a><span class="fu">ncol</span>(airquality_tb)</span>
<span id="cb437-3"><a href="#cb437-3"></a><span class="fu">nrow</span>(airquality_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-3">
<p>üìù Cambia el c√≥digo inferior para filtrar solo los datos de la quinta observaci√≥n</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb438"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb438-1"><a href="#cb438-1"></a>airquality_tb[Month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb439"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb439-1"><a href="#cb439-1"></a>airquality_tb[<span class="dv">5</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-4">
<p>üìù Cambia el c√≥digo inferior para filtrar solo los datos del mes de agosto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb440"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb440-1"><a href="#cb440-1"></a>airquality_tb[Month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb441"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb441-1"><a href="#cb441-1"></a>airquality_tb[airquality_tb<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-5">
<p>üìù Selecciona aquellos datos que no sean ni de julio ni de agosto.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb442"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb442-1"><a href="#cb442-1"></a>airquality_tb[airquality_tb<span class="sc">$</span>Month <span class="sc">!=</span> <span class="dv">7</span> <span class="sc">&amp;</span> airquality_tb<span class="sc">$</span>Month <span class="sc">!=</span> <span class="dv">8</span>, ]</span>
<span id="cb442-2"><a href="#cb442-2"></a></span>
<span id="cb442-3"><a href="#cb442-3"></a><span class="co"># otra opci√≥n</span></span>
<span id="cb442-4"><a href="#cb442-4"></a>airquality_tb[<span class="sc">!</span>(airquality_tb<span class="sc">$</span>Month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>)), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-6">
<p>üìù Modifica el siguiente c√≥digo para quedarte solo con las variable de ozono y temperatura (sin importar qu√© posici√≥n ocupen)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb443"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1"></a>airquality_tb[, <span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-7">
<p>üìù Selecciona los datos de temperatura y viento de agosto.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb444"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb444-1"><a href="#cb444-1"></a>airquality_tb[airquality_tb<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">8</span>, <span class="fu">c</span>(<span class="st">"Temp"</span>, <span class="st">"Wind"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-8">
<p>üìù Traduce a castellano el nombre de las variables.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb445"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb445-1"><a href="#cb445-1"></a><span class="fu">names</span>(airquality_tb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ozono"</span>, <span class="st">"rad_solar"</span>, <span class="st">"viento"</span>, <span class="st">"temp"</span>, <span class="st">"mes"</span>, <span class="st">"dia"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-3-2" class="slide level2">
<h2>üê£ Caso pr√°ctico II: tibble</h2>
<p>Del paquete <code>{Biostatistics}</code> usaremos el conunto de datos <code>pinniped</code>, que guarda los <strong>datos de peso de cuerpo y cerebro</strong> (desagregado por sexo y mono/poligamia) de 33 especies de mam√≠feros marinos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb446"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb446-1"><a href="#cb446-1"></a>Biostatistics<span class="sc">::</span>pinniped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       Species Male_brain_g Female_brain_g Male_mass_Kg
1       Monachus schauinslandi        370.0             NA        173.0
2            Monachus monachus        480.0          480.0        260.0
3      Mirounga angustirostris        700.0          640.0       2275.0
4             Mirounga leonina       1431.3          898.8       3510.0
5       Leptonychotes weddelli        535.0          637.5        450.0
6            Ommatophoca rossi        425.0          530.0        153.8
7        Lobodon carcinophagus        578.2          538.8        220.5
8            Hydrurga leptonyx        765.0          660.0        324.0
9          Cystophora cristata        480.0          430.0        343.2
10         Erignathus barbatus           NA          460.0        312.5
11          Halichoerus grypus        342.5          272.5        233.0
12          Phoca groenlandica        297.5          252.5        145.0
13              Phoca fasciata        257.5          240.0         94.8
14                Phoca largha        257.5          250.0         97.0
15               Phoca caspica        165.0          160.0         70.5
16              Phoca sibirica        185.0          190.0         89.5
17               Phoca hispida        229.3          220.0         84.0
18              Phoca vitulina        362.3          265.0         97.1
19      Zalophus californianus        405.0          361.5        244.5
20          Eumetopias jubatus        747.5          575.0       1000.0
21              Otaria byronia        546.3          470.0        300.0
22            Neophoca cinerea        440.0          337.5        300.0
23          Phocarctos hookeri        417.5          370.0        364.0
24         Callorhinus ursinus        355.0          302.5        140.0
25     Arctocephalus townsendi           NA             NA        112.0
26     Arctocephalus philippii        415.0             NA        140.0
27 Arctocephalus galapagoensis        302.5          280.0         64.5
28     Arctocephalus australis        350.0          265.0         91.0
29      Arctocephalus forsteri        340.0          300.0        125.0
30       Arctocephalus gazella        360.0          320.0        155.0
31    Arctocephalus tropicalis        322.5          330.0        152.5
32      Arctocephalus pusillus        401.3          337.5        263.0
33           Odobenus rosmarus       1303.0         1340.5       1233.0
   Female_mass_Kg Mate_type
1           272.2      mono
2           275.0      mono
3           488.0      poly
4           565.7      poly
5           447.0      poly
6           164.0      mono
7           224.0      mono
8           367.0      mono
9           222.5      mono
10          326.0      mono
11          205.8      poly
12          139.0      mono
13           80.4      mono
14           71.3      mono
15           55.0      mono
16           85.0      mono
17           81.2      mono
18           85.2      mono
19           81.0      poly
20          287.5      poly
21          144.0      poly
22           78.6      poly
23          114.7      poly
24           33.3      poly
25           49.6      poly
26           48.1      poly
27           27.4      poly
28           48.5      poly
29           38.1      poly
30           45.0      poly
31           50.0      poly
32           64.1      poly
33          811.5      poly</code></pre>
</div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/textos-primeras-bbdd/"><strong>workbook</strong></a></p>
</section></section>
<section>
<section id="clase-5" class="title-slide slide level1 center">
<h1>Clase 5: <span class="flow">entrega y Quarto</span></h1>
<p><span style="color:#444442;"><strong>Comunicar: elaborar apuntes, diapositivas, etc</strong></span></p>
<ul>
<li><p><a href="#/caso-practico-4">üê£ Workbook/caso pr√°ctico</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="comunicar-rmd-y-quarto" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Una de las <span class="hl-yellow"><strong>principales fortalezas</strong></span> de <code>R</code> es la <span class="hl-yellow"><strong>facilidad para generar informes, libros, webs, apuntes y hasta diapositivas</strong></span> (este mismo material por ejemplo). Para ello <span class="hl-purple"><strong>instalaremos</strong></span> antes</p>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li>el paquete <code>{rmarkdown}</code> (para generar archivos <code>.rmd</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb448"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb448-1"><a href="#cb448-1"></a><span class="fu">install.packages</span>(<span class="st">"rmarkdown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>instalar <a href="https://quarto.org/docs/get-started/"><strong>Quarto</strong></a> (si ya conoc√≠as <code>R</code>, el ¬´nuevo¬ª <code>.rmd</code> ahora como <code>.qmd</code>)</li>
</ul>
</div><div class="column" style="width:60%;">
<p><img data-src="img/quarto.png"></p>
</div>
</div>
</section>
<section id="comunicar-rmd-y-quarto-1" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Hasta ahora solo hemos programado en scripts (archivos <code>.R</code>) dentro de proyectos, pero en muchas ocasiones <span class="hl-yellow"><strong>no trabajaremos solos</strong></span> y necesitaremos <span class="hl-yellow"><strong>comunicar los resultados</strong></span> en diferentes formatos:</p>
<ul>
<li>apuntes (para nosotros mismos)</li>
<li>diapositivas</li>
<li>web</li>
<li>informes</li>
</ul>
<p>Para todo ello usaremos <span class="hl-yellow"><strong>Quarto</strong></span> (ver m√°s en <a href="https://ivelasq.quarto.pub/intro-to-quarto/" class="uri">https://ivelasq.quarto.pub/intro-to-quarto/</a>)</p>
</section>
<section id="comunicar-rmd-y-quarto-2" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>Los archivos de extensi√≥n <code>.qmd</code> (o <code>.rmd</code> antes) nos permitir√°n f√°cilmente combinar:</p>
<ul>
<li><span class="hl-yellow"><strong>Markdown</strong></span>: <span class="hl-purple"><strong>lenguaje tipado</strong></span> que nos permite crear contenido simple (tipo wordpress, con texto, <strong>negritas</strong>, <em>cursivas</em>, etc) con un dise√±o legible.</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Matem√°ticas (latex)</strong></span>: lenguaje para escribir notaci√≥n matem√°tica como <span class="math inline">\(x^2\)</span> o <span class="math inline">\(\sqrt{y}\)</span> o <span class="math inline">\(\int_{a}^{b} f(x) dx\)</span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>C√≥digo y salidas</strong></span>: podremos no solo mostrar el paso final sino el c√≥digo que has ido realizando (en <code>R</code>, <code>Python</code>, <code>C++</code>, <code>Julia</code>, ‚Ä¶), con <span class="hl-purple"><strong>cajitas de c√≥digo llamadas CHUNKS</strong></span>.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Im√°genes, <span class="hl-yellow"><strong>gr√°ficas</strong></span>, tablas, estilos (css, js), etc.</li>
</ul>
</div>
</section>
<section id="comunicar-rmd-y-quarto-3" class="slide level2">
<h2>Comunicar: rmd y Quarto</h2>
<p>La principal ventaja de realizar este tipo de material en Quarto/Rmarkdown es que, al hacerlo desde <code>RStudio</code>, puedes generar un <span class="hl-yellow"><strong>informe o una presentaci√≥n sin salirte del entorno de programaci√≥n</strong></span> en el que est√°s trabajando</p>
<p>De esta forma podr√°s analizar los datos, resumirlos y a la vez comunicarlos con la misma herramienta.</p>
<div class="fragment">
<p>Recientemente el equipo de <code>RStudio</code> desarroll√≥ <span class="hl-yellow"><strong>Quarto</strong></span>, una versi√≥n mejorada de Rmarkdown (archivos <code>.qmd</code>), con un formato un poco m√°s est√©tico y simple. Tienes toda la documentaci√≥n y ejemplos en <a href="https://quarto.org/"><strong>https://quarto.org/</strong></a></p>
</div>
</section>
<section id="usos-de-quarto" class="slide level2">
<h2>Usos de Quarto</h2>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">Webs</a></li><li><a href="#tabset-7-2">Libros</a></li><li><a href="#tabset-7-3">Blogs</a></li><li><a href="#tabset-7-4">Presentaciones</a></li><li><a href="#tabset-7-5">Revistas</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<p><img data-src="./img/website.png" height="350"></p>
</div>
<div id="tabset-7-2">
<p><img data-src="./img/book.png" height="350"></p>
</div>
<div id="tabset-7-3">
<p><img data-src="./img/blog.png" height="350"></p>
</div>
<div id="tabset-7-4">
<p><img data-src="./img/presentation.png" height="350"></p>
</div>
<div id="tabset-7-5">
<p><img data-src="https://user-images.githubusercontent.com/163582/42351114-e5deaa1c-8078-11e8-90de-2aff57bba255.png" height="350"></p>
</div>
</div>
</div>
<p>Im√°genes obtenidas de <a href="https://ivelasq.quarto.pub/intro-to-quarto/#/working-with-the-rstudio-visual-editor" class="uri">https://ivelasq.quarto.pub/intro-to-quarto/#/working-with-the-rstudio-visual-editor</a></p>
</section>
<section id="nuestro-primer-informe" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:55%;">
<p><img data-src="img/quarto-create.png"></p>
</div><div class="column" style="width:45%;">
<p>Vamos a crear el <span class="hl-yellow"><strong>primer fichero rmarkdown con Quarto</strong></span> con extensi√≥n <code>.qmd</code>. Para ello solo necesitaremos hacer click en</p>
<p><code>File &lt;&lt; New File &lt;&lt; Quarto Document</code></p>
</div>
</div>
</section>
<section id="nuestro-primer-informe-1" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/quarto-format.png"></p>
</div><div class="column" style="width:55%;">
<p>Tras hacerlo nos aparecer√°n varias <span class="hl-yellow"><strong>opciones de formatos de salida</strong></span>:</p>
<ul>
<li>archivo <code>.pdf</code></li>
<li>archivo <code>.html</code> (<span class="hl-yellow"><strong>recomendable</strong></span>): documento din√°mico, permite la interacci√≥n con el usuario, como una ¬´p√°gina web¬ª.</li>
<li>archivo <code>.doc</code> (nada recomendable)</li>
</ul>
</div>
</div>
<div class="fragment">
<p>De momento dejaremos marcado el <span class="hl-yellow"><strong>formato HTML que viene por defecto</strong></span>, y escribiremos el <span class="hl-yellow"><strong>t√≠tulo</strong></span> de nuestro documento. Tras ello tendremos nuestro <span class="hl-yellow"><strong>archivo .qmd</strong></span> (ya no es un script .R como los que hemos abierto hasta ahora).</p>
</div>
</section>
<section id="nuestro-primer-informe-2" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/quarto-example.png"></p>
</div><div class="column" style="width:40%;">
<p>Deber√≠as tener algo similar a la captura de la imagen con <span class="hl-yellow"><strong>dos modos de edici√≥n</strong></span>: <code>Source</code> (con c√≥digo, la opci√≥n recomendada hasta que lo domines) y <code>Visual</code> (m√°s parecido a un blog)</p>
</div>
</div>
<p>Para <span class="hl-yellow"><strong>ejecutar TODO el documento</strong></span> debes clickar <code>Render on Save</code> y darle a guardar.</p>
</section>
<section id="salida-de-quarto" class="slide level2">
<h2>Salida de Quarto</h2>

<img data-src="img/quarto-prueba-html.png" class="r-stretch"><p>Deber√≠as haber obtenido una <span class="hl-yellow"><strong>salida en html similar a esta</strong></span> (y se te ha generado en tu ordenador un <span class="hl-yellow"><strong>archivo html</strong></span>)</p>
</section>
<section id="editor-source-vs-visual" class="slide level2">
<h2>Editor: source vs visual</h2>
<p>Como se indicaba, tienes dos formas de trabajar: con c√≥digo puro y algo parecido a un Notion (blog)</p>

<img data-src="./img/rstudio-source-visual.png" class="r-stretch"><p>Imagen obtenida de <a href="https://ivelasq.quarto.pub/intro-to-quarto/#/working-with-the-rstudio-visual-editor" class="uri">https://ivelasq.quarto.pub/intro-to-quarto/#/working-with-the-rstudio-visual-editor</a></p>
</section>
<section id="nuestro-primer-informe-3" class="slide level2">
<h2>Nuestro primer informe</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-example.png"></p>
</div><div class="column" style="width:50%;">
<p>Un fichero <code>.qmd</code> se <span class="hl-yellow"><strong>divide b√°sicamente en tres partes</strong></span>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Cabecera</strong></span>: la parte que tienes al inicio entre <code>---</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Texto</strong></span>: que podremos formatear y mejorar con negritas (escrito como <strong>negritas</strong>, con doble ast√©risco al inicio y final), cursivas (<em>cursivas</em>, con barra baja al inicio y final) o destacar nombres de funciones o variables de R. Puedes a√±adir ecuaciones como <span class="math inline">\(x^2\)</span> (he escrito <code>$x^2$</code>, entre d√≥lares).</p></li>
<li><p><span class="hl-yellow"><strong>C√≥digo R</strong></span></p></li>
</ul>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera est√°n en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el t√≠tulo/subt√≠tulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes alg√∫n archivo de estilos</li>
<li><code>toc</code>: si quieres √≠ndice o no</li>
<li><code>toc-location</code>: posici√≥n del √≠ndice</li>
<li><code>toc-title</code>: t√≠tulo del √≠ndice</li>
</ul></li>
<li><code>editor</code>: si est√°s en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb449"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb449-1" class="hljs-ln-code"><a href="#cb449-1"></a><span class="pp">---</span></span>
<span id="cb449-2" class="hljs-ln-code"><a href="#cb449-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb449-3" class="hljs-ln-code"><a href="#cb449-3"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb449-4" class="hljs-ln-code"><a href="#cb449-4"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb449-5" class="hljs-ln-code"><a href="#cb449-5"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb449-6" class="hljs-ln-code"><a href="#cb449-6"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera est√°n en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el t√≠tulo/subt√≠tulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes alg√∫n archivo de estilos</li>
<li><code>toc</code>: si quieres √≠ndice o no</li>
<li><code>toc-location</code>: posici√≥n del √≠ndice</li>
<li><code>toc-title</code>: t√≠tulo del √≠ndice</li>
</ul></li>
<li><code>editor</code>: si est√°s en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb450"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb450-1" class="hljs-ln-code"><a href="#cb450-1"></a><span class="pp">---</span></span>
<span id="cb450-2" class="hljs-ln-code"><a href="#cb450-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb450-3" class="hljs-ln-code"><a href="#cb450-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"javier √°lvarez li√©bana"</span></span>
<span id="cb450-4" class="hljs-ln-code"><a href="#cb450-4"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb450-5" class="hljs-ln-code"><a href="#cb450-5"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb450-6" class="hljs-ln-code"><a href="#cb450-6"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb450-7" class="hljs-ln-code"><a href="#cb450-7"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera est√°n en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el t√≠tulo/subt√≠tulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes alg√∫n archivo de estilos</li>
<li><code>toc</code>: si quieres √≠ndice o no</li>
<li><code>toc-location</code>: posici√≥n del √≠ndice</li>
<li><code>toc-title</code>: t√≠tulo del √≠ndice</li>
</ul></li>
<li><code>editor</code>: si est√°s en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb451"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb451-1" class="hljs-ln-code"><a href="#cb451-1"></a><span class="pp">---</span></span>
<span id="cb451-2" class="hljs-ln-code"><a href="#cb451-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb451-3" class="hljs-ln-code"><a href="#cb451-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"javier √°lvarez li√©bana"</span></span>
<span id="cb451-4" class="hljs-ln-code"><a href="#cb451-4"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb451-5" class="hljs-ln-code"><a href="#cb451-5"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb451-6" class="hljs-ln-code"><a href="#cb451-6"></a><span class="at">    </span><span class="fu">style</span><span class="kw">:</span><span class="at"> style.css</span></span>
<span id="cb451-7" class="hljs-ln-code"><a href="#cb451-7"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb451-8" class="hljs-ln-code"><a href="#cb451-8"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb451-9" class="hljs-ln-code"><a href="#cb451-9"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera est√°n en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el t√≠tulo/subt√≠tulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes alg√∫n archivo de estilos</li>
<li><code>toc</code>: si quieres √≠ndice o no</li>
<li><code>toc-location</code>: posici√≥n del √≠ndice</li>
<li><code>toc-title</code>: t√≠tulo del √≠ndice</li>
</ul></li>
<li><code>editor</code>: si est√°s en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb452"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb452-1" class="hljs-ln-code"><a href="#cb452-1"></a><span class="pp">---</span></span>
<span id="cb452-2" class="hljs-ln-code"><a href="#cb452-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb452-3" class="hljs-ln-code"><a href="#cb452-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"javier √°lvarez li√©bana"</span></span>
<span id="cb452-4" class="hljs-ln-code"><a href="#cb452-4"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb452-5" class="hljs-ln-code"><a href="#cb452-5"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb452-6" class="hljs-ln-code"><a href="#cb452-6"></a><span class="at">    </span><span class="fu">style</span><span class="kw">:</span><span class="at"> style.css</span></span>
<span id="cb452-7" class="hljs-ln-code"><a href="#cb452-7"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb452-8" class="hljs-ln-code"><a href="#cb452-8"></a><span class="at">    </span><span class="fu">toc-location</span><span class="kw">:</span><span class="at"> left</span></span>
<span id="cb452-9" class="hljs-ln-code"><a href="#cb452-9"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb452-10" class="hljs-ln-code"><a href="#cb452-10"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="cabecera-de-un-qmd-4" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Cabecera de un qmd</h2>
<p>La <span class="hl-yellow"><strong>cabecera est√°n en formato YAML</strong></span> y contiene los <span class="hl-yellow"><strong>metadatos</strong></span> del documento</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><code>title</code> y <code>subtitle</code>: el t√≠tulo/subt√≠tulo del documento</li>
<li><code>author</code>: autor del mismo</li>
<li><code>format</code>: formato de salida (podremos personalizar)
<ul>
<li><code>theme</code>: si tienes alg√∫n archivo de estilos</li>
<li><code>toc</code>: si quieres √≠ndice o no</li>
<li><code>toc-location</code>: posici√≥n del √≠ndice</li>
<li><code>toc-title</code>: t√≠tulo del √≠ndice</li>
</ul></li>
<li><code>editor</code>: si est√°s en modo visual o source.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="sourceCode" id="cb453"><pre class="sourceCode numberSource yaml number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode yaml hljs"><span id="cb453-1" class="hljs-ln-code"><a href="#cb453-1"></a><span class="pp">---</span></span>
<span id="cb453-2" class="hljs-ln-code"><a href="#cb453-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"prueba"</span></span>
<span id="cb453-3" class="hljs-ln-code"><a href="#cb453-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"javier √°lvarez li√©bana"</span></span>
<span id="cb453-4" class="hljs-ln-code"><a href="#cb453-4"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb453-5" class="hljs-ln-code"><a href="#cb453-5"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb453-6" class="hljs-ln-code"><a href="#cb453-6"></a><span class="at">    </span><span class="fu">style</span><span class="kw">:</span><span class="at"> style.css</span></span>
<span id="cb453-7" class="hljs-ln-code"><a href="#cb453-7"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb453-8" class="hljs-ln-code"><a href="#cb453-8"></a><span class="at">    </span><span class="fu">toc-location</span><span class="kw">:</span><span class="at"> left</span></span>
<span id="cb453-9" class="hljs-ln-code"><a href="#cb453-9"></a><span class="at">    </span><span class="fu">toc-title</span><span class="kw">:</span><span class="at"> √çndice</span></span>
<span id="cb453-10" class="hljs-ln-code"><a href="#cb453-10"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb453-11" class="hljs-ln-code"><a href="#cb453-11"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="texto-de-un-qmd" class="slide level2">
<h2>Texto de un qmd</h2>
<p>Respecto a la escritura solo hay una <span class="hl-yellow"><strong>cosa importante</strong></span>: salvo que indiquemos lo contrario, <span class="hl-yellow"><strong>TODO lo que vamos a escribir es texto (normal)</strong></span>. No c√≥digo R.</p>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/quarto-prueba-qmd2.png" width="350"> <img data-src="img/quarto-prueba-html2.png" width="320"></p>
</div><div class="column" style="width:65%;">
<p>Vamos a empezar escribiendo una secci√≥n al inicio (<code># Intro</code> y detr√°s por ej. la frase</p>
<blockquote>
<p>Este material ha sido dise√±ado por el profesor Javier √Ålvarez Li√©bana, docente en la Universidad Complutense de Madrid</p>
</blockquote>
<p>Adem√°s al <code>Running Code</code> le a√±adiremos una almohadilla <code>#</code>: las <span class="hl-yellow"><strong>almohadillas FUERA DE CHUNKS</strong></span> nos servir√°n para crear <span class="hl-yellow"><strong>ep√≠grafes (secciones)</strong></span> en el documento</p>
</div>
</div>
</section>
<section id="√≠ndice-de-un-qmd" class="slide level2">
<h2>√çndice de un qmd</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/quarto-indice-qmd-2.png" width="370"> <img data-src="img/quarto-indice-html2.png" width="370"></p>
</div><div class="column" style="width:60%;">
<p>Para que el <span class="hl-yellow"><strong>√≠ndice capture dichas secciones</strong></span> modificaremos la cabecera del archivo como se observa en la imagen (puedes cambiar la localizaci√≥n del √≠ndice y el t√≠tulo si quieres para probar).</p>
</div>
</div>
</section>
<section id="texto-en-un-qmd" class="slide level2">
<h2>Texto en un qmd</h2>
<p>Vamos a <span class="hl-yellow"><strong>personalizar un poco el texto</strong></span> haciendo lo siguiente:</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-texto-mejorado-qmd.png" width="370"> <img data-src="img/quarto-texto-mejorado-html.png" width="370"></p>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Vamos a a√±adir <span class="hl-yellow"><strong>negrita al nombre</strong></span> (poniendo ** al inicio y al final).</p></li>
<li><p>Vamos a√±adir <span class="hl-yellow"><strong>cursiva</strong></span> a la palabra material (poniendo _ al inicio y al final).</p></li>
<li><p>Vamos a√±adir un <span class="hl-yellow"><strong>enlace</strong></span> <a href="https://www.ucm.es" class="uri">https://www.ucm.es</a>, asoci√°ndolo al nombre de la Universidad. Para ello el t√≠tulo lo ponemos entre corchetes y justo detr√°s el enlace entre par√©ntesis <code>[¬´Universidad Complutense de Madrid¬ª](https://www.ucm.es)</code></p></li>
</ul>
</div>
</div>
</section>
<section id="c√≥digo-en-un-qmd" class="slide level2">
<h2>C√≥digo en un qmd</h2>
<p>Para <span class="hl-yellow"><strong>a√±adir c√≥digo R</strong></span> debemos crear nuestras <span class="hl-yellow"><strong>cajas de c√≥digo llamadas chunks</strong></span>: altos en el camino en nuestro texto markdown donde podremos incluir c√≥digo de casi cualquier lenguaje (y sus salidas).</p>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-chunk-qmd.png" width="470"></p>
</div><div class="column" style="width:50%;">
<p>Para incluir uno deber√° de ir <span class="hl-yellow"><strong>encabezado</strong></span> de la siguiente forma tienes un atajo <code>Command + Option + I</code> (Mac) o <code>Ctrl + Shift + I</code> (Windows)</p>
</div>
</div>
</section>
<section id="c√≥digo-en-un-qmd-1" class="slide level2">
<h2>C√≥digo en un qmd</h2>
<p>Dentro de dicha cajita (que tiene ahora otro color en el documento) <span class="hl-yellow"><strong>escribiremos c√≥digo R</strong></span> como lo ven√≠amos haciendo hasta ahora en los scripts.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-chunk-1-qmd.png" width="410"> <img data-src="img/quarto-chunk-1-html.png" width="410"></p>
</div><div class="column" style="width:50%;">
<p>Vamos por ejemplo a definir dos variables y su suma de la siguiente manera, escribiendo dicho c√≥digo en nuestro <code>.qmd</code> (dentro de ese chunk)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb454"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1"></a><span class="co"># C√≥digo R</span></span>
<span id="cb454-2"><a href="#cb454-2"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb454-3"><a href="#cb454-3"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb454-4"><a href="#cb454-4"></a>x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="etiquetando-chunks" class="slide level2">
<h2>Etiquetando chunks</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-tag-chunks-qmd.png" width="400"> <img data-src="img/quarto-tag-chunks-html.png" width="400"></p>
</div><div class="column" style="width:50%;">
<p>Los chunks pueden tener un <span class="hl-yellow"><strong>nombre o etiqueta</strong></span>, de forma que podamos referenciarlos de nuevo para no repetir c√≥digo.</p>
</div>
</div>
</section>
<section id="ejecutando-chunks" class="slide level2">
<h2>Ejecutando chunks</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/quarto-inline-qmd.png" width="400"> <img data-src="img/quarto-inline-html.png" width="380"></p>
</div><div class="column" style="width:60%;">
<p>En cada chunk aparecen <span class="hl-yellow"><strong>dos botones</strong></span>:</p>
<ul>
<li><p>bot√≥n de <span class="hl-yellow"><strong>play</strong></span>: activa la <span class="hl-yellow"><strong>ejecuci√≥n y salida de ese chunk particular</strong></span> (lo puedes visualizar dentro de tu propio <code>RStudio</code>)</p></li>
<li><p>bot√≥n de <span class="hl-yellow"><strong>rebobinar</strong></span>: activa la <span class="hl-yellow"><strong>ejecuci√≥n y salida de todos los chunk hasta ese</strong></span> (sin llegar a √©l)</p></li>
</ul>
<p>&nbsp;</p>
<p>Adem√°s podemos <span class="hl-yellow"><strong>incluir c√≥digo R dentro de la l√≠nea de texto</strong></span> (en lugar de mostrar el texto x ejecuta el c√≥digo R mostrando la variable).</p>
</div>
</div>
</section>
<section id="personalizaci√≥n-de-chunks" class="slide level2">
<h2>Personalizaci√≥n de chunks</h2>
<p>Los <span class="hl-yellow"><strong>chunks podemos personalizarlos</strong></span> con opciones al inicio del chunk precedido de <code>#|</code>:</p>
<ul>
<li><p><code>#| echo: false</code>: <span class="hl-green"><strong>ejecuta c√≥digo</strong></span> y se <span class="hl-green"><strong>muestra resultado</strong></span> pero <span class="hl-red"><strong>no visualiza c√≥digo</strong></span> en la salida.</p></li>
<li><p><code>#| include: false</code>: <span class="hl-green"><strong>ejecuta c√≥digo</strong></span> pero <span class="hl-red"><strong>no muestra resultado</strong></span> y <span class="hl-red"><strong>no visualiza c√≥digo</strong></span> en la salida.</p></li>
<li><p><code>#| eval: false</code>: <span class="hl-red"><strong>no ejecuta c√≥digo</strong></span>, <span class="hl-red"><strong>no muestra resultado</strong></span> pero <span class="hl-green"><strong>s√≠ visualiza c√≥digo</strong></span> en la salida.</p></li>
<li><p><code>#| message: false</code>: <span class="hl-green"><strong>ejecuta c√≥digo</strong></span> pero <span class="hl-red"><strong>no muestra mensajes de salida</strong></span>.</p></li>
<li><p><code>#| warning: false</code>: <span class="hl-green"><strong>ejecuta c√≥digo</strong></span> pero <span class="hl-red"><strong>no muestra mensajes de warning</strong></span>.</p></li>
<li><p><code>#| error: true</code>: <span class="hl-green"><strong>ejecuta c√≥digo</strong></span> y <span class="hl-green"><strong>permite que haya errores</strong></span> mostrando el mensaje de error en la salida.</p></li>
</ul>

<img data-src="img/quarto-options-chunk.png" width="380" class="r-stretch"><p>Estas opciones podemos aplicarlas chunk a chunk o fijar los par√°metros de forma global con <code>knitr::opts_chunk$set()</code> al inicio del documento (dentro de un chunk).</p>
</section>
<section id="personalizando-chunks" class="slide level2">
<h2>Personalizando chunks</h2>
<p>Si queremos que aplique la <strong>opci√≥n a todos los chunks por defecto</strong> debemos incluirlo al final de la cabecera, como <span class="hl-yellow"><strong>opciones de ejecuci√≥n</strong></span></p>
<div class="sourceCode" id="cb456"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb456-1"><a href="#cb456-1"></a><span class="pp">---</span></span>
<span id="cb456-2"><a href="#cb456-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"¬°Hola!"</span></span>
<span id="cb456-3"><a href="#cb456-3"></a><span class="fu">format</span><span class="kw">:</span><span class="at"> html</span></span>
<span id="cb456-4"><a href="#cb456-4"></a><span class="fu">editor</span><span class="kw">:</span><span class="at"> visual</span></span>
<span id="cb456-5"><a href="#cb456-5"></a><span class="fu">execute</span><span class="kw">:</span></span>
<span id="cb456-6"><a href="#cb456-6"></a><span class="at">  </span><span class="fu">echo</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb456-7"><a href="#cb456-7"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="organizando-qmd" class="slide level2">
<h2>Organizando qmd</h2>
<p>Adem√°s de texto y c√≥digo podemos introducir lo siguiente:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Ecuaciones</strong></span>: puedes a√±adir adem√°s ecuaciones como <span class="math inline">\(x^2\)</span> (he escrito <code>$x^2$</code>, la ecuaci√≥n entre d√≥lares).</p></li>
<li><p><span class="hl-yellow"><strong>Listas</strong></span>: puedes itemizar elementos poniendo <code>*</code></p></li>
</ul>
<p><code>* Paso 1: ...</code></p>
<p><code>* Paso 2: ...</code></p>
<ul>
<li><span class="hl-yellow"><strong>Cross-references</strong></span>: puedes etiquetar partes del documento (la etiqueta se construye con <code>{#nombre-seccion}</code>) y llamarlas luego con <code>[Secci√≥n](@nombre-seccion)</code></li>
</ul>
</section>
<section id="gr√°ficasim√°genes-en-qmd" class="slide level2">
<h2>Gr√°ficas/im√°genes en qmd</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-fig-qmd.png" width="340"> <img data-src="img/quarto-fig-html.png" width="390"></p>
</div><div class="column" style="width:50%;">
<p>Por √∫ltimo, tambi√©n podemos <span class="hl-yellow"><strong>a√±adir pies de gr√°ficas o im√°genes</strong></span> a√±adiendo <code>#| fig-cap: "..."</code></p>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:65%;">
<p>F√≠jate que el <span class="hl-yellow"><strong>caption est√° en el margen</strong></span> (por ejemplo). Puedes cambiarlo introduciendo <span class="hl-yellow"><strong>ajustes en la cabecera</strong></span> (todo lo relativo a figuras empieza por <code>fig-</code>, y puedes ver las opciones tabulando). Tienes m√°s informaci√≥n en <strong><a href="https://quarto.org/" class="uri">https://quarto.org/</a></strong></p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/quarto-cabecera-desplegable.png" width="400"></p>
</div>
</div>
</div>
</section>
<section id="a√±adir-estilos" class="slide level2">
<h2>A√±adir estilos</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/quarto-estilos-qmd.png" width="400"> <img data-src="img/quarto-estilos-html.png" width="400"></p>
</div><div class="column" style="width:50%;">
<p>Por √∫ltimo puedes a√±adir un <span class="hl-yellow"><strong>tema personalizado</strong></span> incluyendo un <span class="hl-yellow"><strong>archivo de estilos</strong></span> (archivo en formato <code>.scss</code> o <code>.css</code>). Te he dejado uno en <a href="https://github.com/dadosdelaplace/docencia-R-master-bio-2324/tree/main/material" class="uri">https://github.com/dadosdelaplace/docencia-R-master-bio-2324/tree/main/material</a>.</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>El archivo de estilos debe estar en la misma carpeta que el archivo <code>.qmd</code></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="a√±adir-estilos-1" class="slide level2">
<h2>A√±adir estilos</h2>
<p>Tambi√©n puedes hacerlo de manera sencilla <span class="hl-yellow"><strong>a√±adiendo a los textos un poco de HTML</strong></span>. Por ejemplo, para personalizar el color de un texto va entre corchetes y justo tras el texto, entre llaves, las opciones de estilo</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb457-1"><a href="#cb457-1"></a>Esta palabra es [roja]{style="color:red;"} ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb458"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb458-1"><a href="#cb458-1"></a>... y esta [verde y en negrita]{style="color:green; font-weight: bold;"}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<p>Esta palabra es <span style="color:red;">roja</span> ‚Ä¶</p>
<p>‚Ä¶ y esta <span style="color:green; font-weight: bold;">verde y en negrita</span></p>
</div>
</section>
<section id="revealjs" class="slide level2">
<h2>Revealjs</h2>
<p>Puedes a√±adir algunas ¬´animaciones¬ª usando lo que se conoce como Revealjs (javascript), especifc√°ndolo en la cabecera y usando <span class="hl-yellow"><strong>bloques</strong></span> de dicho lenguaje delimitados por <code>:::</code> al inicio y final, y la palabra de la ¬´herramienta¬ª a usar. Por ejemplo <code>{.incremental}</code> hace una transici√≥n de los elementos.</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb459-1"><a href="#cb459-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb459-2"><a href="#cb459-2"></a><span class="at">  revealjs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode numberSource revealjs number-lines code-with-copy"><code class="sourceCode"><span id="cb460-1"><a href="#cb460-1"></a>::: {.incremental}</span>
<span id="cb460-2"><a href="#cb460-2"></a>- Me</span>
<span id="cb460-3"><a href="#cb460-3"></a>- llamo</span>
<span id="cb460-4"><a href="#cb460-4"></a>- Javi</span>
<span id="cb460-5"><a href="#cb460-5"></a>:::</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>
<ul>
<li class="fragment">Me</li>
<li class="fragment">llamo</li>
<li class="fragment">Javi</li>
</ul>
</div>
</section>
<section id="bloques-de-llamada" class="slide level2">
<h2>Bloques de llamada</h2>
<p>Tambi√©n puedes usar los <span class="hl-yellow"><strong>bloques de llamada</strong></span> que por defecto son <code>note</code>, <code>tip</code>, <code>warning</code>, <code>caution</code> e <code>important</code> (aunque los puedes crear y personalizar). Para ello basta con usar <code>:::{.callout-tipo}</code> y el tipo que quieras</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb461-1"><a href="#cb461-1"></a>:::{.callout-tip}</span>
<span id="cb461-2"><a href="#cb461-2"></a></span>
<span id="cb461-3"><a href="#cb461-3"></a>Note that there are five types of callouts, including: </span>
<span id="cb461-4"><a href="#cb461-4"></a>`note`, `tip`, `warning`, `caution`, and `important`.</span>
<span id="cb461-5"><a href="#cb461-5"></a></span>
<span id="cb461-6"><a href="#cb461-6"></a>:::</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>Recuerda que los 5 tipos son <code>note</code>, <code>tip</code>, <code>warning</code>, <code>caution</code> e <code>important</code>.</p>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Peligro</strong></p>
</div>
<div class="callout-content">
<p>√ösalos con cabeza, a veces mucho recursos est√©tico puede marear.</p>
</div>
</div>
</div>
</div>
</section>
<section id="m√∫ltiples-columnas" class="slide level2">
<h2>M√∫ltiples columnas</h2>
<p>Con <code>:::: columns</code> podemos definir una disposici√≥n de <span class="hl-yellow"><strong>m√∫ltiples columnas</strong></span> donde cada una viene definida por <code>::: {.column width="65%"} cosa :::</code>, indicando al lado del porcentaje cuanto quieres que ocupe cada columna (¬°cuidado, no dejar espacios!)</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb462-1"><a href="#cb462-1"></a>:::: columns</span>
<span id="cb462-2"><a href="#cb462-2"></a>::: {.column width="65%"}</span>
<span id="cb462-3"><a href="#cb462-3"></a>As√≠ se define un vector</span>
<span id="cb462-4"><a href="#cb462-4"></a>:::</span>
<span id="cb462-5"><a href="#cb462-5"></a>::: {.column width="35%"}</span>
<span id="cb462-6"><a href="#cb462-6"></a>x <span class="er">&lt;</span>- c(1, 2, 3)</span>
<span id="cb462-7"><a href="#cb462-7"></a>x</span>
<span id="cb462-8"><a href="#cb462-8"></a>:::</span>
<span id="cb462-9"><a href="#cb462-9"></a>::::</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>&nbsp;</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:65%;">
<p>As√≠ se define un vector</p>
</div><div class="column" style="width:35%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb463"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb463-1"><a href="#cb463-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb463-2"><a href="#cb463-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="pesta√±as" class="slide level2">
<h2>Pesta√±as</h2>
<p>Con <code>::: panel-tabset :::</code> podemos tambi√©n definir un panel de pesta√±as</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb465-1"><a href="#cb465-1"></a>### Ejercicios</span>
<span id="cb465-2"><a href="#cb465-2"></a></span>
<span id="cb465-3"><a href="#cb465-3"></a>Resuelve los siguientes ejercicios</span>
<span id="cb465-4"><a href="#cb465-4"></a>::: panel-tabset</span>
<span id="cb465-5"><a href="#cb465-5"></a></span>
<span id="cb465-6"><a href="#cb465-6"></a>#### Ejercicio 1</span>
<span id="cb465-7"><a href="#cb465-7"></a></span>
<span id="cb465-8"><a href="#cb465-8"></a>Define un vector x con los primeros 3 n√∫meros naturales</span>
<span id="cb465-9"><a href="#cb465-9"></a></span>
<span id="cb465-10"><a href="#cb465-10"></a>#### Ejercicio 2</span>
<span id="cb465-11"><a href="#cb465-11"></a></span>
<span id="cb465-12"><a href="#cb465-12"></a>Haz la suma del vector anterior</span>
<span id="cb465-13"><a href="#cb465-13"></a>:::</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<h3 id="ejercicios">Ejercicios</h3>
<p>Resuelve los siguientes ejercicios</p>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">Ejercicio 1</a></li><li><a href="#tabset-8-2">Ejercicio 2</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<p>Define un vector x con los primeros 3 n√∫meros naturales</p>
</div>
<div id="tabset-8-2">
<p>Haz la suma del vector anterior</p>
</div>
</div>
</div>
</div>
</section>
<section id="c√≥digo-ajeno-a-r" class="slide level2">
<h2>C√≥digo ajeno a R</h2>
<p>Adem√°s <code>{reticulate}</code> nos permite crear chunks de <code>python</code> dentro de un Quarto en <code>R</code> (ver <a href="https://quarto.org/docs/computations/python.html" class="uri">https://quarto.org/docs/computations/python.html</a> para crear jupyter notebooks directamente desde Quarto)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb466"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1"></a><span class="co"># install.packages("reticulate")</span></span>
<span id="cb466-2"><a href="#cb466-2"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb466-3"><a href="#cb466-3"></a></span>
<span id="cb466-4"><a href="#cb466-4"></a><span class="fu">install_python</span>(<span class="st">"3.9.12"</span>) <span class="co"># Instalar python en PC sino lo tienes</span></span>
<span id="cb466-5"><a href="#cb466-5"></a></span>
<span id="cb466-6"><a href="#cb466-6"></a><span class="co"># Instalar paquetes de Python</span></span>
<span id="cb466-7"><a href="#cb466-7"></a>reticulate<span class="sc">::</span><span class="fu">py_install</span>(<span class="st">"numpy"</span>)</span>
<span id="cb466-8"><a href="#cb466-8"></a>reticulate<span class="sc">::</span><span class="fu">py_install</span>(<span class="st">"matplotlib"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb467"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb467-1"><a href="#cb467-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb467-2"><a href="#cb467-2"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb467-3"><a href="#cb467-3"></a>r <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">2</span>, <span class="fl">0.05</span>)</span>
<span id="cb467-4"><a href="#cb467-4"></a>theta <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> r</span>
<span id="cb467-5"><a href="#cb467-5"></a>fig, ax <span class="op">=</span> plt.subplots(</span>
<span id="cb467-6"><a href="#cb467-6"></a>  subplot_kw <span class="op">=</span> {<span class="st">'projection'</span>: <span class="st">'polar'</span>} </span>
<span id="cb467-7"><a href="#cb467-7"></a>)</span>
<span id="cb467-8"><a href="#cb467-8"></a>ax.plot(theta, r)</span>
<span id="cb467-9"><a href="#cb467-9"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:40%;">

</div>
</div>
</section>
<section id="caso-practico-4" class="slide level2">
<h2>üê£ Caso pr√°ctico: simulacro</h2>
<ol type="1">
<li>Crea un documento <code>.qmd</code> en el que al menos la cabecera contenga</li>
</ol>
<ul>
<li>T√≠tulo, autor y formato (html)</li>
<li>√çndice con t√≠tulo y situado a la derecha</li>
</ul>
<ol start="2" type="1">
<li><p>Tras ello vuelve a <a href="#/tu-turno-3-3">ejercicios del tema 3</a> y estructura un documento donde cada ejercicio sea una subsecci√≥n. En cada subsecci√≥n pon el enunciado.</p></li>
<li><p>Debajo de cada enunciado pon el chunk con el c√≥digo correspondiente, as√≠ como comentarios de texto de la salida (con negritas y cursivas)</p></li>
<li><p>A√±ade un √∫ltimo chunk en el que, dado un vector <code>x &lt;- 1:5</code>, calcules su media, e incluye con <code>$ $</code> la f√≥rmula de la media aritm√©tica e incrusta adem√°s una foto de la f√≥rmula que encuentres por google.</p></li>
<li><p>Renderiza el documento para obtener el html</p></li>
</ol>
</section>
<section id="ejemplo-de-entrega" class="slide level2">
<h2>Ejemplo de entrega</h2>
<p>Vamos a realizar un peque√±o simulacro antes de la entrega usando el dataset <code>starwars</code> del paquete <code>{dplyr}</code></p>

<img data-src="https://sm.ign.com/t/ign_latam/screenshot/default/baby-yoda-nombre_3x56.1280.jpg" class="r-stretch"></section>
<section id="ejemplo-de-entrega-1" class="slide level2">
<h2>Ejemplo de entrega</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb468"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb468-1"><a href="#cb468-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb468-2"><a href="#cb468-2"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu‚Ä¶
 3 R2-D2        96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
 5 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 6 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 7 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu‚Ä¶
 9 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
10 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
# ‚Ñπ 77 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<p>En √©l tenemos <strong>diferentes variables de los personajes de Star Wars</strong>, con caracter√≠sticas de su pelo, piel, altura, nombre, etc.</p>
</section>
<section id="ejemplo-de-entrega-2" class="slide level2">
<h2>Ejemplo de entrega</h2>
<blockquote>
<p>Crea un documento <code>.qmd</code> con nombre, t√≠tulo, formato e √≠ndice. Cada ejercicio posterior ser√° una subsecci√≥n del documento. Ejecuta los chunks que consideres y comenta las salidas para responder a cada pregunta</p>
</blockquote>
<div class="fragment">
<blockquote>
<p>Ejercicio 1. ¬øCu√°ntos personajes hay guardados en la base de datos? ¬øCu√°ntas caracter√≠sticas se han medido de cada uno?</p>
</blockquote>
</div>
<div class="fragment">
<blockquote>
<p>Ejercicio 2. Extrae en dos variables distintas <code>nombres</code> y <code>edades</code> las variables correspondientes de la tabla. ¬øDe qu√© tipo es la variable nombre? ¬øY la variable birth_year?</p>
</blockquote>
</div>
<div class="fragment">
<blockquote>
<p>Ejercicio 3. Obt√©n el vector de nombres de los personajes ordenados de mayores a j√≥venes.</p>
</blockquote>
</div>
</section>
<section id="ejemplo-de-entrega-3" class="slide level2">
<h2>Ejemplo de entrega</h2>
<blockquote>
<p>Ejercicio 4. Busca ayuda de la funci√≥n unique(). √ösala para saber que modalidades tiene la variable cualitativa correspondiente al color de ojos. ¬øCu√°ntos distintos hay?</p>
</blockquote>
<div class="fragment">
<blockquote>
<p>Ejercicio 5. ¬øExiste ALG√öN valor ausente en la variable de color ojos?</p>
</blockquote>
</div>
<div class="fragment">
<blockquote>
<p>Ejercicio 6. Calcula la media y desviaci√≥n t√≠pica de las variables de estatura y peso (cuidado con los ausentes). Define un nuevo tibble con esas dos variables e incorpora una tercera variable que se llame ‚ÄúIMC‚Äù que calcule el √≠ndice de masa corporal. Incorpora con <code>$ $</code> la f√≥rmula usada para el IMC.</p>
</blockquote>
</div>
</section>
<section id="entrega-i-5" class="slide level2">
<h2>Entrega I (5%)</h2>
<p>El d√≠a de la entrega tendr√°s subido una <span class="hl-yellow"><strong>plantilla de entrega</strong></span> en formato <code>.qmd</code> en el campus.</p>
<ul>
<li><p><strong>Descomprime la carpeta</strong> (¬°importante! si no descomprimes, aunque puedas editar el <code>.qmd</code>, no podr√°s generar el <code>.html</code>)</p></li>
<li><p><strong>Edita la cabecera</strong> con tu nombre y DNI</p></li>
<li><p>Deber√°s <strong>rellenar cada chunk</strong> con el c√≥digo que consideres (en algunos te he dejado pistas) y <strong>cambiar</strong> de <code>#| eval: false</code> a <code>#| eval: true</code> (si los quitas directamente, por defecto ya es true)</p></li>
<li><p>Deber√°s de <strong>comentar</strong> con texto normal lo que consideres para responder a las preguntas.</p></li>
<li><p>Ser√° <span class="hl-yellow"><strong>OBLIGATORIO</strong></span> subir el archivo <code>.html</code> generado (solo se corregir√° dicho archivo) as√≠ que ve renderizando seg√∫n rellenas el documento, no lo dejes para el final.</p></li>
</ul>
</section></section>
<section>
<section id="clase-6" class="title-slide slide level1 center">
<h1>Clase 6: <span class="flow">estructuras control</span></h1>
<p><span style="color:#444442;"><strong>Estructuras condicionales y bucles</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-6-1">üíª Ejercicios resueltos: estructuras condicionales</a></p></li>
<li><p><a href="#/tu-turno-6-2">üíª Ejercicios resueltos: bucles</a></p></li>
<li><p><a href="#/caso-practico-6">üê£ Workbook/caso pr√°ctico</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="estructuras-de-control" class="slide level2">
<h2>Estructuras de control</h2>
<p>Una <span class="hl-yellow"><strong>estructura de control</strong></span> se compone de una serie de comandos orientados a <span class="hl-yellow"><strong>decidir el camino</strong></span> que tu c√≥digo debe recorrer</p>
<ul>
<li><p>Si se cumple la condici√≥n A, ¬øqu√© sucede?</p></li>
<li><p>¬øY si sucede B?</p></li>
<li><p>¬øC√≥mo puedo repetir una misma expresi√≥n (dependiendo de una variable)?</p></li>
</ul>
<div class="fragment">
<p>Si has programado antes, quiz√°s te sea familiar las conocidas como <span class="hl-yellow"><strong>estructuras condicionales</strong></span> tales como <code>if (blabla) {...} else {...}</code> o <span class="hl-yellow"><strong>bucles</strong></span> <code>for/while</code> (a evitar siempre que podamos).</p>
</div>
</section>
<section id="estructura-if" class="slide level2">
<h2>Estructura If</h2>
<p>Una de las estructuras de control m√°s famosas son las conocidas como <span class="hl-yellow"><strong>estructuras condicionales</strong></span> <code>if</code>.</p>
<blockquote>
<p>SI (IF) un conjunto de condiciones se cumple (TRUE), entonces ejecuta lo que haya dentro de las llaves</p>
</blockquote>
<p>Por ejemplo, la estructura <code>if (x == 1) { c√≥digo A }</code> lo que har√° ser√° <span class="hl-yellow"><strong>ejecutar el c√≥digo A entre llaves</strong></span> pero <span class="hl-purple"><strong>SOLO SI</strong></span> la <span class="hl-purple"><strong>condici√≥n entre par√©ntesis es cierta</strong></span> (solo si <code>x</code> es 1). En cualquier otro caso, no har√° nada.</p>
<div class="fragment">
<p>Por ejemplo, definamos un vector de edades de 8 personas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb470"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb470-1"><a href="#cb470-1"></a>edad <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">17</span>, <span class="dv">24</span>, <span class="dv">56</span>, <span class="dv">31</span>, <span class="dv">20</span>, <span class="dv">87</span>, <span class="dv">73</span>)</span>
<span id="cb470-2"><a href="#cb470-2"></a>edad <span class="sc">&lt;</span> <span class="dv">18</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="estructura-if-1" class="slide level2">
<h2>Estructura If</h2>
<p>Nuestra estructura condicional har√° lo siguiente: <span class="hl-yellow"><strong>si existe alg√∫n menor de edad, imprimir√°</strong></span> por pantalla un mensaje.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb472"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb472-1"><a href="#cb472-1"></a><span class="cf">if</span> (<span class="fu">any</span>(edad <span class="sc">&lt;</span> <span class="dv">18</span>)) { </span>
<span id="cb472-2"><a href="#cb472-2"></a>  </span>
<span id="cb472-3"><a href="#cb472-3"></a>  <span class="fu">print</span>(<span class="st">"Existe alguna persona menor de edad"</span>)</span>
<span id="cb472-4"><a href="#cb472-4"></a>  </span>
<span id="cb472-5"><a href="#cb472-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Existe alguna persona menor de edad"</code></pre>
</div>
</div>
</section>
<section id="estructura-if-2" class="slide level2">
<h2>Estructura If</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb474"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb474-1"><a href="#cb474-1"></a><span class="cf">if</span> (<span class="fu">any</span>(edad <span class="sc">&lt;</span> <span class="dv">18</span>)) { </span>
<span id="cb474-2"><a href="#cb474-2"></a>  </span>
<span id="cb474-3"><a href="#cb474-3"></a>  <span class="fu">print</span>(<span class="st">"Existe alguna persona menor de edad"</span>)</span>
<span id="cb474-4"><a href="#cb474-4"></a>  </span>
<span id="cb474-5"><a href="#cb474-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En caso de que las <span class="hl-yellow"><strong>condiciones no sean ciertas</strong></span> dentro de <code>if()</code> (<code>FALSE</code>), no sucede nada</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb475"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb475-1"><a href="#cb475-1"></a><span class="cf">if</span> (<span class="fu">all</span>(edad <span class="sc">&gt;=</span> <span class="dv">18</span>)) { </span>
<span id="cb475-2"><a href="#cb475-2"></a>  </span>
<span id="cb475-3"><a href="#cb475-3"></a>  <span class="fu">print</span>(<span class="st">"Todos son mayores de edad"</span>)</span>
<span id="cb475-4"><a href="#cb475-4"></a>  </span>
<span id="cb475-5"><a href="#cb475-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>No obtenemos ning√∫n mensaje</strong> porque la condici√≥n <code>all(edad &gt;= 18)</code> no es <code>TRUE</code>, as√≠ que no ejecuta nada.</p>
</section>
<section id="estructura-if-else" class="slide level2">
<h2>Estructura If-else</h2>
<p>La estructura <code>if (condicion) { c√≥digo A }</code> puede combinarse con un <code>else { c√≥digo B }</code>: cuando la <span class="hl-yellow"><strong>condici√≥n no est√° verificada</strong></span>, se <span class="hl-yellow"><strong>ejecutar√° el c√≥digo alternativo B</strong></span> dentro de <code>else { }</code>, permiti√©ndonos decidir que sucede cuando se cumple y cuando no.</p>
<div class="fragment">
<p>Por ejemplo, <code>if (x == 1) { c√≥digo A } else { c√≥digo B }</code> ejecutar√° A si <code>x</code> es igual a 1 y B en cualquier otro caso.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb476"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb476-1"><a href="#cb476-1"></a><span class="cf">if</span> (<span class="fu">all</span>(edad <span class="sc">&gt;=</span> <span class="dv">18</span>)) { </span>
<span id="cb476-2"><a href="#cb476-2"></a>  </span>
<span id="cb476-3"><a href="#cb476-3"></a>  <span class="fu">print</span>(<span class="st">"Todos son mayores de edad"</span>)</span>
<span id="cb476-4"><a href="#cb476-4"></a>  </span>
<span id="cb476-5"><a href="#cb476-5"></a>} <span class="cf">else</span> {</span>
<span id="cb476-6"><a href="#cb476-6"></a>  </span>
<span id="cb476-7"><a href="#cb476-7"></a>  <span class="fu">print</span>(<span class="st">"Existe alguna persona menor de edad"</span>)</span>
<span id="cb476-8"><a href="#cb476-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Existe alguna persona menor de edad"</code></pre>
</div>
</div>
</div>
</section>
<section id="estructura-if-else-1" class="slide level2">
<h2>Estructura If-else</h2>
<p>Esta estructura <code>if - else</code> puede ser <span class="hl-yellow"><strong>anidada</strong></span>: imagina que queremos ejecutar un c√≥digo si todos son menores; si no sucede, pero todos son mayores de 16, hacer otra cosa; en cualquier otra cosa, otra acci√≥n.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb478"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb478-1"><a href="#cb478-1"></a><span class="cf">if</span> (<span class="fu">all</span>(edad <span class="sc">&gt;=</span> <span class="dv">18</span>)) { </span>
<span id="cb478-2"><a href="#cb478-2"></a>  </span>
<span id="cb478-3"><a href="#cb478-3"></a>  <span class="fu">print</span>(<span class="st">"Todos son mayores de edad"</span>)</span>
<span id="cb478-4"><a href="#cb478-4"></a>  </span>
<span id="cb478-5"><a href="#cb478-5"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">all</span>(edad <span class="sc">&gt;=</span> <span class="dv">16</span>)) {</span>
<span id="cb478-6"><a href="#cb478-6"></a>  </span>
<span id="cb478-7"><a href="#cb478-7"></a>  <span class="fu">print</span>(<span class="st">"Hay alg√∫n menor de edad pero todos con 16 a√±os o m√°s"</span>)</span>
<span id="cb478-8"><a href="#cb478-8"></a>  </span>
<span id="cb478-9"><a href="#cb478-9"></a>} <span class="cf">else</span> { <span class="fu">print</span>(<span class="st">"Hay alguna persona con menos de 16 a√±os"</span>) }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hay alguna persona con menos de 16 a√±os"</code></pre>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Truco</strong></p>
</div>
<div class="callout-content">
<p>Puedes <strong>colapsar las estructuras</strong> haciendo click en la flecha a la izquierda que aparece en tu script.</p>
</div>
</div>
</div>
</section>
<section id="if-else-vectorizado" class="slide level2">
<h2>If-else vectorizado</h2>
<p>Esta estructura condicional se puede <span class="hl-yellow"><strong>vectorizar</strong></span> (en una sola l√≠nea) con <code>if_else()</code> (del paquete <code>{dplyr}</code>), cuyos argumentos son</p>
<ul>
<li>la condici√≥n a evaluar</li>
<li>lo que sucede cuando se cumple y cuando no</li>
<li>un argumento opcional para cuando la condici√≥n a evaluar es <code>NA</code></li>
</ul>
<p>Vamos a etiquetar sin son mayores/menores y un ‚Äúdesconocido‚Äù cuando no conocemos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb480"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb480-1"><a href="#cb480-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb480-2"><a href="#cb480-2"></a>edad <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">NA</span>, edad)</span>
<span id="cb480-3"><a href="#cb480-3"></a><span class="fu">if_else</span>(edad <span class="sc">&gt;=</span> <span class="dv">18</span>, <span class="st">"mayor"</span>, <span class="st">"menor"</span>, <span class="at">missing =</span> <span class="st">"desconocido"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "desconocido" "menor"       "menor"       "mayor"       "mayor"      
[6] "mayor"       "mayor"       "mayor"       "mayor"      </code></pre>
</div>
</div>
<p>En <code>R</code> base existe <code>ifelse()</code>: no deja especificar que hacer con los ausentes pero permite especificar distintos tipos de datos en <code>TRUE</code> y en <code>FALSE</code>.</p>
</section>
<section id="tu-turno-6-1" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-9-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-9-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-9-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-9-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-9-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-9-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<p>üìù ¬øCu√°l es la salida del siguiente c√≥digo?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb482"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb482-1"><a href="#cb482-1"></a><span class="fu">if_else</span>(<span class="fu">sqrt</span>(<span class="dv">9</span>) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="fu">sqrt</span>(<span class="dv">9</span>), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb483"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb483-1"><a href="#cb483-1"></a>La salida es <span class="dv">0</span> ya que <span class="fu">sqrt</span>(<span class="dv">9</span>) es igual <span class="dv">3</span>, y dado que no es menor que <span class="dv">2</span>, devuelve el segundo argumento que es <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-2">
<p>üìù ¬øCu√°l es la salida del siguiente c√≥digo?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb484"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb484-1"><a href="#cb484-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb484-2"><a href="#cb484-2"></a><span class="fu">if_else</span>(<span class="fu">sqrt</span>(x) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb485"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb485-1"><a href="#cb485-1"></a>La salida es el vector <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1</span>) ya que <span class="fu">sqrt</span>(<span class="dv">1</span>) s√≠ es menor que <span class="dv">2</span>, <span class="fu">sqrt</span>(<span class="dv">9</span>) no lo es, y tanto en el caso de <span class="fu">sqrt</span>(<span class="cn">NA</span>) (ra√≠z de ausente) como <span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>) (devuelve <span class="cn">NaN</span>, not a number), su ra√≠z cuadrada no puede verificarse si es menor que <span class="dv">2</span> o no, as√≠ que la salida es NA.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-3">
<p>üìù Modifica el c√≥digo inferior para que, cuando no se pueda verificar si la ra√≠z cuadrada de un n√∫mero es menor que 2, devuelva -1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb486"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb486-1"><a href="#cb486-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb486-2"><a href="#cb486-2"></a><span class="fu">if_else</span>(<span class="fu">sqrt</span>(x) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb487"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb487-1"><a href="#cb487-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb487-2"><a href="#cb487-2"></a><span class="fu">if_else</span>(<span class="fu">sqrt</span>(x) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="at">missing =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-4">
<p>üìù ¬øCu√°l es son los valores de <code>x</code> e <code>y</code> del c√≥digo inferior para <code>z &lt;- 1</code>, <code>z &lt;- -1</code> y <code>z &lt;- -5</code>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb488"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb488-1"><a href="#cb488-1"></a>z <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb488-2"><a href="#cb488-2"></a><span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb488-3"><a href="#cb488-3"></a>  </span>
<span id="cb488-4"><a href="#cb488-4"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb488-5"><a href="#cb488-5"></a>  y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">sqrt</span>(z)</span>
<span id="cb488-6"><a href="#cb488-6"></a>  </span>
<span id="cb488-7"><a href="#cb488-7"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb488-8"><a href="#cb488-8"></a>  </span>
<span id="cb488-9"><a href="#cb488-9"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">4</span></span>
<span id="cb488-10"><a href="#cb488-10"></a>  y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="sc">-</span>z)</span>
<span id="cb488-11"><a href="#cb488-11"></a>  </span>
<span id="cb488-12"><a href="#cb488-12"></a>} <span class="cf">else</span> {</span>
<span id="cb488-13"><a href="#cb488-13"></a>  </span>
<span id="cb488-14"><a href="#cb488-14"></a>  x <span class="ot">&lt;-</span> z<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb488-15"><a href="#cb488-15"></a>  y <span class="ot">&lt;-</span> <span class="fu">abs</span>(z)</span>
<span id="cb488-16"><a href="#cb488-16"></a>  </span>
<span id="cb488-17"><a href="#cb488-17"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb489"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb489-1"><a href="#cb489-1"></a>En primero caso x <span class="ot">=</span> <span class="dv">1</span> e y <span class="ot">=</span> <span class="sc">-</span><span class="fl">1.</span> En el segundo caso x <span class="ot">=</span> <span class="dv">1</span> e y <span class="ot">=</span> <span class="fl">1.</span> En el tercer caso <span class="sc">-</span><span class="fl">2.5</span> y <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-5">
<p>üìù ¬øQu√© pasar√≠a si ejecutamos el siguiente c√≥digo? Spoiler: da error. ¬øPor qu√©? ¬øC√≥mo solucionarlo?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb490"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb490-1"><a href="#cb490-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb490-2"><a href="#cb490-2"></a><span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb490-3"><a href="#cb490-3"></a>  </span>
<span id="cb490-4"><a href="#cb490-4"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb490-5"><a href="#cb490-5"></a>  y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">sqrt</span>(z)</span>
<span id="cb490-6"><a href="#cb490-6"></a>  </span>
<span id="cb490-7"><a href="#cb490-7"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb490-8"><a href="#cb490-8"></a>  </span>
<span id="cb490-9"><a href="#cb490-9"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">4</span></span>
<span id="cb490-10"><a href="#cb490-10"></a>  y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="sc">-</span>z)</span>
<span id="cb490-11"><a href="#cb490-11"></a>  </span>
<span id="cb490-12"><a href="#cb490-12"></a>} <span class="cf">else</span> {</span>
<span id="cb490-13"><a href="#cb490-13"></a>  </span>
<span id="cb490-14"><a href="#cb490-14"></a>  x <span class="ot">&lt;-</span> z<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb490-15"><a href="#cb490-15"></a>  y <span class="ot">&lt;-</span> <span class="fu">abs</span>(z)</span>
<span id="cb490-16"><a href="#cb490-16"></a>  </span>
<span id="cb490-17"><a href="#cb490-17"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb491"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb491-1"><a href="#cb491-1"></a>Da error ya que en los <span class="st">`</span><span class="at">if (condici√≥n) { } else { }</span><span class="st">`</span> <span class="st">"cl√°sicos"</span> necesitamos que</span>
<span id="cb491-2"><a href="#cb491-2"></a>la condici√≥n tenga longitud <span class="fu">uno</span> (un solo valor TRU<span class="sc">/</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb492"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb492-1"><a href="#cb492-1"></a><span class="co"># para arreglarlo podemos hacer un if_else vectorial</span></span>
<span id="cb492-2"><a href="#cb492-2"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>)</span>
<span id="cb492-3"><a href="#cb492-3"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb492-4"><a href="#cb492-4"></a>x <span class="ot">&lt;-</span> <span class="fu">if_else</span>(z <span class="sc">&gt;</span> <span class="dv">0</span>, z<span class="sc">^</span><span class="dv">3</span>, <span class="fu">if_else</span>(<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>, z<span class="sc">^</span><span class="dv">4</span>, z<span class="sc">/</span><span class="dv">2</span>))</span>
<span id="cb492-5"><a href="#cb492-5"></a>y <span class="ot">&lt;-</span> <span class="fu">if_else</span>(z <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="sc">-</span><span class="fu">sqrt</span>(z), <span class="fu">if_else</span>(<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>, <span class="fu">sqrt</span>(<span class="sc">-</span>z), <span class="fu">abs</span>(z)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-6">
<p>üìù ¬øQu√© suceder√° si ejecutamos el c√≥digo inferior?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb493"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb493-1"><a href="#cb493-1"></a>z <span class="ot">&lt;-</span> <span class="st">"a"</span></span>
<span id="cb493-2"><a href="#cb493-2"></a><span class="cf">if</span> (z <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb493-3"><a href="#cb493-3"></a>  </span>
<span id="cb493-4"><a href="#cb493-4"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb493-5"><a href="#cb493-5"></a>  y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">sqrt</span>(z)</span>
<span id="cb493-6"><a href="#cb493-6"></a>  </span>
<span id="cb493-7"><a href="#cb493-7"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">abs</span>(z) <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb493-8"><a href="#cb493-8"></a>  </span>
<span id="cb493-9"><a href="#cb493-9"></a>  x <span class="ot">&lt;-</span> z<span class="sc">^</span><span class="dv">4</span></span>
<span id="cb493-10"><a href="#cb493-10"></a>  y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="sc">-</span>z)</span>
<span id="cb493-11"><a href="#cb493-11"></a>  </span>
<span id="cb493-12"><a href="#cb493-12"></a>} <span class="cf">else</span> {</span>
<span id="cb493-13"><a href="#cb493-13"></a>  </span>
<span id="cb493-14"><a href="#cb493-14"></a>  x <span class="ot">&lt;-</span> z<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb493-15"><a href="#cb493-15"></a>  y <span class="ot">&lt;-</span> <span class="fu">abs</span>(z)</span>
<span id="cb493-16"><a href="#cb493-16"></a>  </span>
<span id="cb493-17"><a href="#cb493-17"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb494"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb494-1"><a href="#cb494-1"></a><span class="co"># dar√° error ya que no es un argumento num√©rico</span></span>
<span id="cb494-2"><a href="#cb494-2"></a>Error <span class="cf">in</span> z<span class="sc">^</span><span class="dv">3</span> <span class="sc">:</span> non<span class="sc">-</span>numeric argument to binary operator</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-7">
<p>üìù Del paquete <code>{lubridate}</code>, la funci√≥n <code>hour()</code> nos devuelve la hora de una fecha dada, y la funci√≥n <code>now()</code> nos devuelve fecha y hora del momento actual. Con ambas funciones haz que se imprima por pantalla (<code>cat()</code>) ‚Äúbuenas noches‚Äù solo a partir de las 21 horas.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb495"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb495-1"><a href="#cb495-1"></a><span class="co"># Cargamos librer√≠a</span></span>
<span id="cb495-2"><a href="#cb495-2"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb495-3"><a href="#cb495-3"></a></span>
<span id="cb495-4"><a href="#cb495-4"></a><span class="co"># Fecha-hora actual</span></span>
<span id="cb495-5"><a href="#cb495-5"></a>fecha_actual <span class="ot">&lt;-</span> <span class="fu">now</span>()</span>
<span id="cb495-6"><a href="#cb495-6"></a></span>
<span id="cb495-7"><a href="#cb495-7"></a><span class="co"># Estructura if</span></span>
<span id="cb495-8"><a href="#cb495-8"></a><span class="cf">if</span> (<span class="fu">hour</span>(fecha_actual) <span class="sc">&gt;</span> <span class="dv">21</span>) {</span>
<span id="cb495-9"><a href="#cb495-9"></a>  </span>
<span id="cb495-10"><a href="#cb495-10"></a>  <span class="fu">cat</span>(<span class="st">"Buenas noches"</span>) <span class="co"># print/cat dos formas de imprimir por pantalla</span></span>
<span id="cb495-11"><a href="#cb495-11"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="bucles" class="slide level2">
<h2>Bucles</h2>
<p>Aunque en la mayor√≠a de ocasiones se pueden reemplazar por otras estructuras m√°s eficientes y legibles, es importante conocer una de las expresiones de control m√°s famosas: los <span class="hl-yellow"><strong>bucles</strong></span>.</p>
<ul>
<li><p><code>for { }</code>: permite <span class="hl-yellow"><strong>repetir el mismo c√≥digo</strong></span> en un <span class="hl-purple"><strong>n√∫mero prefijado y conocido</strong></span> de veces.</p></li>
<li><p><code>while { }</code>: permite <span class="hl-yellow"><strong>repetir el mismo c√≥digo</strong></span> pero en un <span class="hl-purple"><strong>n√∫mero indeterminado de veces</strong></span> (hasta que una <strong>condici√≥n</strong> deje de cumplirse).</p></li>
</ul>
</section>
<section id="bucles-for" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Bucles for</h2>
<p>Un bucle <span class="hl-yellow"><strong>for</strong></span> es una estructura que permite <span class="hl-yellow"><strong>repetir</strong></span> un conjunto de √≥rdenes un n√∫mero <span class="hl-purple"><strong>finito, prefijado y conocido de veces</strong></span> dado un conjunto de √≠ndices.</p>
<p>Vamos a definir un vector <code>x &lt;- c(0, -7, 1, 4)</code> y otra variable vac√≠a <code>y</code>. Tras ello definiremos un bucle for con <code>for () { }</code>: dentro de los par√©ntesis indicaremos un √≠ndice y unos valores a recorrer, dentro de las llaves el c√≥digo a ejecutar en cada iteraci√≥n (en este caso, rellenar <code>y</code> como <code>x + 1</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb496"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb496-1" class="hljs-ln-code"><a href="#cb496-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb496-2" class="hljs-ln-code"><a href="#cb496-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bucles-for-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Bucles for</h2>
<p>Un bucle <span class="hl-yellow"><strong>for</strong></span> es una estructura que permite <span class="hl-yellow"><strong>repetir</strong></span> un conjunto de √≥rdenes un n√∫mero <span class="hl-purple"><strong>finito, prefijado y conocido de veces</strong></span> dado un conjunto de √≠ndices.</p>
<p>Vamos a definir un vector <code>x &lt;- c(0, -7, 1, 4)</code> y otra variable vac√≠a <code>y</code>. Tras ello definiremos un bucle for con <code>for () { }</code>: dentro de los par√©ntesis indicaremos un √≠ndice y unos valores a recorrer, dentro de las llaves el c√≥digo a ejecutar en cada iteraci√≥n (en este caso, rellenar <code>y</code> como <code>x + 1</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb497"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb497-1" class="hljs-ln-code"><a href="#cb497-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb497-2" class="hljs-ln-code"><a href="#cb497-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb497-3" class="hljs-ln-code"><a href="#cb497-3"></a></span>
<span id="cb497-4" class="hljs-ln-code"><a href="#cb497-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb497-5" class="hljs-ln-code"><a href="#cb497-5"></a>  </span>
<span id="cb497-6" class="hljs-ln-code"><a href="#cb497-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bucles-for-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Bucles for</h2>
<p>Un bucle <span class="hl-yellow"><strong>for</strong></span> es una estructura que permite <span class="hl-yellow"><strong>repetir</strong></span> un conjunto de √≥rdenes un n√∫mero <span class="hl-purple"><strong>finito, prefijado y conocido de veces</strong></span> dado un conjunto de √≠ndices.</p>
<p>Vamos a definir un vector <code>x &lt;- c(0, -7, 1, 4)</code> y otra variable vac√≠a <code>y</code>. Tras ello definiremos un bucle for con <code>for () { }</code>: dentro de los par√©ntesis indicaremos un √≠ndice y unos valores a recorrer, dentro de las llaves el c√≥digo a ejecutar en cada iteraci√≥n (en este caso, rellenar <code>y</code> como <code>x + 1</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb498"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb498-1" class="hljs-ln-code"><a href="#cb498-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb498-2" class="hljs-ln-code"><a href="#cb498-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb498-3" class="hljs-ln-code"><a href="#cb498-3"></a></span>
<span id="cb498-4" class="hljs-ln-code"><a href="#cb498-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb498-5" class="hljs-ln-code"><a href="#cb498-5"></a>  y[i] <span class="ot">&lt;-</span> x[i] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb498-6" class="hljs-ln-code"><a href="#cb498-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bucles-for-3" class="slide level2">
<h2>Bucles for</h2>
<p>F√≠jate que debido a que <code>R</code> funciona de manera <span class="hl-yellow"><strong>vectorial por defecto</strong></span>, el bucle es lo mismo que hacer <code>x + 1</code> directamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb499"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb499-1"><a href="#cb499-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb499-2"><a href="#cb499-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb499-3"><a href="#cb499-3"></a></span>
<span id="cb499-4"><a href="#cb499-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb499-5"><a href="#cb499-5"></a>  y[i] <span class="ot">&lt;-</span> x[i] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb499-6"><a href="#cb499-6"></a>}</span>
<span id="cb499-7"><a href="#cb499-7"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -6  2  5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb501"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb501-1"><a href="#cb501-1"></a>y2 <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb501-2"><a href="#cb501-2"></a>y2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -6  2  5</code></pre>
</div>
</div>
</section>
<section id="bucles-for-4" class="slide level2">
<h2>Bucles for</h2>
<p>Otra opci√≥n habitual es indicar los √≠ndices de manera ¬´autom√°tica¬ª: desde el primero <code>1</code> hasta el √∫ltimo (que corresponde con la longitud de x <code>length(x)</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb503"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb503-1"><a href="#cb503-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="sc">-</span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">4</span>)</span>
<span id="cb503-2"><a href="#cb503-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb503-3"><a href="#cb503-3"></a></span>
<span id="cb503-4"><a href="#cb503-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb503-5"><a href="#cb503-5"></a>  y[i] <span class="ot">&lt;-</span> x[i] <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb503-6"><a href="#cb503-6"></a>}</span>
<span id="cb503-7"><a href="#cb503-7"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 -6  2  5</code></pre>
</div>
</div>
</section>
<section id="bucles-for-5" class="slide level2">
<h2>Bucles for</h2>
<p>As√≠ la <span class="hl-yellow"><strong>estructura general de un bucle for</strong></span> ser√° siempre la siguiente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb505"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb505-1"><a href="#cb505-1"></a><span class="cf">for</span> (√≠ndice <span class="cf">in</span> conjunto) { </span>
<span id="cb505-2"><a href="#cb505-2"></a>  c√≥digo (dependiente de i)</span>
<span id="cb505-3"><a href="#cb505-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span class="hl-green"><strong>SIEMPRE</strong></span> sabemos cu√°ntas iteraciones tenemos (tantas como elementos haya en el conjunto a indexar)</p>
</section>
<section id="evitando-bucles" class="slide level2">
<h2>Evitando bucles</h2>
<p>Como ya hemos aprendido con el paquete<code>{microbenchmark}</code> podemos chequear como <span class="hl-yellow"><strong>los bucles suelen ser muy ineficientes</strong></span> (de ah√≠ que debamos evitarlos en la mayor√≠a de ocasiones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb506"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb506-1"><a href="#cb506-1"></a><span class="fu">library</span>(microbenchmark)</span>
<span id="cb506-2"><a href="#cb506-2"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span></span>
<span id="cb506-3"><a href="#cb506-3"></a><span class="fu">microbenchmark</span>(y <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span>, </span>
<span id="cb506-4"><a href="#cb506-4"></a>               <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) { y[i] <span class="ot">&lt;-</span> x[i]<span class="sc">^</span><span class="dv">2</span> },</span>
<span id="cb506-5"><a href="#cb506-5"></a>               <span class="at">times =</span> <span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Unit: microseconds
                                    expr     min      lq     mean   median
                                y &lt;- x^2   1.025   1.230   1.7138   1.3940
 for (i in 1:100) {     y[i] &lt;- x[i]^2 } 734.310 799.254 870.3726 830.0245
       uq      max neval
   1.8040   12.218   500
 898.4125 3592.297   500</code></pre>
</div>
</div>
</section>
<section id="bucles-for-6" class="slide level2">
<h2>Bucles for</h2>
<p>Podemos ver otro ejemplo de bucle <span class="hl-yellow"><strong>combinando n√∫meros y textos</strong></span>: definimos un vector de edades y de nombres, e imprimimos el nombre y edad i-√©sima.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb508"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb508-1"><a href="#cb508-1"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Javi"</span>, <span class="st">"Sandra"</span>, <span class="st">"Carlos"</span>, <span class="st">"Marcos"</span>, <span class="st">"Marta"</span>)</span>
<span id="cb508-2"><a href="#cb508-2"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">27</span>, <span class="dv">18</span>, <span class="dv">43</span>, <span class="dv">29</span>)</span>
<span id="cb508-3"><a href="#cb508-3"></a></span>
<span id="cb508-4"><a href="#cb508-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) { </span>
<span id="cb508-5"><a href="#cb508-5"></a>  </span>
<span id="cb508-6"><a href="#cb508-6"></a>  <span class="fu">print</span>(<span class="fu">glue</span>(<span class="st">"{nombres[i]} tiene {edades[i]} a√±os"</span>)) </span>
<span id="cb508-7"><a href="#cb508-7"></a>  </span>
<span id="cb508-8"><a href="#cb508-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Javi tiene 33 a√±os
Sandra tiene 27 a√±os
Carlos tiene 18 a√±os
Marcos tiene 43 a√±os
Marta tiene 29 a√±os</code></pre>
</div>
</div>
</section>
<section id="bucles-for-7" class="slide level2">
<h2>Bucles for</h2>
<p>Aunque normalmente se suelen indexar con vectors num√©ricos, los bucles pueden ser <span class="hl-yellow"><strong>indexados sobre cualquier estructura vectorial</strong></span>, da igual de que tipo sea el conjunto</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb510"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb510-1"><a href="#cb510-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb510-2"><a href="#cb510-2"></a>week_days <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"monday"</span>, <span class="st">"tuesday"</span>, <span class="st">"wednesday"</span>, <span class="st">"thursday"</span>,</span>
<span id="cb510-3"><a href="#cb510-3"></a>               <span class="st">"friday"</span>, <span class="st">"saturday"</span>, <span class="st">"sunday"</span>)</span>
<span id="cb510-4"><a href="#cb510-4"></a></span>
<span id="cb510-5"><a href="#cb510-5"></a><span class="cf">for</span> (days <span class="cf">in</span> week_days) {</span>
<span id="cb510-6"><a href="#cb510-6"></a>  </span>
<span id="cb510-7"><a href="#cb510-7"></a>  <span class="fu">print</span>(<span class="fu">str_to_upper</span>(days))</span>
<span id="cb510-8"><a href="#cb510-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MONDAY"
[1] "TUESDAY"
[1] "WEDNESDAY"
[1] "THURSDAY"
[1] "FRIDAY"
[1] "SATURDAY"
[1] "SUNDAY"</code></pre>
</div>
</div>
</section>
<section id="bucles-y-condicionales" class="slide level2">
<h2>Bucles y condicionales</h2>
<p>Vamos a <strong>combinar las estructuras condicionales y los bucles</strong>: usando el conjunto <code>swiss</code> del paquete <code>{datasets}</code>, vamos a asignar <code>NA</code> si los valores de fertilidad son mayores de 80.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb512"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb512-1"><a href="#cb512-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(swiss)) {</span>
<span id="cb512-2"><a href="#cb512-2"></a>  </span>
<span id="cb512-3"><a href="#cb512-3"></a>  <span class="cf">if</span> (swiss<span class="sc">$</span>Fertility[i] <span class="sc">&gt;</span> <span class="dv">80</span>) { </span>
<span id="cb512-4"><a href="#cb512-4"></a>    </span>
<span id="cb512-5"><a href="#cb512-5"></a>    swiss<span class="sc">$</span>Fertility[i] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb512-6"><a href="#cb512-6"></a>    </span>
<span id="cb512-7"><a href="#cb512-7"></a>  }</span>
<span id="cb512-8"><a href="#cb512-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Esto es exactamente igual a un <code>if_else()</code> vectorizado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb513"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb513-1"><a href="#cb513-1"></a><span class="fu">data</span>(<span class="st">"swiss"</span>)</span>
<span id="cb513-2"><a href="#cb513-2"></a>swiss<span class="sc">$</span>Fertility <span class="ot">&lt;-</span> <span class="fu">if_else</span>(swiss<span class="sc">$</span>Fertility <span class="sc">&gt;</span> <span class="dv">80</span>, <span class="cn">NA</span>, swiss<span class="sc">$</span>Fertility)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="bucles-while" class="slide level2">
<h2>Bucles while</h2>
<p>Otra forma de crear un bucle es con la estructura <code>while { }</code>, que nos ejecutar√° un bucle <span class="hl-yellow"><strong>un n√∫mero desconocido de veces</strong></span>, hasta que una condici√≥n <span class="hl-yellow"><strong>deje de cumplirse</strong></span> (de hecho puede que nunca termine). Por ejemplo, vamos a inializar una variable <code>ciclos &lt;- 1</code>, que incrementaremos en cada paso, y no saldremos del bucle hasta que <code>ciclos &gt; 4</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb514"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb514-1"><a href="#cb514-1"></a>ciclos <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb514-2"><a href="#cb514-2"></a><span class="cf">while</span>(ciclos <span class="sc">&lt;=</span> <span class="dv">4</span>) {</span>
<span id="cb514-3"><a href="#cb514-3"></a>  </span>
<span id="cb514-4"><a href="#cb514-4"></a>  <span class="fu">print</span>(<span class="fu">glue</span>(<span class="st">"No todav√≠a, vamos por el ciclo {ciclos}"</span>)) </span>
<span id="cb514-5"><a href="#cb514-5"></a>  ciclos <span class="ot">&lt;-</span> ciclos <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb514-6"><a href="#cb514-6"></a>  </span>
<span id="cb514-7"><a href="#cb514-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No todav√≠a, vamos por el ciclo 1
No todav√≠a, vamos por el ciclo 2
No todav√≠a, vamos por el ciclo 3
No todav√≠a, vamos por el ciclo 4</code></pre>
</div>
</div>
</section>
<section id="bucles-while-1" class="slide level2">
<h2>Bucles while</h2>
<p>Un bucle <code>while</code> ser√° siempre como sigue</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb516"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb516-1"><a href="#cb516-1"></a><span class="cf">while</span>(condici√≥n) {</span>
<span id="cb516-2"><a href="#cb516-2"></a>  </span>
<span id="cb516-3"><a href="#cb516-3"></a>  c√≥digo a hacer mientras la condici√≥n sea <span class="cn">TRUE</span></span>
<span id="cb516-4"><a href="#cb516-4"></a>  <span class="co"># normalmente aqu√≠ se actualiza alguna variable</span></span>
<span id="cb516-5"><a href="#cb516-5"></a>  </span>
<span id="cb516-6"><a href="#cb516-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bucles-while-2" class="slide level2">
<h2>Bucles while</h2>
<p>¬øQu√© sucede cuando la <span class="hl-yellow"><strong>condici√≥n nunca es FALSE</strong></span>? Pru√©balo tu mismo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb517"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb517-1"><a href="#cb517-1"></a><span class="cf">while</span> (<span class="dv">1</span> <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb517-2"><a href="#cb517-2"></a>  </span>
<span id="cb517-3"><a href="#cb517-3"></a>  <span class="fu">print</span>(<span class="st">"Presiona ESC para salir del bucle"</span>)</span>
<span id="cb517-4"><a href="#cb517-4"></a>  </span>
<span id="cb517-5"><a href="#cb517-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;</p>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Un bucle <code>while { }</code> puede ser bastante ¬´peligroso¬ª sino controlamos bien c√≥mo pararlo.</p>
</div>
</div>
</div>
</section>
<section id="bucles-while-3" class="slide level2">
<h2>Bucles while</h2>
<p>Contamos con dos palabras reservadas para <span class="hl-yellow"><strong>abortar un bucle o forzar su avance</strong></span>:</p>
<ul>
<li><code>break</code>: permite <span class="hl-yellow"><strong>abortar un bucle</strong></span> incluso si no se ha llegado a su final</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb518"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb518-1"><a href="#cb518-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb518-2"><a href="#cb518-2"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb518-3"><a href="#cb518-3"></a>    </span>
<span id="cb518-4"><a href="#cb518-4"></a>    <span class="cf">break</span> <span class="co"># si i = 3, abortamos bucle</span></span>
<span id="cb518-5"><a href="#cb518-5"></a>    </span>
<span id="cb518-6"><a href="#cb518-6"></a>  }</span>
<span id="cb518-7"><a href="#cb518-7"></a>  <span class="fu">print</span>(i)</span>
<span id="cb518-8"><a href="#cb518-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2</code></pre>
</div>
</div>
</section>
<section id="bucles-while-4" class="slide level2">
<h2>Bucles while</h2>
<p>Contamos con dos palabras reservadas para <span class="hl-yellow"><strong>abortar un bucle o forzar su avance</strong></span>:</p>
<ul>
<li><code>next</code>: <span class="hl-yellow"><strong>fuerza un bucle a avanzar a la siguiente iteraci√≥n</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb520"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb520-1"><a href="#cb520-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb520-2"><a href="#cb520-2"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb520-3"><a href="#cb520-3"></a>    </span>
<span id="cb520-4"><a href="#cb520-4"></a>    <span class="cf">next</span> <span class="co"># si i = 3, la obvia y continua al siguiente</span></span>
<span id="cb520-5"><a href="#cb520-5"></a>    </span>
<span id="cb520-6"><a href="#cb520-6"></a>  }</span>
<span id="cb520-7"><a href="#cb520-7"></a>  <span class="fu">print</span>(i)</span>
<span id="cb520-8"><a href="#cb520-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 4
[1] 5</code></pre>
</div>
</div>
</section>
<section id="bucles-repeat" class="slide level2">
<h2>Bucles repeat</h2>
<p>Aunque no es tan usado como las opciones anteriores, tambi√©n contamos con <code>repeat { }</code> que ejecuta un <span class="hl-yellow"><strong>bucle de manera infinita hasta que se indique abortar</strong></span> con un break</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb522"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb522-1"><a href="#cb522-1"></a>count <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb522-2"><a href="#cb522-2"></a><span class="cf">repeat</span> { </span>
<span id="cb522-3"><a href="#cb522-3"></a>  </span>
<span id="cb522-4"><a href="#cb522-4"></a>  count <span class="ot">&lt;-</span> count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb522-5"><a href="#cb522-5"></a>  <span class="cf">if</span> (count <span class="sc">&gt;=</span> <span class="dv">100</span>) { <span class="cf">break</span> }</span>
<span id="cb522-6"><a href="#cb522-6"></a>  </span>
<span id="cb522-7"><a href="#cb522-7"></a>}</span>
<span id="cb522-8"><a href="#cb522-8"></a>count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100</code></pre>
</div>
</div>
</section>
<section id="replicate" class="slide level2">
<h2>Replicate</h2>
<p>Aunque no es formalmente un bucle, otra forma de <span class="hl-yellow"><strong>repetir c√≥digo un n√∫mero de veces</strong></span> es hacer uso de <code>replicate()</code>: simplemente permite repetir lo mismo <span class="hl-yellow"><strong>n veces</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb524"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb524-1"><a href="#cb524-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb524-2"><a href="#cb524-2"></a><span class="fu">replicate</span>(<span class="at">n =</span> <span class="dv">3</span>, x<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    1    1
[2,]    4    4    4
[3,]    9    9    9</code></pre>
</div>
</div>
</section>
<section id="replicate-1" class="slide level2">
<h2>Replicate</h2>
<p>La funci√≥n <code>replicate()</code> se suele usar para <span class="hl-yellow"><strong>generar distintas repeticiones de elementos aleatorios</strong></span>. Por ejemplo, imaginemos que queremos generar 3 muestras de distribuciones normales, en la que cada muestra tendr√° 7 elementos. Para generar una se usa <code>rnorm(n = 7)</code> (r de resample, norm de normal, y si no se dice nada es media 0 y desv 1).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb526"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb526-1"><a href="#cb526-1"></a><span class="fu">replicate</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]        [,2]       [,3]
[1,]  1.1614742  0.08632124  0.1127194
[2,] -0.5311711 -0.72802379  0.7002502
[3,]  1.4380592  0.18194393  2.3982431
[4,]  1.7066410  0.22998702 -0.4995150
[5,]  1.1823694  0.49412424 -0.3568481
[6,] -0.2661169 -0.44013229 -0.9165742
[7,] -0.7076987 -0.52944664 -0.8446869</code></pre>
</div>
</div>
</section>
<section id="tu-turno-6-2" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-10" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-10-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-10-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-10-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-10-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-10-1">
<p>üìù Modifica el c√≥digo inferior para que se imprima un mensaje por pantalla si y solo si todos los datos de <code>airquality</code> son con mes distinto a enero</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb528"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb528-1"><a href="#cb528-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb528-2"><a href="#cb528-2"></a>months <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Month</span>
<span id="cb528-3"><a href="#cb528-3"></a></span>
<span id="cb528-4"><a href="#cb528-4"></a><span class="cf">if</span> (months <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb528-5"><a href="#cb528-5"></a>  <span class="fu">print</span>(<span class="st">"No hay datos de enero"</span>)</span>
<span id="cb528-6"><a href="#cb528-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb529"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb529-1"><a href="#cb529-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb529-2"><a href="#cb529-2"></a>months <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Month</span>
<span id="cb529-3"><a href="#cb529-3"></a></span>
<span id="cb529-4"><a href="#cb529-4"></a><span class="cf">if</span> (<span class="fu">all</span>(months <span class="sc">!=</span> <span class="dv">1</span>)) {</span>
<span id="cb529-5"><a href="#cb529-5"></a>  <span class="fu">print</span>(<span class="st">"No hay datos de enero"</span>)</span>
<span id="cb529-6"><a href="#cb529-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-2">
<p>üìù Modifica el c√≥digo inferior para guardar en una variable llamada <code>temp_alta</code> un <code>TRUE</code> si alguno de los registros tiene una temperatura superior a 90 grados Farenheit y <code>FALSE</code> en cualquier otro caso</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb530"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb530-1"><a href="#cb530-1"></a>temp <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp</span>
<span id="cb530-2"><a href="#cb530-2"></a></span>
<span id="cb530-3"><a href="#cb530-3"></a><span class="cf">if</span> (temp <span class="sc">==</span> <span class="dv">100</span>) {</span>
<span id="cb530-4"><a href="#cb530-4"></a>  <span class="fu">print</span>(<span class="st">"Algunos de los registros tienen temperaturas superiores a 90 grados Farenheit"</span>)</span>
<span id="cb530-5"><a href="#cb530-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb531"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb531-1"><a href="#cb531-1"></a><span class="co"># Option 1</span></span>
<span id="cb531-2"><a href="#cb531-2"></a>temp <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp</span>
<span id="cb531-3"><a href="#cb531-3"></a>temp_alta <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb531-4"><a href="#cb531-4"></a><span class="cf">if</span> (<span class="fu">any</span>(temp <span class="sc">&gt;</span> <span class="dv">90</span>)) {</span>
<span id="cb531-5"><a href="#cb531-5"></a>   temp_alta <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb531-6"><a href="#cb531-6"></a>}</span>
<span id="cb531-7"><a href="#cb531-7"></a></span>
<span id="cb531-8"><a href="#cb531-8"></a><span class="co"># Option 2</span></span>
<span id="cb531-9"><a href="#cb531-9"></a>temp_alta <span class="ot">&lt;-</span> <span class="fu">any</span>(airquality<span class="sc">$</span>Temp <span class="sc">&gt;</span> <span class="dv">90</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-3">
<p>üìù Modifica el c√≥digo inferior para dise√±ar un bucle <code>for</code> de 5 iteraciones que solo recorra los primeros 5 impares (y en cada paso del bucle los imprima)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb532"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb532-1"><a href="#cb532-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb532-2"><a href="#cb532-2"></a>  </span>
<span id="cb532-3"><a href="#cb532-3"></a>  <span class="fu">print</span>(i)</span>
<span id="cb532-4"><a href="#cb532-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb533"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb533-1"><a href="#cb533-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)) {</span>
<span id="cb533-2"><a href="#cb533-2"></a>  </span>
<span id="cb533-3"><a href="#cb533-3"></a>  <span class="fu">print</span>(i)</span>
<span id="cb533-4"><a href="#cb533-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-10-4">
<p>üìù Modifica el c√≥digo inferior para dise√±ar un bucle <code>while</code> que empiece con un contador <code>count &lt;- 1</code> y pare cuando llegue a 6</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb534"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb534-1"><a href="#cb534-1"></a>count <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb534-2"><a href="#cb534-2"></a><span class="cf">while</span> (count <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb534-3"><a href="#cb534-3"></a>  </span>
<span id="cb534-4"><a href="#cb534-4"></a>  <span class="fu">print</span>(count)</span>
<span id="cb534-5"><a href="#cb534-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb535"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb535-1"><a href="#cb535-1"></a>count <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb535-2"><a href="#cb535-2"></a><span class="cf">while</span> (count <span class="sc">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb535-3"><a href="#cb535-3"></a>  </span>
<span id="cb535-4"><a href="#cb535-4"></a>  <span class="fu">print</span>(count)</span>
<span id="cb535-5"><a href="#cb535-5"></a>  count <span class="ot">&lt;-</span> count <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb535-6"><a href="#cb535-6"></a>  </span>
<span id="cb535-7"><a href="#cb535-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-6" class="slide level2">
<h2>üê£ Caso pr√°ctico</h2>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/control-bucles-if-else/"><strong>workbook</strong></a> donde tendr√°s que dise√±ar algunos estudios de simulaci√≥n haciendo uso de <strong>bucles y estructuras condicionales</strong></p>
</section></section>
<section>
<section id="clase-7" class="title-slide slide level1 center">
<h1>Clase 7: <span class="flow">funciones</span></h1>
<p><span style="color:#444442;"><strong>¬øQu√© es una funci√≥n? ¬øC√≥mo se definen? Variables locales vs globales</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-7">üíª Ejercicios resueltos: funciones</a></p></li>
<li><p><a href="#/caso-practico-7">üê£ Workbook/caso pr√°ctico</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="creando-funciones" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, adem√°s podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>. ¬øC√≥mo <span class="hl-purple"><strong>crear nuestra propia funci√≥n</strong></span>? Veamos su <strong>esquema b√°sico</strong>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extra√±os). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</p></li>
<li><p>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</p></li>
<li><p><span class="hl-yellow"><strong>Cuerpo</strong></span> de la funci√≥n dentro de <code>{ }</code>.</p></li>
<li><p>Finalizamos la funci√≥n con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb536"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb536-1" class="hljs-ln-code"><a href="#cb536-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb536-2" class="hljs-ln-code"><a href="#cb536-2"></a>  </span>
<span id="cb536-3" class="hljs-ln-code"><a href="#cb536-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-1" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, adem√°s podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>. ¬øC√≥mo <span class="hl-purple"><strong>crear nuestra propia funci√≥n</strong></span>? Veamos su <strong>esquema b√°sico</strong>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extra√±os). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</p></li>
<li><p>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</p></li>
<li><p><span class="hl-yellow"><strong>Cuerpo</strong></span> de la funci√≥n dentro de <code>{ }</code>.</p></li>
<li><p>Finalizamos la funci√≥n con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb537"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb537-1" class="hljs-ln-code"><a href="#cb537-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb537-2" class="hljs-ln-code"><a href="#cb537-2"></a>  </span>
<span id="cb537-3" class="hljs-ln-code"><a href="#cb537-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-2" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, adem√°s podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>. ¬øC√≥mo <span class="hl-purple"><strong>crear nuestra propia funci√≥n</strong></span>? Veamos su <strong>esquema b√°sico</strong>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extra√±os). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</p></li>
<li><p>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</p></li>
<li><p><span class="hl-yellow"><strong>Cuerpo</strong></span> de la funci√≥n dentro de <code>{ }</code>.</p></li>
<li><p>Finalizamos la funci√≥n con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb538"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb538-1" class="hljs-ln-code"><a href="#cb538-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb538-2" class="hljs-ln-code"><a href="#cb538-2"></a>  </span>
<span id="cb538-3" class="hljs-ln-code"><a href="#cb538-3"></a>  c√≥digo a ejecutar</span>
<span id="cb538-4" class="hljs-ln-code"><a href="#cb538-4"></a>  </span>
<span id="cb538-5" class="hljs-ln-code"><a href="#cb538-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-3" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>No solo podemos usar <strong>funciones predeterminadas</strong> que vienen ya cargadas en paquetes, adem√°s podemos <span class="hl-yellow"><strong>crear nuestras propias funciones</strong></span> para <strong>automatizar tareas</strong>. ¬øC√≥mo <span class="hl-purple"><strong>crear nuestra propia funci√≥n</strong></span>? Veamos su <strong>esquema b√°sico</strong>:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Nombre</strong></span>: por ejemplo <code>name_fun</code> (sin espacios ni caracteres extra√±os). Al nombre le <span class="hl-yellow"><strong>asignamos la palabra reservada</strong></span> <code>function()</code>.</p></li>
<li><p>Definir <span class="hl-yellow"><strong>argumentos de entrada</strong></span> (dentro de <code>function()</code>).</p></li>
<li><p><span class="hl-yellow"><strong>Cuerpo</strong></span> de la funci√≥n dentro de <code>{ }</code>.</p></li>
<li><p>Finalizamos la funci√≥n con los <span class="hl-yellow"><strong>argumentos de salida</strong></span> con <code>return()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb539"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb539-1" class="hljs-ln-code"><a href="#cb539-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb539-2" class="hljs-ln-code"><a href="#cb539-2"></a>  </span>
<span id="cb539-3" class="hljs-ln-code"><a href="#cb539-3"></a>  c√≥digo a ejecutar</span>
<span id="cb539-4" class="hljs-ln-code"><a href="#cb539-4"></a>  </span>
<span id="cb539-5" class="hljs-ln-code"><a href="#cb539-5"></a>  <span class="fu">return</span>(var_salida)</span>
<span id="cb539-6" class="hljs-ln-code"><a href="#cb539-6"></a>  </span>
<span id="cb539-7" class="hljs-ln-code"><a href="#cb539-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-4" class="slide level2">
<h2>Creando funciones</h2>
<ul>
<li><p><code>arg1, arg2, ...</code>: ser√°n los <span class="hl-yellow"><strong>argumentos de entrada</strong></span>, los argumentos que toma la funci√≥n para ejecutar el c√≥digo que tiene dentro</p></li>
<li><p><code>c√≥digo</code>: l√≠neas de c√≥digo que queramos que <span class="hl-yellow"><strong>ejecute la funci√≥n</strong></span>.</p></li>
<li><p><code>return(var_salida)</code>: se introducir√°n los <span class="hl-yellow"><strong>argumentos de salida</strong></span>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb540"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb540-1"><a href="#cb540-1"></a>name_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ...) {</span>
<span id="cb540-2"><a href="#cb540-2"></a>  </span>
<span id="cb540-3"><a href="#cb540-3"></a>  <span class="co"># C√≥digo que queramos ejecutar</span></span>
<span id="cb540-4"><a href="#cb540-4"></a>  c√≥digo</span>
<span id="cb540-5"><a href="#cb540-5"></a>  </span>
<span id="cb540-6"><a href="#cb540-6"></a>  <span class="co"># Salida</span></span>
<span id="cb540-7"><a href="#cb540-7"></a>  <span class="fu">return</span>(var_salida)</span>
<span id="cb540-8"><a href="#cb540-8"></a>  </span>
<span id="cb540-9"><a href="#cb540-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Todas las variables que definamos dentro de la funci√≥n son <span class="hl-yellow"><strong>variables LOCALES: solo existir√°n dentro de la funci√≥n</strong></span> salvo que especifiquemos lo contrario.</p>
</div>
</div>
</div>
</section>
<section id="creando-funciones-5" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>Veamos un ejemplo muy simple de funci√≥n para <span class="hl-yellow"><strong>calcular el √°rea de un rect√°ngulo</strong></span>.</p>
<p>Dado que el √°rea de un rect√°ngulo se calcula como el <strong>producto de sus lados</strong>, necesitaremos precisamente eso, sus lados: esos ser√°n los <span class="hl-yellow"><strong>argumentos de entrada</strong></span> y el <span class="hl-purple"><strong>valor a devolver</strong></span> ser√° justo su <strong>√°rea</strong> (<span class="math inline">\(lado_1 * lado_2\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb541"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb541-1" class="hljs-ln-code"><a href="#cb541-1"></a><span class="co"># Definici√≥n del nombre de funci√≥n y argumentos de entrada</span></span>
<span id="cb541-2" class="hljs-ln-code"><a href="#cb541-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb541-3" class="hljs-ln-code"><a href="#cb541-3"></a>  </span>
<span id="cb541-4" class="hljs-ln-code"><a href="#cb541-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-6" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>Veamos un ejemplo muy simple de funci√≥n para <span class="hl-yellow"><strong>calcular el √°rea de un rect√°ngulo</strong></span>.</p>
<p>Dado que el √°rea de un rect√°ngulo se calcula como el <strong>producto de sus lados</strong>, necesitaremos precisamente eso, sus lados: esos ser√°n los <span class="hl-yellow"><strong>argumentos de entrada</strong></span> y el <span class="hl-purple"><strong>valor a devolver</strong></span> ser√° justo su <strong>√°rea</strong> (<span class="math inline">\(lado_1 * lado_2\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb542"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb542-1" class="hljs-ln-code"><a href="#cb542-1"></a><span class="co"># Definici√≥n del nombre de funci√≥n y argumentos de entrada</span></span>
<span id="cb542-2" class="hljs-ln-code"><a href="#cb542-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb542-3" class="hljs-ln-code"><a href="#cb542-3"></a>  </span>
<span id="cb542-4" class="hljs-ln-code"><a href="#cb542-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb542-5" class="hljs-ln-code"><a href="#cb542-5"></a>  </span>
<span id="cb542-6" class="hljs-ln-code"><a href="#cb542-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creando-funciones-7" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Creando funciones</h2>
<p>Veamos un ejemplo muy simple de funci√≥n para <span class="hl-yellow"><strong>calcular el √°rea de un rect√°ngulo</strong></span>.</p>
<p>Dado que el √°rea de un rect√°ngulo se calcula como el <strong>producto de sus lados</strong>, necesitaremos precisamente eso, sus lados: esos ser√°n los <span class="hl-yellow"><strong>argumentos de entrada</strong></span> y el <span class="hl-purple"><strong>valor a devolver</strong></span> ser√° justo su <strong>√°rea</strong> (<span class="math inline">\(lado_1 * lado_2\)</span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb543"><pre class="sourceCode numberSource r number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode r hljs"><span id="cb543-1" class="hljs-ln-code"><a href="#cb543-1"></a><span class="co"># Definici√≥n del nombre de funci√≥n y argumentos de entrada</span></span>
<span id="cb543-2" class="hljs-ln-code"><a href="#cb543-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb543-3" class="hljs-ln-code"><a href="#cb543-3"></a>  </span>
<span id="cb543-4" class="hljs-ln-code"><a href="#cb543-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb543-5" class="hljs-ln-code"><a href="#cb543-5"></a>  <span class="fu">return</span>(area)</span>
<span id="cb543-6" class="hljs-ln-code"><a href="#cb543-6"></a>  </span>
<span id="cb543-7" class="hljs-ln-code"><a href="#cb543-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="uso-de-funciones" class="slide level2">
<h2>Uso de funciones</h2>
<p>Tambi√©n podemos hacer una definici√≥n directa de las variables <strong>sin almacenar por el camino</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb544"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb544-1"><a href="#cb544-1"></a><span class="co"># Definici√≥n del nombre de funci√≥n y argumentos de entrada</span></span>
<span id="cb544-2"><a href="#cb544-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, lado_2) {</span>
<span id="cb544-3"><a href="#cb544-3"></a>  </span>
<span id="cb544-4"><a href="#cb544-4"></a>  <span class="fu">return</span>(lado_1 <span class="sc">*</span> lado_2)</span>
<span id="cb544-5"><a href="#cb544-5"></a>  </span>
<span id="cb544-6"><a href="#cb544-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>¬øC√≥mo aplicar la funci√≥n?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb545"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb545-1"><a href="#cb545-1"></a><span class="fu">calcular_area</span>(<span class="dv">5</span>, <span class="dv">3</span>) <span class="co"># √°rea de un rect√°ngulo 5 x 3 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb547"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb547-1"><a href="#cb547-1"></a><span class="fu">calcular_area</span>(<span class="dv">1</span>, <span class="dv">5</span>) <span class="co"># √°rea de un rect√°ngulo 1 x 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
</section>
<section id="uso-de-funciones-1" class="slide level2">
<h2>Uso de funciones</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Consejo</strong></p>
</div>
<div class="callout-content">
<p>Aunque no sea necesario, es <span class="hl-green"><strong>recomendable hacer expl√≠cita la llamada de los argumentos</strong></span>, especificando en el c√≥digo qu√© valor es para cada argumento para que no dependa de su orden, haciendo el c√≥digo m√°s legible</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb549"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb549-1"><a href="#cb549-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>, <span class="at">lado_2 =</span> <span class="dv">3</span>) <span class="co"># √°rea de un rect√°ngulo 5 x 3 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb551"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb551-1"><a href="#cb551-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_2 =</span> <span class="dv">3</span>, <span class="at">lado_1 =</span> <span class="dv">5</span>) <span class="co"># √°rea de un rect√°ngulo 5 x 3 </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
</div>
</section>
<section id="argumentos-por-defecto" class="slide level2">
<h2>Argumentos por defecto</h2>
<p>Imagina ahora que nos damos cuenta que el 90% de las veces usamos dicha funci√≥n para <span class="hl-yellow"><strong>calcular por defecto el √°rea de un cuadrado</strong></span> (es decir, solo necesitamos un lado). Para ello, podemos definir <span class="hl-yellow"><strong>argumentos por defecto</strong></span> en la funci√≥n: tomar√°n dicho valor salvo que le asignemos otro.</p>
<p>¬øPor qu√© no asignar <code>lado_2 = lado_1</code> <strong>por defecto</strong>, para ahorrar l√≠neas de c√≥digo y tiempo?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb553"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb553-1"><a href="#cb553-1"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb553-2"><a href="#cb553-2"></a>  </span>
<span id="cb553-3"><a href="#cb553-3"></a>  <span class="co"># Cuerpo de la funci√≥n</span></span>
<span id="cb553-4"><a href="#cb553-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb553-5"><a href="#cb553-5"></a>  </span>
<span id="cb553-6"><a href="#cb553-6"></a>  <span class="co"># Resultado que devolvemos</span></span>
<span id="cb553-7"><a href="#cb553-7"></a>  <span class="fu">return</span>(area)</span>
<span id="cb553-8"><a href="#cb553-8"></a>  </span>
<span id="cb553-9"><a href="#cb553-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="argumentos-por-defecto-1" class="slide level2">
<h2>Argumentos por defecto</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb554"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb554-1"><a href="#cb554-1"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb554-2"><a href="#cb554-2"></a>  </span>
<span id="cb554-3"><a href="#cb554-3"></a>  <span class="co"># Cuerpo de la funci√≥n</span></span>
<span id="cb554-4"><a href="#cb554-4"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb554-5"><a href="#cb554-5"></a>  </span>
<span id="cb554-6"><a href="#cb554-6"></a>  <span class="co"># Resultado que devolvemos</span></span>
<span id="cb554-7"><a href="#cb554-7"></a>  <span class="fu">return</span>(area)</span>
<span id="cb554-8"><a href="#cb554-8"></a>  </span>
<span id="cb554-9"><a href="#cb554-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora <span class="hl-yellow"><strong>por defecto</strong></span> el segundo lado ser√° igual al primero (si se lo a√±adimos usar√° ambos).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb555"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb555-1"><a href="#cb555-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>) <span class="co"># cuadrado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb557"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb557-1"><a href="#cb557-1"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>, <span class="at">lado_2 =</span> <span class="dv">7</span>) <span class="co"># rect√°ngulo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35</code></pre>
</div>
</div>
</section>
<section id="salida-m√∫ltiple" class="slide level2">
<h2>Salida m√∫ltiple</h2>
<p>Compliquemos un poco la funci√≥n y a√±adamos en la salida los valores de cada lado, etiquetados como <code>lado_1</code> y <code>lado_2</code>, <span class="hl-yellow"><strong>empaquetando la salida en una vector</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb559" data-code-line-numbers="7-8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb559-1"><a href="#cb559-1"></a><span class="co"># Definici√≥n del nombre de funci√≥n y argumentos de entrada</span></span>
<span id="cb559-2"><a href="#cb559-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb559-3"><a href="#cb559-3"></a>  </span>
<span id="cb559-4"><a href="#cb559-4"></a>  <span class="co"># Cuerpo de la funci√≥n</span></span>
<span id="cb559-5"><a href="#cb559-5"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb559-6"><a href="#cb559-6"></a>  </span>
<span id="cb559-7"><a href="#cb559-7"></a>  <span class="co"># Resultado</span></span>
<span id="cb559-8"><a href="#cb559-8"></a>  <span class="fu">return</span>(<span class="fu">c</span>(<span class="st">"area"</span> <span class="ot">=</span> area, <span class="st">"lado_1"</span> <span class="ot">=</span> lado_1, <span class="st">"lado_2"</span> <span class="ot">=</span> lado_2))</span>
<span id="cb559-9"><a href="#cb559-9"></a>  </span>
<span id="cb559-10"><a href="#cb559-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="salida-m√∫ltiple-1" class="slide level2">
<h2>Salida m√∫ltiple</h2>
<p>Podemos complicar un poco m√°s la salida a√±adiendo una cuarta variable que nos diga, en funci√≥n de los argumentos, <span class="hl-yellow"><strong>si rect√°ngulo o cuadrado</strong></span>, teniendo que a√±adir en la salida una variable que de tipo caracter (o l√≥gica).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb560" data-code-line-numbers="7-9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb560-1"><a href="#cb560-1"></a><span class="co"># Definici√≥n del nombre de funci√≥n y argumentos de entrada</span></span>
<span id="cb560-2"><a href="#cb560-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb560-3"><a href="#cb560-3"></a>  </span>
<span id="cb560-4"><a href="#cb560-4"></a>  <span class="co"># Cuerpo de la funci√≥n</span></span>
<span id="cb560-5"><a href="#cb560-5"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb560-6"><a href="#cb560-6"></a>  </span>
<span id="cb560-7"><a href="#cb560-7"></a>  <span class="co"># Resultado</span></span>
<span id="cb560-8"><a href="#cb560-8"></a>  <span class="fu">return</span>(<span class="fu">c</span>(<span class="st">"area"</span> <span class="ot">=</span> area, <span class="st">"lado_1"</span> <span class="ot">=</span> lado_1, <span class="st">"lado_2"</span> <span class="ot">=</span> lado_2,</span>
<span id="cb560-9"><a href="#cb560-9"></a>           <span class="st">"tipo"</span> <span class="ot">=</span> <span class="fu">if_else</span>(lado_1 <span class="sc">==</span> lado_2, <span class="st">"cuadrado"</span>, <span class="st">"rect√°ngulo"</span>)))</span>
<span id="cb560-10"><a href="#cb560-10"></a>  </span>
<span id="cb560-11"><a href="#cb560-11"></a>}</span>
<span id="cb560-12"><a href="#cb560-12"></a><span class="fu">calcular_area</span>(<span class="dv">5</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        area       lado_1       lado_2         tipo 
        "15"          "5"          "3" "rect√°ngulo" </code></pre>
</div>
</div>
<div class="fragment">
<p><span class="hl-red"><strong>Problema</strong></span>: al intentar juntar n√∫meros y texto, lo convierte todo a n√∫meros. Podr√≠amos guardarlo todo en un <code>tibble()</code> como hemos aprendido o en un objeto conocido en <code>R</code> como <span class="hl-yellow"><strong>listas</strong></span></p>
</div>
</section>
<section id="introducci√≥n-a-listas" class="slide level2">
<h2>Introducci√≥n a listas</h2>
<p>Veamos un peque√±o resumen de los datos que ya conocemos:</p>
<ul>
<li><p><span class="hl-yellow"><strong>vectores</strong></span>: colecci√≥n de elementos de igual tipo. Pueden ser n√∫meros, caracteres o valores l√≥gicos, entre otros.</p></li>
<li><p><span class="hl-yellow"><strong>matrices</strong></span>: colecci√≥n BIDIMENSIONAL de elementos de igual tipo e igual longitud.</p></li>
<li><p><span class="hl-yellow"><strong>data.frame / tibble</strong></span>: colecci√≥n BIDIMENSIONAL de elementos de igual longitud pero de cualquier tipo.</p></li>
</ul>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>listas</strong></span> ser√°n <span class="hl-purple"><strong>colecciones de variables de diferente tipo y diferente longitud</strong></span>, con estructuras totalmente heter√≥geneas (incluso una lista puede tener dentro a su vez otra lista).</p>
</div>
</section>
<section id="introducci√≥n-a-listas-1" class="slide level2">
<h2>Introducci√≥n a listas</h2>
<p>Vamos a crear <span class="hl-yellow"><strong>nuestra primera lista</strong></span> con <code>list()</code> con tres elementos: el nombre de nuestros padres/madres, nuestro lugar de nacimiento y edades de nuestros hermanos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb562"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb562-1"><a href="#cb562-1"></a>var_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Paloma"</span>, <span class="st">"Gregorio"</span>)</span>
<span id="cb562-2"><a href="#cb562-2"></a>var_2 <span class="ot">&lt;-</span> <span class="st">"Madrid"</span></span>
<span id="cb562-3"><a href="#cb562-3"></a>var_3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">26</span>)</span>
<span id="cb562-4"><a href="#cb562-4"></a></span>
<span id="cb562-5"><a href="#cb562-5"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"progenitores"</span> <span class="ot">=</span> var_1, <span class="st">"lugar_nac"</span> <span class="ot">=</span> var_2, <span class="st">"edad_hermanos"</span> <span class="ot">=</span> var_3)</span>
<span id="cb562-6"><a href="#cb562-6"></a>lista</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$progenitores
[1] "Paloma"   "Gregorio"

$lugar_nac
[1] "Madrid"

$edad_hermanos
[1] 25 30 26</code></pre>
</div>
</div>
</section>
<section id="introducci√≥n-a-listas-2" class="slide level2">
<h2>Introducci√≥n a listas</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb564"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb564-1"><a href="#cb564-1"></a><span class="fu">length</span>(lista)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Si observas el objeto que hemos definido como lista, su <span class="hl-yellow"><strong>longitud</strong></span> del es de 3 ya que tenemos <strong>guardados tres elementos</strong>: un vector de caracteres (de longitud 2), un caracter (vector de longitud 1), y un vector de n√∫meros (de longitud 3)</p>
<div class="fragment">
<p>Tenemos guardados elementos de <span class="hl-yellow"><strong>distinto tipo</strong></span> (algo que ya pod√≠amos hacer) pero, adem√°s, de <strong>longitudes dispares</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb566"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb566-1"><a href="#cb566-1"></a><span class="fu">dim</span>(lista) <span class="co"># devolver√° NULL al no tener dos dimensiones</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb568"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb568-1"><a href="#cb568-1"></a><span class="fu">class</span>(lista) <span class="co"># de tipo lista</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
</div>
</section>
<section id="introducci√≥n-a-listas-3" class="slide level2">
<h2>Introducci√≥n a listas</h2>
<p>Si los junt√°semos con un <code>tibble()</code>, al tener distinta longitud, obtendr√≠amos un <span class="hl-red"><strong>error</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb570"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb570-1"><a href="#cb570-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb570-2"><a href="#cb570-2"></a><span class="fu">tibble</span>(<span class="st">"progenitores"</span> <span class="ot">=</span> var_1, <span class="st">"lugar_nac"</span> <span class="ot">=</span> va_2, <span class="st">"edad_hermanos"</span> <span class="ot">=</span> var_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval_tidy(xs[[j]], mask): object 'va_2' not found</code></pre>
</div>
</div>
</section>
<section id="introducci√≥n-a-listas-4" class="slide level2">
<h2>Introducci√≥n a listas</h2>
<ul>
<li><span class="hl-yellow"><strong>Acceder por √≠ndice</strong></span>: con el operador <code>[[i]]</code> accedemos al <strong>elemento i-√©simo</strong> de la lista.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb572"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb572-1"><a href="#cb572-1"></a>lista[[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Paloma"   "Gregorio"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Acceder por nombre</strong></span>: con <code>$nombre_elemento</code> accedemos por su nombre.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb574"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb574-1"><a href="#cb574-1"></a>lista<span class="sc">$</span>progenitores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Paloma"   "Gregorio"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>En contraposici√≥n, el <span class="hl-yellow"><strong>corchete simple</strong></span> nos permite acceder a <span class="hl-yellow"><strong>varios elementos</strong></span> a la vez</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb576"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb576-1"><a href="#cb576-1"></a><span class="co"># Varios elementos</span></span>
<span id="cb576-2"><a href="#cb576-2"></a>lista[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$progenitores
[1] "Paloma"   "Gregorio"

$lugar_nac
[1] "Madrid"</code></pre>
</div>
</div>
</div>
</section>
<section id="salida-m√∫ltiple-listas" class="slide level2">
<h2>Salida m√∫ltiple: listas</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb578" data-code-line-numbers="7-9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb578-1"><a href="#cb578-1"></a><span class="co"># Definici√≥n del nombre de funci√≥n y argumentos de entrada</span></span>
<span id="cb578-2"><a href="#cb578-2"></a>calcular_area <span class="ot">&lt;-</span> <span class="cf">function</span>(lado_1, <span class="at">lado_2 =</span> lado_1) {</span>
<span id="cb578-3"><a href="#cb578-3"></a>  </span>
<span id="cb578-4"><a href="#cb578-4"></a>  <span class="co"># Cuerpo de la funci√≥n</span></span>
<span id="cb578-5"><a href="#cb578-5"></a>  area <span class="ot">&lt;-</span> lado_1 <span class="sc">*</span> lado_2</span>
<span id="cb578-6"><a href="#cb578-6"></a>  </span>
<span id="cb578-7"><a href="#cb578-7"></a>  <span class="co"># Resultado</span></span>
<span id="cb578-8"><a href="#cb578-8"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"area"</span> <span class="ot">=</span> area, <span class="st">"lado_1"</span> <span class="ot">=</span> lado_1, <span class="st">"lado_2"</span> <span class="ot">=</span> lado_2,</span>
<span id="cb578-9"><a href="#cb578-9"></a>           <span class="st">"tipo"</span> <span class="ot">=</span> <span class="fu">if_else</span>(lado_1 <span class="sc">==</span> lado_2, <span class="st">"cuadrado"</span>, <span class="st">"rect√°ngulo"</span>)))</span>
<span id="cb578-10"><a href="#cb578-10"></a>  </span>
<span id="cb578-11"><a href="#cb578-11"></a>}</span>
<span id="cb578-12"><a href="#cb578-12"></a><span class="fu">calcular_area</span>(<span class="dv">5</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$area
[1] 15

$lado_1
[1] 5

$lado_2
[1] 3

$tipo
[1] "rect√°ngulo"</code></pre>
</div>
</div>
</section>
<section id="orden-de-los-argumentos" class="slide level2">
<h2>Orden de los argumentos</h2>
<p>Antes nos daba igual el orden de los argumentos pero ahora el <span class="hl-yellow"><strong>orden de los argumentos de entrada importa</strong></span>, ya que en la salida incluimos <code>lado_1</code> y <code>lado_2</code>.</p>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Recomendaci√≥n</strong></p>
</div>
<div class="callout-content">
<p>Como se comentaba, altamente recomendable hacer la llamada a la funci√≥n <span class="hl-yellow"><strong>indicando expl√≠citamente los argumentos</strong></span> para mejorar <strong>legibilidad e interpretabilidad</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb580"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb580-1"><a href="#cb580-1"></a><span class="co"># Equivalente a calcular_area(5, 3)</span></span>
<span id="cb580-2"><a href="#cb580-2"></a><span class="fu">calcular_area</span>(<span class="at">lado_1 =</span> <span class="dv">5</span>, <span class="at">lado_2 =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$area
[1] 15

$lado_1
[1] 5

$lado_2
[1] 3

$tipo
[1] "rect√°ngulo"</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="funciones-generando-conocimiento" class="slide level2">
<h2>Funciones: generando conocimiento</h2>
<p>Parece una tonter√≠a lo que hemos hecho pero hemos cruzado una frontera importante: hemos pasado de <span class="hl-yellow"><strong>consumir conocimiento</strong></span> (c√≥digo de otros paquetes, elaborado por otros/as), a <span class="hl-purple"><strong>generar conocimiento</strong></span>, creando nuestras propias funciones.</p>
<div class="fragment">
<p>Las funciones van a ser claves en tu d√≠a a d√≠a ya que te permitir√° automatizar c√≥digo que vas a repetir una y otra vez: empaquetando ese c√≥digo bajo un alias (nombre de la funci√≥n) vas a <span class="hl-yellow"><strong>poder usarlo una y otra vez sin necesidad de programarlo (por lo que hacer el doble de trabajo no implicar√° trabajar el doble)</strong></span></p>
</div>
</section>
<section id="variables-locales-vs-globales" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Un aspecto importante sobre el que reflexionar con las funciones: ¬øqu√© sucede si <span class="hl-yellow"><strong>nombramos a una variable dentro</strong></span> de una funci√≥n a la que se nos ha <strong>olvidado asignar</strong> un valor dentro de la misma?</p>
<div class="fragment">
<p>Debemos ser cautos al usar funciones en <code>R</code>, ya que debido a la <span class="hl-yellow"><strong>¬´regla lexicogr√°fica¬ª</strong></span>, si una variable no se define dentro de la funci√≥n, <code>R</code> <span class="hl-purple"><strong>buscar√° dicha variable en el entorno</strong></span> de variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb582"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb582-1"><a href="#cb582-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb582-2"><a href="#cb582-2"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb582-3"><a href="#cb582-3"></a>    </span>
<span id="cb582-4"><a href="#cb582-4"></a>  <span class="fu">print</span>(x) <span class="co"># No devuelve nada, solo realiza la acci√≥n </span></span>
<span id="cb582-5"><a href="#cb582-5"></a>}</span>
<span id="cb582-6"><a href="#cb582-6"></a><span class="fu">funcion_ejemplo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-locales-vs-globales-1" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Si una variable <span class="hl-yellow"><strong>ya est√° definida fuera de la funci√≥n (entorno global)</strong></span>, y adem√°s es usada dentro de cambiando su valor, el valor <span class="hl-yellow"><strong>solo cambia dentro</strong></span> pero <span class="hl-red"><strong>no en el entorno global</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb584"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb584-1"><a href="#cb584-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb584-2"><a href="#cb584-2"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb584-3"><a href="#cb584-3"></a>    </span>
<span id="cb584-4"><a href="#cb584-4"></a>  x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb584-5"><a href="#cb584-5"></a>  <span class="fu">print</span>(x) <span class="co"># lo que vale dentro</span></span>
<span id="cb584-6"><a href="#cb584-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb585"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb585-1"><a href="#cb585-1"></a><span class="co"># lo que vale dentro</span></span>
<span id="cb585-2"><a href="#cb585-2"></a><span class="fu">funcion_ejemplo</span>() <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb587"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb587-1"><a href="#cb587-1"></a><span class="co"># lo que vale fuera</span></span>
<span id="cb587-2"><a href="#cb587-2"></a><span class="fu">print</span>(x) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="variables-locales-vs-globales-2" class="slide level2">
<h2>Variables locales vs globales</h2>
<p>Si queremos que adem√°s de cambiar localmente lo haga <span class="hl-yellow"><strong>globalmente</strong></span> deberemos usar la <span class="hl-yellow"><strong>doble asignaci√≥n</strong></span> (<code>&lt;&lt;-</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb589"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb589-1"><a href="#cb589-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb589-2"><a href="#cb589-2"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb589-3"><a href="#cb589-3"></a>funcion_ejemplo <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb589-4"><a href="#cb589-4"></a>  </span>
<span id="cb589-5"><a href="#cb589-5"></a>  <span class="co"># no cambia globalmente, solo localmente</span></span>
<span id="cb589-6"><a href="#cb589-6"></a>  x <span class="ot">&lt;-</span> <span class="dv">3</span> </span>
<span id="cb589-7"><a href="#cb589-7"></a>  <span class="co"># cambia globalmente</span></span>
<span id="cb589-8"><a href="#cb589-8"></a>  y <span class="ot">&lt;&lt;-</span> <span class="dv">0</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb589-9"><a href="#cb589-9"></a>  </span>
<span id="cb589-10"><a href="#cb589-10"></a>  <span class="fu">print</span>(x)</span>
<span id="cb589-11"><a href="#cb589-11"></a>  <span class="fu">print</span>(y)</span>
<span id="cb589-12"><a href="#cb589-12"></a>}</span>
<span id="cb589-13"><a href="#cb589-13"></a></span>
<span id="cb589-14"><a href="#cb589-14"></a><span class="fu">funcion_ejemplo</span>() <span class="co"># lo que vale dentro</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3
[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb591"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb591-1"><a href="#cb591-1"></a>x <span class="co"># lo que vale fuera</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb593"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb593-1"><a href="#cb593-1"></a>y <span class="co"># lo que vale fuera</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="tu-turno-7" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-11" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-11-1"><span class="hl-yellow"><strong>Ej 1</strong></span></a></li><li><a href="#tabset-11-2"><span class="hl-yellow"><strong>Ej 2</strong></span></a></li><li><a href="#tabset-11-3"><span class="hl-yellow"><strong>Ej 3</strong></span></a></li><li><a href="#tabset-11-4"><span class="hl-yellow"><strong>Ej 4</strong></span></a></li><li><a href="#tabset-11-5"><span class="hl-yellow"><strong>Ej 5</strong></span></a></li><li><a href="#tabset-11-6"><span class="hl-yellow"><strong>Ej 6</strong></span></a></li><li><a href="#tabset-11-7"><span class="hl-yellow"><strong>Ej 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-11-1">
<p>üìù Modifica el c√≥digo inferior para definir una funci√≥n llamada <code>funcion_suma</code>, de forma que dados dos elementos, devuelve su suma.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb595"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb595-1"><a href="#cb595-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb595-2"><a href="#cb595-2"></a>  suma <span class="ot">&lt;-</span> <span class="co"># c√≥digo a ejecutar</span></span>
<span id="cb595-3"><a href="#cb595-3"></a>  <span class="fu">return</span>()</span>
<span id="cb595-4"><a href="#cb595-4"></a>}</span>
<span id="cb595-5"><a href="#cb595-5"></a><span class="co"># Aplicamos la funci√≥n</span></span>
<span id="cb595-6"><a href="#cb595-6"></a><span class="fu">suma</span>(<span class="dv">3</span>, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb596"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb596-1"><a href="#cb596-1"></a>funcion_suma <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb596-2"><a href="#cb596-2"></a>  suma <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb596-3"><a href="#cb596-3"></a>  <span class="fu">return</span>(suma)</span>
<span id="cb596-4"><a href="#cb596-4"></a>}</span>
<span id="cb596-5"><a href="#cb596-5"></a><span class="fu">funcion_suma</span>(<span class="dv">3</span>, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-2">
<p>üìù Modifica el c√≥digo inferior para definir una funci√≥n llamada <code>funcion_producto</code>, de forma que dados dos elementos, devuelve su producto, pero que por defecto calcule el cuadrado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb597"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb597-1"><a href="#cb597-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb597-2"><a href="#cb597-2"></a>  producto <span class="ot">&lt;-</span> <span class="co"># c√≥digo de la multiplicaci√≥n</span></span>
<span id="cb597-3"><a href="#cb597-3"></a>  <span class="fu">return</span>()</span>
<span id="cb597-4"><a href="#cb597-4"></a>}</span>
<span id="cb597-5"><a href="#cb597-5"></a><span class="fu">producto</span>(<span class="dv">3</span>)</span>
<span id="cb597-6"><a href="#cb597-6"></a><span class="fu">producto</span>(<span class="dv">3</span>, <span class="sc">-</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb598"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb598-1"><a href="#cb598-1"></a>funcion_producto <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">y =</span> x) {</span>
<span id="cb598-2"><a href="#cb598-2"></a>  producto <span class="ot">&lt;-</span> x <span class="sc">*</span> y</span>
<span id="cb598-3"><a href="#cb598-3"></a>  <span class="fu">return</span>(producto)</span>
<span id="cb598-4"><a href="#cb598-4"></a>}</span>
<span id="cb598-5"><a href="#cb598-5"></a><span class="fu">funcion_producto</span>(<span class="dv">3</span>)</span>
<span id="cb598-6"><a href="#cb598-6"></a><span class="fu">funcion_producto</span>(<span class="dv">3</span>, <span class="sc">-</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-3">
<p>üìù Define una funci√≥n llamada <code>igualdad_nombres</code> que, dados dos nombres, nos diga si son iguales o no. Hazlo considerando importantes las may√∫sculas, y sin que importen las may√∫sculas. Usa el paquete <code>{stringr}</code>.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb599"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb599-1"><a href="#cb599-1"></a><span class="co"># Distinguiendo may√∫sculas</span></span>
<span id="cb599-2"><a href="#cb599-2"></a>igualdad_nombres <span class="ot">&lt;-</span> <span class="cf">function</span>(persona_1, persona_2) {</span>
<span id="cb599-3"><a href="#cb599-3"></a>  <span class="fu">return</span>(persona_1 <span class="sc">==</span> persona_2)</span>
<span id="cb599-4"><a href="#cb599-4"></a>}</span>
<span id="cb599-5"><a href="#cb599-5"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"javi"</span>)</span>
<span id="cb599-6"><a href="#cb599-6"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"Luc√≠a"</span>)</span>
<span id="cb599-7"><a href="#cb599-7"></a></span>
<span id="cb599-8"><a href="#cb599-8"></a><span class="co"># Sin importar may√∫sculas</span></span>
<span id="cb599-9"><a href="#cb599-9"></a>igualdad_nombres <span class="ot">&lt;-</span> <span class="cf">function</span>(persona_1, persona_2) {</span>
<span id="cb599-10"><a href="#cb599-10"></a>  <span class="fu">return</span>(<span class="fu">str_to_upper</span>(persona_1) <span class="sc">==</span> <span class="fu">str_to_upper</span>(persona_2))</span>
<span id="cb599-11"><a href="#cb599-11"></a>  <span class="co"># otra opci√≥n</span></span>
<span id="cb599-12"><a href="#cb599-12"></a>  <span class="fu">return</span>(<span class="fu">str_equal</span>(persona_1, persona_2, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb599-13"><a href="#cb599-13"></a>}</span>
<span id="cb599-14"><a href="#cb599-14"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"javi"</span>)</span>
<span id="cb599-15"><a href="#cb599-15"></a><span class="fu">igualdad_nombres</span>(<span class="st">"Javi"</span>, <span class="st">"Luc√≠a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-4">
<p>üìù Crea una funci√≥n llamada <code>calculo_IMC</code> que, dados dos argumentos (peso y estatura en metros) y un nombre, devuelva una lista con el IMC (<span class="math inline">\(peso/(estatura_m^2)\)</span>) y el nombre.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb600"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb600-1"><a href="#cb600-1"></a>calculo_IMC <span class="ot">&lt;-</span> <span class="cf">function</span>(nombre, peso, estatura) {</span>
<span id="cb600-2"><a href="#cb600-2"></a>  </span>
<span id="cb600-3"><a href="#cb600-3"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"nombre"</span> <span class="ot">=</span> nombre, <span class="st">"IMC"</span> <span class="ot">=</span> peso<span class="sc">/</span>(estatura<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb600-4"><a href="#cb600-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-5">
<p>üìù Repite el ejercicio anterior pero con otro argumento opcional que se llame unidades (por defecto, <code>unidades = "metros"</code>). Desarrolla la funci√≥n de forma que haga lo correcto si <code>unidades = "metros"</code> y si <code>unidades = "cent√≠metros"</code>.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb601"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb601-1"><a href="#cb601-1"></a>calculo_IMC <span class="ot">&lt;-</span> <span class="cf">function</span>(nombre, peso, estatura, <span class="at">unidades =</span> <span class="st">"metros"</span>) {</span>
<span id="cb601-2"><a href="#cb601-2"></a>  </span>
<span id="cb601-3"><a href="#cb601-3"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="st">"nombre"</span> <span class="ot">=</span> nombre,</span>
<span id="cb601-4"><a href="#cb601-4"></a>              <span class="st">"IMC"</span> <span class="ot">=</span> peso<span class="sc">/</span>(<span class="fu">if_else</span>(unidades <span class="sc">==</span> <span class="st">"metros"</span>, estatura, estatura<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb601-5"><a href="#cb601-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-6">
<p>üìù Crea un tibble ficticio de 7 personas, con tres variables (inventa nombre, y simula peso, estatura en cent√≠metros), y aplica la funci√≥n definida de forma que obtengamos una cuarta columna con su IMC.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb602"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb602-1"><a href="#cb602-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb602-2"><a href="#cb602-2"></a>  <span class="fu">tibble</span>(<span class="st">"nombres"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>, <span class="st">"laura"</span>,</span>
<span id="cb602-3"><a href="#cb602-3"></a>                       <span class="st">"ana"</span>, <span class="st">"carlos"</span>, <span class="st">"leo"</span>, <span class="cn">NA</span>),</span>
<span id="cb602-4"><a href="#cb602-4"></a>         <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">7</span>, <span class="at">mean =</span> <span class="dv">70</span>, <span class="at">sd =</span> <span class="dv">1</span>),</span>
<span id="cb602-5"><a href="#cb602-5"></a>         <span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">7</span>, <span class="at">mean =</span> <span class="dv">168</span>, <span class="at">sd =</span> <span class="dv">5</span>))</span>
<span id="cb602-6"><a href="#cb602-6"></a></span>
<span id="cb602-7"><a href="#cb602-7"></a>datos <span class="sc">|&gt;</span> </span>
<span id="cb602-8"><a href="#cb602-8"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> <span class="fu">calculo_IMC</span>(nombres, peso, estatura, <span class="at">unidades =</span> <span class="st">"cent√≠metros"</span>)<span class="sc">$</span>IMC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-11-7">
<p>üìù Crea una funci√≥n llamada <code>atajo</code> que tenga dos argumentos num√©ricos <code>x</code> e <code>y</code>. Si ambos son iguales, debes devolver <code>"iguales"</code> y hacer que la funci√≥n acaba autom√°ticamente (piensa cu√°ndo una funci√≥n sale). OJO: <code>x</code> e <code>y</code> podr√≠an ser vectores. Si son distintos (de igual de longitud) calcula la proporci√≥n de elementos diferentes. Si son distintos (por ser distinta longitud), devuelve los elementos que no sean comunes.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb603"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb603-1"><a href="#cb603-1"></a>atajo <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb603-2"><a href="#cb603-2"></a>  </span>
<span id="cb603-3"><a href="#cb603-3"></a>  <span class="cf">if</span> (<span class="fu">all</span>(x <span class="sc">==</span> y) <span class="sc">&amp;</span> <span class="fu">length</span>(x) <span class="sc">==</span> <span class="fu">length</span>(y)) { <span class="fu">return</span>(<span class="st">"iguales"</span>) }</span>
<span id="cb603-4"><a href="#cb603-4"></a>  <span class="cf">else</span> {</span>
<span id="cb603-5"><a href="#cb603-5"></a>   </span>
<span id="cb603-6"><a href="#cb603-6"></a>    <span class="cf">if</span> (<span class="fu">length</span>(x) <span class="sc">==</span> <span class="fu">length</span>(y)) {</span>
<span id="cb603-7"><a href="#cb603-7"></a>      </span>
<span id="cb603-8"><a href="#cb603-8"></a>      n_diff <span class="ot">&lt;-</span> <span class="fu">sum</span>(x <span class="sc">!=</span> y) <span class="sc">/</span> <span class="fu">length</span>(x)</span>
<span id="cb603-9"><a href="#cb603-9"></a>      <span class="fu">return</span>(n_diff)</span>
<span id="cb603-10"><a href="#cb603-10"></a>      </span>
<span id="cb603-11"><a href="#cb603-11"></a>    } <span class="cf">else</span> {</span>
<span id="cb603-12"><a href="#cb603-12"></a>      </span>
<span id="cb603-13"><a href="#cb603-13"></a>      diff_elem <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">c</span>(<span class="fu">setdiff</span>(x, y), <span class="fu">setdiff</span>(y, x)))</span>
<span id="cb603-14"><a href="#cb603-14"></a>      <span class="fu">return</span>(diff_elem)</span>
<span id="cb603-15"><a href="#cb603-15"></a>    }</span>
<span id="cb603-16"><a href="#cb603-16"></a>    </span>
<span id="cb603-17"><a href="#cb603-17"></a>  }</span>
<span id="cb603-18"><a href="#cb603-18"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-7" class="slide level2">
<h2>üê£ Caso pr√°ctico</h2>
<p>Para practicar con funciones vamos a crear un completo <strong>conversor de temperaturas</strong> que, dada una temperatura en Fahrenheit, Celsius o Kelvin, la convierta a cualquiera de las otras</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/funciones-en-r/"><strong>workbook</strong></a> hasta construirlo.</p>
</section></section>
<section>
<section id="clase-8" class="title-slide slide level1 center">
<h1>Clase 8: <span class="flow">tidydata</span></h1>
<p><span style="color:#444442;"><strong>Nuestra base de datos: tibble. Tidydata: un multiverso de datos limpios</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-8">üíª Ejercicios resueltos: tidy data</a></p></li>
<li><p><a href="#/caso-practico-8">üê£ Workbook/caso pr√°ctico</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="previously-in-breaking-bad" class="slide level2">
<h2>Previously, in Breaking Bad‚Ä¶</h2>
<p>Nuestro <span class="hl-yellow"><strong>formato final de base de datos</strong></span> ser√° el objeto de tipo <code>tibble</code>, un <code>data.frame</code> mejorado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb604"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb604-1"><a href="#cb604-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb604-2"><a href="#cb604-2"></a><span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>), <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
<ul>
<li><p><span class="hl-yellow"><strong>Metainformaci√≥n</strong></span>: en la cabecera nos dice ya autom√°ticamente el n√∫mero de filas y columnas, y el tipo de cada variable</p></li>
<li><p><span class="hl-yellow"><strong>Recursividad</strong></span>: permite definir las variables secuencialmente (como hemos visto)</p></li>
<li><p><span class="hl-yellow"><strong>Consistencia</strong></span>: si accedes a una columna que no existe avisa con un warning</p></li>
<li><p><span class="hl-yellow"><strong>Por filas</strong></span>: permite crear por filas con <code>tribble()</code></p></li>
</ul>
</section>
<section id="previously-in-breaking-bad-1" class="slide level2">
<h2>Previously, in Breaking Bad‚Ä¶</h2>
<p>Para definir un <code>tibble()</code> nosotro mismos tenemos dos opciones:</p>
<ul>
<li><span class="hl-yellow"><strong>Concatenando vectores</strong></span> que ya tengamos definidos, haciendo uso de la funci√≥n <code>tibble()</code> del paquete <code>{tibble}</code> (ya incluido en <code>{tidyverse}</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb606"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb606-1"><a href="#cb606-1"></a>estatura <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>)</span>
<span id="cb606-2"><a href="#cb606-2"></a>peso <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>)</span>
<span id="cb606-3"><a href="#cb606-3"></a>IMC <span class="ot">&lt;-</span>  peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb606-4"><a href="#cb606-4"></a><span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> estatura, <span class="st">"peso"</span> <span class="ot">=</span> peso,</span>
<span id="cb606-5"><a href="#cb606-5"></a>       <span class="st">"IMC"</span> <span class="ot">=</span> IMC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
</section>
<section id="previously-in-breaking-bad-2" class="slide level2">
<h2>Previously, in Breaking Bad‚Ä¶</h2>
<ul>
<li><span class="hl-yellow"><strong>Directamente en tibble</strong></span> proporcionando manualmente valores y nombres de variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb608"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb608-1"><a href="#cb608-1"></a><span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>),</span>
<span id="cb608-2"><a href="#cb608-2"></a>       <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb608-3"><a href="#cb608-3"></a>       <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
</section>
<section id="r-base-vs-tidyverse" class="slide level2">
<h2>R base vs Tidyverse</h2>
<p>Hasta ahora todo lo que hemos hecho en <code>R</code> lo hemos realizado en el paradigma de programaci√≥n conocido como <span class="hl-yellow"><strong>R base</strong></span>. Y es que cuando <code>R</code> naci√≥ como lenguaje, muchos de los que programaban en √©l imitaron formas y metodolog√≠as heredadas de otros lenguajes, basado en el uso de</p>
<ul>
<li><p>Bucles <span class="hl-yellow"><strong>for</strong></span></p></li>
<li><p>Bucles <span class="hl-yellow"><strong>while</strong></span></p></li>
<li><p>Estructuras <span class="hl-yellow"><strong>if-else</strong></span></p></li>
</ul>
<p>Y aunque conocer dichas estructuras puede sernos en algunos casos interesantes, en la <span class="hl-red"><strong>mayor√≠a de ocasiones han quedado caducas y vamos a poder evitarlas</strong></span> (en especial los bucles) ya que <code>R</code> est√° especialmente <span class="hl-yellow"><strong>dise√±ado para trabajar de manera funcional</strong></span> (en lugar de elemento a elemento).</p>
</section>
<section id="qu√©-es-tidyverse" class="slide level2">
<h2>¬øQu√© es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/flow_tidyverse.jpg"></p>
</div>
</div>
<p>En ese contexto de programaci√≥n funcional, hace una d√©cada nac√≠a <code>{tidyverse}</code>, un <span class="hl-yellow"><strong>¬´universo¬ª de paquetes</strong></span> para garantizar un flujo de trabajo eficiente, coherente y lexicogr√°ficamente sencillo de entender, basado en la idea de que <span class="hl-purple"><strong>nuestros datos est√°n limpios y ordenados (tidy)</strong></span></p>
</section>
<section id="qu√©-es-tidyverse-1" class="slide level2">
<h2>¬øQu√© es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
<ul>
<li><code>{lubridate}</code> manejo de fechas</li>
<li><code>{rvest}</code>: web scraping</li>
<li><code>{tidymodels}</code>: modelizaci√≥n/predicci√≥n</li>
</ul>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: optimizando data.frame</li>
<li><code>{tidyr}</code>: limpieza de datos</li>
<li><code>{readr}</code>: carga datos rectangulares (.csv), <code>{readxl}</code> para importar archivos .xls y .xlsx</li>
<li><code>{dplyr}</code>: gram√°tica para depurar</li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{purrr}</code>: manejo de listas</li>
<li><code>{forcats}</code>: manejo de cualitativas</li>
<li><code>{ggplot2}</code>: visualizaci√≥n de datos</li>
</ul>
</div>
</div>
</section>
<section id="qu√©-es-tidyverse-2" class="slide level2">
<h2>¬øQu√© es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
<ul>
<li><code>{lubridate}</code> manejo de fechas</li>
<li><code>{rvest}</code>: web scraping</li>
<li><code>{tidymodels}</code>: modelizaci√≥n/predicci√≥n</li>
</ul>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: <span class="hl-yellow"><strong>optimizando data.frame</strong></span></li>
<li><code>{tidyr}</code>: <span class="hl-yellow"><strong>limpieza de datos</strong></span></li>
<li><code>{readr}</code>: carga datos rectangulares (.csv), <code>{readxl}</code> para importar archivos .xls y .xlsx</li>
<li><code>{dplyr}</code>: gram√°tica para depurar</li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{purrr}</code>: manejo de listas</li>
<li><code>{forcats}</code>: manejo de cualitativas</li>
<li><code>{ggplot2}</code>: visualizaci√≥n de datos</li>
</ul>
</div>
</div>
</section>
<section id="filosof√≠a-base-tidy-data" class="slide level2">
<h2>Filosof√≠a base: tidy data</h2>
<blockquote>
<p>Tidy datasets are all alike, but every messy dataset is messy in its own way (Hadley Wickham, Chief Scientist en RStudio)</p>
</blockquote>
<div style="font-size:120px; text-align: center; color:#F8DF58;">
<p><b>TIDY</b><b><span style="color:#CAB0EE;">VERSE</span></b></p>
</div>
<p>El <span class="hl-purple"><strong>universo</strong></span> de paquetes <code>{tidyverse}</code> se basa en la idea introducida por <strong>Hadley Wickham</strong> (el Dios al que rezamos) de <span class="hl-yellow"><strong>estandarizar</strong></span> el formato de los datos para</p>
<div>
<ul>
<li class="fragment"><span class="hl-green"><strong>sistematizar</strong></span> la depuraci√≥n</li>
<li class="fragment">hacer m√°s <span class="hl-green"><strong>sencillo</strong></span> su manipulaci√≥n.</li>
<li class="fragment">c√≥digo <span class="hl-green"><strong>legible</strong></span></li>
</ul>
</div>
</section>
<section id="reglas-del-tidy-data" class="slide level2">
<h2>Reglas del tidy data</h2>
<p>Lo primero por tanto ser√° entender qu√© son los <span class="hl-yellow"><strong>conjuntos tidydata</strong></span> ya que todo <code>{tidyverse}</code> se basa en que los datos est√°n estandarizados.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment fade-in">
<ol type="1">
<li>Cada <span class="hl-yellow"><strong>variable</strong></span> en una <span class="hl-purple"><strong>√∫nica columna</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="2" type="1">
<li>Cada <span class="hl-yellow"><strong>individuo</strong></span> en una <span class="hl-purple"><strong>fila diferente</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="3" type="1">
<li>Cada <span class="hl-yellow"><strong>celda</strong></span> con un <span class="hl-purple"><strong>√∫nico valor</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="4" type="1">
<li>Cada <span class="hl-yellow"><strong>dataset</strong></span> en un <span class="hl-purple"><strong>tibble</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="5" type="1">
<li>Si queremos cruzar <span class="hl-yellow"><strong>m√∫ltiples tablas</strong></span> debemos tener una <span class="hl-purple"><strong>columna com√∫n</strong></span></li>
</ol>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidy_def.jpg" style="width:160.0%"></p>
</div>
</div>
</section>
<section id="tuber√≠a-pipe" class="slide level2">
<h2>Tuber√≠a (pipe)</h2>
<p>En <code>{tidyverse}</code> ser√° clave el <span class="hl-yellow"><strong>operador pipe (tuber√≠a)</strong></span> definido como <code>|&gt;</code> (<span class="hl-purple"><strong>ctrl+shift+M</strong></span>): ser√° una <span class="hl-yellow"><strong>tuber√≠a que recorre los datos</strong></span> y los transforma.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p>En R base, si queremos aplicar tres funciones <code>first()</code>, <code>second()</code> y <code>third()</code> en orden, ser√≠a</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb610"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb610-1"><a href="#cb610-1"></a><span class="fu">third</span>(<span class="fu">second</span>(<span class="fu">first</span>(datos)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>En <code>{tidyverse}</code> podremos <span class="hl-yellow"><strong>leer de izquierda a derecha</strong></span> y separar los datos de las acciones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb611"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb611-1"><a href="#cb611-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">first</span>() <span class="sc">|&gt;</span> <span class="fu">second</span>() <span class="sc">|&gt;</span> <span class="fu">third</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Apunte importante</strong></p>
</div>
<div class="callout-content">
<p>Desde la versi√≥n 4.1.0 de <code>R</code> disponemos de <code>|&gt;</code>, un pipe <strong>nativo</strong> disponible <span class="hl-purple"><strong>fuera de tidyverse</strong></span>, sustituyendo al <span class="hl-red"><strong>antiguo pipe</strong></span> <code>%&gt;%</code> que depend√≠a del paquete <code>{magrittr}</code> (bastante problem√°tico).</p>
</div>
</div>
</div>
</div>
</section>
<section id="tuber√≠a-pipe-1" class="slide level2">
<h2>Tuber√≠a (pipe)</h2>
<p>La principal ventaja es que el <span class="hl-yellow"><strong>c√≥digo sea muy legible (casi literal)</strong></span> pudiendo hacer grandes operaciones con los datos con apenas c√≥digo.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb612"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb612-1"><a href="#cb612-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb612-2"><a href="#cb612-2"></a>  <span class="fu">limpio</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-3"><a href="#cb612-3"></a>  <span class="fu">filtro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-4"><a href="#cb612-4"></a>  <span class="fu">selecciono</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-5"><a href="#cb612-5"></a>  <span class="fu">ordeno</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-6"><a href="#cb612-6"></a>  <span class="fu">modifico</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-7"><a href="#cb612-7"></a>  <span class="fu">renombro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-8"><a href="#cb612-8"></a>  <span class="fu">agrupo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-9"><a href="#cb612-9"></a>  <span class="fu">cuento</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-10"><a href="#cb612-10"></a>  <span class="fu">resumo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb612-11"><a href="#cb612-11"></a>  <span class="fu">pinto</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<center>
<img src="img/logo_pipe.png" width="360px">
</center>
</div>
</div>
</section>
<section id="datos-sucios-messy-data" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>¬øPero qu√© aspecto tienen los <span class="hl-yellow"><strong>datos no tidy</strong></span>? Vamos a cargar la tabla <code>table4a</code> del paquete <code>{tidyr}</code> (ya lo tenemos cargado del entorno tidyverse).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb613"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb613-1"><a href="#cb613-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb613-2"><a href="#cb613-2"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¬øQu√© puede estar fallando?</strong></span></p>
</section>
<section id="pivotar-pivot_longer" class="slide level2">
<h2>Pivotar: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb615"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb615-1"><a href="#cb615-1"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<p>‚ùé Cada <span class="hl-red"><strong>fila representa dos observaciones</strong></span> (1999 y 2000) ‚Üí las columnas <code>1999</code> y <code>2000</code> en realidad deber√≠an ser en s√≠ <span class="hl-yellow"><strong>valores de una variable</strong></span> y no nombres de columnas.</p>
</div>
</div>
<div class="fragment">
<p>Incluiremos una <span class="hl-yellow"><strong>nueva columna</strong></span> que nos guarde el a√±o y otra que guarde el valor de la variable de inter√©s en cada uno de esos a√±os. Y lo haremos con la funci√≥n <code>pivot_longer()</code>: <span class="hl-yellow"><strong>pivotaremos la tabla</strong></span> a formato long:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb617"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb617-1"><a href="#cb617-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb617-2"><a href="#cb617-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div>
</section>
<section id="pivotar-pivot_longer-1" class="slide level2">
<h2>Pivotar: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb619"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb619-1"><a href="#cb619-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb619-2"><a href="#cb619-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>),</span>
<span id="cb619-3"><a href="#cb619-3"></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb619-4"><a href="#cb619-4"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/table4a.jpg"></p>
</div>
</div>
<ul>
<li><code>cols</code>: <span class="hl-yellow"><strong>nombre de las variables a pivotar</strong></span></li>
<li><code>names_to</code>: nombre de la nueva variable a la quemandamos la <span class="hl-yellow"><strong>cabecera</strong></span> de la tabla (los nombres).</li>
<li><code>values_to</code>: nombre de la nueva variable a la que vamos a mandar los <span class="hl-yellow"><strong>datos</strong></span>.</li>
</ul>
</section>
<section id="datos-sucios-messy-data-1" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos otro ejemplo con la tabla <code>table2</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb621"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb621-1"><a href="#cb621-1"></a>table2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¬øQu√© puede estar fallando?</strong></span></p>
</section>
<section id="pivotar-pivot_wider" class="slide level2">
<h2>Pivotar: pivot_wider()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>‚ùé Cada <span class="hl-red"><strong>observaci√≥n est√° dividido en dos filas</strong></span> ‚Üí los <span class="hl-yellow"><strong>registros con el mismo a√±o deber√≠an ser el mismo</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Lo que haremos ser√° lo opuesto: con <code>pivot_wider()</code> <span class="hl-yellow"><strong>ensancharemos la tabla</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb624"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb624-1"><a href="#cb624-1"></a>table2 <span class="sc">|&gt;</span>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country      year  cases population
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-sucios-messy-data-2" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos otro ejemplo con la tabla <code>table3</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb626"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb626-1"><a href="#cb626-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¬øQu√© puede estar fallando?</strong></span></p>
</section>
<section id="separar-separate" class="slide level2">
<h2>Separar: separate()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb628"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb628-1"><a href="#cb628-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>‚ùé Cada <span class="hl-red"><strong>celda contiene varios valores</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Lo que haremos ser√° hacer uso de la funci√≥n <code>separate()</code> para mandar <span class="hl-yellow"><strong>separar cada valor</strong></span> a una columna diferente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb630"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb630-1"><a href="#cb630-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="separar-separate-1" class="slide level2">
<h2>Separar: separate()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb632"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb632-1"><a href="#cb632-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
<p>F√≠jate que los datos, aunque los ha separado, <span class="hl-red"><strong>los ha mantenido como texto</strong></span> cuando en realidad deber√≠an ser variables num√©ricas. Para ello podemos a√±adir el argumento opcional <code>convert = TRUE</code></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb634"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb634-1"><a href="#cb634-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country      year  cases        pop
  &lt;chr&gt;       &lt;dbl&gt;  &lt;int&gt;      &lt;int&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-sucios-messy-data-3" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos el √∫ltimo ejemplo con la tabla <code>table5</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb636"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb636-1"><a href="#cb636-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country     century year  rate             
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>¬øQu√© puede estar fallando?</strong></span></p>
</section>
<section id="unir-unite" class="slide level2">
<h2>Unir unite()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb638"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb638-1"><a href="#cb638-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country     century year  rate             
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>‚ùé Tenemos <span class="hl-red"><strong>mismos valores divididos en dos columnas</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Usaremos <code>unite()</code> para <span class="hl-yellow"><strong>unir los valores</strong></span> de siglo y a√±o en una misma columna</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb640"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb640-1"><a href="#cb640-1"></a>table5 <span class="sc">|&gt;</span> <span class="fu">unite</span>(<span class="at">col =</span> year_completo, century, year, <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country     year_completo rate             
  &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;            
1 Afghanistan 1999          745/19987071     
2 Afghanistan 2000          2666/20595360    
3 Brazil      1999          37737/172006362  
4 Brazil      2000          80488/174504898  
5 China       1999          212258/1272915272
6 China       2000          213766/1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="ejemplo-relig_income" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>Vamos a realizar un ejemplo juntos con la tabla <code>relig_income</code> del paquete <code>{tidyr}</code>. Como se indica en la ayuda <code>? relig_income</code>, la tabla representa la cantidad de personas que hay en cada tramo de ingresos anuales (20k = 20 000$) y en cada religi√≥n.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb642"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb642-1"><a href="#cb642-1"></a>relig_income</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 √ó 11
   religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k`
   &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 Agnostic      27        34        60        81        76       137        122
 2 Atheist       12        27        37        52        35        70         73
 3 Buddhist      27        21        30        34        33        58         62
 4 Catholic     418       617       732       670       638      1116        949
 5 Don‚Äôt k‚Ä¶      15        14        15        11        10        35         21
 6 Evangel‚Ä¶     575       869      1064       982       881      1486        949
 7 Hindu          1         9         7         9        11        34         47
 8 Histori‚Ä¶     228       244       236       238       197       223        131
 9 Jehovah‚Ä¶      20        27        24        24        21        30         15
10 Jewish        19        19        25        25        30        95         69
11 Mainlin‚Ä¶     289       495       619       655       651      1107        939
12 Mormon        29        40        48        51        56       112         85
13 Muslim         6         7         9        10         9        23         16
14 Orthodox      13        17        23        32        32        47         38
15 Other C‚Ä¶       9         7        11        13        13        14         18
16 Other F‚Ä¶      20        33        40        46        49        63         46
17 Other W‚Ä¶       5         2         3         4         2         7          3
18 Unaffil‚Ä¶     217       299       374       365       341       528        407
# ‚Ñπ 3 more variables: `$100-150k` &lt;dbl&gt;, `&gt;150k` &lt;dbl&gt;,
#   `Don't know/refused` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="ejemplo-relig_income-1" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb644"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb644-1"><a href="#cb644-1"></a>relig_income</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 √ó 11
   religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k`
   &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 Agnostic      27        34        60        81        76       137        122
 2 Atheist       12        27        37        52        35        70         73
 3 Buddhist      27        21        30        34        33        58         62
 4 Catholic     418       617       732       670       638      1116        949
 5 Don‚Äôt k‚Ä¶      15        14        15        11        10        35         21
 6 Evangel‚Ä¶     575       869      1064       982       881      1486        949
 7 Hindu          1         9         7         9        11        34         47
 8 Histori‚Ä¶     228       244       236       238       197       223        131
 9 Jehovah‚Ä¶      20        27        24        24        21        30         15
10 Jewish        19        19        25        25        30        95         69
11 Mainlin‚Ä¶     289       495       619       655       651      1107        939
12 Mormon        29        40        48        51        56       112         85
13 Muslim         6         7         9        10         9        23         16
14 Orthodox      13        17        23        32        32        47         38
15 Other C‚Ä¶       9         7        11        13        13        14         18
16 Other F‚Ä¶      20        33        40        46        49        63         46
17 Other W‚Ä¶       5         2         3         4         2         7          3
18 Unaffil‚Ä¶     217       299       374       365       341       528        407
# ‚Ñπ 3 more variables: `$100-150k` &lt;dbl&gt;, `&gt;150k` &lt;dbl&gt;,
#   `Don't know/refused` &lt;dbl&gt;</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>¬øEs tidydata?</strong></span></p>
</section>
<section id="ejemplo-relig_income-2" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb646"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb646-1"><a href="#cb646-1"></a>relig_income</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 √ó 11
   religion `&lt;$10k` `$10-20k` `$20-30k` `$30-40k` `$40-50k` `$50-75k` `$75-100k`
   &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
 1 Agnostic      27        34        60        81        76       137        122
 2 Atheist       12        27        37        52        35        70         73
 3 Buddhist      27        21        30        34        33        58         62
 4 Catholic     418       617       732       670       638      1116        949
 5 Don‚Äôt k‚Ä¶      15        14        15        11        10        35         21
 6 Evangel‚Ä¶     575       869      1064       982       881      1486        949
 7 Hindu          1         9         7         9        11        34         47
 8 Histori‚Ä¶     228       244       236       238       197       223        131
 9 Jehovah‚Ä¶      20        27        24        24        21        30         15
10 Jewish        19        19        25        25        30        95         69
11 Mainlin‚Ä¶     289       495       619       655       651      1107        939
12 Mormon        29        40        48        51        56       112         85
13 Muslim         6         7         9        10         9        23         16
14 Orthodox      13        17        23        32        32        47         38
15 Other C‚Ä¶       9         7        11        13        13        14         18
16 Other F‚Ä¶      20        33        40        46        49        63         46
17 Other W‚Ä¶       5         2         3         4         2         7          3
18 Unaffil‚Ä¶     217       299       374       365       341       528        407
# ‚Ñπ 3 more variables: `$100-150k` &lt;dbl&gt;, `&gt;150k` &lt;dbl&gt;,
#   `Don't know/refused` &lt;dbl&gt;</code></pre>
</div>
</div>
<p>No lo es ya que en realidad <span class="hl-red"><strong>solo deber√≠amos tener una variable de ingresos</strong></span> y la tenemos dividida en 11: todas ellas es la misma variable solo que adopta un valor diferente. <span class="hl-green"><strong>¬øC√≥mo convertirla a tidy data?</strong></span></p>
</section>
<section id="ejemplo-relig_income-3" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>La idea es <span class="hl-yellow"><strong>pivotar todas las columnas de ingresos</strong></span> para que acaben en una sola columna llamada <code>income</code>, y los valores (el n√∫mero de personas) en otra llamada <code>people</code> (por ejemplo). La tabla la haremos m√°s larga y menos ancha as√≠ que‚Ä¶</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb648"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb648-1"><a href="#cb648-1"></a>relig_tidy <span class="ot">&lt;-</span></span>
<span id="cb648-2"><a href="#cb648-2"></a>  relig_income <span class="sc">|&gt;</span></span>
<span id="cb648-3"><a href="#cb648-3"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"&lt;$10k"</span><span class="sc">:</span><span class="st">"Don't know/refused"</span>, <span class="at">names_to =</span> <span class="st">"income"</span>,</span>
<span id="cb648-4"><a href="#cb648-4"></a>               <span class="at">values_to =</span> <span class="st">"people"</span>)</span>
<span id="cb648-5"><a href="#cb648-5"></a>relig_tidy </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 3
   religion income             people
   &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;
 1 Agnostic &lt;$10k                  27
 2 Agnostic $10-20k                34
 3 Agnostic $20-30k                60
 4 Agnostic $30-40k                81
 5 Agnostic $40-50k                76
 6 Agnostic $50-75k               137
 7 Agnostic $75-100k              122
 8 Agnostic $100-150k             109
 9 Agnostic &gt;150k                  84
10 Agnostic Don't know/refused     96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="ejemplo-relig_income-4" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>Vamos a hilar m√°s fino: ahora mismo en la variable <code>income</code> en realidad tenemos dos valores, el l√≠mite inferior y el superior de la renta. Vamos a <span class="hl-yellow"><strong>separar dicha variable e ingresos</strong></span> en dos, llamadas <code>income_inf</code> y <code>income_sup</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb650"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb650-1"><a href="#cb650-1"></a>relig_tidy </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 3
   religion income             people
   &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;
 1 Agnostic &lt;$10k                  27
 2 Agnostic $10-20k                34
 3 Agnostic $20-30k                60
 4 Agnostic $30-40k                81
 5 Agnostic $40-50k                76
 6 Agnostic $50-75k               137
 7 Agnostic $75-100k              122
 8 Agnostic $100-150k             109
 9 Agnostic &gt;150k                  84
10 Agnostic Don't know/refused     96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
</section>
<section id="ejemplo-relig_income-5" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>Vamos a hilar m√°s fino: ahora mismo en la variable <code>income</code> en realidad tenemos dos valores, el l√≠mite inferior y el superior de la renta. Vamos a <span class="hl-yellow"><strong>separar dicha variable e ingresos</strong></span> en dos, llamadas <code>income_inf</code> y <code>income_sup</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb652"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb652-1"><a href="#cb652-1"></a>relig_tidy <span class="sc">|&gt;</span></span>
<span id="cb652-2"><a href="#cb652-2"></a>  <span class="co"># Separamos por -</span></span>
<span id="cb652-3"><a href="#cb652-3"></a>  <span class="fu">separate</span>(income, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"income_inf"</span>, <span class="st">"income_sup"</span>), <span class="at">sep =</span> <span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 4
   religion income_inf         income_sup people
   &lt;chr&gt;    &lt;chr&gt;              &lt;chr&gt;       &lt;dbl&gt;
 1 Agnostic &lt;$10k              &lt;NA&gt;           27
 2 Agnostic $10                20k            34
 3 Agnostic $20                30k            60
 4 Agnostic $30                40k            81
 5 Agnostic $40                50k            76
 6 Agnostic $50                75k           137
 7 Agnostic $75                100k          122
 8 Agnostic $100               150k          109
 9 Agnostic &gt;150k              &lt;NA&gt;           84
10 Agnostic Don't know/refused &lt;NA&gt;           96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
<div class="fragment">
<p>¬øEst√° ya bien? F√≠jate bien‚Ä¶</p>
</div>
</section>
<section id="ejemplo-relig_income-6" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb654"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb654-1"><a href="#cb654-1"></a>relig_tidy <span class="sc">|&gt;</span></span>
<span id="cb654-2"><a href="#cb654-2"></a>  <span class="co"># Separamos por -</span></span>
<span id="cb654-3"><a href="#cb654-3"></a>  <span class="fu">separate</span>(income, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"income_inf"</span>, <span class="st">"income_sup"</span>), <span class="at">sep =</span> <span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 4
   religion income_inf         income_sup people
   &lt;chr&gt;    &lt;chr&gt;              &lt;chr&gt;       &lt;dbl&gt;
 1 Agnostic &lt;$10k              &lt;NA&gt;           27
 2 Agnostic $10                20k            34
 3 Agnostic $20                30k            60
 4 Agnostic $30                40k            81
 5 Agnostic $40                50k            76
 6 Agnostic $50                75k           137
 7 Agnostic $75                100k          122
 8 Agnostic $100               150k          109
 9 Agnostic &gt;150k              &lt;NA&gt;           84
10 Agnostic Don't know/refused &lt;NA&gt;           96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
<p>Si te fijas la primera columna el <code>"$10k"</code> deber√≠a ser una cota superior, no inferior. ¬øC√≥mo indicarle que separe bien ese caso?</p>
</section>
<section id="ejemplo-relig_income-7" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>Le indicaremos que separe si encuentra <code>"-"</code> o <code>"&lt;"</code> (usamos <code>|</code> para separar ambas opciones)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb656"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb656-1"><a href="#cb656-1"></a>relig_tidy <span class="sc">|&gt;</span></span>
<span id="cb656-2"><a href="#cb656-2"></a>  <span class="co"># Separamos por -</span></span>
<span id="cb656-3"><a href="#cb656-3"></a>  <span class="fu">separate</span>(income, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"income_inf"</span>, <span class="st">"income_sup"</span>), <span class="at">sep =</span> <span class="st">"-|&lt;"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 4
   religion income_inf           income_sup people
   &lt;chr&gt;    &lt;chr&gt;                &lt;chr&gt;       &lt;dbl&gt;
 1 Agnostic ""                   $10k           27
 2 Agnostic "$10"                20k            34
 3 Agnostic "$20"                30k            60
 4 Agnostic "$30"                40k            81
 5 Agnostic "$40"                50k            76
 6 Agnostic "$50"                75k           137
 7 Agnostic "$75"                100k          122
 8 Agnostic "$100"               150k          109
 9 Agnostic "&gt;150k"              &lt;NA&gt;           84
10 Agnostic "Don't know/refused" &lt;NA&gt;           96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
</section>
<section id="ejemplo-relig_income-8" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb658"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb658-1"><a href="#cb658-1"></a>relig_tidy <span class="ot">&lt;-</span></span>
<span id="cb658-2"><a href="#cb658-2"></a>  relig_tidy <span class="sc">|&gt;</span></span>
<span id="cb658-3"><a href="#cb658-3"></a>  <span class="co"># Separamos por -</span></span>
<span id="cb658-4"><a href="#cb658-4"></a>  <span class="fu">separate</span>(income, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"income_inf"</span>, <span class="st">"income_sup"</span>), <span class="at">sep =</span> <span class="st">"-|&lt;"</span>)</span>
<span id="cb658-5"><a href="#cb658-5"></a>relig_tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 4
   religion income_inf           income_sup people
   &lt;chr&gt;    &lt;chr&gt;                &lt;chr&gt;       &lt;dbl&gt;
 1 Agnostic ""                   $10k           27
 2 Agnostic "$10"                20k            34
 3 Agnostic "$20"                30k            60
 4 Agnostic "$30"                40k            81
 5 Agnostic "$40"                50k            76
 6 Agnostic "$50"                75k           137
 7 Agnostic "$75"                100k          122
 8 Agnostic "$100"               150k          109
 9 Agnostic "&gt;150k"              &lt;NA&gt;           84
10 Agnostic "Don't know/refused" &lt;NA&gt;           96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
<p>Piensa ahora como podemos <span class="hl-yellow"><strong>convertir los l√≠mites de ingresos a num√©ricas (eliminando s√≠mbolos, letras, etc)</strong></span></p>
</section>
<section id="ejemplo-relig_income-9" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>Para ello usaremos el paquete <code>{stringr}</code> que hemos visto antes, en concreto la funci√≥n <code>str_remove_all()</code> a la que le podemos pasar los caracteres que queremos eliminar (f√≠jate que <code>$</code> al ser un caracter reservado en <code>R</code> hay que indic√°rselo con <code>\\$</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb660"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb660-1"><a href="#cb660-1"></a>relig_tidy<span class="sc">$</span>income_inf <span class="ot">&lt;-</span></span>
<span id="cb660-2"><a href="#cb660-2"></a>  <span class="fu">str_remove_all</span>(relig_tidy<span class="sc">$</span>income_inf, <span class="st">"</span><span class="sc">\\</span><span class="st">$|&gt;|k"</span>)</span>
<span id="cb660-3"><a href="#cb660-3"></a>relig_tidy<span class="sc">$</span>income_sup <span class="ot">&lt;-</span></span>
<span id="cb660-4"><a href="#cb660-4"></a>  <span class="fu">str_remove_all</span>(relig_tidy<span class="sc">$</span>income_sup, <span class="st">"</span><span class="sc">\\</span><span class="st">$|&gt;|k"</span>)</span>
<span id="cb660-5"><a href="#cb660-5"></a></span>
<span id="cb660-6"><a href="#cb660-6"></a>relig_tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 4
   religion income_inf          income_sup people
   &lt;chr&gt;    &lt;chr&gt;               &lt;chr&gt;       &lt;dbl&gt;
 1 Agnostic ""                  10             27
 2 Agnostic "10"                20             34
 3 Agnostic "20"                30             60
 4 Agnostic "30"                40             81
 5 Agnostic "40"                50             76
 6 Agnostic "50"                75            137
 7 Agnostic "75"                100           122
 8 Agnostic "100"               150           109
 9 Agnostic "150"               &lt;NA&gt;           84
10 Agnostic "Don't now/refused" &lt;NA&gt;           96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
</section>
<section id="ejemplo-relig_income-10" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>F√≠jate que tenemos <code>"Don't now/refused"</code>. ¬øQu√© deber√≠amos tener?</p>
<div class="fragment">
<p>Deber√≠a ser un <span class="hl-yellow"><strong>dato ausente</strong></span> as√≠ que usaremos <code>if_else()</code>: si contiene dicha frase, <code>NA</code>, en caso contrario su valor (consejo: <code>str_detect()</code> para detectar patrones en textos, y evitar tener que escribir toda la palabra sin errores)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb662"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb662-1"><a href="#cb662-1"></a>relig_tidy<span class="sc">$</span>income_inf <span class="ot">&lt;-</span></span>
<span id="cb662-2"><a href="#cb662-2"></a>  <span class="fu">if_else</span>(<span class="fu">str_detect</span>(relig_tidy<span class="sc">$</span>income_inf, <span class="st">"refused"</span>), <span class="cn">NA</span>, relig_tidy<span class="sc">$</span>income_inf)</span>
<span id="cb662-3"><a href="#cb662-3"></a>relig_tidy<span class="sc">$</span>income_sup <span class="ot">&lt;-</span></span>
<span id="cb662-4"><a href="#cb662-4"></a>  <span class="fu">if_else</span>(<span class="fu">str_detect</span>(relig_tidy<span class="sc">$</span>income_sup, <span class="st">"refused"</span>), <span class="cn">NA</span>, relig_tidy<span class="sc">$</span>income_sup)</span>
<span id="cb662-5"><a href="#cb662-5"></a>relig_tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 4
   religion income_inf income_sup people
   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;       &lt;dbl&gt;
 1 Agnostic ""         10             27
 2 Agnostic "10"       20             34
 3 Agnostic "20"       30             60
 4 Agnostic "30"       40             81
 5 Agnostic "40"       50             76
 6 Agnostic "50"       75            137
 7 Agnostic "75"       100           122
 8 Agnostic "100"      150           109
 9 Agnostic "150"      &lt;NA&gt;           84
10 Agnostic  &lt;NA&gt;      &lt;NA&gt;           96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="ejemplo-relig_income-11" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb664"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb664-1"><a href="#cb664-1"></a>relig_tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 4
   religion income_inf income_sup people
   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;       &lt;dbl&gt;
 1 Agnostic ""         10             27
 2 Agnostic "10"       20             34
 3 Agnostic "20"       30             60
 4 Agnostic "30"       40             81
 5 Agnostic "40"       50             76
 6 Agnostic "50"       75            137
 7 Agnostic "75"       100           122
 8 Agnostic "100"      150           109
 9 Agnostic "150"      &lt;NA&gt;           84
10 Agnostic  &lt;NA&gt;      &lt;NA&gt;           96
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
<p>En la primera l√≠nea, ese <code>""</code> tambi√©n deber√≠a ser `NA``</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb666"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb666-1"><a href="#cb666-1"></a>relig_tidy<span class="sc">$</span>income_inf <span class="ot">&lt;-</span></span>
<span id="cb666-2"><a href="#cb666-2"></a>  <span class="fu">if_else</span>(relig_tidy<span class="sc">$</span>income_inf <span class="sc">==</span> <span class="st">""</span>, <span class="cn">NA</span>, relig_tidy<span class="sc">$</span>income_inf)</span>
<span id="cb666-3"><a href="#cb666-3"></a>relig_tidy<span class="sc">$</span>income_suop <span class="ot">&lt;-</span></span>
<span id="cb666-4"><a href="#cb666-4"></a>  <span class="fu">if_else</span>(relig_tidy<span class="sc">$</span>income_sup <span class="sc">==</span> <span class="st">""</span>, <span class="cn">NA</span>, relig_tidy<span class="sc">$</span>income_sup)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ejemplo-relig_income-12" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb667"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb667-1"><a href="#cb667-1"></a>relig_tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 5
   religion income_inf income_sup people income_suop
   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;      
 1 Agnostic &lt;NA&gt;       10             27 10         
 2 Agnostic 10         20             34 20         
 3 Agnostic 20         30             60 30         
 4 Agnostic 30         40             81 40         
 5 Agnostic 40         50             76 50         
 6 Agnostic 50         75            137 75         
 7 Agnostic 75         100           122 100        
 8 Agnostic 100        150           109 150        
 9 Agnostic 150        &lt;NA&gt;           84 &lt;NA&gt;       
10 Agnostic &lt;NA&gt;       &lt;NA&gt;           96 &lt;NA&gt;       
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
<p>Adem√°s si te fijas los n√∫meros son en realidad caracteres, as√≠ que vamos a <span class="hl-yellow"><strong>convertirlos a n√∫meros</strong></span></p>
</section>
<section id="ejemplo-relig_income-13" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>Adem√°s si te fijas los n√∫meros son en realidad caracteres, as√≠ que vamos a <span class="hl-yellow"><strong>convertirlos a n√∫meros</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb669"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb669-1"><a href="#cb669-1"></a>relig_tidy<span class="sc">$</span>income_inf <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(relig_tidy<span class="sc">$</span>income_inf)</span>
<span id="cb669-2"><a href="#cb669-2"></a>relig_tidy<span class="sc">$</span>income_sup <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(relig_tidy<span class="sc">$</span>income_sup)</span>
<span id="cb669-3"><a href="#cb669-3"></a>relig_tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 5
   religion income_inf income_sup people income_suop
   &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      
 1 Agnostic         NA         10     27 10         
 2 Agnostic         10         20     34 20         
 3 Agnostic         20         30     60 30         
 4 Agnostic         30         40     81 40         
 5 Agnostic         40         50     76 50         
 6 Agnostic         50         75    137 75         
 7 Agnostic         75        100    122 100        
 8 Agnostic        100        150    109 150        
 9 Agnostic        150         NA     84 &lt;NA&gt;       
10 Agnostic         NA         NA     96 &lt;NA&gt;       
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
</section>
<section id="ejemplo-relig_income-14" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>¬øSe te ocurre alguna forma de <strong>¬´cuantificar num√©ricamente¬ª</strong> los valores ausentes que tenemos en este caso?</p>
<div class="fragment">
<p>Si te fijas en realidad cuando hay ausente en el l√≠mite inferior en realidad podr√≠amos poner un 0 (nadie puede ganar menos de eso) y cuando lo tenemos en el l√≠mite superior ser√≠a <code>Inf</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb671"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb671-1"><a href="#cb671-1"></a>relig_tidy<span class="sc">$</span>income_inf <span class="ot">&lt;-</span></span>
<span id="cb671-2"><a href="#cb671-2"></a>  <span class="fu">if_else</span>(<span class="fu">is.na</span>(relig_tidy<span class="sc">$</span>income_inf), <span class="dv">0</span>, relig_tidy<span class="sc">$</span>income_inf)</span>
<span id="cb671-3"><a href="#cb671-3"></a>relig_tidy<span class="sc">$</span>income_sup <span class="ot">&lt;-</span></span>
<span id="cb671-4"><a href="#cb671-4"></a>  <span class="fu">if_else</span>(<span class="fu">is.na</span>(relig_tidy<span class="sc">$</span>income_sup), <span class="cn">Inf</span>, relig_tidy<span class="sc">$</span>income_sup)</span>
<span id="cb671-5"><a href="#cb671-5"></a>relig_tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 √ó 5
   religion income_inf income_sup people income_suop
   &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      
 1 Agnostic          0         10     27 10         
 2 Agnostic         10         20     34 20         
 3 Agnostic         20         30     60 30         
 4 Agnostic         30         40     81 40         
 5 Agnostic         40         50     76 50         
 6 Agnostic         50         75    137 75         
 7 Agnostic         75        100    122 100        
 8 Agnostic        100        150    109 150        
 9 Agnostic        150        Inf     84 &lt;NA&gt;       
10 Agnostic          0        Inf     96 &lt;NA&gt;       
# ‚Ñπ 170 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="ejemplo-relig_income-15" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>Aunque nos haya llevado un rato este es el <strong>c√≥digo completo resumido</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb673"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb673-1"><a href="#cb673-1"></a>relig_tidy <span class="ot">&lt;-</span></span>
<span id="cb673-2"><a href="#cb673-2"></a>  relig_income <span class="sc">|&gt;</span></span>
<span id="cb673-3"><a href="#cb673-3"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"&lt;$10k"</span><span class="sc">:</span><span class="st">"Don't know/refused"</span>, <span class="at">names_to =</span> <span class="st">"income"</span>,</span>
<span id="cb673-4"><a href="#cb673-4"></a>               <span class="at">values_to =</span> <span class="st">"people"</span>) <span class="sc">|&gt;</span></span>
<span id="cb673-5"><a href="#cb673-5"></a>  <span class="fu">separate</span>(income, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"income_inf"</span>, <span class="st">"income_sup"</span>), <span class="at">sep =</span> <span class="st">"-|&lt;"</span>)</span>
<span id="cb673-6"><a href="#cb673-6"></a></span>
<span id="cb673-7"><a href="#cb673-7"></a>relig_tidy<span class="sc">$</span>income_inf <span class="ot">&lt;-</span> <span class="fu">str_remove_all</span>(relig_tidy<span class="sc">$</span>income_inf, <span class="st">"</span><span class="sc">\\</span><span class="st">$|&gt;|k"</span>)</span>
<span id="cb673-8"><a href="#cb673-8"></a>relig_tidy<span class="sc">$</span>income_sup <span class="ot">&lt;-</span> <span class="fu">str_remove_all</span>(relig_tidy<span class="sc">$</span>income_sup, <span class="st">"</span><span class="sc">\\</span><span class="st">$|&gt;|k"</span>)</span>
<span id="cb673-9"><a href="#cb673-9"></a></span>
<span id="cb673-10"><a href="#cb673-10"></a>relig_tidy<span class="sc">$</span>income_inf <span class="ot">&lt;-</span></span>
<span id="cb673-11"><a href="#cb673-11"></a>  <span class="fu">if_else</span>(<span class="fu">str_detect</span>(relig_tidy<span class="sc">$</span>income_inf, <span class="st">"refused"</span>) <span class="sc">|</span></span>
<span id="cb673-12"><a href="#cb673-12"></a>            relig_tidy<span class="sc">$</span>income_inf <span class="sc">==</span> <span class="st">""</span>, <span class="dv">0</span>, <span class="fu">as.numeric</span>(relig_tidy<span class="sc">$</span>income_inf))</span>
<span id="cb673-13"><a href="#cb673-13"></a>relig_tidy<span class="sc">$</span>income_sup <span class="ot">&lt;-</span></span>
<span id="cb673-14"><a href="#cb673-14"></a>  <span class="fu">if_else</span>(<span class="fu">str_detect</span>(relig_tidy<span class="sc">$</span>income_sup, <span class="st">"refused"</span>) <span class="sc">|</span></span>
<span id="cb673-15"><a href="#cb673-15"></a>            relig_tidy<span class="sc">$</span>income_sup <span class="sc">==</span> <span class="st">""</span>, <span class="cn">Inf</span>, <span class="fu">as.numeric</span>(relig_tidy<span class="sc">$</span>income_sup))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ejemplo-relig_income-16" class="slide level2">
<h2>Ejemplo: relig_income</h2>
<p>¬øPor qu√© era <span class="hl-yellow"><strong>importante tenerlo en tidydata</strong></span>? Lo veremos m√°s adelante al visualizar los datos pero esto ya nos permite realizar filtros muy r√°pidos con muy poco c√≥digo.</p>
<p>Por ejemplo: ¬øcu√°ntas personas agn√≥sticas con ingresos superiores (o iguales) a 30 tenemos?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb674"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb674-1"><a href="#cb674-1"></a><span class="co"># una l√≠nea de c√≥digo</span></span>
<span id="cb674-2"><a href="#cb674-2"></a><span class="fu">sum</span>(relig_tidy<span class="sc">$</span>people[relig_tidy<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Agnostic"</span> <span class="sc">&amp;</span> relig_tidy<span class="sc">$</span>income_inf <span class="sc">&gt;=</span> <span class="dv">30</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 609</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-8" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-12" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-12-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-12-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-12-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-12-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-12-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-12-1">
<p>üìù Usa el dataset original <code>relig_income</code> y trata de responder a la √∫ltima pregunta: ¬øcu√°ntas personas agn√≥sticas con ingresos superiores (o iguales) a 30 tenemos? Compara el c√≥digo a realizar cuando tenemos tidydata a cuando no. ¬øCu√°l es m√°s legible si no supieses <code>R</code>? ¬øCu√°l tiene mayor probabilidad de error?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb676"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb676-1"><a href="#cb676-1"></a><span class="fu">sum</span>(relig_income[relig_income<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Agnostic"</span>,</span>
<span id="cb676-2"><a href="#cb676-2"></a>             <span class="fu">c</span>(<span class="st">"$30-40k"</span>, <span class="st">"$40-50k"</span>, <span class="st">"$50-75k"</span>, <span class="st">"$75-100k"</span>, <span class="st">"$100-150k"</span>, <span class="st">"&gt;150k"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-12-2">
<p>üìù Usando <code>relig_tidy</code> determina qui√©n tiene m√°s ingresos medios, ¬øcat√≥licos (<code>Catholic</code>) o agn√≥sticos (<code>Agnostic</code>)? Crea antes una variable <code>avg_income</code> (ingresos medios por intervalo): si hay 5 personas entre 20 y 30, y 3 personas entre 30 y 50, la media ser√≠a <span class="math inline">\((25*5 + 40*3)/8\)</span> (si es <code>Inf</code> por arriba, <code>NA</code>)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb677"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb677-1"><a href="#cb677-1"></a>relig_tidy<span class="sc">$</span>avg_income <span class="ot">&lt;-</span> </span>
<span id="cb677-2"><a href="#cb677-2"></a>  <span class="fu">if_else</span>(<span class="fu">is.infinite</span>(relig_tidy<span class="sc">$</span>income_sup), <span class="cn">NA</span>, (relig_tidy<span class="sc">$</span>income_sup <span class="sc">+</span> relig_tidy<span class="sc">$</span>income_inf)<span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb677-3"><a href="#cb677-3"></a></span>
<span id="cb677-4"><a href="#cb677-4"></a><span class="co"># Agnosticos vs catolicos</span></span>
<span id="cb677-5"><a href="#cb677-5"></a><span class="fu">sum</span>((relig_tidy<span class="sc">$</span>avg_income[relig_tidy<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Agnostic"</span>] <span class="sc">*</span> relig_tidy<span class="sc">$</span>people[relig_tidy<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Agnostic"</span>]), <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span></span>
<span id="cb677-6"><a href="#cb677-6"></a>  <span class="fu">sum</span>(relig_tidy<span class="sc">$</span>people[relig_tidy<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Agnostic"</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb677-7"><a href="#cb677-7"></a></span>
<span id="cb677-8"><a href="#cb677-8"></a><span class="fu">sum</span>((relig_tidy<span class="sc">$</span>avg_income[relig_tidy<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Catholic"</span>] <span class="sc">*</span> relig_tidy<span class="sc">$</span>people[relig_tidy<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Catholic"</span>]), <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span></span>
<span id="cb677-9"><a href="#cb677-9"></a>  <span class="fu">sum</span>(relig_tidy<span class="sc">$</span>people[relig_tidy<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Catholic"</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-12-3">
<p>üìù Si debemos elegir budismo (<code>Buddhist</code>) e hinduismo (<code>Hindu</code>), ¬øcu√°l de las dos es la religi√≥n mayoritaria entre los que ganan m√°s de 50 000$ anuales?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb678"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb678-1"><a href="#cb678-1"></a>greatest_income <span class="ot">&lt;-</span></span>
<span id="cb678-2"><a href="#cb678-2"></a>  relig_tidy[relig_tidy<span class="sc">$</span>income_inf <span class="sc">&gt;=</span> <span class="dv">50</span> <span class="sc">&amp;</span> relig_tidy<span class="sc">$</span>religion <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Buddhist"</span>, <span class="st">"Hindu"</span>), ]</span>
<span id="cb678-3"><a href="#cb678-3"></a></span>
<span id="cb678-4"><a href="#cb678-4"></a><span class="fu">sum</span>(greatest_income<span class="sc">$</span>people[greatest_income<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Buddhist"</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb678-5"><a href="#cb678-5"></a><span class="fu">sum</span>(greatest_income<span class="sc">$</span>people[greatest_income<span class="sc">$</span>religion <span class="sc">==</span> <span class="st">"Hindu"</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-12-4">
<p>üìù Echa un vistazo a la tabla <code>table4b</code> del paquete <code>{tidyr}</code>. ¬øEs tidydata? En caso negativo, ¬øqu√© falla? ¬øC√≥mo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb679"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb679-1"><a href="#cb679-1"></a>table4b <span class="sc">|&gt;</span></span>
<span id="cb679-2"><a href="#cb679-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"1999"</span><span class="sc">:</span><span class="st">"2000"</span>, <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb679-3"><a href="#cb679-3"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-12-5">
<p>üìù Echa un vistazo a la tabla <code>billboard</code> del paquete <code>{tidyr}</code>. ¬øEs tidydata? En caso negativo, ¬øqu√© falla? ¬øC√≥mo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb680"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb680-1"><a href="#cb680-1"></a>billboard <span class="sc">|&gt;</span></span>
<span id="cb680-2"><a href="#cb680-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"wk1"</span><span class="sc">:</span><span class="st">"wk76"</span>,</span>
<span id="cb680-3"><a href="#cb680-3"></a>               <span class="at">names_to =</span> <span class="st">"week"</span>,</span>
<span id="cb680-4"><a href="#cb680-4"></a>               <span class="at">names_prefix =</span> <span class="st">"wk"</span>,</span>
<span id="cb680-5"><a href="#cb680-5"></a>               <span class="at">values_to =</span> <span class="st">"position"</span>,</span>
<span id="cb680-6"><a href="#cb680-6"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-8" class="slide level2">
<h2>üê£ Caso pr√°ctico</h2>
<p>En el paquete <code>{tidyr}</code> contamos con el dataset <code>who2</code> (dataset de la Organizaci√≥n Mundial de la Salud). Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/tidydatos/"><strong>workbook</strong></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb681"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb681-1"><a href="#cb681-1"></a>who2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,240 √ó 58
   country      year sp_m_014 sp_m_1524 sp_m_2534 sp_m_3544 sp_m_4554 sp_m_5564
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan  1980       NA        NA        NA        NA        NA        NA
 2 Afghanistan  1981       NA        NA        NA        NA        NA        NA
 3 Afghanistan  1982       NA        NA        NA        NA        NA        NA
 4 Afghanistan  1983       NA        NA        NA        NA        NA        NA
 5 Afghanistan  1984       NA        NA        NA        NA        NA        NA
 6 Afghanistan  1985       NA        NA        NA        NA        NA        NA
 7 Afghanistan  1986       NA        NA        NA        NA        NA        NA
 8 Afghanistan  1987       NA        NA        NA        NA        NA        NA
 9 Afghanistan  1988       NA        NA        NA        NA        NA        NA
10 Afghanistan  1989       NA        NA        NA        NA        NA        NA
# ‚Ñπ 7,230 more rows
# ‚Ñπ 50 more variables: sp_m_65 &lt;dbl&gt;, sp_f_014 &lt;dbl&gt;, sp_f_1524 &lt;dbl&gt;,
#   sp_f_2534 &lt;dbl&gt;, sp_f_3544 &lt;dbl&gt;, sp_f_4554 &lt;dbl&gt;, sp_f_5564 &lt;dbl&gt;,
#   sp_f_65 &lt;dbl&gt;, sn_m_014 &lt;dbl&gt;, sn_m_1524 &lt;dbl&gt;, sn_m_2534 &lt;dbl&gt;,
#   sn_m_3544 &lt;dbl&gt;, sn_m_4554 &lt;dbl&gt;, sn_m_5564 &lt;dbl&gt;, sn_m_65 &lt;dbl&gt;,
#   sn_f_014 &lt;dbl&gt;, sn_f_1524 &lt;dbl&gt;, sn_f_2534 &lt;dbl&gt;, sn_f_3544 &lt;dbl&gt;,
#   sn_f_4554 &lt;dbl&gt;, sn_f_5564 &lt;dbl&gt;, sn_f_65 &lt;dbl&gt;, ep_m_014 &lt;dbl&gt;, ‚Ä¶</code></pre>
</div>
</div>
</section></section>
<section>
<section id="clase-9" class="title-slide slide level1 center">
<h1>Clase 9: <span class="flow">entrega II</span></h1>
<p><span style="color:#444442;"><strong>Ponderaci√≥n: 15%</strong></span></p>
</section>
<section id="instrucciones" class="slide level2">
<h2>Instrucciones</h2>
<p>El d√≠a de la entrega tendr√°s subido una <span class="hl-yellow"><strong>plantilla de entrega</strong></span> en formato <code>.qmd</code> en el campus.</p>
<ul>
<li><p><strong>Descomprime la carpeta</strong> (¬°importante! si no descomprimes, aunque puedas editar el <code>.qmd</code>, no podr√°s generar el <code>.html</code>)</p></li>
<li><p><strong>Edita la cabecera</strong> con tu nombre y DNI</p></li>
<li><p>Deber√°s <strong>rellenar cada chunk</strong> con el c√≥digo que consideres (en algunos te he dejado pistas) y <strong>cambiar</strong> de <code>#| eval: false</code> a <code>#| eval: true</code> (si los quitas directamente, por defecto ya es true)</p></li>
<li><p>Deber√°s de <strong>comentar</strong> con texto normal lo que consideres para responder a las preguntas.</p></li>
<li><p>Ser√° <span class="hl-yellow"><strong>OBLIGATORIO</strong></span> subir el archivo <code>.html</code> generado (solo se corregir√° dicho archivo) as√≠ que ve renderizando seg√∫n rellenas el documento, no lo dejes para el final.</p></li>
</ul>
</section></section>
<section>
<section id="clase-10" class="title-slide slide level1 center">
<h1>Clase 10: <span class="flow">tidyverse (filas)</span></h1>
<p><span style="color:#444442;"><strong>Tidyverse: operaciones por filas</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-10-1">üíª Ejercicios resueltos: filter</a></p></li>
<li><p><a href="#/tu-turno-10-2">üíª Ejercicios resueltos: slice, sample, arrange</a></p></li>
<li><p><a href="#/caso-practico-10">üê£ Workbook/caso pr√°ctico</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="resoluci√≥n-de-entrega-ii" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>El nombre de las columnas codifica el sexo (H hombre, M mujer, NC no consta) y el grupo etario (0-9, 10-19, 20-29, 30-39, 40-49, 50-59, 60-69, 70-79, ‚â•80 a√±os y NC no consta).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb683"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb683-1"><a href="#cb683-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb683-2"><a href="#cb683-2"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/messy_covid_data.csv"</span>)</span>
<span id="cb683-3"><a href="#cb683-3"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9,486 √ó 31
   provincia_iso fecha               `0-9_H` `10-19_H` `20-29_H` `30-39_H`
   &lt;chr&gt;         &lt;dttm&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 A             2020-03-01 00:00:00       0         0         0         0
 2 AL            2020-03-01 00:00:00       0         0         0         0
 3 B             2020-03-01 00:00:00       0         0         0         0
 4 BA            2020-03-01 00:00:00       0         1         0         0
 5 BI            2020-03-01 00:00:00       0         0         0         0
 6 C             2020-03-01 00:00:00       0         0         0         0
 7 CA            2020-03-01 00:00:00       0         0         0         0
 8 CO            2020-03-01 00:00:00       0         0         0         0
 9 GI            2020-03-01 00:00:00       0         0         0         0
10 GR            2020-03-01 00:00:00       0         0         0         0
# ‚Ñπ 9,476 more rows
# ‚Ñπ 25 more variables: `40-49_H` &lt;dbl&gt;, `50-59_H` &lt;dbl&gt;, `60-69_H` &lt;dbl&gt;,
#   `70-79_H` &lt;dbl&gt;, `80-Inf_H` &lt;dbl&gt;, `NC-NC_H` &lt;dbl&gt;, `0-9_M` &lt;dbl&gt;,
#   `10-19_M` &lt;dbl&gt;, `20-29_M` &lt;dbl&gt;, `30-39_M` &lt;dbl&gt;, `40-49_M` &lt;dbl&gt;,
#   `50-59_M` &lt;dbl&gt;, `60-69_M` &lt;dbl&gt;, `70-79_M` &lt;dbl&gt;, `80-Inf_M` &lt;dbl&gt;,
#   `NC-NC_M` &lt;dbl&gt;, `0-9_NC` &lt;dbl&gt;, `10-19_NC` &lt;dbl&gt;, `20-29_NC` &lt;dbl&gt;,
#   `30-39_NC` &lt;dbl&gt;, `40-49_NC` &lt;dbl&gt;, `50-59_NC` &lt;dbl&gt;, `60-69_NC` &lt;dbl&gt;, ‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="resoluci√≥n-de-entrega-ii-1" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>Dise√±a un bucle que recorra todas las filas y, salvo en las dos primeras columnas, convierta cada 0 casos que encuentre en la fila por un <code>NA</code></p>
<p>Necesitamos 2 bucles: uno que <strong>recorra filas</strong> (desde la primera hasta la √∫ltima) y otro que <strong>recorra columnas</strong> (desde la tercera hasta la √∫ltima), y dentro del bucle: si el elemento (i, j) es 0 (o ausente), lo pasamos a ausente; en caso contrario, lo que hab√≠a guardado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb685"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb685-1"><a href="#cb685-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb685-2"><a href="#cb685-2"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(datos)) {</span>
<span id="cb685-3"><a href="#cb685-3"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span><span class="fu">ncol</span>(datos)) {</span>
<span id="cb685-4"><a href="#cb685-4"></a>  </span>
<span id="cb685-5"><a href="#cb685-5"></a>    datos[i, j] <span class="ot">&lt;-</span> <span class="fu">if_else</span>(datos[i, j] <span class="sc">==</span> <span class="dv">0</span>, <span class="cn">NA</span>, datos[i, j], <span class="at">missing =</span> <span class="cn">NA</span>)</span>
<span id="cb685-6"><a href="#cb685-6"></a>    </span>
<span id="cb685-7"><a href="#cb685-7"></a>  }</span>
<span id="cb685-8"><a href="#cb685-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="resoluci√≥n-de-entrega-ii-2" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>Razona por qu√© no es tidydata y convi√©rte a tidy data. Si te fijas hay much√≠simas filas que nos sobran (ausentes) as√≠ que haz que al pivotar las elimine.</p>
<p>&nbsp;</p>
<p>Es un <code>pivot_longer()</code> sin m√°s: le indicamos que <strong>columnas no queremos pivotar</strong>, la <strong>variable a donde ir√°n los nombres</strong> y c√≥mo se llamar√° la variable de casos; le incluimos <code>values_drop_na = TRUE</code> para que elimine los ausentes (de ah√≠ que hayamos convertido los 0 para hacerlo m√°s sencillo aqu√≠)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb686"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb686-1"><a href="#cb686-1"></a>tidy_covid <span class="ot">&lt;-</span></span>
<span id="cb686-2"><a href="#cb686-2"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb686-3"><a href="#cb686-3"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">"provincia_iso"</span>, <span class="st">"fecha"</span>), <span class="at">names_to =</span> <span class="st">"grupo"</span>, <span class="at">values_to =</span> <span class="st">"casos"</span>,</span>
<span id="cb686-4"><a href="#cb686-4"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span>
<span id="cb686-5"><a href="#cb686-5"></a>tidy_covid</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36,842 √ó 4
   provincia_iso fecha               grupo    casos
   &lt;chr&gt;         &lt;dttm&gt;              &lt;chr&gt;    &lt;dbl&gt;
 1 B             2020-03-01 00:00:00 20-29_M      1
 2 BA            2020-03-01 00:00:00 10-19_H      1
 3 BA            2020-03-01 00:00:00 50-59_H      1
 4 GI            2020-03-01 00:00:00 80-Inf_M     1
 5 LE            2020-03-01 00:00:00 20-29_H      2
 6 LE            2020-03-01 00:00:00 60-69_H      1
 7 LE            2020-03-01 00:00:00 50-59_M      1
 8 M             2020-03-01 00:00:00 30-39_H      2
 9 M             2020-03-01 00:00:00 40-49_H      3
10 M             2020-03-01 00:00:00 50-59_H      2
# ‚Ñπ 36,832 more rows</code></pre>
</div>
</div>
</section>
<section id="resoluci√≥n-de-entrega-ii-3" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>Una de las columnas la tenemos codificada a veces como <code>cosa-cosa_cosa</code>, otras como <code>80-Inf_cosa</code>, otras como <code>NC-NC_cosa</code>. Intenta separar dicha columna para generar tres columnas nuevas <code>edad_inf</code>, <code>edad_sup</code> y <code>sexo</code> de manera adecuada. Recuerda que <code>NC</code> es un ausente.</p>
<p>&nbsp;</p>
<p>Si lo intentamos hacer sin procesar nada antes, vemos que los <code>Inf</code> y los <code>NC</code> figuran como tal, como cadena texto, lo que nos impide convertir a num√©rica el resto de la columna.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb688"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb688-1"><a href="#cb688-1"></a>tidy_covid2 <span class="ot">&lt;-</span></span>
<span id="cb688-2"><a href="#cb688-2"></a>  tidy_covid <span class="sc">|&gt;</span> </span>
<span id="cb688-3"><a href="#cb688-3"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">"grupo"</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"edad_inf"</span>, <span class="st">"edad_sup"</span>, <span class="st">"sexo"</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb688-4"><a href="#cb688-4"></a>tidy_covid2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36,842 √ó 6
   provincia_iso fecha               edad_inf edad_sup sexo  casos
   &lt;chr&gt;         &lt;dttm&gt;              &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;dbl&gt;
 1 B             2020-03-01 00:00:00 20       29       M         1
 2 BA            2020-03-01 00:00:00 10       19       H         1
 3 BA            2020-03-01 00:00:00 50       59       H         1
 4 GI            2020-03-01 00:00:00 80       Inf      M         1
 5 LE            2020-03-01 00:00:00 20       29       H         2
 6 LE            2020-03-01 00:00:00 60       69       H         1
 7 LE            2020-03-01 00:00:00 50       59       M         1
 8 M             2020-03-01 00:00:00 30       39       H         2
 9 M             2020-03-01 00:00:00 40       49       H         3
10 M             2020-03-01 00:00:00 50       59       H         2
# ‚Ñπ 36,832 more rows</code></pre>
</div>
</div>
</section>
<section id="resoluci√≥n-de-entrega-ii-4" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>Por eso antes vamos a reemplazar los <code>"Inf"</code> y <code>"NC"</code> por <code>"NA"</code>, para que luego al convertirlos pueda pasarlos a <code>NA</code> num√©ricos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb690"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb690-1"><a href="#cb690-1"></a>tidy_covid<span class="sc">$</span>grupo <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(tidy_covid<span class="sc">$</span>grupo, <span class="st">"Inf|NC"</span>, <span class="st">"NA"</span>)</span>
<span id="cb690-2"><a href="#cb690-2"></a>tidy_covid2 <span class="ot">&lt;-</span></span>
<span id="cb690-3"><a href="#cb690-3"></a>  tidy_covid <span class="sc">|&gt;</span></span>
<span id="cb690-4"><a href="#cb690-4"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">"grupo"</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"edad_inf"</span>, <span class="st">"edad_sup"</span>, <span class="st">"sexo"</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb690-5"><a href="#cb690-5"></a>tidy_covid2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36,842 √ó 6
   provincia_iso fecha               edad_inf edad_sup sexo  casos
   &lt;chr&gt;         &lt;dttm&gt;                 &lt;int&gt;    &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;
 1 B             2020-03-01 00:00:00       20       29 M         1
 2 BA            2020-03-01 00:00:00       10       19 H         1
 3 BA            2020-03-01 00:00:00       50       59 H         1
 4 GI            2020-03-01 00:00:00       80       NA M         1
 5 LE            2020-03-01 00:00:00       20       29 H         2
 6 LE            2020-03-01 00:00:00       60       69 H         1
 7 LE            2020-03-01 00:00:00       50       59 M         1
 8 M             2020-03-01 00:00:00       30       39 H         2
 9 M             2020-03-01 00:00:00       40       49 H         3
10 M             2020-03-01 00:00:00       50       59 H         2
# ‚Ñπ 36,832 more rows</code></pre>
</div>
</div>
</section>
<section id="resoluci√≥n-de-entrega-ii-5" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>Incorpora una nueva variable a la tabla que codifice el mes y el a√±o (por ejemplo, cualquier d√≠a de enero de 2020 ser√° algo similar a ‚Äú1-2020‚Äù y cualquier d√≠a de febrero del 2021 ser√° ‚Äú2-2021‚Äù).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb692"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb692-1"><a href="#cb692-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb692-2"><a href="#cb692-2"></a>tidy_covid2<span class="sc">$</span>mes_year <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"{month(tidy_covid2$fecha)}-{year(tidy_covid2$fecha)}"</span>)</span>
<span id="cb692-3"><a href="#cb692-3"></a>tidy_covid2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36,842 √ó 7
   provincia_iso fecha               edad_inf edad_sup sexo  casos mes_year
   &lt;chr&gt;         &lt;dttm&gt;                 &lt;int&gt;    &lt;int&gt; &lt;chr&gt; &lt;dbl&gt; &lt;glue&gt;  
 1 B             2020-03-01 00:00:00       20       29 M         1 3-2020  
 2 BA            2020-03-01 00:00:00       10       19 H         1 3-2020  
 3 BA            2020-03-01 00:00:00       50       59 H         1 3-2020  
 4 GI            2020-03-01 00:00:00       80       NA M         1 3-2020  
 5 LE            2020-03-01 00:00:00       20       29 H         2 3-2020  
 6 LE            2020-03-01 00:00:00       60       69 H         1 3-2020  
 7 LE            2020-03-01 00:00:00       50       59 M         1 3-2020  
 8 M             2020-03-01 00:00:00       30       39 H         2 3-2020  
 9 M             2020-03-01 00:00:00       40       49 H         3 3-2020  
10 M             2020-03-01 00:00:00       50       59 H         2 3-2020  
# ‚Ñπ 36,832 more rows</code></pre>
</div>
</div>
</section>
<section id="resoluci√≥n-de-entrega-ii-6" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>Haciendo uso de esa variable de grupo <code>mes_year</code> y del vector de provincias permitidas que aparece debajo (busca en <a href="https://es.wikipedia.org/wiki/ISO_3166-2:ES#Provincias" class="uri">https://es.wikipedia.org/wiki/ISO_3166-2:ES#Provincias</a>) obt√©n un resumen que nos devuelva en un tibble, por cada provincia permitida y cada mes-a√±o, la media de casos (sin importar edad ni sexo)</p>
<p>&nbsp;</p>
<p>Solo necesitamos <strong>recorrer cada provincia permitida</strong> y <strong>cada valor <code>mes_year</code> distinto</strong>, as√≠ que creamos ambos vectores. Tambi√©n creamos un dataset vac√≠o <code>resumen_mes_provincia</code> donde, en cada iteraci√≥n, pegaremos una fila con su resumen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb694"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb694-1"><a href="#cb694-1"></a>provincias_permitidas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"B"</span>, <span class="st">"SE"</span>, <span class="st">"V"</span>, <span class="st">"Z"</span>)</span>
<span id="cb694-2"><a href="#cb694-2"></a>for_values <span class="ot">&lt;-</span> <span class="fu">unique</span>(tidy_covid2<span class="sc">$</span>mes_year)</span>
<span id="cb694-3"><a href="#cb694-3"></a>resumen_mes_provincia <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="resoluci√≥n-de-entrega-ii-7" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>Una vez creados esos objetos, el <strong>bucle simplemente deber√° recorrer cada valor de provincia y de mes-a√±o</strong>: para el mes-a√±o i y la provincia j, filtramos solo los casos para esos valores concretos (de todo el vector de casos nos quedamos con aquellos que cumplan dicha condici√≥n, eliminando tambi√©n provincias ausentes). Tras filtrar guardamos la media ese filtro de casos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb695"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb695-1"><a href="#cb695-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(for_values)) {</span>
<span id="cb695-2"><a href="#cb695-2"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(provincias_permitidas)) {</span>
<span id="cb695-3"><a href="#cb695-3"></a>    </span>
<span id="cb695-4"><a href="#cb695-4"></a>    casos_mes_provincia <span class="ot">&lt;-</span></span>
<span id="cb695-5"><a href="#cb695-5"></a>      tidy_covid2<span class="sc">$</span>casos[<span class="sc">!</span><span class="fu">is.na</span>(tidy_covid2<span class="sc">$</span>provincia_iso) <span class="sc">&amp;</span></span>
<span id="cb695-6"><a href="#cb695-6"></a>                          tidy_covid2<span class="sc">$</span>provincia_iso <span class="sc">==</span> provincias_permitidas[j] <span class="sc">&amp;</span></span>
<span id="cb695-7"><a href="#cb695-7"></a>                          tidy_covid2<span class="sc">$</span>mes_year <span class="sc">==</span> for_values[i]]</span>
<span id="cb695-8"><a href="#cb695-8"></a>    </span>
<span id="cb695-9"><a href="#cb695-9"></a>    resumen_mes_provincia <span class="ot">&lt;-</span></span>
<span id="cb695-10"><a href="#cb695-10"></a>      <span class="fu">rbind</span>(resumen_mes_provincia, </span>
<span id="cb695-11"><a href="#cb695-11"></a>            <span class="fu">tibble</span>(<span class="st">"mes_year"</span> <span class="ot">=</span> for_values[i], <span class="st">"provincia_iso"</span> <span class="ot">=</span> provincias_permitidas[j],</span>
<span id="cb695-12"><a href="#cb695-12"></a>                   <span class="st">"casos"</span> <span class="ot">=</span> <span class="fu">mean</span>(casos_mes_provincia, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb695-13"><a href="#cb695-13"></a>  }</span>
<span id="cb695-14"><a href="#cb695-14"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="resoluci√≥n-de-entrega-ii-8" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<p>Dise√±a una funci√≥n <code>resumen_por_fecha_provincia()</code> que dada un vector de c√≥digos ISO de provincias permitidas, y un tabla, nos devuelva la media de casos diarios que hubo cada mes-a√±o (sin importar sexo ni edad) en las provincias permitidas. Es decir: debes ‚Äúadaptar‚Äù el c√≥digo anterior a una funci√≥n.</p>
<p>&nbsp;</p>
<p>Simplemente debes <strong>copiar y pegar el c√≥digo de los dos anteriores</strong> (salvo el vector de provincias que ahora ser√° un argumento), y adaptarlo a que las provincias est√°n en <code>prov_iso</code> y la tabla en <code>datos</code>.</p>
</section>
<section id="resoluci√≥n-de-entrega-ii-9" class="slide level2">
<h2>Resoluci√≥n de entrega II</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb696"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb696-1"><a href="#cb696-1"></a>resumen_por_fecha_provincia <span class="ot">&lt;-</span> <span class="cf">function</span>(prov_iso, datos) {</span>
<span id="cb696-2"><a href="#cb696-2"></a>  </span>
<span id="cb696-3"><a href="#cb696-3"></a>  datos<span class="sc">$</span>mes_year <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"{month(datos$fecha)}-{year(datos$fecha)}"</span>)</span>
<span id="cb696-4"><a href="#cb696-4"></a>  for_values <span class="ot">&lt;-</span> <span class="fu">unique</span>(datos<span class="sc">$</span>mes_year)</span>
<span id="cb696-5"><a href="#cb696-5"></a>  resumen_mes_provincia <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span>
<span id="cb696-6"><a href="#cb696-6"></a>  </span>
<span id="cb696-7"><a href="#cb696-7"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(for_values)) {</span>
<span id="cb696-8"><a href="#cb696-8"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(prov_iso)) {</span>
<span id="cb696-9"><a href="#cb696-9"></a>      </span>
<span id="cb696-10"><a href="#cb696-10"></a>      casos_mes_provincia <span class="ot">&lt;-</span></span>
<span id="cb696-11"><a href="#cb696-11"></a>        datos<span class="sc">$</span>casos[<span class="sc">!</span><span class="fu">is.na</span>(datos<span class="sc">$</span>provincia_iso) <span class="sc">&amp;</span></span>
<span id="cb696-12"><a href="#cb696-12"></a>                            datos<span class="sc">$</span>provincia_iso <span class="sc">==</span> prov_iso[j] <span class="sc">&amp;</span></span>
<span id="cb696-13"><a href="#cb696-13"></a>                            datos<span class="sc">$</span>mes_year <span class="sc">==</span> for_values[i]]</span>
<span id="cb696-14"><a href="#cb696-14"></a>      </span>
<span id="cb696-15"><a href="#cb696-15"></a>      resumen_mes_provincia <span class="ot">&lt;-</span></span>
<span id="cb696-16"><a href="#cb696-16"></a>        <span class="fu">rbind</span>(resumen_mes_provincia, </span>
<span id="cb696-17"><a href="#cb696-17"></a>              <span class="fu">tibble</span>(<span class="st">"mes_year"</span> <span class="ot">=</span> for_values[i], <span class="st">"provincia_iso"</span> <span class="ot">=</span> prov_iso[j],</span>
<span id="cb696-18"><a href="#cb696-18"></a>                     <span class="st">"casos"</span> <span class="ot">=</span> <span class="fu">mean</span>(casos_mes_provincia, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb696-19"><a href="#cb696-19"></a>    }</span>
<span id="cb696-20"><a href="#cb696-20"></a>  }</span>
<span id="cb696-21"><a href="#cb696-21"></a></span>
<span id="cb696-22"><a href="#cb696-22"></a>    <span class="fu">return</span>(resumen_mes_provincia)</span>
<span id="cb696-23"><a href="#cb696-23"></a>}</span>
<span id="cb696-24"><a href="#cb696-24"></a><span class="fu">resumen_por_fecha_provincia</span>(<span class="fu">c</span>(<span class="st">"M"</span>, <span class="st">"B"</span>, <span class="st">"SE"</span>, <span class="st">"V"</span>, <span class="st">"Z"</span>), tidy_covid2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 √ó 3
   mes_year provincia_iso casos
   &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;
 1 3-2020   M             79.3 
 2 3-2020   B             47.2 
 3 3-2020   SE             5.66
 4 3-2020   V              9.65
 5 3-2020   Z              6.63
 6 4-2020   M             48.0 
 7 4-2020   B             41.4 
 8 4-2020   SE             3.02
 9 4-2020   V              5.78
10 4-2020   Z              5.42
# ‚Ñπ 20 more rows</code></pre>
</div>
</div>
</section>
<section id="qu√©-es-tidyverse-3" class="slide level2">
<h2>¬øQu√© es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: <span class="hl-yellow"><strong>optimizando data.frame</strong></span></li>
<li><code>{tidyr}</code>: limpieza de datos</li>
<li><code>{readr}</code>: carga datos rectangulares (.csv)</li>
<li><code>{dplyr}</code>: <span class="hl-yellow"><strong>gram√°tica para depurar</strong></span></li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{ggplot2}</code>: visualizaci√≥n de datos</li>
<li><code>{tidymodels}</code>: modelizaci√≥n/predicci√≥n</li>
</ul>
</div>
</div>
</section>
<section id="preprocesamiento-dplyr" class="slide level2">
<h2>Preprocesamiento: dplyr</h2>
<p>Dentro de <code>{tidyverse}</code> usaremos el paquete <code>{dplyr}</code> para el <span class="hl-yellow"><strong>preprocesamiento y depuraci√≥n</strong></span> de los datos.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/dplyr.png" width="450"></p>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb698"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb698-1"><a href="#cb698-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb698-2"><a href="#cb698-2"></a>  <span class="fu">limpio</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-3"><a href="#cb698-3"></a>  <span class="fu">filtro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-4"><a href="#cb698-4"></a>  <span class="fu">selecciono</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-5"><a href="#cb698-5"></a>  <span class="fu">ordeno</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-6"><a href="#cb698-6"></a>  <span class="fu">modifico</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-7"><a href="#cb698-7"></a>  <span class="fu">renombro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-8"><a href="#cb698-8"></a>  <span class="fu">agrupo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-9"><a href="#cb698-9"></a>  <span class="fu">cuento</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-10"><a href="#cb698-10"></a>  <span class="fu">resumo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb698-11"><a href="#cb698-11"></a>  <span class="fu">pinto</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>La idea es que el <span class="hl-yellow"><strong>c√≥digo sea legible</strong></span>, como si fuese una <strong>lista de instrucciones</strong> que al leerla nos diga de manera muy evidente lo que est√° haciendo.</p>
</section>
<section id="hip√≥tesis-tidydata" class="slide level2">
<h2>Hip√≥tesis: tidydata</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Toda la depuraci√≥n que vamos a realizar es sobre la <span class="hl-yellow"><strong>hip√≥tesis de que nuestros datos est√°n en tidydata</strong></span></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidy_def.jpg" style="width:160.0%"></p>
</div>
</div>
<p>Recuerda que en <code>{tidyverse}</code> ser√° clave el <span class="hl-yellow"><strong>operador pipe (tuber√≠a)</strong></span> definido como <code>|&gt;</code> (<span class="hl-purple"><strong>ctrl+shift+M</strong></span>): ser√° una <span class="hl-yellow"><strong>tuber√≠a que recorre los datos</strong></span> y los transforma.</p>
<div class="fragment">
<p>Vamos a practicar con el dataset <code>starwars</code> del paquete cargado <code>{dplyr}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb699"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb699-1"><a href="#cb699-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb699-2"><a href="#cb699-2"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="muestreo" class="slide level2">
<h2>Muestreo</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Una de las operaciones m√°s comunes es lo que se conoce en estad√≠stica como <span class="hl-yellow"><strong>muestreo</strong></span>: una <span class="hl-yellow"><strong>selecci√≥n o filtrado de registros</strong></span> (una submuestra)</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/muestreo.jpeg" width="500"></p>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>No aleatorio (por cuotas)</strong></span>: en base a condiciones l√≥gicas sobre los registros (<code>filter()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>No aleatorio (intencional/discreccional)</strong></span>: en base a posici√≥n (<code>slice()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Aleatorio simple</strong></span> (<code>slice_sample()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Aleatorio estratificado</strong></span> (<code>group_by()</code> + <code>slice_sample()</code>)</li>
</ul>
</div>
</section>
<section id="filtrar-filas-filter" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb700"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb700-1"><a href="#cb700-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb700-2"><a href="#cb700-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb701"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb701-1"><a href="#cb701-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb701-2"><a href="#cb701-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>El m√°s simple es cuando <span class="hl-yellow"><strong>filtramos registros</strong></span> en base a alguna condici√≥n l√≥gica: con <code>filter()</code> se seleccionar√°n solo individuos que cumplan ciertas condiciones (muestreo no aleatorio por condiciones)</p>
<div>
<ul>
<li class="fragment"><code>==</code>, <code>!=</code>: <span class="hl-purple"><strong>igual</strong></span> o <span class="hl-yellow"><strong>distinto</strong></span> que (<code>|&gt; filter(variable == "a")</code>)</li>
<li class="fragment"><code>&gt;</code>, <code>&lt;</code>: <span class="hl-purple"><strong>mayor</strong></span> o <span class="hl-yellow"><strong>menor</strong></span> que (<code>|&gt; filter(variable &lt; 3)</code>)</li>
<li class="fragment"><code>&gt;=</code>, <code>&lt;=</code>: <span class="hl-yellow"><strong>mayor o igual</strong></span> o <span class="hl-purple"><strong>menor o igual</strong></span> que (<code>|&gt; filter(variable &gt;= 5)</code>)</li>
<li class="fragment"><code>%in%</code>: valores <span class="hl-yellow"><strong>pertenencen</strong></span> a un listado de opciones (<code>|&gt; filter(variable %in% c("azul", "verde"))</code>)</li>
<li class="fragment"><code>between(variable, val1, val2)</code>: si los valores (continuos) <span class="hl-yellow"><strong>caen dentro de un rango</strong></span> de valores (<code>|&gt; filter(between(variable, 160, 180))</code>)</li>
</ul>
</div>
</section>
<section id="filtrar-filas-filter-1" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<p>Dichas <span class="hl-yellow"><strong>condiciones l√≥gicas</strong></span> las podemos <span class="hl-yellow"><strong>combinar</strong></span> de diferentes maneras (y, o, o excluyente)</p>

<img data-src="img/tablas_verdad.png" class="r-stretch"><div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Recuerda que dentro de <code>filter()</code> debe ir siempre algo que devuelva un <span class="hl-green"><strong>vector de valores l√≥gicos</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-2" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb702"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb702-1"><a href="#cb702-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb702-2"><a href="#cb702-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb703"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb703-1"><a href="#cb703-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb703-2"><a href="#cb703-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¬øC√≥mo har√≠as para‚Ä¶ <span class="hl-yellow"><strong>filtrar</strong></span> los personajes de <span class="hl-purple"><strong>ojos marrones</strong></span>?</p>
<div class="fragment">
<p><span class="hl-yellow"><strong>¬øQu√© tipo de variable es?</strong></span> ‚Äì&gt; La variable <code>eye_color</code> es cualitativa as√≠ que est√° representada por textos</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb704"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb704-1"><a href="#cb704-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb704-2"><a href="#cb704-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Leia Or‚Ä¶    150  49   brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 2 Biggs D‚Ä¶    183  84   black      light      brown           24   male  mascu‚Ä¶
 3 Han Solo    180  80   brown      fair       brown           29   male  mascu‚Ä¶
 4 Yoda         66  17   white      green      brown          896   male  mascu‚Ä¶
 5 Boba Fe‚Ä¶    183  78.2 black      fair       brown           31.5 male  mascu‚Ä¶
 6 Lando C‚Ä¶    177  79   black      dark       brown           31   male  mascu‚Ä¶
 7 Arvel C‚Ä¶     NA  NA   brown      fair       brown           NA   male  mascu‚Ä¶
 8 Wicket ‚Ä¶     88  20   brown      brown      brown            8   male  mascu‚Ä¶
 9 Padm√© A‚Ä¶    185  45   brown      light      brown           46   fema‚Ä¶ femin‚Ä¶
10 Quarsh ‚Ä¶    183  NA   black      dark       brown           62   male  mascu‚Ä¶
# ‚Ñπ 11 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-3" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb706"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb706-1"><a href="#cb706-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb706-2"><a href="#cb706-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb707"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb707-1"><a href="#cb707-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb707-2"><a href="#cb707-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¬øC√≥mo har√≠as para‚Ä¶ <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>no tienen ojos marrones</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb708"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb708-1"><a href="#cb708-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb708-2"><a href="#cb708-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">!=</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 66 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu‚Ä¶
 3 R2-D2        96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
 5 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 6 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 7 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu‚Ä¶
 8 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
 9 Anakin ‚Ä¶    188    84 blond      fair       blue            41.9 male  mascu‚Ä¶
10 Wilhuff‚Ä¶    180    NA auburn, g‚Ä¶ fair       blue            64   male  mascu‚Ä¶
# ‚Ñπ 56 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-4" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb710"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb710-1"><a href="#cb710-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb710-2"><a href="#cb710-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb711"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb711-1"><a href="#cb711-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb711-2"><a href="#cb711-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¬øC√≥mo har√≠as para ‚Ä¶ <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan los ojos marrones o azules</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb712"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb712-1"><a href="#cb712-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb712-2"><a href="#cb712-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"brown"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 3 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 4 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 5 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
 6 Anakin ‚Ä¶    188    84 blond      fair       blue            41.9 male  mascu‚Ä¶
 7 Wilhuff‚Ä¶    180    NA auburn, g‚Ä¶ fair       blue            64   male  mascu‚Ä¶
 8 Chewbac‚Ä¶    228   112 brown      unknown    blue           200   male  mascu‚Ä¶
 9 Han Solo    180    80 brown      fair       brown           29   male  mascu‚Ä¶
10 Jek Ton‚Ä¶    180   110 brown      fair       blue            NA   &lt;NA&gt;  &lt;NA&gt;  
# ‚Ñπ 30 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-5" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb714"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb714-1"><a href="#cb714-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb714-2"><a href="#cb714-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb715"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb715-1"><a href="#cb715-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb715-2"><a href="#cb715-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>F√≠jate que <code>%in%</code> es equivalente a concatenar varios <code>==</code> con una conjunci√≥n o (<code>|</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb716"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb716-1"><a href="#cb716-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb716-2"><a href="#cb716-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"blue"</span> <span class="sc">|</span> eye_color <span class="sc">==</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 3 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 4 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 5 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
 6 Anakin ‚Ä¶    188    84 blond      fair       blue            41.9 male  mascu‚Ä¶
 7 Wilhuff‚Ä¶    180    NA auburn, g‚Ä¶ fair       blue            64   male  mascu‚Ä¶
 8 Chewbac‚Ä¶    228   112 brown      unknown    blue           200   male  mascu‚Ä¶
 9 Han Solo    180    80 brown      fair       brown           29   male  mascu‚Ä¶
10 Jek Ton‚Ä¶    180   110 brown      fair       blue            NA   &lt;NA&gt;  &lt;NA&gt;  
# ‚Ñπ 30 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="filtrar-filas-filter-6" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb718"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb718-1"><a href="#cb718-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb718-2"><a href="#cb718-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb719"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb719-1"><a href="#cb719-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb719-2"><a href="#cb719-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¬øC√≥mo har√≠as para ‚Ä¶ <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>midan entre 120 y 160 cm</strong></span>?</p>
<div class="fragment">
<p><span class="hl-yellow"><strong>¬øQu√© tipo de variable es?</strong></span> ‚Äì&gt; La variable <code>height</code> es cuantitativa continua as√≠ que deberemos filtrar por rangos de valores (intervalos) ‚Äì&gt; usaremos <code>between()</code></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb720"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb720-1"><a href="#cb720-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb720-2"><a href="#cb720-2"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">160</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Leia Org‚Ä¶    150    49 brown      light      brown             19 fema‚Ä¶ femin‚Ä¶
2 Mon Moth‚Ä¶    150    NA auburn     fair       blue              48 fema‚Ä¶ femin‚Ä¶
3 Nien Nunb    160    68 none       grey       black             NA male  mascu‚Ä¶
4 Watto        137    NA black      blue, grey yellow            NA male  mascu‚Ä¶
5 Gasgano      122    NA none       white, bl‚Ä¶ black             NA male  mascu‚Ä¶
6 Cord√©        157    NA brown      light      brown             NA &lt;NA&gt;  &lt;NA&gt;  
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-7" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb722"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb722-1"><a href="#cb722-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb722-2"><a href="#cb722-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb723"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb723-1"><a href="#cb723-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb723-2"><a href="#cb723-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¬øC√≥mo har√≠as‚Ä¶ <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan ojos y no sean humanos</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb724"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb724-1"><a href="#cb724-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb724-2"><a href="#cb724-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">!=</span> <span class="st">"Human"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Yoda          66    17 white      green      brown            896 male  mascu‚Ä¶
2 Wicket S‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶
3 Eeth Koth    171    NA black      brown      brown             NA male  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-8" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb726"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb726-1"><a href="#cb726-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb726-2"><a href="#cb726-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb727"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb727-1"><a href="#cb727-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb727-2"><a href="#cb727-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¬øC√≥mo har√≠as‚Ä¶ <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan ojos y no sean humanos, o que tengan m√°s de 60 a√±os</strong></span>? Pi√©nsalo bien: los <span class="hl-yellow"><strong>par√©ntesis son importantes</strong></span>: no es lo mismo <span class="math inline">\((a+b)*c\)</span> que <span class="math inline">\(a+(b*c)\)</span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb728"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb728-1"><a href="#cb728-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb728-2"><a href="#cb728-2"></a>  <span class="fu">filter</span>((eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">!=</span> <span class="st">"Human"</span>) <span class="sc">|</span> birth_year <span class="sc">&gt;</span> <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 C-3PO       167    75 &lt;NA&gt;       gold       yellow           112 none  mascu‚Ä¶
 2 Wilhuff‚Ä¶    180    NA auburn, g‚Ä¶ fair       blue              64 male  mascu‚Ä¶
 3 Chewbac‚Ä¶    228   112 brown      unknown    blue             200 male  mascu‚Ä¶
 4 Jabba D‚Ä¶    175  1358 &lt;NA&gt;       green-tan‚Ä¶ orange           600 herm‚Ä¶ mascu‚Ä¶
 5 Yoda         66    17 white      green      brown            896 male  mascu‚Ä¶
 6 Palpati‚Ä¶    170    75 grey       pale       yellow            82 male  mascu‚Ä¶
 7 Wicket ‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶
 8 Qui-Gon‚Ä¶    193    89 brown      fair       blue              92 male  mascu‚Ä¶
 9 Finis V‚Ä¶    170    NA blond      fair       blue              91 male  mascu‚Ä¶
10 Quarsh ‚Ä¶    183    NA black      dark       brown             62 male  mascu‚Ä¶
11 Shmi Sk‚Ä¶    163    NA black      fair       brown             72 fema‚Ä¶ femin‚Ä¶
12 Mace Wi‚Ä¶    188    84 none       dark       brown             72 male  mascu‚Ä¶
13 Ki-Adi-‚Ä¶    198    82 white      pale       yellow            92 male  mascu‚Ä¶
14 Eeth Ko‚Ä¶    171    NA black      brown      brown             NA male  mascu‚Ä¶
15 Cliegg ‚Ä¶    183    NA brown      fair       blue              82 male  mascu‚Ä¶
16 Dooku       193    80 white      fair       brown            102 male  mascu‚Ä¶
17 Bail Pr‚Ä¶    191    NA black      tan        brown             67 male  mascu‚Ä¶
18 Jango F‚Ä¶    183    79 black      tan        brown             66 male  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="eliminar-ausentes-drop_na" class="slide level2">
<h2>Eliminar ausentes: drop_na()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb730"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb730-1"><a href="#cb730-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb730-2"><a href="#cb730-2"></a>  <span class="fu">retirar_ausentes</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb731"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb731-1"><a href="#cb731-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb731-2"><a href="#cb731-2"></a>  <span class="fu">drop_na</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hay un <strong>filtro especial</strong> para una de las operaciones m√°s habituales en depuraci√≥n: <span class="hl-yellow"><strong>retirar los ausentes</strong></span>. Para ello podemos usar dentro de un filtro <code>is.na()</code>, que nos devuelve <code>TRUE/FALSE</code> en funci√≥n de si es ausente, o bien ‚Ä¶</p>
<div class="fragment">
<p>Usar <code>drop_na()</code>: si no indicamos variable, elimina registros con ausente en cualquier variable. M√°s adelante veremos como <span class="hl-yellow"><strong>imputar esos ausentes</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb732"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb732-1"><a href="#cb732-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb732-2"><a href="#cb732-2"></a>  <span class="fu">drop_na</span>(mass, height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 √ó 4
  name                mass height hair_color 
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;      
1 Luke Skywalker        77    172 blond      
2 C-3PO                 75    167 &lt;NA&gt;       
3 R2-D2                 32     96 &lt;NA&gt;       
4 Darth Vader          136    202 none       
5 Leia Organa           49    150 brown      
6 Owen Lars            120    178 brown, grey
7 Beru Whitesun Lars    75    165 brown      </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb734"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb734-1"><a href="#cb734-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb734-2"><a href="#cb734-2"></a>  <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 √ó 4
  name                mass height hair_color   
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;        
1 Luke Skywalker        77    172 blond        
2 Darth Vader          136    202 none         
3 Leia Organa           49    150 brown        
4 Owen Lars            120    178 brown, grey  
5 Beru Whitesun Lars    75    165 brown        
6 Biggs Darklighter     84    183 black        
7 Obi-Wan Kenobi        77    182 auburn, white</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-10-1" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-13" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-13-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-13-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-13-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-13-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-13-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-13-1">
<p>üìù Selecciona del conjunto de starwars solo los personajes que sean androides o cuyo valor en <code>species</code> sea desconocido</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb736"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb736-1"><a href="#cb736-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb736-2"><a href="#cb736-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Droid"</span> <span class="sc">|</span> <span class="fu">is.na</span>(species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-2">
<p>üìù Selecciona del conjunto de starwars solo los personajes cuyo peso est√© entre 65 y 90 kg.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb737"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb737-1"><a href="#cb737-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">between</span>(mass, <span class="dv">65</span>, <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-3">
<p>üìù Tras limpiar de ausentes en todas las variables, selecciona del conjunto de starwars solo los personajes que sean humanos y que vengan de Tatooine</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb738"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb738-1"><a href="#cb738-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb738-2"><a href="#cb738-2"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb738-3"><a href="#cb738-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-4">
<p>üìù Selecciona del conjunto original de starwars los personajes no humanos, <code>male</code> en el sexo y que midan entre 120 y 170 cm, o los personajes con ojos marrones o rojos.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb739"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb739-1"><a href="#cb739-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb739-2"><a href="#cb739-2"></a>  <span class="fu">filter</span>((species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">&amp;</span></span>
<span id="cb739-3"><a href="#cb739-3"></a>            <span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">170</span>)) <span class="sc">|</span></span>
<span id="cb739-4"><a href="#cb739-4"></a>           eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"brown"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-13-5">
<p>üìù Busca informaci√≥n en la ayuda de la funci√≥n <code>str_detect()</code> del paquete <code>{stringr}</code> (cargado en <code>{tidyverse}</code>). Consejo: prueba antes las funciones que vayas a usar con alg√∫n vector de prueba para poder comprobar su funcionamiento. Tras saber lo que hace, filtra solo aquellos personajes con apellido <code>Skywalker</code></p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb740"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb740-1"><a href="#cb740-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">"Skywalker"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb741"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb741-1"><a href="#cb741-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb742"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb742-1"><a href="#cb742-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces nos puede interesar realizar un <span class="hl-yellow"><strong>muestreo no aleatorio discreccional</strong></span>, o lo que es lo mismo, <span class="hl-yellow"><strong>filtrar por posici√≥n</strong></span>: con <code>slice(posiciones)</code> podremos seleccionar filas concretas pasando como argumento un <span class="hl-yellow"><strong>vector de √≠ndices</strong></span></p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb743"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb743-1"><a href="#cb743-1"></a><span class="co"># fila 1</span></span>
<span id="cb743-2"><a href="#cb743-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb743-3"><a href="#cb743-3"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb745"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb745-1"><a href="#cb745-1"></a><span class="co"># filas de la 7 a la 9</span></span>
<span id="cb745-2"><a href="#cb745-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb745-3"><a href="#cb745-3"></a>  <span class="fu">slice</span>(<span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 4
  name               height  mass hair_color
  &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Beru Whitesun Lars    165    75 brown     
2 R5-D4                  97    32 &lt;NA&gt;      
3 Biggs Darklighter     183    84 black     </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb747"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb747-1"><a href="#cb747-1"></a><span class="co"># filas 2, 7, 10 y 31</span></span>
<span id="cb747-2"><a href="#cb747-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb747-3"><a href="#cb747-3"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">31</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 8
  name             height  mass hair_color skin_color eye_color birth_year sex  
  &lt;chr&gt;             &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 C-3PO               167    75 &lt;NA&gt;       gold       yellow           112 none 
2 Beru Whitesun L‚Ä¶    165    75 brown      light      blue              47 fema‚Ä¶
3 Obi-Wan Kenobi      182    77 auburn, w‚Ä¶ fair       blue-gray         57 male 
4 Qui-Gon Jinn        193    89 brown      fair       blue              92 male </code></pre>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice-1" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb749"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb749-1"><a href="#cb749-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb749-2"><a href="#cb749-2"></a>  <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb750"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb750-1"><a href="#cb750-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb750-2"><a href="#cb750-2"></a>  <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Disponemos de opciones por defecto:</p>
<ul>
<li>con <code>slice_head(n = ...)</code> y <code>slice_tail(n = ...)</code> podemos obtener la <span class="hl-yellow"><strong>cabecera y cola</strong></span> de la tabla</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb751"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb751-1"><a href="#cb751-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     
2 C-3PO             167    75 &lt;NA&gt;      </code></pre>
</div>
</div>
</div><div class="column" style="width:&quot;50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb753"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb753-1"><a href="#cb753-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 BB8                NA    NA none      
2 Captain Phasma     NA    NA none      </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice-2" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb755"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb755-1"><a href="#cb755-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb755-2"><a href="#cb755-2"></a>  <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb756"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb756-1"><a href="#cb756-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb756-2"><a href="#cb756-2"></a>  <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Disponemos de opciones por defecto:</p>
<ul>
<li>con <code>slice_max()</code> y <code>slice_min()</code> obtenemos la <span class="hl-yellow"><strong>filas con menor/mayor valor de una variable</strong></span> (si empate, todas salvo que <code>with_ties = FALSE</code>) que indicamos en <code>order_by = ...</code></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb757"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb757-1"><a href="#cb757-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_min</span>(mass, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  name         height  mass hair_color
  &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Ratts Tyerel     79    15 none      
2 Yoda             66    17 white     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb759"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb759-1"><a href="#cb759-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  name        height  mass hair_color
  &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Yarael Poof    264    NA none      
2 Tarfful        234   136 brown     </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="aleatorio-slice_sample" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb761"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb761-1"><a href="#cb761-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb761-2"><a href="#cb761-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb762"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb762-1"><a href="#cb762-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb762-2"><a href="#cb762-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>El conocido como <span class="hl-yellow"><strong>muestreo aleatorio simple</strong></span> se basa en <span class="hl-yellow"><strong>seleccionar individuos aleatoriamente</strong></span>, de forma que cada uno tenga ciertas <span class="hl-yellow"><strong>probabilidades</strong></span> de ser seleccionado. Con <code>slice_sample(n = ...)</code> podemos extraer n registros aleatoriamente (a priori equiprobables).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb763"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb763-1"><a href="#cb763-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Obi-Wan ‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray         57 male  mascu‚Ä¶
2 Grievous     216   159 none       brown, wh‚Ä¶ green, y‚Ä¶         NA male  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p><span class="hl-yellow"><strong>¬´Aleatorio¬ª no implica equiprobable</strong></span>: es igual de aleatorio un dado normal que uno trucado. No hay cosas ¬´m√°s aleatorias¬ª que otras, simplemente tienen subyacente distintas leyes de probabilidad.</p>
</div>
</div>
</div>
</div>
</section>
<section id="aleatorio-slice_sample-1" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb765"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb765-1"><a href="#cb765-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb765-2"><a href="#cb765-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb766"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb766-1"><a href="#cb766-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb766-2"><a href="#cb766-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Tambi√©n podremos indicarle la <span class="hl-yellow"><strong>proporci√≥n de datos a samplear</strong></span> (en lugar del n√∫mero) y si queremos que sea <span class="hl-yellow"><strong>con reemplazamiento (que se puedan repetir)</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb767"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb767-1"><a href="#cb767-1"></a><span class="co"># 5% de registros aleatorios con reemplazamiento</span></span>
<span id="cb767-2"><a href="#cb767-2"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb767-3"><a href="#cb767-3"></a>  <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.05</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Jabba De‚Ä¶    175  1358 &lt;NA&gt;       green-tan‚Ä¶ orange           600 herm‚Ä¶ mascu‚Ä¶
2 Tion Med‚Ä¶    206    80 none       grey       black             NA male  mascu‚Ä¶
3 Gregar T‚Ä¶    185    85 black      dark       brown             NA &lt;NA&gt;  &lt;NA&gt;  
4 Shmi Sky‚Ä¶    163    NA black      fair       brown             72 fema‚Ä¶ femin‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="aleatorio-slice_sample-2" class="slide level2">
<h2>Aleatorio: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb769"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb769-1"><a href="#cb769-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb769-2"><a href="#cb769-2"></a>  <span class="fu">rebanadas_aleatorias</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb770"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb770-1"><a href="#cb770-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb770-2"><a href="#cb770-2"></a>  <span class="fu">slice_sample</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Como dec√≠amos, ¬´aleatorio¬ª no es igual que ¬´equiprobable¬ª, as√≠ que podemos pasarle un <span class="hl-yellow"><strong>vector de probabilidades</strong></span>. Por ejemplo, vamos a forzar que sea muy improbable sacar una fila que no sean las dos primeras</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb771"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb771-1"><a href="#cb771-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb771-2"><a href="#cb771-2"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">weight_by =</span> <span class="fu">c</span>(<span class="fl">0.495</span>, <span class="fl">0.495</span>, <span class="fu">rep</span>(<span class="fl">0.01</span><span class="sc">/</span><span class="dv">85</span>, <span class="dv">85</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky‚Ä¶    172    77 blond      fair       blue              19 male  mascu‚Ä¶
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb773"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb773-1"><a href="#cb773-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb773-2"><a href="#cb773-2"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">weight_by =</span> <span class="fu">c</span>(<span class="fl">0.495</span>, <span class="fl">0.495</span>, <span class="fu">rep</span>(<span class="fl">0.01</span><span class="sc">/</span><span class="dv">85</span>, <span class="dv">85</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky‚Ä¶    172    77 blond      fair       blue              19 male  mascu‚Ä¶
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="par√©ntesis-sample" class="slide level2">
<h2>Par√©ntesis: sample()</h2>
<p>La funci√≥n <code>slice_sample()</code> es simplemente una integraci√≥n de <code>{tidyverse}</code> de la funci√≥n b√°sica de <code>R</code> conocida como <code>sample()</code> que nos permite <span class="hl-yellow"><strong>muestrear elementos</strong></span></p>
<div class="fragment">
<p>Por ejemplo, vamos a <span class="hl-yellow"><strong>muestrear 10 tiradas de un dado</strong></span>, indic√°ndole</p>
<ul>
<li><span class="hl-purple"><strong>soporte</strong></span> de nuestra variable aleatorio (valores permitidos en <code>x</code>)</li>
<li><span class="hl-purple"><strong>tama√±o</strong></span> muestral (<code>size</code>)</li>
<li><span class="hl-purple"><strong>reemplazamiento</strong></span> (si <code>TRUE</code> entonces pueden salir repetidas, como en el caso del dado)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb775"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb775-1"><a href="#cb775-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 4 1 5 5 2 1 3 2 3 2</code></pre>
</div>
</div>
</div>
</section>
<section id="par√©ntesis-sample-1" class="slide level2">
<h2>Par√©ntesis: sample()</h2>
<p>La opci√≥n anterior lo que genera son sucesos de una variable aleatoria <span class="hl-yellow"><strong>equiprobable</strong></span> pero al igual que antes, podemos asignarle un vector de probabilidades o <span class="hl-yellow"><strong>funci√≥n de masa</strong></span> concreta con el argumento <code>prob = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb777"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb777-1"><a href="#cb777-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">50</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>,</span>
<span id="cb777-2"><a href="#cb777-2"></a>       <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.05</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 2 3 5 5 1 1 4 2 1 2 1 4 1 6 2 1 2 2 1 1 6 3 4 2 3 3 1 6 1 1 2 2 3 2 5 3 1 1
[39] 3 1 2 3 4 3 2 1 6 1 1 2</code></pre>
</div>
</div>
</section>
<section id="par√©ntesis-sample-2" class="slide level2">
<h2>Par√©ntesis: sample()</h2>
<p><strong>¬øC√≥mo har√≠as el siguiente enunciado?</strong></p>
<p>&nbsp;</p>
<p>Supongamos que en una ciudad se han estudiado episodios de gripe estacional. Sean las variables aleatorias <span class="math inline">\(X_m\)</span> y <span class="math inline">\(X_p\)</span> tal que <span class="math inline">\(X_m=1\)</span> si la madre tiene gripe, <span class="math inline">\(X_m=0\)</span> si la madre no tiene gripe, <span class="math inline">\(X_p=1\)</span> si el padre tiene gripe y <span class="math inline">\(X_p=0\)</span> si el padre no tiene gripe. El modelo te√≥rico asociado a este tipo de epidemias indica que la distribuci√≥n conjunta viene dada por <span class="math inline">\(P(X_m = 1, X_p=1)=0.02\)</span>, <span class="math inline">\(P(X_m = 1, X_p=0)=0.08\)</span>, <span class="math inline">\(P(X_m = 1, X_p=0)=0.1\)</span> y <span class="math inline">\(P(X_m = 0, X_p=0)=0.8\)</span></p>
<p><strong>Genera una muestra</strong> de tama√±o <span class="math inline">\(n = 1000\)</span> (soporte <code>"10"</code>, <code>"01"</code>, <code>"00"</code> y <code>"11"</code>) haciendo uso de <code>runif()</code> y haciendo uso de <code>sample()</code></p>
</section>
<section id="reordenar-filas-arrange" class="slide level2">
<h2>Reordenar filas: arrange()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb779"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb779-1"><a href="#cb779-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">ordenar</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb780"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb780-1"><a href="#cb780-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Tambi√©n podemos <span class="hl-yellow"><strong>ordenar filas</strong></span> en funci√≥n de alguna variable con <code>arrange()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb781"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb781-1"><a href="#cb781-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 6
  name                  height  mass hair_color skin_color  eye_color
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Ratts Tyerel              79    15 none       grey, blue  unknown  
2 Yoda                      66    17 white      green       brown    
3 Wicket Systri Warrick     88    20 brown      brown       brown    
4 R2-D2                     96    32 &lt;NA&gt;       white, blue red      
5 R5-D4                     97    32 &lt;NA&gt;       white, red  red      </code></pre>
</div>
</div>
<div class="fragment">
<p>Por <span class="hl-yellow"><strong>defecto de menor a mayor</strong></span> pero podemos <span class="hl-purple"><strong>invertir el orden</strong></span> con <code>desc()</code></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb783"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb783-1"><a href="#cb783-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 3
  name         height  mass
  &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;
1 Yarael Poof     264    NA
2 Tarfful         234   136
3 Lama Su         229    88
4 Chewbacca       228   112
5 Roos Tarpals    224    82</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb785"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb785-1"><a href="#cb785-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass, <span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 3
  name                  height  mass
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
1 Ratts Tyerel              79    15
2 Yoda                      66    17
3 Wicket Systri Warrick     88    20
4 R5-D4                     97    32
5 R2-D2                     96    32</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="eliminar-duplicados-distinct" class="slide level2">
<h2>Eliminar duplicados: distinct()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb787"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb787-1"><a href="#cb787-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">sin_duplicados</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb788"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb788-1"><a href="#cb788-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Muchas veces necesitaremos asegurarnos que no hay duplicados en alguna variable (DNI) y podemos <span class="hl-yellow"><strong>eliminar filas duplicadas</strong></span> con <code>distinct()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb789"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb789-1"><a href="#cb789-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 1
  sex           
  &lt;chr&gt;         
1 male          
2 none          
3 female        
4 hermaphroditic
5 &lt;NA&gt;          </code></pre>
</div>
</div>
<div class="fragment">
<p>Para mantener todas las columnas de la tabla usaremos <code>.keep_all = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb791"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb791-1"><a href="#cb791-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky‚Ä¶    172    77 blond      fair       blue              19 male  mascu‚Ä¶
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu‚Ä¶
3 Leia Org‚Ä¶    150    49 brown      light      brown             19 fema‚Ä¶ femin‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="a√±adir-filas-bind_rows" class="slide level2">
<h2>A√±adir filas: bind_rows()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb793"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb793-1"><a href="#cb793-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">encuadernar_filas</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb794"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb794-1"><a href="#cb794-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por √∫ltimo, podemos <span class="hl-yellow"><strong>concatenar nuevas filas</strong></span> con <code>bind_rows()</code> con <span class="hl-red"><strong>las nuevas observaciones en tabla</strong></span> (si no cuadran columnas rellena con ausentes)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb795"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb795-1"><a href="#cb795-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb795-2"><a href="#cb795-2"></a>  <span class="fu">tibble</span>(<span class="st">"nombre"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>), <span class="st">"edad"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">50</span>))</span>
<span id="cb795-3"><a href="#cb795-3"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  nombre  edad
  &lt;chr&gt;  &lt;dbl&gt;
1 javi      33
2 laura     50</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb797"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb797-1"><a href="#cb797-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(<span class="fu">tibble</span>(<span class="st">"nombre"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"carlos"</span>, <span class="cn">NA</span>), <span class="st">"cp"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">28045</span>, <span class="dv">28019</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
  nombre  edad    cp
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 javi      33    NA
2 laura     50    NA
3 carlos    NA 28045
4 &lt;NA&gt;      NA 28019</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-10-2" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-14" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-14-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-14-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-14-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-14-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-14-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-14-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-14-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-14-1">
<p>üìù Selecciona solo los personajes que sean humanos y de ojos marrones, para despu√©s ordernarlos en altura descendente y peso ascendente.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb799"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb799-1"><a href="#cb799-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb799-2"><a href="#cb799-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">==</span> <span class="st">"Human"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb799-3"><a href="#cb799-3"></a>  <span class="fu">arrange</span>(height, <span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-2">
<p>üìù Extrae 3 registros aleatoriamente.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb800"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb800-1"><a href="#cb800-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-3">
<p>üìù Extrae el 10% de los registros aleatoriamente.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb801"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb801-1"><a href="#cb801-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-4">
<p>üìù Extrae aleatoriamente 10 personajes pero de forma que la probabilidad de que salga cada uno sea proporcional a su peso (m√°s pesados, m√°s probable)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb802"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb802-1"><a href="#cb802-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb802-2"><a href="#cb802-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb802-3"><a href="#cb802-3"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">weight_by =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-5">
<p>üìù Selecciona los 3 personajes m√°s mayores.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb803"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb803-1"><a href="#cb803-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(birth_year, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-6">
<p>üìù Para saber que valores √∫nicos hay en el color de pelo, elimina duplicados de la variable <code>hair_color</code>, eliminando antes los ausentes de dicha variable.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb804"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb804-1"><a href="#cb804-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb804-2"><a href="#cb804-2"></a>  <span class="fu">drop_na</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb804-3"><a href="#cb804-3"></a>  <span class="fu">distinct</span>(hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-14-7">
<p>üìù De los personajes que son humanos y miden m√°s de 160 cm, elimina duplicados en color de ojos, elimina ausentes en peso, selecciona los 3 m√°s altos, y orden de mayor a menor peso. Devuelve la tabla.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb805"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb805-1"><a href="#cb805-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb805-2"><a href="#cb805-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">160</span>) <span class="sc">|&gt;</span> </span>
<span id="cb805-3"><a href="#cb805-3"></a>  <span class="fu">distinct</span>(eye_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb805-4"><a href="#cb805-4"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb805-5"><a href="#cb805-5"></a>  <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb805-6"><a href="#cb805-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="resumen" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es important√≠simo que el c√≥digo se entienda, por nuestro yo el futuro pero tambi√©n por la <span class="hl-yellow"><strong>transparencia algor√≠tmica</strong></span> hacia los dem√°s</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 m√°s altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb806" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb806-1"><a href="#cb806-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb806-2"><a href="#cb806-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb806-3"><a href="#cb806-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb806-4"><a href="#cb806-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb806-5"><a href="#cb806-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb806-6"><a href="#cb806-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb807" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb807-1"><a href="#cb807-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb807-2"><a href="#cb807-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb807-3"><a href="#cb807-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb807-4"><a href="#cb807-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb807-5"><a href="#cb807-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb807-6"><a href="#cb807-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumen-1" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es important√≠simo que el c√≥digo se entienda, por nuestro yo el futuro pero tambi√©n por la <span class="hl-yellow"><strong>transparencia algor√≠tmica</strong></span> hacia los dem√°s</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 m√°s altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb808" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb808-1"><a href="#cb808-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb808-2"><a href="#cb808-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb808-3"><a href="#cb808-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb808-4"><a href="#cb808-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb808-5"><a href="#cb808-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb808-6"><a href="#cb808-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb809" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb809-1"><a href="#cb809-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb809-2"><a href="#cb809-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb809-3"><a href="#cb809-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb809-4"><a href="#cb809-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb809-5"><a href="#cb809-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb809-6"><a href="#cb809-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumen-2" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es important√≠simo que el c√≥digo se entienda, por nuestro yo el futuro pero tambi√©n por la <span class="hl-yellow"><strong>transparencia algor√≠tmica</strong></span> hacia los dem√°s</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 m√°s altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb810" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb810-1"><a href="#cb810-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb810-2"><a href="#cb810-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb810-3"><a href="#cb810-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb810-4"><a href="#cb810-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb810-5"><a href="#cb810-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb810-6"><a href="#cb810-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb811" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb811-1"><a href="#cb811-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb811-2"><a href="#cb811-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb811-3"><a href="#cb811-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb811-4"><a href="#cb811-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb811-5"><a href="#cb811-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb811-6"><a href="#cb811-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumen-3" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es important√≠simo que el c√≥digo se entienda, por nuestro yo el futuro pero tambi√©n por la <span class="hl-yellow"><strong>transparencia algor√≠tmica</strong></span> hacia los dem√°s</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 m√°s altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb812" data-code-line-numbers="5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb812-1"><a href="#cb812-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb812-2"><a href="#cb812-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb812-3"><a href="#cb812-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb812-4"><a href="#cb812-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb812-5"><a href="#cb812-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb812-6"><a href="#cb812-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb813" data-code-line-numbers="5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb813-1"><a href="#cb813-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb813-2"><a href="#cb813-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb813-3"><a href="#cb813-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb813-4"><a href="#cb813-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb813-5"><a href="#cb813-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb813-6"><a href="#cb813-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="resumen-4" class="slide level2">
<h2>Resumen</h2>
<p>La clave de <code>{tidyverse}</code> es la <span class="hl-yellow"><strong>legibilidad</strong></span>: es important√≠simo que el c√≥digo se entienda, por nuestro yo el futuro pero tambi√©n por la <span class="hl-yellow"><strong>transparencia algor√≠tmica</strong></span> hacia los dem√°s</p>
<p><span class="hl-purple"><strong>Por ejemplo</strong></span>: quitaremos ausentes de la variable peso, filtraremos los personajes humanos y altura superior a 140cm, sin duplicados en el color de pelo, extrayendo los 5 m√°s altos y obteniendo 2 personajes aleatorios finalmente.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb814" data-code-line-numbers="6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb814-1"><a href="#cb814-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb814-2"><a href="#cb814-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb814-3"><a href="#cb814-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb814-4"><a href="#cb814-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb814-5"><a href="#cb814-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb814-6"><a href="#cb814-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb815" data-code-line-numbers="6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb815-1"><a href="#cb815-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb815-2"><a href="#cb815-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb815-3"><a href="#cb815-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb815-4"><a href="#cb815-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb815-5"><a href="#cb815-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb815-6"><a href="#cb815-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="caso-practico-10" class="slide level2">
<h2>üê£ Caso pr√°ctico</h2>
<p>Vamos a volver aun viejo conocido: en el paquete <code>{datasets}</code> (ya instalado por defecto) ten√≠amos diversos conjuntos de datos y uno de ellos era <code>airquality</code> con el que ya trabajamos. Los datos capturan <span class="hl-yellow"><strong>medidas diarias (n = 153 observaciones) de la calidad del aire</strong></span> en Nueva York, de mayo a septiembre de 1973.</p>
<p>En ese momento lo trabajamos desde la perspectiva de R base y extrayendo algunas variables del mismo. El objetivo ahora ser√° trabajarlo desde la perspectiva de <code>{tidyverse}</code> fij√°ndonos en las diferencias de una y otra forma.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb816"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb816-1"><a href="#cb816-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb816-2"><a href="#cb816-2"></a>airquality</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-filas-columnas/#caso-pr%C3%A1ctico-i-airquality-tidyverse"><strong>workbook</strong></a>.</p>
</section></section>
<section>
<section id="clase-11" class="title-slide slide level1 center">
<h1>Clase 11: <span class="flow">tidyverse (columnas)</span></h1>
<p><span style="color:#444442;"><strong>Tidyverse: operaciones por columnas</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-11-1">üíª Ejercicios resueltos: select</a></p></li>
<li><p><a href="#/tu-turno-11-2">üíª Ejercicios resueltos: mutate, if_else, case_when</a></p></li>
<li><p><a href="#/caso-practico-11-1">üê£ Workbook/caso pr√°ctico I: simulaci√≥n</a></p></li>
<li><p><a href="#/caso-practico-11-2">üê£ Workbook/caso pr√°ctico II</a></p></li>
<li><p><a href="#/caso-practico-11-3">üê£ Workbook/caso pr√°ctico III: El Se√±or de los Anillos</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="selecci√≥n-columnas-select" class="slide level2">
<h2>Selecci√≥n columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb817"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb817-1"><a href="#cb817-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb818"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb818-1"><a href="#cb818-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hasta ahora todas las operaciones realizadas (aunque us√°semos info de columnas) eran por filas. En elc aso de columnas, la acci√≥n m√°s sencilla es <span class="hl-yellow"><strong>seleccionar variables por nombre</strong></span> con <code>select()</code>, dando como argumentos los nombres de columnas <span class="hl-purple"><strong>sin comillas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb819"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb819-1"><a href="#cb819-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name, hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 2
   name               hair_color   
   &lt;chr&gt;              &lt;chr&gt;        
 1 Luke Skywalker     blond        
 2 C-3PO              &lt;NA&gt;         
 3 R2-D2              &lt;NA&gt;         
 4 Darth Vader        none         
 5 Leia Organa        brown        
 6 Owen Lars          brown, grey  
 7 Beru Whitesun Lars brown        
 8 R5-D4              &lt;NA&gt;         
 9 Biggs Darklighter  black        
10 Obi-Wan Kenobi     auburn, white
# ‚Ñπ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="selecci√≥n-columnas-select-1" class="slide level2">
<h2>Selecci√≥n columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb821"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb821-1"><a href="#cb821-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb822"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb822-1"><a href="#cb822-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>La funci√≥n <code>select()</code> nos permite seleccionar varias variables a la vez, incluso <span class="hl-yellow"><strong>concatenando sus nombres como si fuesen √≠ndices num√©ricos</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb823"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb823-1"><a href="#cb823-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name<span class="sc">:</span>eye_color) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 6
  name           height  mass hair_color skin_color  eye_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Luke Skywalker    172    77 blond      fair        blue     
2 C-3PO             167    75 &lt;NA&gt;       gold        yellow   
3 R2-D2              96    32 &lt;NA&gt;       white, blue red      
4 Darth Vader       202   136 none       white       yellow   </code></pre>
</div>
</div>
<div class="fragment">
<p>Y podemos <span class="hl-yellow"><strong>deseleccionar columnas</strong></span> con <code>-</code> delante</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb825"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb825-1"><a href="#cb825-1"></a>starwars <span class="sc">|&gt;</span>  <span class="fu">select</span>(<span class="sc">-</span>mass, <span class="sc">-</span>(eye_color<span class="sc">:</span>starships))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 4
  name           height hair_color skin_color 
  &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      
1 Luke Skywalker    172 blond      fair       
2 C-3PO             167 &lt;NA&gt;       gold       
3 R2-D2              96 &lt;NA&gt;       white, blue
4 Darth Vader       202 none       white      </code></pre>
</div>
</div>
</div>
</section>
<section id="selecci√≥n-columnas-select-2" class="slide level2">
<h2>Selecci√≥n columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb827"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb827-1"><a href="#cb827-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb828"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb828-1"><a href="#cb828-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Tenemos adem√°s <span class="hl-yellow"><strong>palabras reservadas</strong></span>: <code>everything()</code> <span class="hl-purple"><strong>todas las variables</strong></span>‚Ä¶</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb829"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb829-1"><a href="#cb829-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(mass, homeworld, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 14
   mass homeworld name   height hair_color skin_color eye_color birth_year sex  
  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1    77 Tatooine  Luke ‚Ä¶    172 blond      fair       blue            19   male 
2    75 Tatooine  C-3PO     167 &lt;NA&gt;       gold       yellow         112   none 
3    32 Naboo     R2-D2      96 &lt;NA&gt;       white, bl‚Ä¶ red             33   none 
4   136 Tatooine  Darth‚Ä¶    202 none       white      yellow          41.9 male 
# ‚Ñπ 5 more variables: gender &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<p>‚Ä¶y <code>last_col()</code> para referirnos a <span class="hl-purple"><strong>la √∫ltima columna</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb831"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb831-1"><a href="#cb831-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name<span class="sc">:</span>mass, homeworld, <span class="fu">last_col</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 5
  name           height  mass homeworld starships
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;list&gt;   
1 Luke Skywalker    172    77 Tatooine  &lt;chr [2]&gt;
2 C-3PO             167    75 Tatooine  &lt;chr [0]&gt;
3 R2-D2              96    32 Naboo     &lt;chr [0]&gt;
4 Darth Vader       202   136 Tatooine  &lt;chr [1]&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="selecci√≥n-columnas-select-3" class="slide level2">
<h2>Selecci√≥n columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb833"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb833-1"><a href="#cb833-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb834"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb834-1"><a href="#cb834-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Tambi√©n podemos jugar con <span class="hl-yellow"><strong>patrones</strong></span> en el nombre, aquellas que <span class="hl-purple"><strong>comiencen por un prefijo</strong></span> (<code>starts_with()</code>), <span class="hl-purple"><strong>terminen con un sufijo</strong></span> (<code>ends_with()</code>), <span class="hl-purple"><strong>contengan un texto</strong></span> (<code>contains()</code>) o cumplan una <span class="hl-purple"><strong>expresi√≥n regular</strong></span> (<code>matches()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb835"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb835-1"><a href="#cb835-1"></a><span class="co"># variables cuyo nombre acaba en "color" y contengan sexo o g√©nero</span></span>
<span id="cb835-2"><a href="#cb835-2"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"color"</span>), <span class="fu">matches</span>(<span class="st">"sex|gender"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 5
   hair_color    skin_color  eye_color sex    gender   
   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;    
 1 blond         fair        blue      male   masculine
 2 &lt;NA&gt;          gold        yellow    none   masculine
 3 &lt;NA&gt;          white, blue red       none   masculine
 4 none          white       yellow    male   masculine
 5 brown         light       brown     female feminine 
 6 brown, grey   light       blue      male   masculine
 7 brown         light       blue      female feminine 
 8 &lt;NA&gt;          white, red  red       none   masculine
 9 black         light       brown     male   masculine
10 auburn, white fair        blue-gray male   masculine
# ‚Ñπ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="selecci√≥n-columnas-select-4" class="slide level2">
<h2>Selecci√≥n columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb837"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb837-1"><a href="#cb837-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb838"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb838-1"><a href="#cb838-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Incluso podemos <span class="hl-yellow"><strong>seleccionar por rango num√©rico</strong></span> si tenemos variables con un prefijo y n√∫meros.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb839"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb839-1"><a href="#cb839-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb839-2"><a href="#cb839-2"></a>  <span class="fu">tibble</span>(<span class="st">"semana1"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">115</span>, <span class="dv">141</span>, <span class="dv">232</span>), <span class="st">"semana2"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="cn">NA</span>, <span class="dv">17</span>),</span>
<span id="cb839-3"><a href="#cb839-3"></a>         <span class="st">"semana3"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">162</span>, <span class="cn">NA</span>), <span class="st">"semana4"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">19</span>, <span class="dv">15</span>),</span>
<span id="cb839-4"><a href="#cb839-4"></a>         <span class="st">"semana5"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">262</span>, <span class="dv">190</span>), <span class="st">"semana6"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">23</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con <code>num_range()</code> podemos seleccionar con un prefijo y una secuencia num√©rica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb840"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb840-1"><a href="#cb840-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">num_range</span>(<span class="st">"semana"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 4
  semana1 semana2 semana3 semana4
    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1     115       7      95      11
2     141      NA     162      19
3     232      17      NA      15</code></pre>
</div>
</div>
</div>
</section>
<section id="selecci√≥n-columnas-select-5" class="slide level2">
<h2>Selecci√≥n columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb842"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb842-1"><a href="#cb842-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb843"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb843-1"><a href="#cb843-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por √∫ltimo, podemos seleccionar columnas por <span class="hl-yellow"><strong>tipo de dato</strong></span> haciendo uso de <code>where()</code> y dentro una funci√≥n que devuelva un valor l√≥gico de tipo de dato.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb844"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb844-1"><a href="#cb844-1"></a><span class="co"># Solo columnas num√©ricas o de texto</span></span>
<span id="cb844-2"><a href="#cb844-2"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 11
   height  mass birth_year name     hair_color skin_color eye_color sex   gender
    &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; 
 1    172    77       19   Luke Sk‚Ä¶ blond      fair       blue      male  mascu‚Ä¶
 2    167    75      112   C-3PO    &lt;NA&gt;       gold       yellow    none  mascu‚Ä¶
 3     96    32       33   R2-D2    &lt;NA&gt;       white, bl‚Ä¶ red       none  mascu‚Ä¶
 4    202   136       41.9 Darth V‚Ä¶ none       white      yellow    male  mascu‚Ä¶
 5    150    49       19   Leia Or‚Ä¶ brown      light      brown     fema‚Ä¶ femin‚Ä¶
 6    178   120       52   Owen La‚Ä¶ brown, gr‚Ä¶ light      blue      male  mascu‚Ä¶
 7    165    75       47   Beru Wh‚Ä¶ brown      light      blue      fema‚Ä¶ femin‚Ä¶
 8     97    32       NA   R5-D4    &lt;NA&gt;       white, red red       none  mascu‚Ä¶
 9    183    84       24   Biggs D‚Ä¶ black      light      brown     male  mascu‚Ä¶
10    182    77       57   Obi-Wan‚Ä¶ auburn, w‚Ä¶ fair       blue-gray male  mascu‚Ä¶
# ‚Ñπ 77 more rows
# ‚Ñπ 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="mover-columnas-relocate" class="slide level2">
<h2>Mover columnas: relocate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb846"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb846-1"><a href="#cb846-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb846-2"><a href="#cb846-2"></a>  <span class="fu">recolocar</span>(var1, <span class="at">despues_de =</span> var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb847"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb847-1"><a href="#cb847-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb847-2"><a href="#cb847-2"></a>  <span class="fu">relocate</span>(var1, <span class="at">.after =</span> var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Para facilitar la <span class="hl-yellow"><strong>recolocaci√≥n de variables</strong></span> tenemos una funci√≥n para ello, <code>relocate()</code>, indic√°ndole en <code>.after</code> o <code>.before</code> <span class="hl-purple"><strong>detr√°s</strong></span> o <span class="hl-purple"><strong>delante</strong></span> de qu√© columnas queremos moverlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb848"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb848-1"><a href="#cb848-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">relocate</span>(species, <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 14
   species name    height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 Human   Luke S‚Ä¶    172    77 blond      fair       blue            19   male 
 2 Droid   C-3PO      167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 Droid   R2-D2       96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none 
 4 Human   Darth ‚Ä¶    202   136 none       white      yellow          41.9 male 
 5 Human   Leia O‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶
 6 Human   Owen L‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male 
 7 Human   Beru W‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶
 8 Droid   R5-D4       97    32 &lt;NA&gt;       white, red red             NA   none 
 9 Human   Biggs ‚Ä¶    183    84 black      light      brown           24   male 
10 Human   Obi-Wa‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male 
# ‚Ñπ 77 more rows
# ‚Ñπ 5 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="renombrar-rename" class="slide level2">
<h2>Renombrar: rename()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb850"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb850-1"><a href="#cb850-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">renombrar</span>(<span class="at">nuevo =</span> antiguo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb851"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb851-1"><a href="#cb851-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">nuevo =</span> antiguo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces tambi√©n podemos querer <span class="hl-yellow"><strong>modificar la ¬´metainformaci√≥n¬ª</strong></span> de los datos, <span class="hl-yellow"><strong>renombrando columnas</strong></span>. Para ello usaremos de <code>rename()</code> poniendo <span class="hl-purple"><strong>primero el nombre nuevo</strong></span> y luego el <span class="hl-purple"><strong>antiguo</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb852"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb852-1"><a href="#cb852-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height, <span class="at">peso =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 14
   nombre   altura  peso hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu‚Ä¶
 3 R2-D2        96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
 5 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 6 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 7 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu‚Ä¶
 9 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
10 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
# ‚Ñπ 77 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="extraer-columnas-pull" class="slide level2">
<h2>Extraer columnas: pull()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb854"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb854-1"><a href="#cb854-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">retirar</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb855"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb855-1"><a href="#cb855-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">pull</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Si observas la salida de los <code>select()</code> <span class="hl-yellow"><strong>sigue siendo una tabla tibble</strong></span>, ya que nos preserva la naturaleza de nuestros datos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb856"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb856-1"><a href="#cb856-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 1
   name              
   &lt;chr&gt;             
 1 Luke Skywalker    
 2 C-3PO             
 3 R2-D2             
 4 Darth Vader       
 5 Leia Organa       
 6 Owen Lars         
 7 Beru Whitesun Lars
 8 R5-D4             
 9 Biggs Darklighter 
10 Obi-Wan Kenobi    
# ‚Ñπ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="extraer-columnas-pull-1" class="slide level2">
<h2>Extraer columnas: pull()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb858"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb858-1"><a href="#cb858-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">retirar</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb859"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb859-1"><a href="#cb859-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">pull</span>(var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces no querremos dicha estructura sino <span class="hl-yellow"><strong>extraer literalmente la columna en un VECTOR</strong></span>, algo que podemos hacer con <code>pull()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb860"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb860-1"><a href="#cb860-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">pull</span>(name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Luke Skywalker"        "C-3PO"                 "R2-D2"                
 [4] "Darth Vader"           "Leia Organa"           "Owen Lars"            
 [7] "Beru Whitesun Lars"    "R5-D4"                 "Biggs Darklighter"    
[10] "Obi-Wan Kenobi"        "Anakin Skywalker"      "Wilhuff Tarkin"       
[13] "Chewbacca"             "Han Solo"              "Greedo"               
[16] "Jabba Desilijic Tiure" "Wedge Antilles"        "Jek Tono Porkins"     
[19] "Yoda"                  "Palpatine"             "Boba Fett"            
[22] "IG-88"                 "Bossk"                 "Lando Calrissian"     
[25] "Lobot"                 "Ackbar"                "Mon Mothma"           
[28] "Arvel Crynyd"          "Wicket Systri Warrick" "Nien Nunb"            
[31] "Qui-Gon Jinn"          "Nute Gunray"           "Finis Valorum"        
[34] "Padm√© Amidala"         "Jar Jar Binks"         "Roos Tarpals"         
[37] "Rugor Nass"            "Ric Oli√©"              "Watto"                
[40] "Sebulba"               "Quarsh Panaka"         "Shmi Skywalker"       
[43] "Darth Maul"            "Bib Fortuna"           "Ayla Secura"          
[46] "Ratts Tyerel"          "Dud Bolt"              "Gasgano"              
[49] "Ben Quadinaros"        "Mace Windu"            "Ki-Adi-Mundi"         
[52] "Kit Fisto"             "Eeth Koth"             "Adi Gallia"           
[55] "Saesee Tiin"           "Yarael Poof"           "Plo Koon"             
[58] "Mas Amedda"            "Gregar Typho"          "Cord√©"                
[61] "Cliegg Lars"           "Poggle the Lesser"     "Luminara Unduli"      
[64] "Barriss Offee"         "Dorm√©"                 "Dooku"                
[67] "Bail Prestor Organa"   "Jango Fett"            "Zam Wesell"           
[70] "Dexter Jettster"       "Lama Su"               "Taun We"              
[73] "Jocasta Nu"            "R4-P17"                "Wat Tambor"           
[76] "San Hill"              "Shaak Ti"              "Grievous"             
[79] "Tarfful"               "Raymus Antilles"       "Sly Moore"            
[82] "Tion Medon"            "Finn"                  "Rey"                  
[85] "Poe Dameron"           "BB8"                   "Captain Phasma"       </code></pre>
</div>
</div>
</section>
<section id="tu-turno-11-1" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-15" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-15-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-15-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-15-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-15-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-15-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-15-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-15-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-15-1">
<p>üìù Filtra el conjunto de personajes y qu√©date solo con aquellos que en la variable <code>height</code> no tengan un dato ausente. Con los datos obtenidos del filtro anterior, selecciona solo las variables name, height, as√≠ como todas aquellas variables que CONTENGAN la palabra color en su nombre.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb862"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb862-1"><a href="#cb862-1"></a>starwars_2 <span class="ot">&lt;-</span></span>
<span id="cb862-2"><a href="#cb862-2"></a>  starwars <span class="sc">|&gt;</span> </span>
<span id="cb862-3"><a href="#cb862-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb862-4"><a href="#cb862-4"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-2">
<p>üìù Con los datos obtenidos del ejercicio anterior, traduce el nombre de las columnas a castellano.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb863"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb863-1"><a href="#cb863-1"></a>starwars_2 <span class="sc">|&gt;</span> </span>
<span id="cb863-2"><a href="#cb863-2"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height, <span class="at">color_pelo =</span> hair_color,</span>
<span id="cb863-3"><a href="#cb863-3"></a>         <span class="at">color_piel =</span> skin_color, <span class="at">color_ojos =</span> eye_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-3">
<p>üìù Con los datos obtenidos del ejercicio 1, coloca la variable de color de pelo justo detr√°s de la variable de nombres.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb864"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb864-1"><a href="#cb864-1"></a>starwars_2 <span class="sc">|&gt;</span></span>
<span id="cb864-2"><a href="#cb864-2"></a>  <span class="fu">relocate</span>(hair_color, <span class="at">.after =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-4">
<p>üìù Con los datos obtenidos del ejercicio 1, comprueba cu√°ntas modalidades √∫nicas hay en la variable de color de pelo (sin usar <code>unique()</code>).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb865"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb865-1"><a href="#cb865-1"></a>starwars_2 <span class="sc">|&gt;</span></span>
<span id="cb865-2"><a href="#cb865-2"></a>  <span class="fu">distinct</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb865-3"><a href="#cb865-3"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-5">
<p>üìù Del conjunto de datos originales, elimina las columnas de tipo lista, y tras ello elimina duplicados en la variable <code>eye_color</code>. Tras eliminar duplicados extrae dicha columna en un vector.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb866"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb866-1"><a href="#cb866-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb866-2"><a href="#cb866-2"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">where</span>(is.list)) <span class="sc">|&gt;</span> </span>
<span id="cb866-3"><a href="#cb866-3"></a>  <span class="fu">distinct</span>(eye_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb866-4"><a href="#cb866-4"></a>  <span class="fu">pull</span>(eye_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-6">
<p>üìù Del conjunto de datos original de starwars, con solo los personajes cuya altura es conocida, extrae en un vector con dicha variable.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb867"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb867-1"><a href="#cb867-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb867-2"><a href="#cb867-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb867-3"><a href="#cb867-3"></a>  <span class="fu">pull</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-15-7">
<p>üìù Tras obtener el vector del ejercicio anterior, usa dicho vector para realizar un muestreo aleatorio del 50% de los datos de manera que la probabilidad de cada personaje de ser elegido sea inversamente proporcional a su altura (m√°s bajitos, m√°s opciones).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb868"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb868-1"><a href="#cb868-1"></a>heights <span class="ot">&lt;-</span></span>
<span id="cb868-2"><a href="#cb868-2"></a>  starwars <span class="sc">|&gt;</span> </span>
<span id="cb868-3"><a href="#cb868-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb868-4"><a href="#cb868-4"></a>  <span class="fu">pull</span>(height)</span>
<span id="cb868-5"><a href="#cb868-5"></a>  </span>
<span id="cb868-6"><a href="#cb868-6"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb868-7"><a href="#cb868-7"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb868-8"><a href="#cb868-8"></a>  <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.5</span>, <span class="at">weight_by =</span> <span class="dv">1</span><span class="sc">/</span>heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="modificar-columnas-mutate" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb869"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb869-1"><a href="#cb869-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb870"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb870-1"><a href="#cb870-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>En muchas ocasiones querremos <span class="hl-yellow"><strong>modificar o crear variables</strong></span> con <code>mutate()</code>.</p>
<div class="fragment">
<p>Vamos a crear por ejemplo una nueva variable <code>height_m</code> con la altura en metros.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb871"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb871-1"><a href="#cb871-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">height_m =</span> height <span class="sc">/</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 15
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu‚Ä¶
 3 R2-D2        96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
 5 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 6 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 7 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu‚Ä¶
 9 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
10 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
# ‚Ñπ 77 more rows
# ‚Ñπ 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;, height_m &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="modificar-columnas-mutate-1" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb873"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb873-1"><a href="#cb873-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb874"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb874-1"><a href="#cb874-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Adem√°s con los argumentos opcionales podemos <span class="hl-yellow"><strong>recolocar la columna modificada</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb875"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb875-1"><a href="#cb875-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb875-2"><a href="#cb875-2"></a>  <span class="fu">mutate</span>(<span class="at">height_m =</span> height <span class="sc">/</span> <span class="dv">100</span>,</span>
<span id="cb875-3"><a href="#cb875-3"></a>         <span class="at">IMC =</span> mass <span class="sc">/</span> (height_m<span class="sc">^</span><span class="dv">2</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 16
   height_m   IMC name   height  mass hair_color skin_color eye_color birth_year
      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
 1     1.72  26.0 Luke ‚Ä¶    172    77 blond      fair       blue            19  
 2     1.67  26.9 C-3PO     167    75 &lt;NA&gt;       gold       yellow         112  
 3     0.96  34.7 R2-D2      96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33  
 4     2.02  33.3 Darth‚Ä¶    202   136 none       white      yellow          41.9
 5     1.5   21.8 Leia ‚Ä¶    150    49 brown      light      brown           19  
 6     1.78  37.9 Owen ‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52  
 7     1.65  27.5 Beru ‚Ä¶    165    75 brown      light      blue            47  
 8     0.97  34.0 R5-D4      97    32 &lt;NA&gt;       white, red red             NA  
 9     1.83  25.1 Biggs‚Ä¶    183    84 black      light      brown           24  
10     1.82  23.2 Obi-W‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57  
# ‚Ñπ 77 more rows
# ‚Ñπ 7 more variables: sex &lt;chr&gt;, gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="modificar-columnas-mutate-2" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb877"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb877-1"><a href="#cb877-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb878"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb878-1"><a href="#cb878-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>Cuando aplicamos <code>mutate()</code>, debemos de acordarnos que las <span class="hl-yellow"><strong>operaciones se realizan de manera vectorial</strong></span>, elemento a elemento, por lo que la funci√≥n que usemos dentro debe devolver un vector de igual longitud. En caso contrario, <span class="hl-red"><strong>devolver√° una constante</strong></span></p>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb879"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb879-1"><a href="#cb879-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb879-2"><a href="#cb879-2"></a>  <span class="fu">mutate</span>(<span class="at">constante =</span> <span class="fu">mean</span>(mass, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 15
   constante name  height  mass hair_color skin_color eye_color birth_year sex  
       &lt;dbl&gt; &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1      97.3 Luke‚Ä¶    172    77 blond      fair       blue            19   male 
 2      97.3 C-3PO    167    75 &lt;NA&gt;       gold       yellow         112   none 
 3      97.3 R2-D2     96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none 
 4      97.3 Dart‚Ä¶    202   136 none       white      yellow          41.9 male 
 5      97.3 Leia‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶
 6      97.3 Owen‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male 
 7      97.3 Beru‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶
 8      97.3 R5-D4     97    32 &lt;NA&gt;       white, red red             NA   none 
 9      97.3 Bigg‚Ä¶    183    84 black      light      brown           24   male 
10      97.3 Obi-‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male 
# ‚Ñπ 77 more rows
# ‚Ñπ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="recategorizar-if_else" class="slide level2">
<h2>Recategorizar: if_else()</h2>
<p>Tambi√©n podemos combinar <code>mutate()</code> con la expresi√≥n de control <code>if_else()</code> para <span class="hl-yellow"><strong>recategorizar la variable</strong></span>: si <span class="hl-purple"><strong>se cumple una condici√≥n</strong></span>, hace una cosa, en caso contrario otra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb881"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb881-1"><a href="#cb881-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb881-2"><a href="#cb881-2"></a>  <span class="fu">mutate</span>(<span class="at">human =</span> <span class="fu">if_else</span>(species <span class="sc">==</span> <span class="st">"Human"</span>, <span class="st">"Human"</span>, <span class="st">"Not Human"</span>),</span>
<span id="cb881-3"><a href="#cb881-3"></a>         <span class="at">.after =</span> name) <span class="sc">|&gt;</span> </span>
<span id="cb881-4"><a href="#cb881-4"></a>  <span class="fu">select</span>(name<span class="sc">:</span>mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 4
   name               human     height  mass
   &lt;chr&gt;              &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt;
 1 Luke Skywalker     Human        172    77
 2 C-3PO              Not Human    167    75
 3 R2-D2              Not Human     96    32
 4 Darth Vader        Human        202   136
 5 Leia Organa        Human        150    49
 6 Owen Lars          Human        178   120
 7 Beru Whitesun Lars Human        165    75
 8 R5-D4              Not Human     97    32
 9 Biggs Darklighter  Human        183    84
10 Obi-Wan Kenobi     Human        182    77
# ‚Ñπ 77 more rows</code></pre>
</div>
</div>
</section>
<section id="recategorizar-case_when" class="slide level2">
<h2>Recategorizar: case_when()</h2>
<p>Para <span class="hl-yellow"><strong>recategorizaciones m√°s complejas</strong></span> tenemos <code>case_when()</code>, por ejemplo, para crear una categor√≠a de los personajes en funci√≥n de su altura.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb883"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb883-1"><a href="#cb883-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb883-2"><a href="#cb883-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb883-3"><a href="#cb883-3"></a>  <span class="fu">mutate</span>(<span class="at">altura =</span> <span class="fu">case_when</span>(height <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">~</span> <span class="st">"enanos"</span>,</span>
<span id="cb883-4"><a href="#cb883-4"></a>                            height <span class="sc">&lt;</span> <span class="dv">160</span> <span class="sc">~</span> <span class="st">"bajito"</span>,</span>
<span id="cb883-5"><a href="#cb883-5"></a>                            height <span class="sc">&lt;</span> <span class="dv">180</span> <span class="sc">~</span> <span class="st">"normal"</span>,</span>
<span id="cb883-6"><a href="#cb883-6"></a>                            height <span class="sc">&lt;</span> <span class="dv">200</span> <span class="sc">~</span> <span class="st">"alto"</span>,</span>
<span id="cb883-7"><a href="#cb883-7"></a>                            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"gigante"</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 81 √ó 15
   altura  name    height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 normal  Luke S‚Ä¶    172    77 blond      fair       blue            19   male 
 2 normal  C-3PO      167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 enanos  R2-D2       96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none 
 4 gigante Darth ‚Ä¶    202   136 none       white      yellow          41.9 male 
 5 bajito  Leia O‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶
 6 normal  Owen L‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male 
 7 normal  Beru W‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶
 8 enanos  R5-D4       97    32 &lt;NA&gt;       white, red red             NA   none 
 9 alto    Biggs ‚Ä¶    183    84 black      light      brown           24   male 
10 alto    Obi-Wa‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male 
# ‚Ñπ 71 more rows
# ‚Ñπ 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="datos-anidados" class="slide level2">
<h2>Datos anidados</h2>
<p>Tambi√©n podemos <span class="hl-yellow"><strong>anidar o incrustar datasets uno dentro de otro</strong></span>. Imagina que tenemos un dataset de variables <code>x</code> e <code>y</code> con 2 registros, otro con las mismas variables pero solo un registro y otro de 3 registros.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb885"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb885-1"><a href="#cb885-1"></a>data_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"x"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>), <span class="st">"y"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="cn">NA</span>))</span>
<span id="cb885-2"><a href="#cb885-2"></a>data_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"x"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">NA</span>), <span class="st">"y"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5</span>))</span>
<span id="cb885-3"><a href="#cb885-3"></a>data_3 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"x"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">7</span>), <span class="st">"y"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.5</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Hasta ahora la √∫nica manera que sabemos de <span class="hl-yellow"><strong>juntar los 3 datasets</strong></span> es haciendo uso de <code>bind_rows()</code> (por cierto, si usas el argumento <code>.id = "nombre_variable"</code> podemos hacer que se a√±ade sola una nueva variable que nos diga a que dataset pertenec√≠a cada fila</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb886"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb886-1"><a href="#cb886-1"></a>data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(data_1, data_2, data_3, <span class="at">.id =</span> <span class="st">"dataset"</span>)</span>
<span id="cb886-2"><a href="#cb886-2"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  dataset     x     y
  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 1           0  -1  
2 1           2  NA  
3 2          NA   5  
4 3          -2   1.5
5 3           6  NA  
6 3           7  -2  </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-anidados-1" class="slide level2">
<h2>Datos anidados</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb888"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb888-1"><a href="#cb888-1"></a>data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(data_1, data_2, data_3, <span class="at">.id =</span> <span class="st">"dataset"</span>)</span>
<span id="cb888-2"><a href="#cb888-2"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  dataset     x     y
  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 1           0  -1  
2 1           2  NA  
3 2          NA   5  
4 3          -2   1.5
5 3           6  NA  
6 3           7  -2  </code></pre>
</div>
</div>
<p>Sin embargo en muchas ocasiones lo que querremos es tener <span class="hl-yellow"><strong>los 3 en un mismo objeto PERO cada dataset por su cuenta</strong></span>: un objeto (una lista) que almacene los 3 datasets separados entre s√≠.</p>
<div class="fragment">
<p>Para ello usaremos la funci√≥n <code>nest()</code> indicando que variables comunes forman los datasets (en este caso <code>x</code> e <code>y</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb890"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb890-1"><a href="#cb890-1"></a>data_nest <span class="ot">&lt;-</span></span>
<span id="cb890-2"><a href="#cb890-2"></a>  data <span class="sc">|&gt;</span></span>
<span id="cb890-3"><a href="#cb890-3"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="fu">c</span>(x, y))</span>
<span id="cb890-4"><a href="#cb890-4"></a>data_nest</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  dataset data            
  &lt;chr&gt;   &lt;list&gt;          
1 1       &lt;tibble [2 √ó 2]&gt;
2 2       &lt;tibble [1 √ó 2]&gt;
3 3       &lt;tibble [3 √ó 2]&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-anidados-2" class="slide level2">
<h2>Datos anidados</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb892"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb892-1"><a href="#cb892-1"></a>data_nest</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  dataset data            
  &lt;chr&gt;   &lt;list&gt;          
1 1       &lt;tibble [2 √ó 2]&gt;
2 2       &lt;tibble [1 √ó 2]&gt;
3 3       &lt;tibble [3 √ó 2]&gt;</code></pre>
</div>
</div>
<p>F√≠jate que ahora <code>data</code> es una lista ya que cada dataset almacenado podr√≠a tener diferentes longitudes</p>
</section>
<section id="datos-anidados-3" class="slide level2">
<h2>Datos anidados</h2>
<p>Para <span class="hl-yellow"><strong>desanidar podemos usar unnest()</strong></span> indicando la columna que contiene los datasets</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb894"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb894-1"><a href="#cb894-1"></a>data_nest <span class="sc">|&gt;</span> <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  dataset     x     y
  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 1           0  -1  
2 1           2  NA  
3 2          NA   5  
4 3          -2   1.5
5 3           6  NA  
6 3           7  -2  </code></pre>
</div>
</div>
</section>
<section id="tu-turno-11-2" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-16" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-16-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-16-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-16-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-16-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-16-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-16-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-16-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-16-1">
<p>üìù Selecciona solo las variables nombre, altura y as√≠ como todas aquellas variables relacionadas con el color, a la vez que te quedas solo con aquellos que no tengan ausente en la altura.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb896"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb896-1"><a href="#cb896-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb896-2"><a href="#cb896-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb896-3"><a href="#cb896-3"></a>  <span class="fu">drop_na</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-2">
<p>üìù Con los datos obtenidos del ejercicio anterior, traduce el nombre de las columnas a castellano.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb897"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb897-1"><a href="#cb897-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb897-2"><a href="#cb897-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb897-3"><a href="#cb897-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb897-4"><a href="#cb897-4"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height,</span>
<span id="cb897-5"><a href="#cb897-5"></a>         <span class="at">color_pelo =</span> eye_color, <span class="at">color_piel =</span> skin_color,</span>
<span id="cb897-6"><a href="#cb897-6"></a>         <span class="at">color_pelo =</span> hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-3">
<p>üìù Con los datos obtenidos del ejercicio anterior, coloca la variable de color de pelo justo detr√°s de la variable de nombres.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb898"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb898-1"><a href="#cb898-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb898-2"><a href="#cb898-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb898-3"><a href="#cb898-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb898-4"><a href="#cb898-4"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height,</span>
<span id="cb898-5"><a href="#cb898-5"></a>         <span class="at">color_pelo =</span> eye_color, <span class="at">color_piel =</span> skin_color,</span>
<span id="cb898-6"><a href="#cb898-6"></a>         <span class="at">color_pelo =</span> hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb898-7"><a href="#cb898-7"></a>  <span class="fu">relocate</span>(color_pelo, <span class="at">.after =</span> nombre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-4">
<p>üìù Con los datos originales, comprueba cu√°ntas modalidades √∫nicas hay en la variable de color de pelo.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb899"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb899-1"><a href="#cb899-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb899-2"><a href="#cb899-2"></a>  <span class="fu">distinct</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb899-3"><a href="#cb899-3"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-5">
<p>üìù Del dataset original, selecciona solo las variables num√©ricas y de tipo texto. Tras ello define una nueva variable llamada <code>under_18</code> que nos recategorice la variable de edad: <code>TRUE</code> si es menor de edad y <code>FALSE</code> en caso contrario</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb900"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb900-1"><a href="#cb900-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb900-2"><a href="#cb900-2"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character)) <span class="sc">|&gt;</span> </span>
<span id="cb900-3"><a href="#cb900-3"></a>  <span class="fu">mutate</span>(<span class="at">under_18 =</span> birth_year <span class="sc">&lt;</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-6">
<p>üìù Del dataset original, crea una nueva columna llamada <code>auburn</code> (cobrizo/caoba) que nos diga TRUE si el color de pelo contiene dicha palabra y FALSE en caso contrario (reminder <code>str_detect()</code>).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb901"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb901-1"><a href="#cb901-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb901-2"><a href="#cb901-2"></a>  <span class="fu">mutate</span>(<span class="at">auburn =</span> <span class="fu">str_detect</span>(hair_color, <span class="st">"auburn"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-16-7">
<p>üìù Del dataset original, incluye una columna que calcule el IMC. Tras ello, crea una nueva variable que valga <code>NA</code> si no es humano, <code>delgadez</code> por debajo de 18, <code>normal</code> entre 18 y 30, <code>sobrepeso</code> por encima de 30.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb902"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb902-1"><a href="#cb902-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb902-2"><a href="#cb902-2"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> mass <span class="sc">/</span> ((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>),</span>
<span id="cb902-3"><a href="#cb902-3"></a>         <span class="at">IMC_recat =</span> <span class="fu">case_when</span>(species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb902-4"><a href="#cb902-4"></a>                               IMC <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"delgadez"</span>,</span>
<span id="cb902-5"><a href="#cb902-5"></a>                               IMC <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"normal"</span>,</span>
<span id="cb902-6"><a href="#cb902-6"></a>                               <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"sobrepeso"</span>),</span>
<span id="cb902-7"><a href="#cb902-7"></a>         <span class="at">.after =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-11-1" class="slide level2">
<h2>üê£ Caso pr√°ctico I: simulaci√≥n</h2>
<p>Haciendo uso de todo lo aprendido, vamos a proceder a <span class="hl-yellow"><strong>crear una tabla con datos de beb√©s</strong></span> de tama√±o <code>n = 20</code> en donde <span class="hl-yellow"><strong>simulemos el sexo de los beb√©s y su peso</strong></span></p>
<ol type="1">
<li><p>Crea un <code>tibble</code> con dos columnas, una llamada <code>id_bebe</code> y otra llamada <code>sexo</code>. En el primer caso debe ir de 1 a 20. En el segundo caso, simula su sexo de manera que haya un 0.5 de probabilidad de <code>chico</code> y 0.5 de <code>chica</code>.</p></li>
<li><p>Conocido el sexo, crea una tercera columna llamada <code>peso</code> en la que simules dicho valor. Supondremos que para los chicos el peso sigue una distribuci√≥n <span class="math inline">\(N(\mu = 3.266kg, \sigma = 0.514)\)</span> y que para las chicas sigue una distribuci√≥n <span class="math inline">\(N(\mu = 3.155kg, \sigma = 0.495)\)</span>.</p></li>
</ol>
<p>&nbsp;</p>
<p>Puedes ver la soluci√≥n en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-filas-columnas/#caso-pr%C3%A1ctico-i-simulaci%C3%B3n"><strong>workbook</strong></a></p>
</section>
<section id="caso-practico-11-2" class="slide level2">
<h2>üê£ Caso pr√°ctico II: Taylor Swift</h2>
<p>Vamos a volver al <span class="hl-yellow"><strong>an√°lisis de Taylor Swift</strong></span> pero esta vez desde una perspectiva <span class="hl-yellow"><strong>tidyverse</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb903"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb903-1"><a href="#cb903-1"></a><span class="fu">library</span>(taylor)</span>
<span id="cb903-2"><a href="#cb903-2"></a>taylor_album_songs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 29
  album_name   ep    album_release track_number track_name      artist featuring
  &lt;chr&gt;        &lt;lgl&gt; &lt;date&gt;               &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;    
1 Taylor Swift FALSE 2006-10-24               1 Tim McGraw      Taylo‚Ä¶ &lt;NA&gt;     
2 Taylor Swift FALSE 2006-10-24               2 Picture To Burn Taylo‚Ä¶ &lt;NA&gt;     
3 Taylor Swift FALSE 2006-10-24               3 Teardrops On M‚Ä¶ Taylo‚Ä¶ &lt;NA&gt;     
4 Taylor Swift FALSE 2006-10-24               4 A Place In Thi‚Ä¶ Taylo‚Ä¶ &lt;NA&gt;     
5 Taylor Swift FALSE 2006-10-24               5 Cold As You     Taylo‚Ä¶ &lt;NA&gt;     
# ‚Ñπ 22 more variables: bonus_track &lt;lgl&gt;, promotional_release &lt;date&gt;,
#   single_release &lt;date&gt;, track_release &lt;date&gt;, danceability &lt;dbl&gt;,
#   energy &lt;dbl&gt;, key &lt;int&gt;, loudness &lt;dbl&gt;, mode &lt;int&gt;, speechiness &lt;dbl&gt;,
#   acousticness &lt;dbl&gt;, instrumentalness &lt;dbl&gt;, liveness &lt;dbl&gt;, valence &lt;dbl&gt;,
#   tempo &lt;dbl&gt;, time_signature &lt;int&gt;, duration_ms &lt;int&gt;, explicit &lt;lgl&gt;,
#   key_name &lt;chr&gt;, mode_name &lt;chr&gt;, key_mode &lt;chr&gt;, lyrics &lt;list&gt;</code></pre>
</div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-filas-columnas/#caso-pr%C3%A1ctico-ii-taylor-swift"><strong>workbook</strong></a></p>
</section>
<section id="caso-practico-11-3" class="slide level2">
<h2>üê£ Caso pr√°ctico III: el se√±or de los anillos</h2>
<p>Para practicar algunas funciones de <code>{dplyr}</code> vamos a usar datos de las pel√≠culas de la <span class="hl-yellow"><strong>trilog√≠a de El Se√±or de los Anillos</strong></span>. Los datos los cargaremos directamente desde la web (Github en este caso), sin pasar por el ordenador antes, simplemente <strong>indicando como ruta la web donde est√° el archivo</strong></p>
<ul>
<li><p>La comunidad del anillo -&gt; <a href="https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Fellowship_Of_The_Ring.csv" class="uri">https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Fellowship_Of_The_Ring.csv</a></p></li>
<li><p>Las 2 torres -&gt; <a href="https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Two_Towers.csv" class="uri">https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Two_Towers.csv</a></p></li>
<li><p>El Retorno del Rey -&gt; <a href="https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Return_Of_The_King.csv" class="uri">https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Return_Of_The_King.csv</a></p></li>
</ul>
</section>
<section id="caso-pr√°ctico-iii-el-se√±or-de-los-anillos" class="slide level2">
<h2>üê£ Caso pr√°ctico III: el se√±or de los anillos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb905"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb905-1"><a href="#cb905-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb905-2"><a href="#cb905-2"></a>lotr_1 <span class="ot">&lt;-</span></span>
<span id="cb905-3"><a href="#cb905-3"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Fellowship_Of_The_Ring.csv"</span>)</span>
<span id="cb905-4"><a href="#cb905-4"></a>lotr_2 <span class="ot">&lt;-</span></span>
<span id="cb905-5"><a href="#cb905-5"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Two_Towers.csv"</span>)</span>
<span id="cb905-6"><a href="#cb905-6"></a>lotr_3 <span class="ot">&lt;-</span></span>
<span id="cb905-7"><a href="#cb905-7"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Return_Of_The_King.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-filas-columnas/#caso-pr%C3%A1ctico-iii-el-se%C3%B1or-de-los-anillos"><strong>workbook</strong></a></p>
</section></section>
<section>
<section id="clase-12" class="title-slide slide level1 center">
<h1>Clase 12: <span class="flow">tidyverse (res√∫menes)</span></h1>
<p><span style="color:#444442;"><strong>Summarise y group_by(). Contar y resumir.</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-12-1">üíª Ejercicios resueltos</a></p></li>
<li><p><a href="#/caso-practico-12-1">üê£ Workbook/caso pr√°ctico I: billboard</a></p></li>
<li><p><a href="#/caso-practico-12-2">üê£ Workbook/caso pr√°ctico II: f√∫tbol</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="contar-count" class="slide level2">
<h2>Contar: count()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb906"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb906-1"><a href="#cb906-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">contar</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb907"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb907-1"><a href="#cb907-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hasta ahora solo hemos transformado o consultado los datos pero no hemos generado estad√≠sticas. Empecemos por lo sencillo: <span class="hl-yellow"><strong>¬øc√≥mo contar (frecuencias)?</strong></span></p>
<div class="fragment">
<p>Cuando lo usamos en solitario <code>count()</code> nos devolver√° simplemente el n√∫mero de registros , pero cuando lo usamos con variables <code>count()</code> calcula lo que se conoce como <span class="hl-yellow"><strong>frecuencias</strong></span>: <span class="hl-purple"><strong>n√∫mero de elementos de cada modalidad</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb908"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb908-1"><a href="#cb908-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 2
  sex                n
  &lt;chr&gt;          &lt;int&gt;
1 female            16
2 hermaphroditic     1
3 male              60
4 none               6
5 &lt;NA&gt;               4</code></pre>
</div>
</div>
</div>
</section>
<section id="contar-count-1" class="slide level2">
<h2>Contar: count()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb910"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb910-1"><a href="#cb910-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">contar</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb911"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb911-1"><a href="#cb911-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Adem√°s si pasamos varias variables nos calcula lo que se conoce como una <span class="hl-yellow"><strong>tabla de contigencia</strong></span>. Con <code>sort = TRUE</code> nos devolver√° el <span class="hl-purple"><strong>conteo ordenado</strong></span> (m√°s frecuentes primero).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb912"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb912-1"><a href="#cb912-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(sex, gender, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  sex            gender        n
  &lt;chr&gt;          &lt;chr&gt;     &lt;int&gt;
1 male           masculine    60
2 female         feminine     16
3 none           masculine     5
4 &lt;NA&gt;           &lt;NA&gt;          4
5 hermaphroditic masculine     1
6 none           feminine      1</code></pre>
</div>
</div>
</section>
<section id="agrupar-group_by" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb914"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb914-1"><a href="#cb914-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb914-2"><a href="#cb914-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb914-3"><a href="#cb914-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb914-4"><a href="#cb914-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb915"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb915-1"><a href="#cb915-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb915-2"><a href="#cb915-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb915-3"><a href="#cb915-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb915-4"><a href="#cb915-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Una de las <span class="hl-yellow"><strong>funciones m√°s potentes</strong></span> a combinar con las acciones vistas es <code>group_by()</code>, que nos permitir√° <span class="hl-yellow"><strong>agrupar nuestros registros</strong></span> previamente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb916"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb916-1"><a href="#cb916-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb916-2"><a href="#cb916-2"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span></span>
<span id="cb916-3"><a href="#cb916-3"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb916-4"><a href="#cb916-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 2
  sex                n
  &lt;chr&gt;          &lt;int&gt;
1 female            16
2 hermaphroditic     1
3 male              60
4 none               6
5 &lt;NA&gt;               4</code></pre>
</div>
</div>
</section>
<section id="agrupar-group_by-1" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb918"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb918-1"><a href="#cb918-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb918-2"><a href="#cb918-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb918-3"><a href="#cb918-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb918-4"><a href="#cb918-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb919"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb919-1"><a href="#cb919-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb919-2"><a href="#cb919-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb919-3"><a href="#cb919-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb919-4"><a href="#cb919-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Cuando apliquemos <code>group_by()</code> es importante entender que <span class="hl-yellow"><strong>NO MODIFICA los datos</strong></span>, sino que nos crea una <span class="hl-yellow"><strong>variable de grupo</strong></span> (subtablas por cada grupo) que modificar√° las acciones futuras: las <span class="hl-purple"><strong>operaciones se aplicar√°n a cada subtabla por separado</strong></span></p>
<div class="fragment">
<p>Por ejemplo, imaginemos que queremos extraer el personaje m√°s alto con <code>slice_max()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb920"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb920-1"><a href="#cb920-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Yarael P‚Ä¶    264    NA none       white      yellow            NA male  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="agrupar-group_by-2" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb922"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb922-1"><a href="#cb922-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb922-2"><a href="#cb922-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb922-3"><a href="#cb922-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb922-4"><a href="#cb922-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb923"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb923-1"><a href="#cb923-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb923-2"><a href="#cb923-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb923-3"><a href="#cb923-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb923-4"><a href="#cb923-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¬øY si queremos <span class="hl-yellow"><strong>extraer el personaje m√°s alto pero‚Ä¶de cada uno de los sexos</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb924"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb924-1"><a href="#cb924-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb924-2"><a href="#cb924-2"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb924-3"><a href="#cb924-3"></a>  <span class="fu">slice_max</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb924-4"><a href="#cb924-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Taun We      213    NA none       grey       black             NA fema‚Ä¶ femin‚Ä¶
2 Jabba De‚Ä¶    175  1358 &lt;NA&gt;       green-tan‚Ä¶ orange           600 herm‚Ä¶ mascu‚Ä¶
3 Yarael P‚Ä¶    264    NA none       white      yellow            NA male  mascu‚Ä¶
4 IG-88        200   140 none       metal      red               15 none  mascu‚Ä¶
5 Gregar T‚Ä¶    185    85 black      dark       brown             NA &lt;NA&gt;  &lt;NA&gt;  
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="agrupar-group_by-3" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb926"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb926-1"><a href="#cb926-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb926-2"><a href="#cb926-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb926-3"><a href="#cb926-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb926-4"><a href="#cb926-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb927"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb927-1"><a href="#cb927-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb927-2"><a href="#cb927-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb927-3"><a href="#cb927-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb927-4"><a href="#cb927-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidydatatutor_1.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidydatatutor_2.jpg"></p>
</div>
</div>
<p>La web <a href="https://tidydatatutor.com/" class="uri">https://tidydatatutor.com/</a> permite visualizar las operaciones de <code>{tidyverse}</code> (con el pipe antiguo)</p>
</section>
<section id="agrupar-group_by-4" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb928"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb928-1"><a href="#cb928-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb928-2"><a href="#cb928-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb928-3"><a href="#cb928-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span></span>
<span id="cb928-4"><a href="#cb928-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb929"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb929-1"><a href="#cb929-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb929-2"><a href="#cb929-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb929-3"><a href="#cb929-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span></span>
<span id="cb929-4"><a href="#cb929-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Recuerda siempre <span class="hl-red"><strong>hacer ungroup</strong></span> para eliminar la variable de grupo creada</p>
</div>
</div>
</div>
<div class="fragment">
<p>En la nueva versi√≥n de <code>{dplyr}</code> ahora se <span class="hl-yellow"><strong>permite incluir la variable de grupo</strong></span> en la llamada a muchas funciones con el argumento <code>by = ...</code> o <code>.by = ...</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb930"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb930-1"><a href="#cb930-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height, <span class="at">by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 6
  name                  height  mass hair_color skin_color       eye_color
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;    
1 Yarael Poof              264    NA none       white            yellow   
2 IG-88                    200   140 none       metal            red      
3 Taun We                  213    NA none       grey             black    
4 Jabba Desilijic Tiure    175  1358 &lt;NA&gt;       green-tan, brown orange   
5 Gregar Typho             185    85 black      dark             brown    </code></pre>
</div>
</div>
</div>
</section>
<section id="fila-a-fila-rowwise" class="slide level2">
<h2>Fila-a-fila: rowwise()</h2>
<p>Una opci√≥n muy √∫til usada antes de una operaci√≥n tambi√©n es <code>rowwise()</code>: toda <span class="hl-yellow"><strong>operaci√≥n que venga despu√©s se aplicar√° en cada fila por separado</strong></span>. Por ejemplo, vamos a definir un conjunto dummy de notas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb932"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb932-1"><a href="#cb932-1"></a>notas <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"mates"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">7.5</span>, <span class="dv">8</span>, <span class="fl">9.1</span>, <span class="dv">3</span>),</span>
<span id="cb932-2"><a href="#cb932-2"></a>                <span class="st">"lengua"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">6</span>, <span class="fl">6.5</span>, <span class="fl">9.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Si aplicamos la media directamente el valor ser√° id√©ntico ya que nos ha hecho la media global, pero nos gustar√≠a sacar una <span class="hl-yellow"><strong>media por registro</strong></span>. Para eso usaremos <code>rowwise()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb933"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb933-1"><a href="#cb933-1"></a>notas <span class="sc">|&gt;</span> </span>
<span id="cb933-2"><a href="#cb933-2"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb933-3"><a href="#cb933-3"></a>  <span class="fu">mutate</span>(<span class="at">media_curso =</span> <span class="fu">mean</span>(<span class="fu">c</span>(mates, lengua)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
# Rowwise: 
  mates lengua media_curso
  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;
1   7.5    8          7.75
2   8      6          7   
3   9.1    6.5        7.8 
4   3      9.2        6.1 </code></pre>
</div>
</div>
</div>
</section>
<section id="resumir-summarise" class="slide level2">
<h2>Resumir: summarise()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb935"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb935-1"><a href="#cb935-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb936"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb936-1"><a href="#cb936-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por √∫ltimo tenemos <code>summarise()</code>, que nos permitir√° sacar res√∫menes estad√≠sticos. Por ejemplo, vamos a <span class="hl-yellow"><strong>calcular la media de las alturas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb937"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb937-1"><a href="#cb937-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb937-2"><a href="#cb937-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb937-3"><a href="#cb937-3"></a>  <span class="fu">summarise</span>(<span class="at">media_altura =</span> <span class="fu">mean</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 1
  media_altura
         &lt;dbl&gt;
1         175.</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>F√≠jate que <code>mutate()</code> devuelve <span class="hl-yellow"><strong>tantas filas como registros originales</strong></span>, mientras que con <code>summarise()</code> calcula un <span class="hl-purple"><strong>nuevo dataset de resumen</strong></span>, solo incluyendo aquello que est√© indicado.</p>
</div>
</div>
</div>
</div>
</section>
<section id="resumir-summarise-1" class="slide level2">
<h2>Resumir: summarise()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb939"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb939-1"><a href="#cb939-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb940"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb940-1"><a href="#cb940-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Si adem√°s esto lo <span class="hl-yellow"><strong>combinamos con la agrupaci√≥n</strong></span> de <code>group_by()</code> o <code>.by = ...</code>, en pocas l√≠neas de c√≥digo puedes obtener <span class="hl-purple"><strong>estad√≠sticas desagreagadas</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb941"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb941-1"><a href="#cb941-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb941-2"><a href="#cb941-2"></a>  <span class="fu">drop_na</span>(sex, height, mass) <span class="sc">|&gt;</span> </span>
<span id="cb941-3"><a href="#cb941-3"></a>  <span class="fu">summarise</span>(<span class="at">media_altura =</span> <span class="fu">mean</span>(height),</span>
<span id="cb941-4"><a href="#cb941-4"></a>            <span class="at">media_peso =</span> <span class="fu">mean</span>(mass),</span>
<span id="cb941-5"><a href="#cb941-5"></a>            <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
  sex            media_altura media_peso
  &lt;chr&gt;                 &lt;dbl&gt;      &lt;dbl&gt;
1 male                   178.       80.2
2 none                   140        69.8
3 female                 172.       54.7
4 hermaphroditic         175      1358  </code></pre>
</div>
</div>
</section>
<section id="resumir-reframe" class="slide level2">
<h2>Resumir: reframe()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb943"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb943-1"><a href="#cb943-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb944"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb944-1"><a href="#cb944-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">reframe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>En el nuevo <code>{dplyr}</code> han incluido <code>reframe()</code> para evitar problemas de <code>summarise()</code> cuando <span class="hl-yellow"><strong>devolvemos m√°s de un valor por variable</strong></span>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb945"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb945-1"><a href="#cb945-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb945-2"><a href="#cb945-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span></span>
<span id="cb945-3"><a href="#cb945-3"></a>  <span class="fu">summarise</span>(<span class="fu">quantile</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
‚Ñπ Please use `reframe()` instead.
‚Ñπ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 1
  `quantile(mass)`
             &lt;dbl&gt;
1             15  
2             55.6
3             79  
4             84.5
5           1358  </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb948"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb948-1"><a href="#cb948-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb948-2"><a href="#cb948-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span></span>
<span id="cb948-3"><a href="#cb948-3"></a>  <span class="fu">reframe</span>(<span class="fu">quantile</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 1
  `quantile(mass)`
             &lt;dbl&gt;
1             15  
2             55.6
3             79  
4             84.5
5           1358  </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="selectores-across" class="slide level2">
<h2>Selectores: across()</h2>
<p>Un truco es <span class="hl-yellow"><strong>hacer uso de selectores</strong></span> <code>across()</code> y <code>where()</code>. El primero nos permite <span class="hl-purple"><strong>actuar sobre varias columnas por nombre</strong></span> (con <code>mutate()</code> o <code>summarise()</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb950"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb950-1"><a href="#cb950-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">medias =</span> <span class="fu">across</span>(height<span class="sc">:</span>mass, mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 2
  sex            medias$height  $mass
  &lt;chr&gt;                  &lt;dbl&gt;  &lt;dbl&gt;
1 male                    179.   80.2
2 none                    131.   69.8
3 female                  172.   54.7
4 hermaphroditic          175  1358  
5 &lt;NA&gt;                    175    81  </code></pre>
</div>
</div>
<div class="fragment">
<p>El segundo, <code>where()</code>, nos permite hacer lo mismo pero <span class="hl-yellow"><strong>seleccionando por tipo</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb952"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb952-1"><a href="#cb952-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb952-2"><a href="#cb952-2"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> <span class="fu">c</span>(sex, gender))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 5
  sex            gender    height   mass birth_year
  &lt;chr&gt;          &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 male           masculine   179.   80.2       84.8
2 none           masculine   140    69.8       53.3
3 female         feminine    172.   54.7       47.2
4 hermaphroditic masculine   175  1358        600  
5 &lt;NA&gt;           &lt;NA&gt;        175    81        NaN  
6 none           feminine     96   NaN        NaN  </code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-12-1" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-17" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-17-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-17-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-17-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-17-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-17-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-17-1">
<p>üìù Calcula cu√°ntos personajes hay de cada especie, ordenados de m√°s a menor frecuencia.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb954"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb954-1"><a href="#cb954-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(species, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-17-2">
<p>üìù Tras eliminar ausentes en las variables de peso y estatura, a√±ade una nueva variable que nos calcule el IMC de cada personaje, y determina el IMC medio de nuestros personajes desagregada por sexo</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb955"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb955-1"><a href="#cb955-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb955-2"><a href="#cb955-2"></a>  <span class="fu">drop_na</span>(mass, height) <span class="sc">|&gt;</span> </span>
<span id="cb955-3"><a href="#cb955-3"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> mass <span class="sc">/</span> ((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb955-4"><a href="#cb955-4"></a>  <span class="fu">summarise</span>(<span class="at">IMC_medio =</span> <span class="fu">mean</span>(IMC), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-17-3">
<p>üìù Obt√©n el personaje m√°s joven por cada sexo.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb956"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb956-1"><a href="#cb956-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb956-2"><a href="#cb956-2"></a>  <span class="fu">slice_min</span>(birth_year, <span class="at">by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-17-4">
<p>üìù Obt√©n la edad del personaje m√°s joven y m√°s viejo de cada sexo.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb957"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb957-1"><a href="#cb957-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb957-2"><a href="#cb957-2"></a>  <span class="fu">drop_na</span>(birth_year) <span class="sc">|&gt;</span></span>
<span id="cb957-3"><a href="#cb957-3"></a>  <span class="fu">summarise</span>(<span class="fu">min</span>(birth_year), <span class="fu">max</span>(birth_year), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-17-5">
<p>üìù Determina la cantidad de personajes en cada d√©cada (echa un vistazo a <code>round()</code>, primero sin desagregar y luego desagregado por sexo.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb958"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb958-1"><a href="#cb958-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb958-2"><a href="#cb958-2"></a>  <span class="fu">count</span>(<span class="at">birth_decade =</span> <span class="fu">round</span>(birth_year, <span class="sc">-</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-12-1" class="slide level2">
<h2>üê£ Caso pr√°ctico I: billboard</h2>
<p>Vamos a hacer un <strong>repaso de lo aprendido</strong> en <code>{tidyverse}</code> con la tabla billboard del paquete <code>{tidyr}</code>. El dataset representa algo parecido a Los 40 principales (pero versi√≥n americana y un top 100 en lugar de 40): para cada artista y canci√≥n se guarda la fecha en la que entr√≥ en el ranking, y la posici√≥n que ocupaba en el ranking en cada una de las semanas (<code>wk1</code>, <code>wk2</code>, ‚Ä¶)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb959"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb959-1"><a href="#cb959-1"></a>billboard</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 317 √ó 8
   artist         track               date.entered   wk1   wk2   wk3   wk4   wk5
   &lt;chr&gt;          &lt;chr&gt;               &lt;date&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 2 Pac          Baby Don't Cry (Ke‚Ä¶ 2000-02-26      87    82    72    77    87
 2 2Ge+her        The Hardest Part O‚Ä¶ 2000-09-02      91    87    92    NA    NA
 3 3 Doors Down   Kryptonite          2000-04-08      81    70    68    67    66
 4 3 Doors Down   Loser               2000-10-21      76    76    72    69    67
 5 504 Boyz       Wobble Wobble       2000-04-15      57    34    25    17    17
 6 98^0           Give Me Just One N‚Ä¶ 2000-08-19      51    39    34    26    26
 7 A*Teens        Dancing Queen       2000-07-08      97    97    96    95   100
 8 Aaliyah        I Don't Wanna       2000-01-29      84    62    51    41    38
 9 Aaliyah        Try Again           2000-03-18      59    53    38    28    21
10 Adams, Yolanda Open My Heart       2000-08-26      76    76    74    69    68
# ‚Ñπ 307 more rows</code></pre>
</div>
</div>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-filas-columnas/#caso-pr%C3%A1ctico-i-billboard"><strong>workbook</strong></a></p>
</section>
<section id="caso-practico-12-2" class="slide level2">
<h2>üê£ Caso pr√°ctico II: f√∫tbol</h2>
<p>Vamos a seguir <strong>practicando lo aprendido</strong> en <code>{tidyverse}</code> con el fichero <code>futbol.csv</code>, donde tenemos <strong>datos de los jugadores de las 5 principales ligas de futbol masculinas</strong>, desde 2005 hasta 2019, recopilando diferentes estad√≠sticas. Los datos se han extra√≠do directamente haciendo uso del paquete <code>{worldfootballR}</code>, que nos permite extraer datos de <a href="https://www.fbref.com" class="uri">https://www.fbref.com</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb961"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb961-1"><a href="#cb961-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/futbol.csv"</span>)</span>
<span id="cb961-2"><a href="#cb961-2"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40,393 √ó 16
   season team    league  player     country position date_birth minutes_playing
    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;           &lt;dbl&gt;
 1   2005 Ajaccio Ligue 1 Djamel Ab‚Ä¶ ALG     MF             1986              30
 2   2005 Ajaccio Ligue 1 Gaspar Az‚Ä¶ POR     DF             1975            1224
 3   2005 Ajaccio Ligue 1 Yacine Be‚Ä¶ ALG     MF             1981             140
 4   2005 Ajaccio Ligue 1 Nicolas B‚Ä¶ FRA     MF             1976             892
 5   2005 Ajaccio Ligue 1 Marcelinh‚Ä¶ BRA     MF             1971             704
 6   2005 Ajaccio Ligue 1 Cyril Cha‚Ä¶ FRA     FW             1979            1308
 7   2005 Ajaccio Ligue 1 Xavier Co‚Ä¶ FRA     DF             1974            2734
 8   2005 Ajaccio Ligue 1 Renaud Co‚Ä¶ FRA     MF             1980             896
 9   2005 Ajaccio Ligue 1 Yohan Dem‚Ä¶ FRA     DF,MF          1978            2658
10   2005 Ajaccio Ligue 1 Christoph‚Ä¶ FRA     DF             1973              74
# ‚Ñπ 40,383 more rows
# ‚Ñπ 8 more variables: minutes_per_match_playing &lt;dbl&gt;, goals &lt;dbl&gt;,
#   assist &lt;dbl&gt;, goals_minus_pk &lt;dbl&gt;, pk &lt;dbl&gt;, pk_attemp &lt;dbl&gt;,
#   yellow_card &lt;dbl&gt;, red_card &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-f√∫tbol" class="slide level2">
<h2>üê£ Caso pr√°ctico II: f√∫tbol</h2>
<p>Las variables capturan la siguiente informaci√≥n:</p>
<ul>
<li><code>season</code>, <code>team</code>, <code>league</code>: temporada, equipo y liga</li>
<li><code>player</code>, <code>country</code>, <code>position</code>, <code>date_birth</code>: nombre del jugador, pa√≠s, posici√≥n y a√±o de nacimiento.</li>
<li><code>minutes_playing</code>, <code>matches</code>: minutos totales jugados y partidos jugados en media (es decir, cuantos partidos de 90 minutos ha jugado con los minutos jugados).</li>
<li><code>goals</code>, <code>assist</code>: goles y asistencias totales</li>
<li><code>pk</code>, <code>pk_attemp</code>, <code>goals_minus_pk</code>: penalties marcados, penalties tirados y goles marcados sin contar los penalties.</li>
<li><code>yellow_card</code>, <code>red_card</code>: tarjetas amarillas/rojas.</li>
</ul>
<p><span class="hl-red"><strong>Importante</strong></span>: la variable <code>matches</code> debes crearla t√∫ haciendo uso de <code>minutes_playing</code> (por ejemplo, si ha jugado 315 minutos, cuentan como 3.5 partidos)</p>
</section>
<section id="caso-pr√°ctico-ii-f√∫tbol-1" class="slide level2">
<h2>üê£ Caso pr√°ctico II: f√∫tbol</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb963"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb963-1"><a href="#cb963-1"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40,393 √ó 16
   season team    league  player     country position date_birth minutes_playing
    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;           &lt;dbl&gt;
 1   2005 Ajaccio Ligue 1 Djamel Ab‚Ä¶ ALG     MF             1986              30
 2   2005 Ajaccio Ligue 1 Gaspar Az‚Ä¶ POR     DF             1975            1224
 3   2005 Ajaccio Ligue 1 Yacine Be‚Ä¶ ALG     MF             1981             140
 4   2005 Ajaccio Ligue 1 Nicolas B‚Ä¶ FRA     MF             1976             892
 5   2005 Ajaccio Ligue 1 Marcelinh‚Ä¶ BRA     MF             1971             704
 6   2005 Ajaccio Ligue 1 Cyril Cha‚Ä¶ FRA     FW             1979            1308
 7   2005 Ajaccio Ligue 1 Xavier Co‚Ä¶ FRA     DF             1974            2734
 8   2005 Ajaccio Ligue 1 Renaud Co‚Ä¶ FRA     MF             1980             896
 9   2005 Ajaccio Ligue 1 Yohan Dem‚Ä¶ FRA     DF,MF          1978            2658
10   2005 Ajaccio Ligue 1 Christoph‚Ä¶ FRA     DF             1973              74
# ‚Ñπ 40,383 more rows
# ‚Ñπ 8 more variables: minutes_per_match_playing &lt;dbl&gt;, goals &lt;dbl&gt;,
#   assist &lt;dbl&gt;, goals_minus_pk &lt;dbl&gt;, pk &lt;dbl&gt;, pk_attemp &lt;dbl&gt;,
#   yellow_card &lt;dbl&gt;, red_card &lt;dbl&gt;</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-filas-columnas/#caso-pr%C3%A1ctico-ii-messi-vs-ronaldo"><strong>workbook</strong></a></p>
</section>
<section id="caso-pr√°ctico-iii-discursos" class="slide level2">
<h2>üê£ Caso pr√°ctico III: discursos</h2>
<p>Volvamos al dataset <code>discursos</code> donde ten√≠amos guardados los discursos navide√±os de los ¬´jefes¬ª de Estado desde 1946 hasta 2021.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb965"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb965-1"><a href="#cb965-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"./datos/discursos.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Piensa como responder a las mismas preguntas que hicimos en R base pero <strong>en modo tidyverse</strong> en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-filas-columnas/#caso-pr%C3%A1ctico-iii-discursos"><strong>workbook</strong></a></p>
</section>
<section id="caso-pr√°ctico-iv-covid" class="slide level2">
<h2>üê£ Caso pr√°ctico IV: covid</h2>
<p>Vamos a volver al <span class="hl-yellow"><strong>dataset de covid</strong></span> de la entrega II pero esta vez desde una <strong>perspectiva tidyverse</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb966"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb966-1"><a href="#cb966-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb966-2"><a href="#cb966-2"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/messy_covid_data.csv"</span>)</span>
<span id="cb966-3"><a href="#cb966-3"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 31
  provincia_iso fecha               `0-9_H` `10-19_H` `20-29_H` `30-39_H`
  &lt;chr&gt;         &lt;dttm&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 A             2020-03-01 00:00:00       0         0         0         0
2 AL            2020-03-01 00:00:00       0         0         0         0
3 B             2020-03-01 00:00:00       0         0         0         0
4 BA            2020-03-01 00:00:00       0         1         0         0
5 BI            2020-03-01 00:00:00       0         0         0         0
# ‚Ñπ 25 more variables: `40-49_H` &lt;dbl&gt;, `50-59_H` &lt;dbl&gt;, `60-69_H` &lt;dbl&gt;,
#   `70-79_H` &lt;dbl&gt;, `80-Inf_H` &lt;dbl&gt;, `NC-NC_H` &lt;dbl&gt;, `0-9_M` &lt;dbl&gt;,
#   `10-19_M` &lt;dbl&gt;, `20-29_M` &lt;dbl&gt;, `30-39_M` &lt;dbl&gt;, `40-49_M` &lt;dbl&gt;,
#   `50-59_M` &lt;dbl&gt;, `60-69_M` &lt;dbl&gt;, `70-79_M` &lt;dbl&gt;, `80-Inf_M` &lt;dbl&gt;,
#   `NC-NC_M` &lt;dbl&gt;, `0-9_NC` &lt;dbl&gt;, `10-19_NC` &lt;dbl&gt;, `20-29_NC` &lt;dbl&gt;,
#   `30-39_NC` &lt;dbl&gt;, `40-49_NC` &lt;dbl&gt;, `50-59_NC` &lt;dbl&gt;, `60-69_NC` &lt;dbl&gt;,
#   `70-79_NC` &lt;dbl&gt;, `80-Inf_NC` &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Piensa como responder a las mismas preguntas que hicimos en R base pero <strong>en modo tidyverse</strong> en el <a href="https://javieralvarezliebana.quarto.pub/dplyr-filas-columnas/#caso-pr%C3%A1ctico-iv-r-base-vs-tidyverse"><strong>workbook</strong></a></p>
</section></section>
<section>
<section id="clase-13" class="title-slide slide level1 center">
<h1>Clase 13: <span class="flow">importar y joins</span></h1>
<p><span style="color:#444442;"><strong>¬øC√≥mo cruzar dos tablas? ¬øC√≥mo importar y exportar?</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-13-1">üíª Ejercicios resueltos: joins</a></p></li>
<li><p><a href="#/tu-turno-13-2">üíª Ejercicios resueltos: import/export</a></p></li>
<li><p><a href="#/caso-practico-13-1">üê£ Workbook/caso pr√°ctico I: Beatles</a></p></li>
<li><p><a href="#/caso-practico-13-2">üê£ Workbook/caso pr√°ctico II: tabla SPSS</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="relacionando-datos" class="slide level2">
<h2>Relacionando datos</h2>
<p>Al trabajar con datos <span class="hl-yellow"><strong>no siempre tendremos la informaci√≥n en una sola tabla</strong></span> y a veces nos interesar√° cruzar la informaci√≥n de distintas fuentes.</p>
<div class="fragment">
<p>Para ello usaremos un cl√°sico de todo lenguaje que maneja datos: los famosos <span class="hl-yellow"><strong>join</strong></span>, que nos permitir√°n <span class="hl-yellow"><strong>cruzar una o varias tablas</strong></span>, haciendo uso de una <span class="hl-yellow"><strong>columna identificadora</strong></span> de cada una de ellas (por ejemplo, imagina que cruzamos datos de hacienda y de antecedentes penales, haciendo <code>join</code> por la columna <code>DNI</code>).</p>
</div>
</section>
<section id="relacionando-datos-1" class="slide level2">
<h2>Relacionando datos</h2>
<p>La estructura b√°sica es la siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb968"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb968-1"><a href="#cb968-1"></a>tabla_1 <span class="sc">|&gt;</span></span>
<span id="cb968-2"><a href="#cb968-2"></a>  <span class="fu">xxx_join</span>(tabla_2, <span class="at">by =</span> id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="img/sql-joins.jpg" class="r-stretch"><div class="fragment">
<p>Vamos a probar los distintos joins con un ejemplo sencillo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb969"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb969-1"><a href="#cb969-1"></a>tb_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"key"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"val_x"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>))</span>
<span id="cb969-2"><a href="#cb969-2"></a>tb_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"key"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>), <span class="st">"val_y"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb970"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb970-1"><a href="#cb970-1"></a>tb_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
    key val_x
  &lt;int&gt; &lt;chr&gt;
1     1 x1   
2     2 x2   
3     3 x3   </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb972"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb972-1"><a href="#cb972-1"></a>tb_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
    key val_y
  &lt;dbl&gt; &lt;chr&gt;
1     1 y1   
2     2 y2   
3     4 y3   </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="left-join" class="slide level2">
<h2>Left join</h2>
<ul>
<li><code>left_join()</code>: mantiene <span class="hl-yellow"><strong>todos los registros de la primera tabla</strong></span>, y busca cuales tienen id tambi√©n en la segunda (en caso de <span class="hl-yellow"><strong>no tenerlo se rellena con NA</strong></span> los campos de la 2¬™ tabla).</li>
</ul>
<p>En nuestra caso queremos incorporar a <code>tb_1</code> la informaci√≥n de <code>tb_2</code>, identificando los registros por la columna key (<code>by = "key"</code>, la columna por la que tiene que cruzar)</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb974"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb974-1"><a href="#cb974-1"></a>tb_1  <span class="sc">|&gt;</span> </span>
<span id="cb974-2"><a href="#cb974-2"></a>  <span class="fu">left_join</span>(tb_2, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     3 x3    &lt;NA&gt; </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/left_join.jpg"></p>
</div>
</div>
</section>
<section id="left-join-1" class="slide level2">
<h2>Left join</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb976"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb976-1"><a href="#cb976-1"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb976-2"><a href="#cb976-2"></a>  <span class="fu">left_join</span>(tb_2, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     3 x3    &lt;NA&gt; </code></pre>
</div>
</div>
<p>F√≠jate que los <span class="hl-yellow"><strong>registros de la primera cuya key no ha encontrado en la segunda</strong></span> les ha dado el valor de <span class="hl-yellow"><strong>ausente</strong></span>.</p>
</section>
<section id="right-join" class="slide level2">
<h2>Right join</h2>
<ul>
<li><code>right_join()</code>: mantiene <span class="hl-yellow"><strong>todos los registros de la segunda tabla</strong></span>, y busca cuales tienen id tambi√©n en la primera.</li>
</ul>
<p>Vamos ahora a incorporar a <code>tb_2</code> la informaci√≥n de <code>tb_1</code>, identificando los registros por la columna key (<code>by = "key"</code>)</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb978"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb978-1"><a href="#cb978-1"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb978-2"><a href="#cb978-2"></a>  <span class="fu">right_join</span>(tb_2, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     4 &lt;NA&gt;  y3   </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/right_join.jpg"></p>
</div>
</div>
</section>
<section id="right-join-1" class="slide level2">
<h2>Right join</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb980"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb980-1"><a href="#cb980-1"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb980-2"><a href="#cb980-2"></a>  <span class="fu">right_join</span>(tb_2, <span class="at">by =</span> <span class="st">"key"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
    key val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     4 &lt;NA&gt;  y3   </code></pre>
</div>
</div>
<p>F√≠jate que ahora los <span class="hl-yellow"><strong>registros de la segunda cuya key no ha encontrado en la primera</strong></span> son los que les ha dado el valor de <span class="hl-yellow"><strong>ausente</strong></span>.</p>
</section>
<section id="claves-y-sufijos" class="slide level2">
<h2>Claves y sufijos</h2>
<p>Las columnas clave que usaremos para el cruce <span class="hl-yellow"><strong>no siempre se llamar√°n igual</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb982"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb982-1"><a href="#cb982-1"></a>tb_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"val_x"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>))</span>
<span id="cb982-2"><a href="#cb982-2"></a>tb_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"key_2"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>), <span class="st">"val_y"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ul>
<li><code>by = c("key_2" = "key_2")</code>: le indicaremos en qu√© columna de cada tabla est√°n las claves por las que vamos a cruzar.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb983"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb983-1"><a href="#cb983-1"></a><span class="co"># Left</span></span>
<span id="cb983-2"><a href="#cb983-2"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb983-3"><a href="#cb983-3"></a>  <span class="fu">left_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  key_1 val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     3 x3    &lt;NA&gt; </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb985"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb985-1"><a href="#cb985-1"></a><span class="co"># Right</span></span>
<span id="cb985-2"><a href="#cb985-2"></a>tb_1  <span class="sc">|&gt;</span> </span>
<span id="cb985-3"><a href="#cb985-3"></a>  <span class="fu">right_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  key_1 val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     4 &lt;NA&gt;  y3   </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="claves-y-sufijos-1" class="slide level2">
<h2>Claves y sufijos</h2>
<p>Adem√°s podemos <span class="hl-yellow"><strong>cruzar por varias columnas a la vez</strong></span> (interpretar√° como igual registro aquel que tenga el conjunto de claves igual), con <code>by = c("var1_t1" = "var1_t2", "var2_t1" = "var2_t2", ...)</code>. Modifiquemos el ejemplo anterior</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb987"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb987-1"><a href="#cb987-1"></a>tb_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"k_11"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"k_12"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>),  <span class="st">"val_x"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>))</span>
<span id="cb987-2"><a href="#cb987-2"></a>tb_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"k_21"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>), <span class="st">"k_22"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"e"</span>), <span class="st">"val_y"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb988"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb988-1"><a href="#cb988-1"></a><span class="co"># Left</span></span>
<span id="cb988-2"><a href="#cb988-2"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb988-3"><a href="#cb988-3"></a>  <span class="fu">left_join</span>(tb_2,</span>
<span id="cb988-4"><a href="#cb988-4"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"k_11"</span> <span class="ot">=</span> <span class="st">"k_21"</span>, <span class="st">"k_12"</span> <span class="ot">=</span> <span class="st">"k_22"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 4
   k_11 k_12  val_x val_y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1     1 a     x1    y1   
2     2 b     x2    y2   
3     3 c     x3    &lt;NA&gt; </code></pre>
</div>
</div>
</div>
</section>
<section id="claves-y-sufijos-2" class="slide level2">
<h2>Claves y sufijos</h2>
<p>Tambi√©n podr√≠a suceder que al cruzar dos tablas, haya <span class="hl-yellow"><strong>columnas de valores que se llamen igual</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb990"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb990-1"><a href="#cb990-1"></a>tb_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"val"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>))</span>
<span id="cb990-2"><a href="#cb990-2"></a>tb_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"key_2"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>), <span class="st">"val"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb991"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb991-1"><a href="#cb991-1"></a><span class="co"># Left</span></span>
<span id="cb991-2"><a href="#cb991-2"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb991-3"><a href="#cb991-3"></a>  <span class="fu">left_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  key_1 val.x val.y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     3 x3    &lt;NA&gt; </code></pre>
</div>
</div>
<p>F√≠jate que <span class="hl-yellow"><strong>por defecto nos a√±ade los sufijos</strong></span> <code>.x</code> y <code>.y</code> para indicarnos de que tabla vienen.</p>
</div>
</section>
<section id="claves-y-sufijos-3" class="slide level2">
<h2>Claves y sufijos</h2>
<p>Dicho <span class="hl-yellow"><strong>sufijo podemos especific√°rselo</strong></span> en el argumento opcional <code>suffix = ...</code>, que nos permita <span class="hl-yellow"><strong>distinguir las variables</strong></span> de una tabla y de otra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb993"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb993-1"><a href="#cb993-1"></a><span class="co"># Left</span></span>
<span id="cb993-2"><a href="#cb993-2"></a>tb_1 <span class="sc">|&gt;</span></span>
<span id="cb993-3"><a href="#cb993-3"></a>  <span class="fu">left_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_tabla1"</span>, <span class="st">"_tabla2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  key_1 val_tabla1 val_tabla2
  &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;     
1     1 x1         y1        
2     2 x2         y2        
3     3 x3         &lt;NA&gt;      </code></pre>
</div>
</div>
</section>
<section id="full-join" class="slide level2">
<h2>Full join</h2>
<ul>
<li><code>full_join()</code>: mantiene <span class="hl-yellow"><strong>todos los registros de ambas</strong></span> tablas.</li>
</ul>
<p>Los dos anteriores casos forman lo que se conoce como <span class="hl-yellow"><strong>outer joins</strong></span>: cruces donde se mantienen observaciones que salgan en al menos una tabla. El tercer outer join es el conocido como <code>full_join()</code> que nos <span class="hl-yellow"><strong>mantendr√° las observaciones de ambas</strong></span> tablas, <span class="hl-yellow"><strong>a√±adiendo las filas</strong></span> que no casen con la otra tabla.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb995"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb995-1"><a href="#cb995-1"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb995-2"><a href="#cb995-2"></a>  <span class="fu">full_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
  key_1 val.x val.y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   
3     3 x3    &lt;NA&gt; 
4     4 &lt;NA&gt;  y3   </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/full_join.jpg"></p>
</div>
</div>
</section>
<section id="inner-join" class="slide level2">
<h2>Inner join</h2>
<ul>
<li><code>inner_join()</code>: solo sobreviven los <span class="hl-yellow"><strong>registros cuyo id est√© en ambas</strong></span> tablas.</li>
</ul>
<p>Frente a los outer join est√° lo que se conoce como <span class="hl-yellow"><strong>inner join</strong></span>, con <code>inner_join()</code>: un cruce en el que solo se mantienen las <span class="hl-yellow"><strong>observaciones que salgan en ambas tablas</strong></span>, solo mantiene aquellos registros matcheados.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb997"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb997-1"><a href="#cb997-1"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb997-2"><a href="#cb997-2"></a>  <span class="fu">inner_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 3
  key_1 val.x val.y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/inner_join.png"></p>
</div>
</div>
</section>
<section id="inner-join-1" class="slide level2">
<h2>Inner join</h2>
<p>F√≠jate que en t√©rminos de registros, <code>inner_join</code> si es conmutativa, <strong>nos da igual el orden de las tablas</strong>: lo √∫nico que cambia es el orden de las columnas que a√±ade.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb999"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb999-1"><a href="#cb999-1"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb999-2"><a href="#cb999-2"></a>  <span class="fu">inner_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 3
  key_1 val.x val.y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 x1    y1   
2     2 x2    y2   </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb1001"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1001-1"><a href="#cb1001-1"></a>tb_2 <span class="sc">|&gt;</span> </span>
<span id="cb1001-2"><a href="#cb1001-2"></a>  <span class="fu">inner_join</span>(tb_1, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_2"</span> <span class="ot">=</span> <span class="st">"key_1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 3
  key_2 val.x val.y
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1 y1    x1   
2     2 y2    x2   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="antisemi-join" class="slide level2">
<h2>Anti/semi join</h2>
<p>Por √∫ltimo tenemos dos herramientas interesantes para <span class="hl-yellow"><strong>filtrar (no cruzar) registros</strong></span>: <code>semi_join()</code> y <code>anti_join()</code>. El <span class="hl-yellow"><strong>semi join</strong></span> nos deja en la <span class="hl-yellow"><strong>primera tabla los registros que cuya clave est√° tambi√©n en la segunda</strong></span> (como un inner join pero sin a√±adir la info de la segunda tabla). Y el segundo, los anti join, hace justo lo contrario (aquellos que no est√°n).</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb1003"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1003-1"><a href="#cb1003-1"></a><span class="co"># semijoin</span></span>
<span id="cb1003-2"><a href="#cb1003-2"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb1003-3"><a href="#cb1003-3"></a>  <span class="fu">semi_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  key_1 val  
  &lt;int&gt; &lt;chr&gt;
1     1 x1   
2     2 x2   </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb1005"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1005-1"><a href="#cb1005-1"></a><span class="co"># antijoin</span></span>
<span id="cb1005-2"><a href="#cb1005-2"></a>tb_1 <span class="sc">|&gt;</span> </span>
<span id="cb1005-3"><a href="#cb1005-3"></a>  <span class="fu">anti_join</span>(tb_2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"key_1"</span> <span class="ot">=</span> <span class="st">"key_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 2
  key_1 val  
  &lt;int&gt; &lt;chr&gt;
1     3 x3   </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-13-1" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<p>Para los ejercicios usaremos las tablas disponibles en el paquete <code>{nycflights13}</code> (echa un vistazo antes)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1007"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1007-1"><a href="#cb1007-1"></a><span class="fu">library</span>(nycflights13)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><span class="hl-yellow"><strong>airlines</strong></span>: nombre de aerol√≠neas (con su abreviatura).</li>
<li><span class="hl-yellow"><strong>airports</strong></span>: datos de aeropuertos (nombres, longitud, latitud, altitud, etc).</li>
<li><span class="hl-yellow"><strong>flights</strong></span>: datos de vuelos.</li>
<li><span class="hl-yellow"><strong>planes</strong></span>: datos de los aviones.</li>
<li><span class="hl-yellow"><strong>weather</strong></span>: datos meteorol√≥gicos horarios de las estaciones LGA, JFK y EWR.</li>
</ul>
</section>
<section id="tu-turno-16" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-18" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-18-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-18-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-18-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-18-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-18-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-18-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-18-1">
<p>üìù Del paquete <code>{nycflights13}</code> cruza la tabla <code>flights</code> con <code>airlines</code>. Queremos mantener todos los registros de vuelos, a√±adiendo la informaci√≥n de las aerol√≠neas a dicha tabla.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1008"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1008-1"><a href="#cb1008-1"></a>flights_airlines <span class="ot">&lt;-</span></span>
<span id="cb1008-2"><a href="#cb1008-2"></a>  flights <span class="sc">|&gt;</span> </span>
<span id="cb1008-3"><a href="#cb1008-3"></a>  <span class="fu">left_join</span>(airlines, <span class="at">by =</span> <span class="st">"carrier"</span>)</span>
<span id="cb1008-4"><a href="#cb1008-4"></a>flights_airlines</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-18-2">
<p>üìù A la tabla obtenida del cruce del apartado anterior, cruza despu√©s con los datos de los aviones en <code>planes</code>, pero incluyendo solo aquellos vuelos de los que tengamos informaci√≥n de sus aviones (y viceversa).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1009"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1009-1"><a href="#cb1009-1"></a>flights_airlines_planes <span class="ot">&lt;-</span> </span>
<span id="cb1009-2"><a href="#cb1009-2"></a>  flights_airlines <span class="sc">|&gt;</span> </span>
<span id="cb1009-3"><a href="#cb1009-3"></a>  <span class="fu">inner_join</span>(planes, <span class="at">by =</span> <span class="st">"tailnum"</span>)</span>
<span id="cb1009-4"><a href="#cb1009-4"></a>flights_airlines_planes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-18-3">
<p>üìù Repite el ejercicio anterior pero conservando ambas variables <code>year</code> (en una es el a√±o del vuelo, en la otra es el a√±o de construcci√≥n del avi√≥n), y distingui√©ndolas entre s√≠</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1010"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1010-1"><a href="#cb1010-1"></a>flights_airlines_planes <span class="ot">&lt;-</span> </span>
<span id="cb1010-2"><a href="#cb1010-2"></a>  flights_airlines <span class="sc">|&gt;</span> </span>
<span id="cb1010-3"><a href="#cb1010-3"></a>  <span class="fu">inner_join</span>(planes, <span class="at">by =</span> <span class="st">"tailnum"</span>,</span>
<span id="cb1010-4"><a href="#cb1010-4"></a>             <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_flight"</span>, <span class="st">"_build_aircraft"</span>))</span>
<span id="cb1010-5"><a href="#cb1010-5"></a>flights_airlines_planes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-18-4">
<p>üìù Al cruce obtenido del ejercicio anterior incluye la longitud y latitud de los aeropuertos en <code>airports</code>, distinguiendo entre la latitud/longitud del aeropuerto en destino y en origen.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1011"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1011-1"><a href="#cb1011-1"></a>flights_airlines_planes <span class="sc">%&gt;%</span></span>
<span id="cb1011-2"><a href="#cb1011-2"></a>  <span class="fu">left_join</span>(airports <span class="sc">%&gt;%</span> <span class="fu">select</span>(faa, lat, lon),</span>
<span id="cb1011-3"><a href="#cb1011-3"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"origin"</span> <span class="ot">=</span> <span class="st">"faa"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb1011-4"><a href="#cb1011-4"></a>  <span class="fu">rename</span>(<span class="at">lat_origin =</span> lat, <span class="at">lon_origin =</span> lon) <span class="sc">|&gt;</span> </span>
<span id="cb1011-5"><a href="#cb1011-5"></a>  <span class="fu">left_join</span>(airports <span class="sc">%&gt;%</span> <span class="fu">select</span>(faa, lat, lon),</span>
<span id="cb1011-6"><a href="#cb1011-6"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"dest"</span> <span class="ot">=</span> <span class="st">"faa"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb1011-7"><a href="#cb1011-7"></a>  <span class="fu">rename</span>(<span class="at">lat_dest =</span> lat, <span class="at">lon_dest =</span> lon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-18-5">
<p>üìù Filtra de <code>airports</code> solo aquellos aeropuertos de los que salgan vuelos. Repite el proceso filtrado solo aquellos a los que lleguen vuelos</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1012"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1012-1"><a href="#cb1012-1"></a>airports <span class="sc">|&gt;</span> </span>
<span id="cb1012-2"><a href="#cb1012-2"></a>  <span class="fu">semi_join</span>(flights, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"faa"</span> <span class="ot">=</span> <span class="st">"origin"</span>))</span>
<span id="cb1012-3"><a href="#cb1012-3"></a>airports <span class="sc">|&gt;</span> </span>
<span id="cb1012-4"><a href="#cb1012-4"></a>  <span class="fu">semi_join</span>(flights, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"faa"</span> <span class="ot">=</span> <span class="st">"dest"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-18-6">
<p>üìù ¬øDe cu√°ntos vuelos no disponemos informaci√≥n del avi√≥n? Elimina antes los vuelos que no tengan identificar (diferente a NA) del avi√≥n</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1013"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1013-1"><a href="#cb1013-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb1013-2"><a href="#cb1013-2"></a>  <span class="fu">drop_na</span>(tailnum) <span class="sc">|&gt;</span></span>
<span id="cb1013-3"><a href="#cb1013-3"></a>  <span class="fu">anti_join</span>(planes, <span class="at">by =</span> <span class="st">"tailnum"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1013-4"><a href="#cb1013-4"></a>  <span class="fu">count</span>(tailnum, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="co"># de mayor a menor ya de paso</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-13-1" class="slide level2">
<h2>üê£ Caso pr√°ctico I: Beatles</h2>
<p>Vamos a empezar a practicar joins sencillos con la tabla <code>band_members</code> y <code>band_instruments</code> ya incluidos en el paquete <code>{dplyr}</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1014"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1014-1"><a href="#cb1014-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1014-2"><a href="#cb1014-2"></a>band_members</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  name  band   
  &lt;chr&gt; &lt;chr&gt;  
1 Mick  Stones 
2 John  Beatles
3 Paul  Beatles</code></pre>
</div>
<div class="sourceCode cell-code" id="cb1016"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1016-1"><a href="#cb1016-1"></a>band_instruments</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  name  plays 
  &lt;chr&gt; &lt;chr&gt; 
1 John  guitar
2 Paul  bass  
3 Keith guitar</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/joins-import-export/#caso-pr%C3%A1ctico-i-beatles-y-rolling-stones"><strong>workbook</strong></a></p>
</section>
<section id="importarexportar" class="slide level2">
<h2>Importar/exportar</h2>
<p>Hasta ahora s√≥lo hemos utilizado datos ya cargados en paquetes, pero muchas veces <span class="hl-yellow"><strong>necesitaremos importar datos externamente</strong></span>. Una de las principales <span class="hl-yellow"><strong>fortalezas</strong></span> de <code>R</code> es que podemos importar datos muy f√°cilmente en diferentes formatos:</p>
<ul>
<li><p><span class="hl-yellow"><strong>Formatos nativos de R</strong></span>: archivos <code>.rda</code>, <code>.RData</code> y <code>.rds</code></p></li>
<li><p><span class="hl-yellow"><strong>Rectangular data (datos tabulados)</strong></span>: archivos <code>.csv</code> y <code>.tsv</code></p></li>
<li><p><span class="hl-yellow"><strong>Datos sin tabular</strong></span>: archivos <code>.txt</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Datos en excel</strong></span>: archivos <code>.xls</code> y<code>.xlsx</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Datos desde SAS/Stata/SPSS</strong></span>: archivos <code>.sas7bdat</code>, <code>.sav</code> y <code>.dat</code>.</p></li>
<li><p><span class="hl-yellow"><strong>Datos desde Google Drive</strong></span></p></li>
<li><p><span class="hl-yellow"><strong>Datos desde API‚Äôs</strong></span>: aemet, catastro, censo, spotify, etc.</p></li>
</ul>
</section>
<section id="formatos-nativos" class="slide level2">
<h2>Formatos nativos</h2>
<p>Los ficheros <span class="hl-yellow"><strong>m√°s sencillos</strong></span> para importar a <code>R</code> (y que suelen ocupar menos espacio en disco) son sus propias <span class="hl-yellow"><strong>extensiones nativas</strong></span>: ficheros en formatos <code>.RData</code>, <code>.rda</code> y <code>.rds</code>. Para cargar los primeros basta con <span class="hl-yellow"><strong>utilizar la funci√≥n</strong></span> <code>load()</code> proporcion√°ndole la ruta del fichero.</p>
<ul>
<li>Archivos <code>RData</code>: vamos a importar el archivo <code>world_bank_pop.RData</code> que incluye la tabla <code>world_bank_pop</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1018"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1018-1"><a href="#cb1018-1"></a><span class="fu">load</span>(<span class="st">"./datos/world_bank_pop.RData"</span>)</span>
<span id="cb1018-2"><a href="#cb1018-2"></a>world_bank_pop</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,064 √ó 20
   country indicator      `2000`  `2001`  `2002`  `2003`  `2004`  `2005`  `2006`
   &lt;chr&gt;   &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 ABW     SP.URB.TOTL    4.16e4 4.20e+4 4.22e+4 4.23e+4 4.23e+4 4.24e+4 4.26e+4
 2 ABW     SP.URB.GROW    1.66e0 9.56e-1 4.01e-1 1.97e-1 9.46e-2 1.94e-1 3.67e-1
 3 ABW     SP.POP.TOTL    8.91e4 9.07e+4 9.18e+4 9.27e+4 9.35e+4 9.45e+4 9.56e+4
 4 ABW     SP.POP.GROW    2.54e0 1.77e+0 1.19e+0 9.97e-1 9.01e-1 1.00e+0 1.18e+0
 5 AFE     SP.URB.TOTL    1.16e8 1.20e+8 1.24e+8 1.29e+8 1.34e+8 1.39e+8 1.44e+8
 6 AFE     SP.URB.GROW    3.60e0 3.66e+0 3.72e+0 3.71e+0 3.74e+0 3.81e+0 3.81e+0
 7 AFE     SP.POP.TOTL    4.02e8 4.12e+8 4.23e+8 4.34e+8 4.45e+8 4.57e+8 4.70e+8
 8 AFE     SP.POP.GROW    2.58e0 2.59e+0 2.61e+0 2.62e+0 2.64e+0 2.67e+0 2.70e+0
 9 AFG     SP.URB.TOTL    4.31e6 4.36e+6 4.67e+6 5.06e+6 5.30e+6 5.54e+6 5.83e+6
10 AFG     SP.URB.GROW    1.86e0 1.15e+0 6.86e+0 7.95e+0 4.59e+0 4.47e+0 5.03e+0
# ‚Ñπ 1,054 more rows
# ‚Ñπ 11 more variables: `2007` &lt;dbl&gt;, `2008` &lt;dbl&gt;, `2009` &lt;dbl&gt;, `2010` &lt;dbl&gt;,
#   `2011` &lt;dbl&gt;, `2012` &lt;dbl&gt;, `2013` &lt;dbl&gt;, `2014` &lt;dbl&gt;, `2015` &lt;dbl&gt;,
#   `2016` &lt;dbl&gt;, `2017` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="formatos-nativos-1" class="slide level2">
<h2>Formatos nativos</h2>
<ul>
<li>Archivos <code>.rda</code>: vamos a importar el dataset airquality desde <code>airquality.rda</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1020"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1020-1"><a href="#cb1020-1"></a><span class="fu">load</span>(<span class="st">"./datos/airquality.rda"</span>)</span>
<span id="cb1020-2"><a href="#cb1020-2"></a>airquality <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 153 √ó 6
   Ozone Solar.R  Wind  Temp Month   Day
   &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1    41     190   7.4    67     5     1
 2    36     118   8      72     5     2
 3    12     149  12.6    74     5     3
 4    18     313  11.5    62     5     4
 5    NA      NA  14.3    56     5     5
 6    28      NA  14.9    66     5     6
 7    23     299   8.6    65     5     7
 8    19      99  13.8    59     5     8
 9     8      19  20.1    61     5     9
10    NA     194   8.6    69     5    10
# ‚Ñπ 143 more rows</code></pre>
</div>
</div>
</section>
<section id="formatos-nativos-2" class="slide level2">
<h2>Formatos nativos</h2>
<p>Tenga en cuenta que los archivos cargados con <code>load()</code> se cargan <span class="hl-yellow"><strong>autom√°ticamente en el entorno</strong></span> (con el nombre guardado originalmente), y no s√≥lo se pueden cargar conjuntos de datos: <code>load()</code> nos permite cargar m√∫ltiples objetos (no s√≥lo datos tabulares).</p>
<p>Los archivos nativos <code>.rda</code> y <code>.RData</code> son una forma adecuada de guardar el entorno.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1022"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1022-1"><a href="#cb1022-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"./datos/multiple_objects.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="formatos-nativos-3" class="slide level2">
<h2>Formatos nativos</h2>
<ul>
<li>Archivos <code>.rds</code>: para este tipo debemos utilizar <code>readRDS()</code>, y necesitamos incorporar un <span class="hl-yellow"><strong>argumento <code>file</code></strong></span> con la ruta. En este caso vamos a importar <span class="hl-purple"><strong>datos de c√°ncer de pulm√≥n</strong></span> del North Central Cancer Treatment Group. Observe que ahora <span class="hl-red"><strong>los archivos .rds incorporar solo una tabla, no un objeto en general</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1023"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1023-1"><a href="#cb1023-1"></a>lung_cancer <span class="ot">&lt;-</span></span>
<span id="cb1023-2"><a href="#cb1023-2"></a>  <span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">"./datos/NCCTG_lung_cancer.rds"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1023-3"><a href="#cb1023-3"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb1023-4"><a href="#cb1023-4"></a>lung_cancer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 228 √ó 10
    inst  time status   age   sex ph.ecog ph.karno pat.karno meal.cal wt.loss
   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
 1     3   306      2    74     1       1       90       100     1175      NA
 2     3   455      2    68     1       0       90        90     1225      15
 3     3  1010      1    56     1       0       90        90       NA      15
 4     5   210      2    57     1       1       90        60     1150      11
 5     1   883      2    60     1       0      100        90       NA       0
 6    12  1022      1    74     1       1       50        80      513       0
 7     7   310      2    68     2       2       70        60      384      10
 8    11   361      2    71     2       2       60        80      538       1
 9     1   218      2    53     1       1       70        80      825      16
10     7   166      2    61     1       2       70        70      271      34
# ‚Ñπ 218 more rows</code></pre>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Las [<strong>rutas</strong>]{.hl-yellow deben ser siempre <span class="hl-yellow"><strong>sin espacios, √±, ni acentos</strong></span>.</p>
</div>
</div>
</div>
</section>
<section id="datos-tabulados-readr" class="slide level2">
<h2>Datos tabulados: readr</h2>
<p>El paquete <code>{readr}</code> dentro del entorno <code>{tidyverse}</code> contiene varias funciones √∫tiles para <span class="hl-yellow"><strong>cargar datos rectangulares (sin formatear pero tabulados)</strong></span>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><code>read_csv()</code>: archivos <code>.csv</code> <span class="hl-purple"><strong>variables separadas por comas</strong></span></li>
<li><code>read_csv2()</code>: variables separadas por <span class="hl-purple"><strong>punto y coma</strong></span></li>
<li><code>read_tsv()</code>: variables separadas por <span class="hl-purple"><strong>tabuladores</strong></span>.</li>
<li><code>read_table()</code>: variables separadas por <span class="hl-purple"><strong>espacios</strong></span>.</li>
<li><code>read_delim()</code>: funci√≥n generar con opci√≥n de <span class="hl-purple"><strong>especificar el delimitador</strong></span>.</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="img/data-import-readr.png"></p>
</div>
</div>
<p>Todos ellos necesitan como <strong>argumento la ruta del fichero</strong> m√°s <strong>otros opcionales</strong> (saltar cabecera o no, decimales, etc). Ver m√°s en <a href="https://readr.tidyverse.org/" class="uri">https://readr.tidyverse.org/</a></p>
</section>
<section id="datos-tabulados-.csv-.tsv" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>La principal ventaja de <code>{readr}</code> es que <span class="hl-yellow"><strong>automatiza el formato</strong></span> para pasar de un fichero plano (sin formato) a un tibble (en filas y columnas, con formato).</p>
<div class="fragment">
<ul>
<li>Archivo <code>.csv</code>: con <code>read_csv()</code> cargaremos archivos <span class="hl-purple"><strong>separados por comas</strong></span>, pasando como <span class="hl-yellow"><strong>argumento la ruta</strong></span> en <code>file = ...</code>. Vamos a importar el conjunto de datos <code>chickens.csv</code> (sobre pollos de dibujos animados, por qu√© no). Si nos fijamos en la salida nos da el tipo de variables.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1025"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1025-1"><a href="#cb1025-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1025-2"><a href="#cb1025-2"></a>chickens <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>)</span>
<span id="cb1025-3"><a href="#cb1025-3"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                               
1 Foghorn Leghorn         rooster         0 That's a joke, ah say, that's a jok‚Ä¶
2 Chicken Little          hen             3 The sky is falling!                 
3 Ginger                  hen            12 Listen. We'll either die free chick‚Ä¶
4 Camilla the Chicken     hen             7 Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster         0 Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-1" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>El <span class="hl-yellow"><strong>formato de la variable</strong></span> se har√° normalmente <span class="hl-yellow"><strong>autom√°ticamente</strong></span> por <code>read_csv()</code>, y podemos consultarlo con <code>spec()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1027"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1027-1"><a href="#cb1027-1"></a><span class="fu">spec</span>(chickens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  chicken = col_character(),
  sex = col_character(),
  eggs_laid = col_double(),
  motto = col_character()
)</code></pre>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-2" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>Aunque normalmente lo hace bien autom√°ticamente podemos <span class="hl-yellow"><strong>especificar el formato expl√≠citamente</strong></span> en <code>col_types = lista()</code> (en formato lista, con <code>col_xxx()</code> para cada tipo de variable, por ejemplo <code>eggs_laid</code> se importar√° como car√°cter).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1029"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1029-1"><a href="#cb1029-1"></a>chickens <span class="ot">&lt;-</span></span>
<span id="cb1029-2"><a href="#cb1029-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>,</span>
<span id="cb1029-3"><a href="#cb1029-3"></a>           <span class="at">col_types =</span> <span class="fu">list</span>(<span class="fu">col_character</span>(), <span class="fu">col_character</span>(),</span>
<span id="cb1029-4"><a href="#cb1029-4"></a>                            <span class="fu">col_character</span>(), <span class="fu">col_character</span>()))</span>
<span id="cb1029-5"><a href="#cb1029-5"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;                               
1 Foghorn Leghorn         rooster 0         That's a joke, ah say, that's a jok‚Ä¶
2 Chicken Little          hen     3         The sky is falling!                 
3 Ginger                  hen     12        Listen. We'll either die free chick‚Ä¶
4 Camilla the Chicken     hen     7         Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster 0         Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
</section>
<section id="datos-tabulados-.csv-.tsv-3" class="slide level2">
<h2>Datos tabulados (.csv, .tsv)</h2>
<p>Incluso podemos indicar que <span class="hl-yellow"><strong>variables queremos seleccionar</strong></span> (sin ocupar memoria), indic√°ndolo en <code>col_select = ...</code> (en formato lista, con <code>col_select = ...</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1031"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1031-1"><a href="#cb1031-1"></a>chickens <span class="ot">&lt;-</span></span>
<span id="cb1031-2"><a href="#cb1031-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/chickens.csv"</span>,</span>
<span id="cb1031-3"><a href="#cb1031-3"></a>           <span class="at">col_select =</span> <span class="fu">c</span>(chicken, sex, eggs_laid))</span>
<span id="cb1031-4"><a href="#cb1031-4"></a>chickens</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 3
  chicken                 sex     eggs_laid
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt;
1 Foghorn Leghorn         rooster         0
2 Chicken Little          hen             3
3 Ginger                  hen            12
4 Camilla the Chicken     hen             7
5 Ernie The Giant Chicken rooster         0</code></pre>
</div>
</div>
</section>
<section id="datos-tabulados-.txt" class="slide level2">
<h2>Datos tabulados (.txt)</h2>
<p>¬øQu√© ocurre cuando el <span class="hl-red"><strong>separador no es correcto</strong></span>?</p>
<div class="fragment">
<p>Si usamos <code>read_csv()</code> espera que el separador entre columnas sea una coma pero, como puedes ver con el siguiente <code>.txt</code>, lo interpreta todo como una sola columna: <span class="hl-yellow"><strong>no tiene coma y no sabe d√≥nde separar</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1033"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1033-1"><a href="#cb1033-1"></a>datos_txt <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/massey-rating.txt"</span>)</span>
<span id="cb1033-2"><a href="#cb1033-2"></a><span class="fu">dim</span>(datos_txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10  1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb1035"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1035-1"><a href="#cb1035-1"></a><span class="fu">as_tibble</span>(datos_txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 1
   `UCC PAY LAZ KPK  RT   COF BIH DII ENG ACU Rank Team            Conf`
   &lt;chr&gt;                                                                
 1 1   1   1   1   1     1   1   1   1   1    1 Ohio St          B10    
 2 2   2   2   2   2     2   2   2   4   2    2 Oregon           P12    
 3 3   4   3   4   3     4   3   4   2   3    3 Alabama          SEC    
 4 4   3   4   3   4     3   5   3   3   4    4 TCU              B12    
 5 6   6   6   5   5     7   6   5   6  11    5 Michigan St      B10    
 6 7   7   7   6   7     6  11   8   7   8    6 Georgia          SEC    
 7 5   5   5   7   6     8   4   6   5   5    7 Florida St       ACC    
 8 8   8   9   9  10     5   7   7  10   7    8 Baylor           B12    
 9 9  11   8  13  11    11  12   9  14   9    9 Georgia Tech     ACC    
10 13  10  13  11   8     9  10  11   9  10   10 Mississippi      SEC   </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-tabulados-.txt-1" class="slide level2">
<h2>Datos tabulados (.txt)</h2>
<p>Para ello tenemos.</p>
<ul>
<li><p><code>read_csv2()</code> cuando el <span class="hl-yellow"><strong>separador es punto y coma</strong></span>, <code>read_tsv()</code> cuando es un <span class="hl-yellow"><strong>tabulador</strong></span> y <code>read_table()</code> cuando es un <span class="hl-yellow"><strong>espacio</strong></span>.</p></li>
<li><p><code>read_delim()</code> en general.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1037"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1037-1"><a href="#cb1037-1"></a>datos_txt <span class="ot">&lt;-</span> <span class="fu">read_table</span>(<span class="at">file =</span> <span class="st">"./datos/massey-rating.txt"</span>)</span>
<span id="cb1037-2"><a href="#cb1037-2"></a><span class="fu">as_tibble</span>(datos_txt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 13
     UCC   PAY   LAZ   KPK    RT   COF   BIH   DII   ENG   ACU  Rank Team  Conf 
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
 1     1     1     1     1     1     1     1     1     1     1     1 Ohio  St   
 2     2     2     2     2     2     2     2     2     4     2     2 Oreg‚Ä¶ P12  
 3     3     4     3     4     3     4     3     4     2     3     3 Alab‚Ä¶ SEC  
 4     4     3     4     3     4     3     5     3     3     4     4 TCU   B12  
 5     6     6     6     5     5     7     6     5     6    11     5 Mich‚Ä¶ St   
 6     7     7     7     6     7     6    11     8     7     8     6 Geor‚Ä¶ SEC  
 7     5     5     5     7     6     8     4     6     5     5     7 Flor‚Ä¶ St   
 8     8     8     9     9    10     5     7     7    10     7     8 Bayl‚Ä¶ B12  
 9     9    11     8    13    11    11    12     9    14     9     9 Geor‚Ä¶ Tech 
10    13    10    13    11     8     9    10    11     9    10    10 Miss‚Ä¶ SEC  </code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Otro paquete de importaci√≥n clave ser√° el paquete <code>{readxl}</code> para <span class="hl-yellow"><strong>importar datos desde Excel</strong></span>. Tres funciones ser√°n clave:</p>
<ul>
<li><code>read_xls()</code> espec√≠fica para <code>.xls</code>, <code>read_xlsx()</code> espec√≠fica para <code>.xlsx</code>.</li>
<li><code>read_excel()</code>: tanto para <code>.xls</code> como para <code>.xlsx</code>.</li>
</ul>
<div class="fragment">
<p>Vamos a importar <code>deaths.xlsx</code> con los registros de defunciones de famosos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1039"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1039-1"><a href="#cb1039-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1039-2"><a href="#cb1039-2"></a>deaths <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>)</span>
<span id="cb1039-3"><a href="#cb1039-3"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 √ó 6
   `Lots of people`             ...2                     ...3  ...4  ...5  ...6 
   &lt;chr&gt;                        &lt;chr&gt;                    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1 simply cannot resist writing &lt;NA&gt;                     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  some‚Ä¶
 2 at                           the                      top   &lt;NA&gt;  of    thei‚Ä¶
 3 or                           merging                  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  cells
 4 Name                         Profession               Age   Has ‚Ä¶ Date‚Ä¶ Date‚Ä¶
 5 David Bowie                  musician                 69    TRUE  17175 42379
 6 Carrie Fisher                actor                    60    TRUE  20749 42731
 7 Chuck Berry                  musician                 90    TRUE  9788  42812
 8 Bill Paxton                  actor                    61    TRUE  20226 42791
 9 Prince                       musician                 57    TRUE  21343 42481
10 Alan Rickman                 actor                    69    FALSE 16854 42383
11 Florence Henderson           actor                    82    TRUE  12464 42698
12 Harper Lee                   author                   89    FALSE 9615  42419
13 Zsa Zsa G√°bor                actor                    99    TRUE  6247  42722
14 George Michael               musician                 53    FALSE 23187 42729
15 Some                         &lt;NA&gt;                     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
16 &lt;NA&gt;                         also like to write stuff &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
17 &lt;NA&gt;                         &lt;NA&gt;                     at t‚Ä¶ bott‚Ä¶ &lt;NA&gt;  &lt;NA&gt; 
18 &lt;NA&gt;                         &lt;NA&gt;                     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  too! </code></pre>
</div>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-1" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1041"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1041-1"><a href="#cb1041-1"></a>deaths <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 6
  `Lots of people`             ...2       ...3  ...4     ...5          ...6     
  &lt;chr&gt;                        &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;    
1 simply cannot resist writing &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          some not‚Ä¶
2 at                           the        top   &lt;NA&gt;     of            their sp‚Ä¶
3 or                           merging    &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;          cells    
4 Name                         Profession Age   Has kids Date of birth Date of ‚Ä¶
5 David Bowie                  musician   69    TRUE     17175         42379    
6 Carrie Fisher                actor      60    TRUE     20749         42731    </code></pre>
</div>
</div>
<p><span class="hl-red"><strong>Una desgracia muy com√∫n</strong></span> es que haya alg√∫n tipo de comentario o texto al principio del fichero, teniendo que <span class="hl-yellow"><strong>saltar esas filas</strong></span>.</p>
</section>
<section id="datos-excel-.xls-.xlsx-2" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Podemos <span class="hl-yellow"><strong>saltar estas filas</strong></span> directamente en la carga con <code>skip = ...</code> (indicando el n√∫mero de filas a saltar).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1043"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1043-1"><a href="#cb1043-1"></a>deaths <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>, <span class="at">skip =</span> <span class="dv">4</span>)</span>
<span id="cb1043-2"><a href="#cb1043-2"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 √ó 6
   Name          Profession Age   `Has kids` `Date of birth`     `Date of death`
   &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;      &lt;dttm&gt;              &lt;chr&gt;          
 1 David Bowie   musician   69    TRUE       1947-01-08 00:00:00 42379          
 2 Carrie Fisher actor      60    TRUE       1956-10-21 00:00:00 42731          
 3 Chuck Berry   musician   90    TRUE       1926-10-18 00:00:00 42812          
 4 Bill Paxton   actor      61    TRUE       1955-05-17 00:00:00 42791          
 5 Prince        musician   57    TRUE       1958-06-07 00:00:00 42481          
 6 Alan Rickman  actor      69    FALSE      1946-02-21 00:00:00 42383          
 7 Florence Hen‚Ä¶ actor      82    TRUE       1934-02-14 00:00:00 42698          
 8 Harper Lee    author     89    FALSE      1926-04-28 00:00:00 42419          
 9 Zsa Zsa G√°bor actor      99    TRUE       1917-02-06 00:00:00 42722          
10 George Micha‚Ä¶ musician   53    FALSE      1963-06-25 00:00:00 42729          
11 Some          &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       NA                  &lt;NA&gt;           
12 &lt;NA&gt;          also like‚Ä¶ &lt;NA&gt;  &lt;NA&gt;       NA                  &lt;NA&gt;           
13 &lt;NA&gt;          &lt;NA&gt;       at t‚Ä¶ bottom,    NA                  &lt;NA&gt;           
14 &lt;NA&gt;          &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;       NA                  too!           </code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-3" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Adem√°s con <code>col_names = ...</code> ya podemos renombrar las columnas en la importaci√≥n (<span class="hl-yellow"><strong>proporcionar nombres supone 1¬™ l√≠nea ya como dato</strong></span>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1045" data-code-line-numbers="2-3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1045-1"><a href="#cb1045-1"></a>deaths <span class="ot">&lt;-</span></span>
<span id="cb1045-2"><a href="#cb1045-2"></a>  <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/deaths.xlsx"</span>, <span class="at">skip =</span> <span class="dv">5</span>,</span>
<span id="cb1045-3"><a href="#cb1045-3"></a>            <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"nombre"</span>, <span class="st">"profesion"</span>, <span class="st">"edad"</span>, <span class="st">"hijos"</span>, <span class="st">"nacimiento"</span>, <span class="st">"muerte"</span>))</span>
<span id="cb1045-4"><a href="#cb1045-4"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 √ó 6
   nombre             profesion           edad  hijos nacimiento          muerte
   &lt;chr&gt;              &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;              &lt;chr&gt; 
 1 David Bowie        musician            69    TRUE  1947-01-08 00:00:00 42379 
 2 Carrie Fisher      actor               60    TRUE  1956-10-21 00:00:00 42731 
 3 Chuck Berry        musician            90    TRUE  1926-10-18 00:00:00 42812 
 4 Bill Paxton        actor               61    TRUE  1955-05-17 00:00:00 42791 
 5 Prince             musician            57    TRUE  1958-06-07 00:00:00 42481 
 6 Alan Rickman       actor               69    FALSE 1946-02-21 00:00:00 42383 
 7 Florence Henderson actor               82    TRUE  1934-02-14 00:00:00 42698 
 8 Harper Lee         author              89    FALSE 1926-04-28 00:00:00 42419 
 9 Zsa Zsa G√°bor      actor               99    TRUE  1917-02-06 00:00:00 42722 
10 George Michael     musician            53    FALSE 1963-06-25 00:00:00 42729 
11 Some               &lt;NA&gt;                &lt;NA&gt;  &lt;NA&gt;  NA                  &lt;NA&gt;  
12 &lt;NA&gt;               also like to write‚Ä¶ &lt;NA&gt;  &lt;NA&gt;  NA                  &lt;NA&gt;  
13 &lt;NA&gt;               &lt;NA&gt;                at t‚Ä¶ bott‚Ä¶ NA                  &lt;NA&gt;  
14 &lt;NA&gt;               &lt;NA&gt;                &lt;NA&gt;  &lt;NA&gt;  NA                  too!  </code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-4" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>A veces las <span class="hl-red"><strong>fechas de Excel tienen un formato incorrecto</strong></span> (sorpresa): podemos utilizar <code>convertToDate()</code> del paquete <code>{openxlsx}</code> para convertirlo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1047"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1047-1"><a href="#cb1047-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb1047-2"><a href="#cb1047-2"></a>deaths<span class="sc">$</span>muerte <span class="ot">&lt;-</span> <span class="fu">convertToDate</span>(deaths<span class="sc">$</span>muerte)</span>
<span id="cb1047-3"><a href="#cb1047-3"></a>deaths</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 √ó 6
   nombre             profesion       edad  hijos nacimiento          muerte    
   &lt;chr&gt;              &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;              &lt;date&gt;    
 1 David Bowie        musician        69    TRUE  1947-01-08 00:00:00 2016-01-10
 2 Carrie Fisher      actor           60    TRUE  1956-10-21 00:00:00 2016-12-27
 3 Chuck Berry        musician        90    TRUE  1926-10-18 00:00:00 2017-03-18
 4 Bill Paxton        actor           61    TRUE  1955-05-17 00:00:00 2017-02-25
 5 Prince             musician        57    TRUE  1958-06-07 00:00:00 2016-04-21
 6 Alan Rickman       actor           69    FALSE 1946-02-21 00:00:00 2016-01-14
 7 Florence Henderson actor           82    TRUE  1934-02-14 00:00:00 2016-11-24
 8 Harper Lee         author          89    FALSE 1926-04-28 00:00:00 2016-02-19
 9 Zsa Zsa G√°bor      actor           99    TRUE  1917-02-06 00:00:00 2016-12-18
10 George Michael     musician        53    FALSE 1963-06-25 00:00:00 2016-12-25
11 Some               &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;  NA                  NA        
12 &lt;NA&gt;               also like to w‚Ä¶ &lt;NA&gt;  &lt;NA&gt;  NA                  NA        
13 &lt;NA&gt;               &lt;NA&gt;            at t‚Ä¶ bott‚Ä¶ NA                  NA        
14 &lt;NA&gt;               &lt;NA&gt;            &lt;NA&gt;  &lt;NA&gt;  NA                  NA        </code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-5" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Tambi√©n podemos <span class="hl-yellow"><strong>cargar un Excel con varias hojas</strong></span>: para <span class="hl-yellow"><strong>indicar la hoja</strong></span> (ya sea por su nombre o por su n√∫mero) utilizaremos el argumento <code>sheet = ...</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1049"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1049-1"><a href="#cb1049-1"></a>mtcars <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/datasets.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"mtcars"</span>)</span>
<span id="cb1049-2"><a href="#cb1049-2"></a>mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 √ó 11
     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
 2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
 3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
 4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
 5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
 6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
 7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
 8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
 9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
# ‚Ñπ 22 more rows</code></pre>
</div>
</div>
</section>
<section id="datos-excel-.xls-.xlsx-6" class="slide level2">
<h2>Datos Excel (.xls, .xlsx)</h2>
<p>Incluso podemos indicar el <span class="hl-yellow"><strong>rango de celdas</strong></span> a cargar con <code>range = ...</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1051"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1051-1"><a href="#cb1051-1"></a>iris <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/datasets.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"iris"</span>, <span class="at">range =</span> <span class="st">"C1:E4"</span>)</span>
<span id="cb1051-2"><a href="#cb1051-2"></a>iris</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  Petal.Length Petal.Width Species
         &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;  
1          1.4         0.2 setosa 
2          1.4         0.2 setosa 
3          1.3         0.2 setosa </code></pre>
</div>
</div>
</section>
<section id="importar-desde-sasstataspss" class="slide level2">
<h2>Importar desde SAS/STATA/SPSS</h2>
<p>El paquete <code>{haven}</code> dentro del universo tidyverse nos permitir√° <span class="hl-yellow"><strong>importar ficheros de los 3 software de pago m√°s importantes</strong></span>: SAS, SPSS y Stata.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1053"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1053-1"><a href="#cb1053-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1053-2"><a href="#cb1053-2"></a></span>
<span id="cb1053-3"><a href="#cb1053-3"></a><span class="co"># SAS</span></span>
<span id="cb1053-4"><a href="#cb1053-4"></a>iris_sas <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="at">data_file =</span> <span class="st">"./datos/iris.sas7bdat"</span>)</span>
<span id="cb1053-5"><a href="#cb1053-5"></a></span>
<span id="cb1053-6"><a href="#cb1053-6"></a><span class="co"># SPSS</span></span>
<span id="cb1053-7"><a href="#cb1053-7"></a>iris_spss <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="at">file =</span> <span class="st">"./datos/iris.sav"</span>)</span>
<span id="cb1053-8"><a href="#cb1053-8"></a></span>
<span id="cb1053-9"><a href="#cb1053-9"></a><span class="co"># Stata</span></span>
<span id="cb1053-10"><a href="#cb1053-10"></a>iris_stata <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="at">file =</span> <span class="st">"./datos/iris.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exportar" class="slide level2">
<h2>Exportar</h2>
<p>De la misma forma que podemos importar tambi√©n podemos <span class="hl-yellow"><strong>exportar</strong></span></p>
<ul>
<li>exportar en <code>.RData</code> (opci√≥n recomendada para variables almacenadas en <code>R</code>). Recuerda que esta extensi√≥n <span class="hl-yellow"><strong>s√≥lo se puede utilizar en <code>R</code></strong></span>. Para ello, basta con utilizar <code>save(object, file = path)</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1054"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1054-1"><a href="#cb1054-1"></a>table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb1054-2"><a href="#cb1054-2"></a><span class="fu">save</span>(table, <span class="at">file =</span> <span class="st">"./datos/table.RData"</span>)</span>
<span id="cb1054-3"><a href="#cb1054-3"></a><span class="fu">rm</span>(table) <span class="co"># eliminar</span></span>
<span id="cb1054-4"><a href="#cb1054-4"></a><span class="fu">load</span>(<span class="st">"./datos/table.RData"</span>)</span>
<span id="cb1054-5"><a href="#cb1054-5"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 2
      a     b
  &lt;int&gt; &lt;int&gt;
1     1     1
2     2     2
3     3     3
4     4     4</code></pre>
</div>
</div>
</section>
<section id="exportar-1" class="slide level2">
<h2>Exportar</h2>
<p>La ventaja de <code>.RData</code> es que podemos <span class="hl-yellow"><strong>exportar m√∫ltiples variables de nuestro environment</strong></span>, no solo un √∫nico dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1056"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1056-1"><a href="#cb1056-1"></a>table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb1056-2"><a href="#cb1056-2"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb1056-3"><a href="#cb1056-3"></a>b <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"sandra"</span>)</span>
<span id="cb1056-4"><a href="#cb1056-4"></a><span class="fu">save</span>(table, a, b, <span class="at">file =</span> <span class="st">"./datos/mult_obj.RData"</span>)</span>
<span id="cb1056-5"><a href="#cb1056-5"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"table"</span>))</span>
<span id="cb1056-6"><a href="#cb1056-6"></a><span class="fu">load</span>(<span class="st">"./datos/mult_obj.RData"</span>)</span>
<span id="cb1056-7"><a href="#cb1056-7"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 2
      a     b
  &lt;int&gt; &lt;int&gt;
1     1     1
2     2     2
3     3     3
4     4     4</code></pre>
</div>
</div>
</section>
<section id="exportar-2" class="slide level2">
<h2>Exportar</h2>
<ul>
<li><span class="hl-yellow"><strong>exportado en <code>.csv</code></strong></span>. Para ello simplemente utilizamos <code>write_csv(object, file = path)</code>, y es el m√°s recomendable para exportar bases de datos de tama√±o peque√±o o mediano. Ver <a href="https://arrow.apache.org/docs/r/" class="uri">https://arrow.apache.org/docs/r/</a> para bases de datos masivas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1058"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1058-1"><a href="#cb1058-1"></a><span class="fu">write_csv</span>(table, <span class="at">file =</span> <span class="st">"./datos/table.csv"</span>)</span>
<span id="cb1058-2"><a href="#cb1058-2"></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/table.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 2
      a     b
  &lt;dbl&gt; &lt;dbl&gt;
1     1     1
2     2     2
3     3     3
4     4     4</code></pre>
</div>
</div>
</section>
<section id="importar-desde-web" class="slide level2">
<h2>Importar desde web</h2>
<p>Una de las principales ventajas de <code>R</code> es que podemos hacer uso de todas las funciones anteriores de <span class="hl-yellow"><strong>importar pero directamente desde una web</strong></span>, sin necesidad de realizar la descarga manual: en lugar de pasarle la ruta local le indicaremos el <span class="hl-yellow"><strong>enlace</strong></span>. Por ejemplo, vamos a descargar los datos covid del ISCIII (<a href="https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos" class="uri">https://cnecovid.isciii.es/covid19/#documentaci%C3%B3n-y-datos</a>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1060"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1060-1"><a href="#cb1060-1"></a>covid_data <span class="ot">&lt;-</span></span>
<span id="cb1060-2"><a href="#cb1060-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://cnecovid.isciii.es/covid19/resources/casos_hosp_uci_def_sexo_edad_provres.csv"</span>)</span>
<span id="cb1060-3"><a href="#cb1060-3"></a>covid_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 500 √ó 8
   provincia_iso sexo  grupo_edad fecha      num_casos num_hosp num_uci num_def
   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;      &lt;date&gt;         &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 A             H     0-9        2020-01-01         0        0       0       0
 2 A             H     10-19      2020-01-01         0        0       0       0
 3 A             H     20-29      2020-01-01         0        0       0       0
 4 A             H     30-39      2020-01-01         0        0       0       0
 5 A             H     40-49      2020-01-01         0        0       0       0
 6 A             H     50-59      2020-01-01         0        0       0       0
 7 A             H     60-69      2020-01-01         0        0       0       0
 8 A             H     70-79      2020-01-01         0        0       0       0
 9 A             H     80+        2020-01-01         0        0       0       0
10 A             H     NC         2020-01-01         0        0       0       0
# ‚Ñπ 490 more rows</code></pre>
</div>
</div>
</section>
<section id="importar-desde-wikipedia" class="slide level2">
<h2>Importar desde wikipedia</h2>
<p>El paquete <code>{rvest}</code>, uno de los m√°s √∫tiles de <code>{tidyverse}</code> nos permite <span class="hl-yellow"><strong>importar (scrappear) directamente desde un <code>html</code></strong></span>. Por ejemplo, para exportar tablas de wikipedia basta con <code>read_html()</code> para importar el html, <code>html_element(¬´table¬ª)</code> para extraer los objetos tabla, y <code>html_table()</code> para convertir la tabla html a <code>tibble</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1062"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1062-1"><a href="#cb1062-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1062-2"><a href="#cb1062-2"></a>wiki_jump <span class="ot">&lt;-</span> <span class="st">'https://en.wikipedia.org/wiki/Men%27s_long_jump_world_record_progression'</span></span>
<span id="cb1062-3"><a href="#cb1062-3"></a>wiki_jump <span class="sc">|&gt;</span> <span class="fu">read_html</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1062-4"><a href="#cb1062-4"></a>  <span class="fu">html_element</span>(<span class="st">"table"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1062-5"><a href="#cb1062-5"></a>  <span class="fu">html_table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 √ó 5
   Mark                       Wind   Athlete                  Place        Date 
   &lt;chr&gt;                      &lt;chr&gt;  &lt;chr&gt;                    &lt;chr&gt;        &lt;chr&gt;
 1 7.61&nbsp;m (24&nbsp;ft 11+1‚ÅÑ2&nbsp;in)   ""     Peter O'Connor&nbsp;(IRE)     Dublin, Ire‚Ä¶ 5 Au‚Ä¶
 2 7.69&nbsp;m (25&nbsp;ft 2+3‚ÅÑ4&nbsp;in)    ""     Edward Gourdin&nbsp;(USA)     Cambridge, ‚Ä¶ 23 J‚Ä¶
 3 7.76&nbsp;m (25&nbsp;ft 5+1‚ÅÑ2&nbsp;in)    ""     Robert LeGendre&nbsp;(USA)    Paris, Fran‚Ä¶ 7 Ju‚Ä¶
 4 7.89&nbsp;m (25&nbsp;ft 10+1‚ÅÑ2&nbsp;in)   ""     DeHart Hubbard&nbsp;(USA)     Chicago, Un‚Ä¶ 13 J‚Ä¶
 5 7.90&nbsp;m (25&nbsp;ft 11&nbsp;in)       ""     Edward Hamm&nbsp;(USA)        Cambridge, ‚Ä¶ 7 Ju‚Ä¶
 6 7.93&nbsp;m (26&nbsp;ft 0&nbsp;in)        "0.0"  Sylvio Cator&nbsp;(HAI)       Paris, Fran‚Ä¶ 9 Se‚Ä¶
 7 7.98&nbsp;m (26&nbsp;ft 2&nbsp;in)        "0.5"  Chuhei Nambu&nbsp;(JPN)       Tokyo, Japan 27 O‚Ä¶
 8 8.13&nbsp;m (26&nbsp;ft 8&nbsp;in)        "1.5"  Jesse Owens&nbsp;(USA)        Ann Arbor, ‚Ä¶ 25 M‚Ä¶
 9 8.21&nbsp;m (26&nbsp;ft 11&nbsp;in)       "0.0"  Ralph Boston&nbsp;(USA)       Walnut, Uni‚Ä¶ 12 A‚Ä¶
10 8.24&nbsp;m (27&nbsp;ft 1‚ÅÑ4&nbsp;in)      "1.8"  Ralph Boston&nbsp;(USA)       Modesto, Un‚Ä¶ 27 M‚Ä¶
11 8.28&nbsp;m (27&nbsp;ft 1+3‚ÅÑ4&nbsp;in)    "1.2"  Ralph Boston&nbsp;(USA)       Moscow, Sov‚Ä¶ 16 J‚Ä¶
12 8.31&nbsp;m (27&nbsp;ft 3&nbsp;in)&nbsp;A      "‚àí0.1" Igor Ter-Ovanesyan&nbsp;(URS) Yerevan, So‚Ä¶ 10 J‚Ä¶
13 8.33&nbsp;m (27&nbsp;ft 3+3‚ÅÑ4&nbsp;in)[2] ""     Phil Shinnick&nbsp;(USA)      Modesto, Un‚Ä¶ 25 M‚Ä¶
14 8.31&nbsp;m (27&nbsp;ft 3&nbsp;in)        "0.0"  Ralph Boston&nbsp;(USA)       Kingston, J‚Ä¶ 15 A‚Ä¶
15 8.34&nbsp;m (27&nbsp;ft 4+1‚ÅÑ4&nbsp;in)    "1.0"  Ralph Boston&nbsp;(USA)       Los Angeles‚Ä¶ 12 S‚Ä¶
16 8.35&nbsp;m (27&nbsp;ft 4+1‚ÅÑ2&nbsp;in)[5] "0.0"  Ralph Boston&nbsp;(USA)       Modesto, Un‚Ä¶ 29 M‚Ä¶
17 8.35&nbsp;m (27&nbsp;ft 4+1‚ÅÑ2&nbsp;in)&nbsp;A  "0.0"  Igor Ter-Ovanesyan&nbsp;(URS) Mexico City‚Ä¶ 19 O‚Ä¶
18 8.90&nbsp;m (29&nbsp;ft 2+1‚ÅÑ4&nbsp;in)&nbsp;A  "2.0"  Bob Beamon&nbsp;(USA)         Mexico City‚Ä¶ 18 O‚Ä¶
19 8.95&nbsp;m (29&nbsp;ft 4+1‚ÅÑ4&nbsp;in)    "0.3"  Mike Powell&nbsp;(USA)        Tokyo, Japan 30 A‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="importar-desde-google-drive" class="slide level2">
<h2>Importar desde google drive</h2>
<p>Otra opci√≥n disponible (especialmente si trabajamos con otras personas trabajando) es <span class="hl-yellow"><strong>importar desde una hoja de c√°lculo de Google Drive</strong></span>, haciendo uso de <code>read_sheet()</code> del paquete <code>{googlesheets4}</code>.</p>
<p>La primera vez se te pedir√° un permiso tidyverse para interactuar con tu drive</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1064"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1064-1"><a href="#cb1064-1"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb1064-2"><a href="#cb1064-2"></a>google_sheet <span class="ot">&lt;-</span></span>
<span id="cb1064-3"><a href="#cb1064-3"></a>  <span class="fu">read_sheet</span>(<span class="st">"https://docs.google.com/spreadsheets/d/1Uz38nHjl3bmftxDpcXj--DYyPo1I39NHVf-xjeg1_wI/edit?usp=sharing"</span>)</span>
<span id="cb1064-4"><a href="#cb1064-4"></a>google_sheet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 4
  a         b     c d     
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
1 d1      0.5     1 hombre
2 d2     -0.3     2 hombre
3 d3      1.1     3 mujer </code></pre>
</div>
</div>
</section>
<section id="importar-desde-api-owid" class="slide level2">
<h2>Importar desde API (owid)</h2>
<p>Otra opci√≥n interesante es la <span class="hl-yellow"><strong>descarga de datos desde una API</strong></span>: un intermediario entre una app o proveedor de datos y nuestro <code>R</code>. Por ejemplo, carguemos la librer√≠a <code>{owidR}</code>, que nos permite descargar datos de la web <a href="https://ourworldindata.org/" class="uri">https://ourworldindata.org/</a>. Por ejemplo, la funci√≥n <code>owid_covid()</code> carga sin darnos cuenta m√°s de 400 000 registros con m√°s de 60 variables de 238 pa√≠ses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1066"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1066-1"><a href="#cb1066-1"></a><span class="fu">library</span>(owidR)</span>
<span id="cb1066-2"><a href="#cb1066-2"></a><span class="fu">owid_covid</span>() <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 √ó 67
  iso_code continent location    date       total_cases new_cases
  &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;IDate&gt;          &lt;int&gt;     &lt;int&gt;
1 AFG      Asia      Afghanistan 2020-01-05           0         0
2 AFG      Asia      Afghanistan 2020-01-06           0         0
3 AFG      Asia      Afghanistan 2020-01-07           0         0
4 AFG      Asia      Afghanistan 2020-01-08           0         0
5 AFG      Asia      Afghanistan 2020-01-09           0         0
6 AFG      Asia      Afghanistan 2020-01-10           0         0
7 AFG      Asia      Afghanistan 2020-01-11           0         0
# ‚Ñπ 61 more variables: new_cases_smoothed &lt;dbl&gt;, total_deaths &lt;int&gt;,
#   new_deaths &lt;int&gt;, new_deaths_smoothed &lt;dbl&gt;, total_cases_per_million &lt;dbl&gt;,
#   new_cases_per_million &lt;dbl&gt;, new_cases_smoothed_per_million &lt;dbl&gt;,
#   total_deaths_per_million &lt;dbl&gt;, new_deaths_per_million &lt;dbl&gt;,
#   new_deaths_smoothed_per_million &lt;dbl&gt;, reproduction_rate &lt;dbl&gt;,
#   icu_patients &lt;int&gt;, icu_patients_per_million &lt;dbl&gt;, hosp_patients &lt;int&gt;,
#   hosp_patients_per_million &lt;dbl&gt;, weekly_icu_admissions &lt;int&gt;, ‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="importar-desde-api-aemet" class="slide level2">
<h2>Importar desde API (aemet)</h2>
<p>En muchas ocasiones para conectarnos a la API primero tendremos que <span class="hl-yellow"><strong>registrarnos y obtener una clave</strong></span>, este es el caso del paquete <code>{climaemet}</code> para acceder a <span class="hl-yellow"><strong>datos meteorol√≥gicos de Espa√±a</strong></span> (<a href="https://opendata.aemet.es/centrodedescargas/inicio" class="uri">https://opendata.aemet.es/centrodedescargas/inicio</a>).</p>
<p>Una vez tengamos la clave API la registramos en nuestro RStudio para poder utilizarla en el futuro.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1068"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1068-1"><a href="#cb1068-1"></a><span class="fu">library</span>(climaemet)</span>
<span id="cb1068-2"><a href="#cb1068-2"></a></span>
<span id="cb1068-3"><a href="#cb1068-3"></a><span class="co"># Api key</span></span>
<span id="cb1068-4"><a href="#cb1068-4"></a>apikey <span class="ot">&lt;-</span> <span class="st">"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqYXZhbHYwOUB1Y20uZXMiLCJqdGkiOiI4YTU1ODUxMS01MTE3LTQ4MTYtYmM4OS1hYmVkNDhiODBkYzkiLCJpc3MiOiJBRU1FVCIsImlhdCI6MTY2NjQ2OTcxNSwidXNlcklkIjoiOGE1NTg1MTEtNTExNy00ODE2LWJjODktYWJlZDQ4YjgwZGM5Iiwicm9sZSI6IiJ9.HEMR77lZy2ASjmOxJa8ppx2J8Za1IViurMX3p1reVBU"</span></span>
<span id="cb1068-5"><a href="#cb1068-5"></a></span>
<span id="cb1068-6"><a href="#cb1068-6"></a><span class="fu">aemet_api_key</span>(apikey, <span class="at">install =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importar-desde-api-aemet-1" class="slide level2">
<h2>Importar desde API (aemet)</h2>
<p>Con este paquete podemos hacer una <span class="hl-yellow"><strong>b√∫squeda de estaciones</strong></span> para conocer tanto su c√≥digo postal como su c√≥digo identificador dentro de la red AEMET</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1069"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1069-1"><a href="#cb1069-1"></a>stations <span class="ot">&lt;-</span> <span class="fu">aemet_stations</span>()</span>
<span id="cb1069-2"><a href="#cb1069-2"></a>stations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 947 √ó 7
   indicativo indsinop nombre                 provincia altitud longitud latitud
   &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;                  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;
 1 B013X      "08304"  ESCORCA, LLUC          ILLES BA‚Ä¶     490     2.89    39.8
 2 B051A      "08316"  S√ìLLER, PUERTO         ILLES BA‚Ä¶       5     2.69    39.8
 3 B087X      ""       BANYALBUFAR            ILLES BA‚Ä¶      60     2.51    39.7
 4 B103B      "99103"  ANDRATX - SANT ELM     ILLES BA‚Ä¶      52     2.37    39.6
 5 B158X      ""       CALVI√Ä, ES CAPDELL√Ä    ILLES BA‚Ä¶      50     2.47    39.6
 6 B228       "08301"  PALMA, PUERTO          ILLES BA‚Ä¶       3     2.63    39.6
 7 B236C      ""       PALMA, UNIVERSIDAD     ILLES BA‚Ä¶      95     2.64    39.6
 8 B248       "08303"  SIERRA DE ALFABIA, BU‚Ä¶ ILLES BA‚Ä¶    1030     2.71    39.7
 9 B275E      "08302"  SON BONET, AEROPUERTO  BALEARES       49     2.71    39.6
10 B278       "08306"  PALMA DE MALLORCA, AE‚Ä¶ ILLES BA‚Ä¶       8     2.74    39.6
# ‚Ñπ 937 more rows</code></pre>
</div>
</div>
</section>
<section id="importar-desde-api-aemet-2" class="slide level2">
<h2>Importar desde API (aemet)</h2>
<p>Por ejemplo, para obtener datos de la estaci√≥n del aeropuerto de El Prat, Barcelona, el c√≥digo a proporcionar es <code>¬´0076¬ª</code>, obteniendo <strong>datos horarios</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1071"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1071-1"><a href="#cb1071-1"></a><span class="fu">aemet_last_obs</span>(<span class="st">"0076"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 √ó 23
   idema   lon fint                 prec   alt  vmax    vv    dv   lat  dmax
   &lt;chr&gt; &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 0076   2.07 2024-11-02 23:00:00   0       4   5.7   3     360  41.3   350
 2 0076   2.07 2024-11-03 00:00:00   0       4   5.7   3.9   360  41.3   360
 3 0076   2.07 2024-11-03 01:00:00   0       4   6.2   3.6    10  41.3    20
 4 0076   2.07 2024-11-03 02:00:00   0       4   5.1   3.8   360  41.3    10
 5 0076   2.07 2024-11-03 03:00:00   0       4   5.7   4.3   360  41.3   350
 6 0076   2.07 2024-11-03 04:00:00   0       4   6.7   4.6   360  41.3    20
 7 0076   2.07 2024-11-03 05:00:00   0       4   7.2   5.7   360  41.3    10
 8 0076   2.07 2024-11-03 06:00:00   0.2     4   7.2   5     360  41.3    20
 9 0076   2.07 2024-11-03 07:00:00   0       4   6.2   4.6    10  41.3    10
10 0076   2.07 2024-11-03 08:00:00   0       4  11.3   5      30  41.3    10
11 0076   2.07 2024-11-03 09:00:00   0.1     4  10.3   4.5    40  41.3    30
12 0076   2.07 2024-11-03 10:00:00   9       4   6.2   3.4   290  41.3   320
13 0076   2.07 2024-11-03 11:00:00   0.1     4  10.3   3.5   360  41.3    20
# ‚Ñπ 13 more variables: ubi &lt;chr&gt;, pres &lt;dbl&gt;, hr &lt;dbl&gt;, stdvv &lt;dbl&gt;, ts &lt;dbl&gt;,
#   pres_nmar &lt;dbl&gt;, tamin &lt;dbl&gt;, ta &lt;dbl&gt;, tamax &lt;dbl&gt;, tpr &lt;dbl&gt;, vis &lt;dbl&gt;,
#   stddv &lt;dbl&gt;, inso &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="importar-desde-api-us-census" class="slide level2">
<h2>Importar desde API (US census)</h2>
<p>Una de las herramientas m√°s √∫tiles de los √∫ltimos a√±os es la conocida como <code>{tidycensus}</code>: una herramienta para <span class="hl-yellow"><strong>facilitar el proceso de descarga de datos censales</strong></span> de Estados Unidos desde <code>R</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1073"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1073-1"><a href="#cb1073-1"></a><span class="fu">library</span>(tidycensus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><code>get_decennial()</code>: para acceder a los <span class="hl-yellow"><strong>datos de censos (US Decennial Census)</strong></span>, se hacen cada 10 a√±os (a√±os 2000, 2010 y 2020).</p></li>
<li><p><code>get_acs()</code>: para acceder a los <span class="hl-yellow"><strong>datos anuales y quinquenales (5 a√±os) de la ACS (American Community Survey)</strong></span> (censo != encuesta)</p></li>
<li><p><code>get_estimates()</code>: para acceder a las <span class="hl-yellow"><strong>estimaciones anuales de poblaci√≥n, natalidad y mortalidad</strong></span></p></li>
<li><p><code>get_pums()</code>: para acceder a los <span class="hl-yellow"><strong>microdatos (datos sin agregar) de la ACS (anonimizados a nivel individual)</strong></span></p></li>
<li><p><code>get_flows()</code>: para acceder a los datos de <span class="hl-yellow"><strong>flujo de migraciones</strong></span></p></li>
</ul>
</section>
<section id="importar-desde-api-us-census-1" class="slide level2">
<h2>Importar desde API (US census)</h2>
<p>Por ejemplo vamos a descargarnos los <strong>datos censales</strong> (<code>get_decennial()</code>) a nivel estado (<code>geography = "state"</code>) de la poblaci√≥n (variable <code>variables = "P001001"</code>) para el a√±o 2010 (ver variables en <code>tidycensus::load_variables()</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1074"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1074-1"><a href="#cb1074-1"></a>total_population_10 <span class="ot">&lt;-</span></span>
<span id="cb1074-2"><a href="#cb1074-2"></a>  <span class="fu">get_decennial</span>(<span class="at">geography =</span> <span class="st">"state"</span>, </span>
<span id="cb1074-3"><a href="#cb1074-3"></a>  <span class="at">variables =</span> <span class="st">"P001001"</span>,</span>
<span id="cb1074-4"><a href="#cb1074-4"></a>  <span class="at">year =</span> <span class="dv">2010</span>)</span>
<span id="cb1074-5"><a href="#cb1074-5"></a>total_population_10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 52 √ó 4
   GEOID NAME        variable    value
   &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;
 1 01    Alabama     P001001   4779736
 2 02    Alaska      P001001    710231
 3 04    Arizona     P001001   6392017
 4 05    Arkansas    P001001   2915918
 5 06    California  P001001  37253956
 6 22    Louisiana   P001001   4533372
 7 21    Kentucky    P001001   4339367
 8 08    Colorado    P001001   5029196
 9 09    Connecticut P001001   3574097
10 10    Delaware    P001001    897934
# ‚Ñπ 42 more rows</code></pre>
</div>
</div>
</section>
<section id="importar-desde-api" class="slide level2">
<h2>Importar desde API</h2>
<p>Otras opciones</p>
<ul>
<li><p><code>{chessR}</code>: datos de partidas de ajedrez de las plataformas chess.com y lychess. Ver m√°s en <a href="https://github.com/JaseZiv/chessR" class="uri">https://github.com/JaseZiv/chessR</a></p></li>
<li><p><code>{spotifyr}</code>: datos de canciones de Spotify. Ver m√°s en <a href="https://www.rcharlie.com/spotifyr/" class="uri">https://www.rcharlie.com/spotifyr/</a></p></li>
<li><p><code>{gtrendsR}</code>: datos de Google Trends. Ver m√°s en <a href="https://github.com/PMassicotte/gtrendsR" class="uri">https://github.com/PMassicotte/gtrendsR</a></p></li>
<li><p><code>{scholar}</code>: datos de Google Scholar. Ver m√°s en <a href="https://github.com/jkeirstead/scholar" class="uri">https://github.com/jkeirstead/scholar</a></p></li>
</ul>
</section>
<section id="tu-turno-13-2" class="slide level2">
<h2>üíª Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-19" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-19-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-19-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-19-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-19-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-19-1">
<p>üìù El conjunto de datos <code>who2</code> del paquete <code>{tidyr}</code> que hemos utilizado en ejercicios anteriores, exp√≥rtalo a un formato nativo <code>R</code> en la carpeta <code>datos</code> de tu proyecto de RStudio</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1076"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1076-1"><a href="#cb1076-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1076-2"><a href="#cb1076-2"></a><span class="fu">save</span>(who2, <span class="at">file =</span> <span class="st">"./datos/who2.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-19-2">
<p>üìù Carga el conjunto de datos <code>who2</code> pero desde la carpeta data (importa el fichero creado en el ejercicio anterior)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1077"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1077-1"><a href="#cb1077-1"></a><span class="fu">load</span>(<span class="st">"./datos/who2.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-19-3">
<p>üìù Repite lo mismo (exportar e importar) en 4 formatos: <code>.csv</code>, <code>.xlsx</code>, <code>.sav</code> (spss) y <code>.dta</code> (stata)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1078"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1078-1"><a href="#cb1078-1"></a><span class="co"># csv</span></span>
<span id="cb1078-2"><a href="#cb1078-2"></a><span class="fu">library</span>(readr)</span>
<span id="cb1078-3"><a href="#cb1078-3"></a><span class="fu">write_csv</span>(who2, <span class="at">file =</span> <span class="st">"./datos/who2.csv"</span>)</span>
<span id="cb1078-4"><a href="#cb1078-4"></a>who2_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/who2.csv"</span>)</span>
<span id="cb1078-5"><a href="#cb1078-5"></a></span>
<span id="cb1078-6"><a href="#cb1078-6"></a><span class="co"># excel</span></span>
<span id="cb1078-7"><a href="#cb1078-7"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb1078-8"><a href="#cb1078-8"></a><span class="fu">write.xlsx</span>(who2, <span class="at">file =</span> <span class="st">"./datos/who2.xlsx"</span>)</span>
<span id="cb1078-9"><a href="#cb1078-9"></a>who2_data <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"./datos/who2.xlsx"</span>)</span>
<span id="cb1078-10"><a href="#cb1078-10"></a></span>
<span id="cb1078-11"><a href="#cb1078-11"></a><span class="co"># sas y stata</span></span>
<span id="cb1078-12"><a href="#cb1078-12"></a><span class="fu">library</span>(haven)</span>
<span id="cb1078-13"><a href="#cb1078-13"></a><span class="fu">write_sav</span>(who2, <span class="at">path =</span> <span class="st">"./datos/who2.sav"</span>)</span>
<span id="cb1078-14"><a href="#cb1078-14"></a>who2_data <span class="ot">&lt;-</span> <span class="fu">read_spss</span>(<span class="at">path =</span> <span class="st">"./datos/who2.sav"</span>)</span>
<span id="cb1078-15"><a href="#cb1078-15"></a></span>
<span id="cb1078-16"><a href="#cb1078-16"></a><span class="fu">write_dta</span>(who2, <span class="at">path =</span> <span class="st">"./datos/who2.dta"</span>)</span>
<span id="cb1078-17"><a href="#cb1078-17"></a>who2_data <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="at">path =</span> <span class="st">"./datos/who2.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-19-4">
<p>üìù Repita la carga de <code>who2.csv</code> pero seleccione s√≥lo las 4 primeras columnas ya cargadas.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1079"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1079-1"><a href="#cb1079-1"></a>who_select <span class="ot">&lt;-</span></span>
<span id="cb1079-2"><a href="#cb1079-2"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/who2.csv"</span>,</span>
<span id="cb1079-3"><a href="#cb1079-3"></a>           <span class="at">col_select =</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"iso2"</span>, <span class="st">"iso3"</span>, <span class="st">"year"</span>))</span>
<span id="cb1079-4"><a href="#cb1079-4"></a>who_select</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-13-2" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta CIS</h2>
<p><a href="https://drive.google.com/drive/folders/1HV3kAAHr4iWKvH5spsKWUwAdzWSBS8pw?usp=sharing">üìä Datos</a></p>
<p>Vamos a poner en pr√°ctica la carga y preprocesado de un fichero generado por uno de los programas inform√°ticos m√°s utilizados (SPSS). El fichero contiene <span class="hl-yellow"><strong>datos del bar√≥metro del CIS (Centro de Investigaciones Sociol√≥gicas) ¬´Percepciones sobre igualdad entre hombres y mujeres y estereotipos de g√©nero¬ª</strong></span> cuyo trabajo muestral se realiz√≥ del 6 al 14 de noviembre (4000 entrevistas a mayores de 16 a√±os de ambos sexos en 1174 municipios y 50 provincias).</p>
<p>&nbsp;</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/joins-import-export/#caso-pr%C3%A1ctico-iii-encuesta-cis"><strong>workbook</strong></a></p>
</section></section>
<section>
<section id="clase-14" class="title-slide slide level1 center">
<h1>Clase 14-15-16: <span class="flow">concurso</span></h1>
<p><span style="color:#444442;"><strong>Concurso: R base vs tidyverse</strong></span></p>
</section>
<section id="pregunta-1" class="slide level2">
<h2>Pregunta 1</h2>
<p>Deb√©is crear <strong>TODOS los miembros del equipo</strong> un proyecto de R Studio que contenga al menos:</p>
<ul>
<li><p>un archivo .Rproj</p></li>
<li><p>un fichero <code>.qmd</code> creado donde vamos a realizar cada ejercicio.</p></li>
<li><p>una carpeta de datos que tenga dentro los 3 siguientes datasets: <a href="https://drive.google.com/drive/folders/1ZBJhbipBnzBwFqPThVsLIDG5b5T4knYk?usp=sharing" class="uri">https://drive.google.com/drive/folders/1ZBJhbipBnzBwFqPThVsLIDG5b5T4knYk?usp=sharing</a></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1080"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1080-1"><a href="#cb1080-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1080-2"><a href="#cb1080-2"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"datos/datos_elecciones_brutos.csv"</span>)</span>
<span id="cb1080-3"><a href="#cb1080-3"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48,737 √ó 137
   tipo_eleccion  anno mes   vuelta codigo_ccaa codigo_provincia
   &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           
 1 02             2008 03         1 14          01              
 2 02             2008 03         1 14          01              
 3 02             2008 03         1 14          01              
 4 02             2008 03         1 14          01              
 5 02             2008 03         1 14          01              
 6 02             2008 03         1 14          01              
 7 02             2008 03         1 14          01              
 8 02             2008 03         1 14          01              
 9 02             2008 03         1 14          01              
10 02             2008 03         1 14          01              
# ‚Ñπ 48,727 more rows
# ‚Ñπ 131 more variables: codigo_municipio &lt;chr&gt;,
#   codigo_distrito_electoral &lt;dbl&gt;, numero_mesas &lt;dbl&gt;, censo &lt;dbl&gt;,
#   participacion_1 &lt;dbl&gt;, participacion_2 &lt;dbl&gt;, votos_blancos &lt;dbl&gt;,
#   votos_nulos &lt;dbl&gt;, `PARTIDO POPULAR` &lt;dbl&gt;,
#   `PARTIT POPULAR/PARTIDO POPULAR` &lt;dbl&gt;,
#   `UNION DEL PUEBLO NAVARRO EN COALICION CON EL PARTIDO POPULAR` &lt;dbl&gt;, ‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="datos" class="slide level2">
<h2>Datos</h2>
<p>Las variables son las siguientes:</p>
<ul>
<li><code>tipo_eleccion</code>: tipo de elecci√≥n (02 si es elecci√≥n al congreso)</li>
<li><code>anno</code>, <code>mes</code>: a√±o y mes de las elecciones</li>
<li><code>vuelta</code>: vuelta electoral (1 si es primera vuelta)</li>
<li><code>codigo_ccaa, codigo_provincia, codigo_municipio, codigo_distrito_electoral</code>: c√≥digo de la ccaa, provincia, municipio y distrito electoral.</li>
<li><code>numero_mesas</code>: n√∫mero de mesas electorales</li>
</ul>
</section>
<section id="datos-1" class="slide level2">
<h2>Datos</h2>
<p>Las variables son las siguientes:</p>
<ul>
<li><p><code>censo</code>: censo electoral</p></li>
<li><p><code>participacion_1, participacion_2</code>: participaci√≥n en el primer avance (14:00) y segundo avance (18:00) antes del cierre de urnas (20:00)</p></li>
<li><p><code>votos_blancos</code>: votos en blanco</p></li>
<li><p><code>votos_candidaturas</code>: votos a papeletas de partidos</p></li>
<li><p><code>votos_nulos</code>: votos nulos</p></li>
<li><p>variables de voto de cada partido (se ha adaptado el archivo depur√°ndolo un poco)</p></li>
</ul>
</section>
<section id="pregunta-2" class="slide level2">
<h2>Pregunta 2</h2>
<blockquote>
<p>Convierte a tidy data de la manera m√°s apropiada y completa posible (organizaci√≥n, tipo de dato de cada variable debe ser el adecuado‚Ä¶ ausentes, etc).</p>
</blockquote>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1082"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1082-1"><a href="#cb1082-1"></a>datos_tidy <span class="ot">&lt;-</span></span>
<span id="cb1082-2"><a href="#cb1082-2"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1082-3"><a href="#cb1082-3"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(tipo_eleccion<span class="sc">:</span>votos_nulos),</span>
<span id="cb1082-4"><a href="#cb1082-4"></a>               <span class="at">names_to =</span> <span class="st">"partidos"</span>, <span class="at">values_to =</span> <span class="st">"votos"</span>,</span>
<span id="cb1082-5"><a href="#cb1082-5"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1082-6"><a href="#cb1082-6"></a>  <span class="co"># tenemos algunas l√≥gicas que deber√≠an ser n√∫meros</span></span>
<span id="cb1082-7"><a href="#cb1082-7"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.logical), as.numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="pregunta-3" class="slide level2">
<h2>Pregunta 3</h2>
<blockquote>
<p>En estad√≠stica informaci√≥n = varianza: si no hay de lo segundo no hay de lo primero. ¬øQu√© variables deber√≠amos eliminar y por qu√©? Hazlo de la manera m√°s eficiente posible.</p>
</blockquote>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1083"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1083-1"><a href="#cb1083-1"></a><span class="co"># vemos primero cantidad de valores √∫nicos en cada una</span></span>
<span id="cb1083-2"><a href="#cb1083-2"></a>n_dist <span class="ot">&lt;-</span></span>
<span id="cb1083-3"><a href="#cb1083-3"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1083-4"><a href="#cb1083-4"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), n_distinct))</span>
<span id="cb1083-5"><a href="#cb1083-5"></a></span>
<span id="cb1083-6"><a href="#cb1083-6"></a><span class="co"># en tres (tipo_eleccion, vuelta, codigo_distrito_electoral) tenemos </span></span>
<span id="cb1083-7"><a href="#cb1083-7"></a><span class="co"># un solo valor cte --&gt; no nos aporta nada</span></span>
<span id="cb1083-8"><a href="#cb1083-8"></a></span>
<span id="cb1083-9"><a href="#cb1083-9"></a>datos_tidy <span class="ot">&lt;-</span></span>
<span id="cb1083-10"><a href="#cb1083-10"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1083-11"><a href="#cb1083-11"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(tipo_eleccion, vuelta, codigo_distrito_electoral))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="pregunta-4" class="slide level2">
<h2>Pregunta 4</h2>
<blockquote>
<p>La variable fecha deber√≠a existir y no existe: solo tenemos a√±o y mes de las elecciones (que en realidad no nos aportan una vez tuvi√©semos la fecha de las elecciones). Considera que todas las elecciones fueron el 1 de cada mes y crea dicha variable de manera adecuada</p>
</blockquote>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1084"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1084-1"><a href="#cb1084-1"></a><span class="co"># en tres (tipo_eleccion, vuelta, codigo_distrito_electoral) tenemos </span></span>
<span id="cb1084-2"><a href="#cb1084-2"></a><span class="co"># un solo valor cte --&gt; no nos aporta nada</span></span>
<span id="cb1084-3"><a href="#cb1084-3"></a></span>
<span id="cb1084-4"><a href="#cb1084-4"></a>datos_tidy <span class="ot">&lt;-</span></span>
<span id="cb1084-5"><a href="#cb1084-5"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1084-6"><a href="#cb1084-6"></a>  <span class="fu">mutate</span>(<span class="st">"fecha"</span> <span class="ot">=</span> <span class="fu">as_date</span>(<span class="fu">glue</span>(<span class="st">"{anno}-{mes}-01"</span>)), <span class="at">.before =</span> <span class="fu">everything</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb1084-7"><a href="#cb1084-7"></a>  <span class="fu">select</span>(<span class="sc">-</span>anno, <span class="sc">-</span>mes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="pregunta-5" class="slide level2">
<h2>Pregunta 5</h2>
<blockquote>
<p>Crea los id que consideres para poder eliminar duplicados por municipio, fecha electoral y partido (un registro ser√° considerado igual si es coinciden ambos campos). Deber√°s crear obligatoriamente al menos una variable nueva. Tras ello elimina esos duplicados.</p>
</blockquote>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1085"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1085-1"><a href="#cb1085-1"></a>datos_tidy <span class="ot">&lt;-</span></span>
<span id="cb1085-2"><a href="#cb1085-2"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1085-3"><a href="#cb1085-3"></a>  <span class="fu">mutate</span>(<span class="st">"id_mun"</span> <span class="ot">=</span> <span class="fu">glue</span>(<span class="st">"{codigo_ccaa}-{codigo_provincia}-{codigo_municipio}"</span>),</span>
<span id="cb1085-4"><a href="#cb1085-4"></a>         <span class="st">"id_elec"</span> <span class="ot">=</span> <span class="fu">glue</span>(<span class="st">"{fecha}-{id_mun}"</span>), <span class="at">.after =</span> fecha) <span class="sc">|&gt;</span> </span>
<span id="cb1085-5"><a href="#cb1085-5"></a>  <span class="fu">mutate</span>(<span class="st">"id_result"</span> <span class="ot">=</span> <span class="fu">glue</span>(<span class="st">"{id_elec}-{partidos}"</span>), <span class="at">.before =</span> <span class="fu">everything</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb1085-6"><a href="#cb1085-6"></a>  <span class="fu">distinct</span>(id_result, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="pregunta-6" class="slide level2">
<h2>Pregunta 6</h2>
<blockquote>
<p>Tenemos much√≠simos partidos que se presentan a las elecciones. Solo nos intereser√°n los partidos agrupados como (cuidado: tienen/tuvieron federaciones - sucursales - con alg√∫n otro nombre):</p>
</blockquote>
<pre><code>-   PSOE 
-   PARTIDO POPULAR
-   CIUDADANOS
-   PARTIDO NACIONALISTA VASCO
-   BLOQUE NACIONALISTA GALEGO
-   PODEMOS/UNIDAS PODEMOS/IU (no siempre han ido juntos, pero aqu√≠ los analizaremos juntos)
-   ESQUERRA REPUBLICANA DE CATALUNYA
-   BILDU
-   M√ÅS PA√çS
-   VOX</code></pre>
<blockquote>
<p>Recodifica de manera adecuada creando siglas. Todo lo que no sea alguno de los anteriores partidos deber√° ser codificado como ‚ÄúOTROS‚Äù. Cuidado: si UNIDAS PODEMOS y PODEMOS son lo mismo, los votos de cada uno deber√≠an estar sumados juntos bajo las siglas de UP (por ejemplo).</p>
</blockquote>
</section>
<section id="pregunta-6-1" class="slide level2">
<h2>Pregunta 6</h2>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1087"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1087-1"><a href="#cb1087-1"></a>datos_tidy <span class="ot">&lt;-</span></span>
<span id="cb1087-2"><a href="#cb1087-2"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1087-3"><a href="#cb1087-3"></a>  <span class="fu">mutate</span>(<span class="st">"siglas"</span> <span class="ot">=</span> </span>
<span id="cb1087-4"><a href="#cb1087-4"></a>           <span class="fu">case_when</span>(<span class="fu">str_detect</span>(partidos, <span class="st">"SOCIALISTA|SOCIALISTES"</span>) <span class="sc">~</span> <span class="st">"PSOE"</span>,</span>
<span id="cb1087-5"><a href="#cb1087-5"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"PARTIDO POPULAR"</span>) <span class="sc">~</span> <span class="st">"PP"</span>,</span>
<span id="cb1087-6"><a href="#cb1087-6"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"CIUDADANOS|CIUDADAN√çA|CIUDADANIA|CIUTADANS"</span>) <span class="sc">~</span> <span class="st">"CS"</span>,</span>
<span id="cb1087-7"><a href="#cb1087-7"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"PARTIDO NACIONALISTA VASCO"</span>) <span class="sc">~</span> <span class="st">"PNV"</span>,</span>
<span id="cb1087-8"><a href="#cb1087-8"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"BLOQUE NACIONALISTA GALEGO"</span>) <span class="sc">~</span> <span class="st">"BNG"</span>,</span>
<span id="cb1087-9"><a href="#cb1087-9"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"PODEMOS|IZQUIERDA UNIDA"</span>) <span class="sc">~</span> <span class="st">"UP"</span>,</span>
<span id="cb1087-10"><a href="#cb1087-10"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"ESQUERRA REPUBLICANA DE CAT"</span>) <span class="sc">~</span> <span class="st">"ERC"</span>,</span>
<span id="cb1087-11"><a href="#cb1087-11"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"BILDU"</span>) <span class="sc">~</span> <span class="st">"BILDU"</span>,</span>
<span id="cb1087-12"><a href="#cb1087-12"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"M√ÅS PA√çS|MAS PAIS|M√ÅS PAIS|MAS PA√çS"</span>) <span class="sc">~</span> <span class="st">"MP"</span>,</span>
<span id="cb1087-13"><a href="#cb1087-13"></a>                     <span class="fu">str_detect</span>(partidos, <span class="st">"VOX"</span>) <span class="sc">~</span> <span class="st">"VOX"</span>,</span>
<span id="cb1087-14"><a href="#cb1087-14"></a>                     <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"OTROS"</span>))</span>
<span id="cb1087-15"><a href="#cb1087-15"></a></span>
<span id="cb1087-16"><a href="#cb1087-16"></a>datos_tidy <span class="ot">&lt;-</span></span>
<span id="cb1087-17"><a href="#cb1087-17"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1087-18"><a href="#cb1087-18"></a>  <span class="co"># hago mutate porqueno quiero perder el resto de info</span></span>
<span id="cb1087-19"><a href="#cb1087-19"></a>  <span class="fu">mutate</span>(<span class="st">"votos"</span> <span class="ot">=</span> <span class="fu">sum</span>(votos, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> <span class="fu">c</span>(id_elec, siglas)) <span class="sc">|&gt;</span> </span>
<span id="cb1087-20"><a href="#cb1087-20"></a>  <span class="co"># pero entonces ahora si PACMA + PCE suman 200 votos, tendr√©</span></span>
<span id="cb1087-21"><a href="#cb1087-21"></a>  <span class="co"># en ese municpio y fecha (id_elec) dos filas para OTROS con el mismo valor (200)</span></span>
<span id="cb1087-22"><a href="#cb1087-22"></a>  <span class="fu">distinct</span>(id_elec, siglas, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="pregunta-7" class="slide level2">
<h2>Pregunta 7</h2>
<blockquote>
<p>Incorpora como variable nueva el porcentaje de votos de cada partido (en cada cita electoral - fecha - y en cada municipio). El porcentaje se calcula como votos del partido entre votos v√°lidos (y votos v√°lidos = votos a partidos + blancos)</p>
</blockquote>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1088"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1088-1"><a href="#cb1088-1"></a>votos_partidos <span class="ot">&lt;-</span></span>
<span id="cb1088-2"><a href="#cb1088-2"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1088-3"><a href="#cb1088-3"></a>  <span class="fu">summarise</span>(<span class="st">"votos_partidos"</span> <span class="ot">=</span> <span class="fu">sum</span>(votos, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> id_elec)</span>
<span id="cb1088-4"><a href="#cb1088-4"></a></span>
<span id="cb1088-5"><a href="#cb1088-5"></a><span class="co"># juntamos esa info a la tabla grande</span></span>
<span id="cb1088-6"><a href="#cb1088-6"></a>datos_tidy <span class="ot">&lt;-</span></span>
<span id="cb1088-7"><a href="#cb1088-7"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1088-8"><a href="#cb1088-8"></a>  <span class="fu">left_join</span>(votos_partidos, <span class="at">by =</span> <span class="st">"id_elec"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1088-9"><a href="#cb1088-9"></a>  <span class="fu">mutate</span>(<span class="st">"porc_voto"</span> <span class="ot">=</span> <span class="dv">100</span><span class="sc">*</span>votos <span class="sc">/</span> (votos_partidos <span class="sc">+</span> votos_blancos))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="pregunta-8" class="slide level2">
<h2>Pregunta 8</h2>
<blockquote>
<p>Incorpora como variable el porcentaje de participaci√≥n (en cada cita electoral y en cada municipio), calculado como votos emitidos (votos a partidos + blancos + nulos) entre censo.</p>
</blockquote>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1089"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1089-1"><a href="#cb1089-1"></a>datos_tidy <span class="ot">&lt;-</span></span>
<span id="cb1089-2"><a href="#cb1089-2"></a>  datos_tidy <span class="sc">|&gt;</span> </span>
<span id="cb1089-3"><a href="#cb1089-3"></a>  <span class="fu">mutate</span>(<span class="st">"participacion"</span> <span class="ot">=</span> <span class="dv">100</span><span class="sc">*</span>(votos_partidos <span class="sc">+</span> votos_blancos <span class="sc">+</span> votos_nulos) <span class="sc">/</span> censo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section>
<section>
<section id="clase-17" class="title-slide slide level1 center">
<h1>Clase 17: <span class="flow">listas</span></h1>
<p><span style="color:#444442;"><strong>Manejo de listas con paquete purrr. Ejemplos casos rales</strong></span></p>
<ul>
<li><p><a href="#/tu-turno-17-1">üíª Ejercicios resueltos: listas</a></p></li>
<li><p><a href="#/caso-practico-17-1">üê£ Workbook/caso pr√°ctico I: renta municipios</a></p></li>
<li><p><a href="#/caso-practico-17-2">üê£ Workbook/caso pr√°ctico II: estad√≠stica descriptiva</a></p></li>
<li><p><a href="#/planificacion">üìÜ Planificaci√≥n</a></p></li>
</ul>
</section>
<section id="listas" class="slide level2">
<h2>Listas</h2>
<p>Ya hemos visto que las listas son un objeto en R que nos permite almacenar <span class="hl-yellow"><strong>colecciones de variables de distinto tipo</strong></span> (como con <code>data.frame</code> y <code>tibble</code>) pero tambi√©n <span class="hl-purple"><strong>diferentes longitudes</strong></span>, con estructuras totalmente heterog√©neas (incluso una lista puede tener dentro otra lista).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1090"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1090-1"><a href="#cb1090-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span>
<span id="cb1090-2"><a href="#cb1090-2"></a>edad <span class="ot">&lt;-</span> <span class="dv">34</span></span>
<span id="cb1090-3"><a href="#cb1090-3"></a>notas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">9</span>)</span>
<span id="cb1090-4"><a href="#cb1090-4"></a>progenitores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Paloma"</span>, <span class="st">"Goyo"</span>)</span>
<span id="cb1090-5"><a href="#cb1090-5"></a></span>
<span id="cb1090-6"><a href="#cb1090-6"></a><span class="co"># Podemos no ponerle nombre pero solo podremos acceder por √≠ndice</span></span>
<span id="cb1090-7"><a href="#cb1090-7"></a>list_var <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"nombre"</span> <span class="ot">=</span> nombre, <span class="st">"edad"</span> <span class="ot">=</span> edad,</span>
<span id="cb1090-8"><a href="#cb1090-8"></a>                 <span class="st">"notas"</span> <span class="ot">=</span> notas, <span class="st">"parents"</span> <span class="ot">=</span> progenitores)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1091"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1091-1"><a href="#cb1091-1"></a>list_var<span class="sc">$</span>nombre</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb1093"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1093-1"><a href="#cb1093-1"></a>list_var<span class="sc">$</span>progenitores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
</section>
<section id="listas-1" class="slide level2">
<h2>Listas</h2>
<p>Tambi√©n podemos hacer <span class="hl-yellow"><strong>listas con otras listas dentro</strong></span>, de forma que para acceder a cada nivel debamos utilizar el operador <code>[[]]</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1095"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1095-1"><a href="#cb1095-1"></a>list_of_lists <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"list_1"</span> <span class="ot">=</span> list_var[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], <span class="st">"list_2"</span> <span class="ot">=</span> list_var[<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb1095-2"><a href="#cb1095-2"></a><span class="fu">names</span>(list_of_lists)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list_1" "list_2"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1097"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1097-1"><a href="#cb1097-1"></a><span class="fu">names</span>(list_of_lists[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "nombre" "edad"  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1099"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1099-1"><a href="#cb1099-1"></a>list_of_lists[[<span class="dv">1</span>]][[<span class="dv">1</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javi"</code></pre>
</div>
</div>
<div class="fragment">
<p>¬°Se nos permite almacenar <span class="hl-yellow"><strong>datos n-dimensionales</strong></span>!</p>
</div>
</section>
<section id="listas-2" class="slide level2">
<h2>Listas</h2>
<p>Sin embargo una de las desventajas es <span class="hl-yellow"><strong>no puede ser vectorizada</strong></span> inmediatamente, por lo que cualquier operaci√≥n aritm√©tica aplicada a una lista dar√° <span class="hl-red"><strong>error</strong></span>. Por ejemplo, en el c√≥digo anterior, uno esperar√≠a que hiciese la operaci√≥n en cada elemento de la lista (en <code>a</code> y en <code>b</code>) pero no funciona.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1101-1"><a href="#cb1101-1"></a>data <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb1101-2"><a href="#cb1101-2"></a>data <span class="sc">/</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in data/2: non-numeric argument to binary operator</code></pre>
</div>
</div>
<div class="fragment">
<p>Para ello una de las opciones habituales (de <code>R</code> base) era hacer uso de la familia <code>lapply(lista, FUN = ...)</code>: aplica una funci√≥n <code>FUN = ...</code> a cada elemento de la lista</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1103-1"><a href="#cb1103-1"></a><span class="fu">lapply</span>(data, <span class="at">FUN =</span> <span class="cf">function</span>(x) { x <span class="sc">/</span> <span class="dv">2</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 0.5 1.0 1.5 2.0 2.5

$b
 [1]  5.0  5.5  6.0  6.5  7.0  7.5  8.0  8.5  9.0  9.5 10.0</code></pre>
</div>
</div>
<p>Pero por defecto la salida de <code>lapply()</code> es siempre una <span class="hl-yellow"><strong>lista de igual longitud</strong></span>.</p>
</div>
</section>
<section id="paquete-purrr" class="slide level2">
<h2>Paquete purrr</h2>
<p>Una opci√≥n m√°s flexible y vers√°til es hacer uso del paquete <code>{purrr}</code> del entorno <code>{tidyverse}</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1105-1"><a href="#cb1105-1"></a><span class="fu">library</span>(purrr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este paquete pretende imitar la <span class="hl-yellow"><strong>programaci√≥n funcional</strong></span> de otros lenguajes como Scala o la <span class="hl-yellow"><strong>estrategia map-reduce</strong></span> de Hadoop (de Google).</p>

<img data-src="img/purrr.png" class="r-stretch"></section>
<section id="paquete-purrr-1" class="slide level2">
<h2>Paquete purrr</h2>
<p>La funci√≥n m√°s sencilla del paquete <code>{purrr}</code> es la funci√≥n <code>map()</code>, que <span class="hl-yellow"><strong>aplica una funci√≥n vectorizada</strong></span> a cada uno de los elementos de una lista. Veamos un primer ejemplo aplicado a vectores: imagina que tenemos la siguiente lista y queremos aplicar, a cada uno de sus elementos, la suma.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1106-1"><a href="#cb1106-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"x1"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"x2"</span> <span class="ot">=</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><code>map(lista, funci√≥n)</code> nos permite <span class="hl-yellow"><strong>mapear la lista</strong></span> y aplicar la funci√≥n que queramos elemento a elemento</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb1107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1107-1"><a href="#cb1107-1"></a><span class="fu">map</span>(x, sum) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$x1
[1] 10

$x2
[1] 155</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/map_purrr.png"></p>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Ten cuidado‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>La <span class="hl-yellow"><strong>salida por defecto de <code>map</code> es a su vez otra lista</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="paquete-purrr-2" class="slide level2">
<h2>Paquete purrr</h2>
<p>Veamos otro ejemplo que puedes sernos √∫til: imagina que tenemos <span class="hl-yellow"><strong>dos muestras aleatorias de distinto tama√±o</strong></span>. La √∫nica forma en la que podemos almacenarlas juntas es con una lista pero‚Ä¶¬øc√≥mo hacer la media a ambas distribuciones sino podemos vectorizarlas?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1109-1"><a href="#cb1109-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">1500</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="fl">0.7</span>),</span>
<span id="cb1109-2"><a href="#cb1109-2"></a>          <span class="fu">rnorm</span>(<span class="at">n =</span> <span class="dv">2800</span>, <span class="at">mean =</span> <span class="dv">2</span>, <span class="at">sd =</span> <span class="fl">1.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con <code>map()</code> y la funci√≥n <code>mean()</code> dentro</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1110-1"><a href="#cb1110-1"></a><span class="fu">map</span>(x, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] -0.00655501

[[2]]
[1] 2.012387</code></pre>
</div>
</div>
</div>
</section>
<section id="paquete-purrr-3" class="slide level2">
<h2>Paquete purrr</h2>
<p>¬øY si quisi√©ramos calcular la media de sus valores al cuadrado? En este caso <span class="hl-red"><strong>no disponemos de una funci√≥n ya definida</strong></span> as√≠ que tenemos dos opciones: definirla antes (con un nombre) o bien <span class="hl-yellow"><strong>definir la funci√≥n dentro del propio map</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1112-1"><a href="#cb1112-1"></a><span class="fu">map</span>(x, <span class="cf">function</span>(x) { <span class="fu">mean</span>(x<span class="sc">^</span><span class="dv">2</span>) })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 0.5044908

[[2]]
[1] 6.278009</code></pre>
</div>
</div>
<div class="fragment">
<p>Una forma de <span class="hl-yellow"><strong>definir la funci√≥n m√°s r√°pido</strong></span> es as√≠:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1114-1"><a href="#cb1114-1"></a><span class="fu">map</span>(x, \(x) <span class="fu">mean</span>(x<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 0.5044908

[[2]]
[1] 6.278009</code></pre>
</div>
</div>
</div>
</section>
<section id="paquete-purrr-4" class="slide level2">
<h2>Paquete purrr</h2>
<p>Adem√°s de ser <span class="hl-yellow"><strong>m√°s legible y eficiente</strong></span>, con <code>{purrr}</code> podemos <span class="hl-yellow"><strong>decidir el formato de salida</strong></span> tras la operaci√≥n</p>
<ul>
<li>salida como un <span class="hl-purple"><strong>vector num√©rico (decimales)</strong></span> con <code>map_dbl()</code></li>
<li>salida como un <span class="hl-purple"><strong>vector num√©rico (enteros)</strong></span> con <code>map_int()</code></li>
<li>salida como un <span class="hl-purple"><strong>vector de caracteres</strong></span> con <code>map_chr()</code></li>
<li>salida como un <span class="hl-purple"><strong>vector num√©rico l√≥gico</strong></span> con <code>map_lgl()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1116-1"><a href="#cb1116-1"></a><span class="fu">map_dbl</span>(x, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.00655501  2.01238677</code></pre>
</div>
<div class="sourceCode cell-code" id="cb1118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1118-1"><a href="#cb1118-1"></a><span class="fu">map_chr</span>(x, <span class="cf">function</span>(x) { <span class="fu">glue</span>(<span class="st">"Mean is {round(mean(x), 3)}"</span>) })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean is -0.007" "Mean is 2.012" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb1120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1120-1"><a href="#cb1120-1"></a><span class="fu">map_lgl</span>(x, <span class="cf">function</span>(x) { <span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">3</span>)})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE</code></pre>
</div>
</div>
</section>
<section id="paquete-purrr-5" class="slide level2">
<h2>Paquete purrr</h2>
<p>Tambi√©n puede sernos √∫til para <span class="hl-yellow"><strong>acceder a un elemento de CADA lista</strong></span> si le pasas un <span class="hl-yellow"><strong>n√∫mero</strong></span> en lugar de una funci√≥n.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1122"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1122-1"><a href="#cb1122-1"></a><span class="fu">c</span>(x[[<span class="dv">1</span>]][<span class="dv">3</span>], x[[<span class="dv">2</span>]][<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.4263893  2.6493888</code></pre>
</div>
<div class="sourceCode cell-code" id="cb1124"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1124-1"><a href="#cb1124-1"></a><span class="fu">map_dbl</span>(x, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.4263893  2.6493888</code></pre>
</div>
</div>
</section>
<section id="paquete-purrr-6" class="slide level2">
<h2>Paquete purrr</h2>
<p>Tambi√©n podemos hacer uso de <code>pluck()</code> para <span class="hl-yellow"><strong>acceder al i-th objeto de la lista</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1126"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1126-1"><a href="#cb1126-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"a"</span> <span class="ot">=</span> starwars, <span class="st">"b"</span> <span class="ot">=</span> billboard)</span>
<span id="cb1126-2"><a href="#cb1126-2"></a>lista <span class="sc">|&gt;</span> <span class="fu">pluck</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu‚Ä¶
 3 R2-D2        96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
 5 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 6 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 7 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu‚Ä¶
 9 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
10 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
# ‚Ñπ 77 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="paquete-purrr-7" class="slide level2">
<h2>Paquete purrr</h2>
<p>Tambi√©n tenemos la opci√≥n de <strong>generalizarlo</strong> para poder utilizar funciones que <span class="hl-yellow"><strong>necesiten dos argumentos</strong></span> (operaciones binarias) con <code>map2()</code>. Por ejemplo, supongamos que tenemos las siguientes dos listas, y queremos que suma el vector del primer elemento de ambas entre s√≠, y lo mismo con el segundo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1128-1"><a href="#cb1128-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb1128-2"><a href="#cb1128-2"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">0</span>), <span class="st">"b"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb1128-3"><a href="#cb1128-3"></a>x<span class="sc">$</span>a <span class="sc">+</span> y<span class="sc">$</span>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 6 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb1130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1130-1"><a href="#cb1130-1"></a>x<span class="sc">$</span>b <span class="sc">+</span> x<span class="sc">$</span>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  8 10 12</code></pre>
</div>
</div>
<div class="fragment">
<p>En <code>map2()</code> introducimos las 2 listas y una <strong>funci√≥n con 2 argumentos</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1132-1"><a href="#cb1132-1"></a><span class="fu">map2</span>(x, y, <span class="cf">function</span>(x, y) { x <span class="sc">+</span> y})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$a
[1] 0 6 3

$b
[1] 9 1 5</code></pre>
</div>
</div>
</div>
</section>
<section id="paquete-purrr-8" class="slide level2">
<h2>Paquete purrr</h2>
<p>Podemos tambi√©n obtener la salida en forma de <code>data.frame</code> a√±adiendo <code>list_rbind()</code> o <code>list_cbind()</code>, que <span class="hl-yellow"><strong>convierte una lista en una tabla</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1134-1"><a href="#cb1134-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>)</span>
<span id="cb1134-2"><a href="#cb1134-2"></a>y <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb1134-3"><a href="#cb1134-3"></a><span class="fu">map2</span>(x, y, <span class="cf">function</span>(x, y) { <span class="fu">tibble</span>(x, y) })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 1 √ó 2
  x         y
  &lt;chr&gt; &lt;int&gt;
1 a         1

[[2]]
# A tibble: 1 √ó 2
  x         y
  &lt;chr&gt; &lt;int&gt;
1 b         2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb1136"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1136-1"><a href="#cb1136-1"></a><span class="fu">map2</span>(x, y, <span class="cf">function</span>(x, y) { <span class="fu">tibble</span>(x, y) }) <span class="sc">|&gt;</span> <span class="fu">list_rbind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  x         y
  &lt;chr&gt; &lt;int&gt;
1 a         1
2 b         2</code></pre>
</div>
</div>
</section>
<section id="paquete-purrr-9" class="slide level2">
<h2>Paquete purrr</h2>
<p>Podemos generalizarlo a√∫n m√°s con <code>pmap_xxx()</code> que nos permite utilizar <span class="hl-amarillo"><strong>m√∫ltiples argumentos (m√∫ltiples listas para funci√≥nes multivariantes)</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1138"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1138-1"><a href="#cb1138-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb1138-2"><a href="#cb1138-2"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb1138-3"><a href="#cb1138-3"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">300</span>)</span>
<span id="cb1138-4"><a href="#cb1138-4"></a><span class="fu">pmap_dbl</span>(<span class="fu">list</span>(x, y, z), sum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 111 221 331</code></pre>
</div>
</div>
</section>
<section id="paquete-purrr-10" class="slide level2">
<h2>Paquete purrr</h2>
<p>Tenemos otros tipos de iteradores que, aunque asumen entradas, no devuelven nada, como <code>walk()</code> (s√≥lo un argumento de entrada), <code>walk2()</code> (dos argumentos) y <code>pwalk()</code> (m√∫ltiples argumentos), todos <span class="hl-yellow"><strong>devuelven algo invisible</strong></span>, s√≥lo llaman a una funci√≥n por sus <span class="hl-yellow"><strong>efectos secundarios</strong></span> en lugar de por su valor de retorno.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1140-1"><a href="#cb1140-1"></a><span class="fu">list</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">|&gt;</span></span>
<span id="cb1140-2"><a href="#cb1140-2"></a>  <span class="fu">map2</span>(<span class="fu">list</span>(<span class="st">"a"</span> <span class="ot">=</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">13</span>, <span class="st">"b"</span> <span class="ot">=</span> <span class="dv">14</span><span class="sc">:</span><span class="dv">16</span>),</span>
<span id="cb1140-3"><a href="#cb1140-3"></a>       <span class="cf">function</span>(x, y) { x <span class="sc">+</span> y }) <span class="sc">|&gt;</span> </span>
<span id="cb1140-4"><a href="#cb1140-4"></a>  <span class="fu">walk</span>(print)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12 14 16
[1] 18 20 22</code></pre>
</div>
</div>
</section>
<section id="tu-turno-17-1" class="slide level2">
<h2>üíª Tu turno</h2>
<div class="panel-tabset">
<ul id="tabset-20" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-20-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-20-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-20-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-20-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-20-1">
<p>üìù Define una lista de 4 elementos de distintos tipos y accede al segundo de ellos (incluir√© uno que sea un tibble para que veas que en una lista cabe de todo).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1142-1"><a href="#cb1142-1"></a>list_example <span class="ot">&lt;-</span></span>
<span id="cb1142-2"><a href="#cb1142-2"></a>  <span class="fu">list</span>(<span class="st">"name"</span> <span class="ot">=</span> <span class="st">"Javier"</span>, <span class="st">"cp"</span> <span class="ot">=</span> <span class="dv">28019</span>,</span>
<span id="cb1142-3"><a href="#cb1142-3"></a>       <span class="st">"siblings"</span> <span class="ot">=</span> <span class="cn">TRUE</span>,</span>
<span id="cb1142-4"><a href="#cb1142-4"></a>       <span class="st">"marks"</span> <span class="ot">=</span> <span class="fu">tibble</span>(<span class="st">"maths"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">7.5</span>, <span class="dv">8</span>, <span class="dv">9</span>),</span>
<span id="cb1142-5"><a href="#cb1142-5"></a>                        <span class="st">"lang"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">6</span>)))</span>
<span id="cb1142-6"><a href="#cb1142-6"></a>list_example</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-20-2">
<p>üìù From the list above, access the elements that occupy places 1 and 4 of the list defined above.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1143-1"><a href="#cb1143-1"></a>list_example[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)]</span>
<span id="cb1143-2"><a href="#cb1143-2"></a></span>
<span id="cb1143-3"><a href="#cb1143-3"></a>list_example<span class="sc">$</span>name</span>
<span id="cb1143-4"><a href="#cb1143-4"></a>list_example<span class="sc">$</span>marks</span>
<span id="cb1143-5"><a href="#cb1143-5"></a></span>
<span id="cb1143-6"><a href="#cb1143-6"></a>list_example[<span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"marks"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-20-3">
<p>üìù Load the <code>starwars</code> dataset from the <code>{dplyr}</code> package and access the second movie that appears in <code>starwars$films</code> (for each character). Determine which ones do not appear in more than one movie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1144-1"><a href="#cb1144-1"></a>second_film <span class="ot">&lt;-</span> <span class="fu">map</span>(starwars<span class="sc">$</span>films, <span class="dv">2</span>)</span>
<span id="cb1144-2"><a href="#cb1144-2"></a><span class="fu">map_lgl</span>(second_film, is.null)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE
[13] FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE
[25]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE FALSE FALSE  TRUE
[37]  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
[49]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE
[61]  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
[73]  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE
[85]  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
</div>
<div id="tabset-20-4">
<p>üìù Convierte a tibble la base de datos <code>iris</code> incluida en <code>R base</code> (no necesitas ning√∫n paquete, ya la tienes). Vamos a agrupar por species para despu√©s usar <code>group_split()</code>: nos genera una lista tal que cada elemento es la tabla para cada uno de los grupos (como un filter de cada grupo pero en un mismo objeto).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1146-1"><a href="#cb1146-1"></a>iris_list <span class="ot">&lt;-</span></span>
<span id="cb1146-2"><a href="#cb1146-2"></a>  iris <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb1146-3"><a href="#cb1146-3"></a>  <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span> </span>
<span id="cb1146-4"><a href="#cb1146-4"></a>  <span class="fu">group_split</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Accede a cada variable <code>Sepal.Length</code> para cada una de las subtablas y haz la media (nos tendr√≠a que salir un vector de medias)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1147-1"><a href="#cb1147-1"></a>iris_list <span class="sc">|&gt;</span> </span>
<span id="cb1147-2"><a href="#cb1147-2"></a>  <span class="fu">map</span>(<span class="st">"Sepal.Length"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1147-3"><a href="#cb1147-3"></a>  <span class="fu">map_dbl</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-practico-17-1" class="slide level2">
<h2>üê£ Caso pr√°ctico I: renta municipios</h2>
<p>En el archivo <code>municipios.csv</code> tenemos guardada la informaci√≥n de los municipios de Espa√±a a fecha de 2019.</p>
<ul>
<li><p>La variable <code>LAU_code</code> representa el c√≥digo como unidad administrativa local seg√∫n la estandarizaci√≥n de la UE (<a href="https://ec.europa.eu/eurostat/web/nuts/local-administrative-units">ver m√°s</a>).</p></li>
<li><p>La variable <code>codigo_ine</code> est√° construida uniendo el c√≥digo de la provincia y el de la comunidad aut√≥noma.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1148-1"><a href="#cb1148-1"></a><span class="co"># datos 2019</span></span>
<span id="cb1148-2"><a href="#cb1148-2"></a>mun_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/municipios.csv"</span>)</span>
<span id="cb1148-3"><a href="#cb1148-3"></a>mun_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8,212 √ó 8
   codauto ine.ccaa.name cpro  ine.prov.name cmun  name      LAU_CODE codigo_ine
   &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     
 1 01      Andaluc√≠a     04    Almer√≠a       001   Abla      04001    04001     
 2 01      Andaluc√≠a     04    Almer√≠a       002   Abrucena  04002    04002     
 3 01      Andaluc√≠a     04    Almer√≠a       003   Adra      04003    04003     
 4 01      Andaluc√≠a     04    Almer√≠a       004   Albanchez 04004    04004     
 5 01      Andaluc√≠a     04    Almer√≠a       005   Alboloduy 04005    04005     
 6 01      Andaluc√≠a     04    Almer√≠a       006   Albox     04006    04006     
 7 01      Andaluc√≠a     04    Almer√≠a       007   Alcolea   04007    04007     
 8 01      Andaluc√≠a     04    Almer√≠a       008   Alc√≥ntar  04008    04008     
 9 01      Andaluc√≠a     04    Almer√≠a       009   Alcudia ‚Ä¶ 04009    04009     
10 01      Andaluc√≠a     04    Almer√≠a       010   Alhabia   04010    04010     
# ‚Ñπ 8,202 more rows</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-i-renta-municipios" class="slide level2">
<h2>üê£ Caso pr√°ctico I: renta municipios</h2>
<p>Por otro lado el archivo <code>renta_mun</code> contiene datos de la renta per capita edmai de cada unidad administrativa (municipios, distritos, provincias, comunidades auton√≥nomas, etc) para diferentes a√±os.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1150-1"><a href="#cb1150-1"></a>renta_mun <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/renta_mun.csv"</span>)</span>
<span id="cb1150-2"><a href="#cb1150-2"></a>renta_mun</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 55,273 √ó 7
   Unidad                          `2019` `2018` `2017` `2016` `2015` codigo_ine
   &lt;chr&gt;                            &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
 1 44001 Ababuj                        NA     NA     NA     NA     NA 44001     
 2 4400101 Ababuj distrito 01          NA     NA     NA     NA     NA 4400101   
 3 4400101001 Ababuj secci√≥n 01001     NA     NA     NA     NA     NA 4400101001
 4 40001 Abades                     11429  10731  10314   9816   9904 40001     
 5 4000101 Abades distrito 01       11429  10731  10314   9816   9904 4000101   
 6 4000101001 Abades secci√≥n 01001  11429  10731  10314   9816   9904 4000101001
 7 10001 Abad√≠a                      8954   8589   8207   7671   8416 10001     
 8 1000101 Abad√≠a distrito 01        8954   8589   8207   7671   8416 1000101   
 9 1000101001 Abad√≠a secci√≥n 01001   8954   8589   8207   7671   8416 1000101001
10 27001 Abad√≠n                     10791  10258   9762   9478   9116 27001     
# ‚Ñπ 55,263 more rows</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-i-renta-municipios-1" class="slide level2">
<h2>üê£ Caso pr√°ctico I: renta municipios</h2>
<p>Antes de empezar vamos a <span class="hl-yellow"><strong>normalizar nombres de variables</strong></span> haciendo uso de <code>clean_names()</code> del paquete <code>{janitor}</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1152-1"><a href="#cb1152-1"></a>mun_data <span class="ot">&lt;-</span></span>
<span id="cb1152-2"><a href="#cb1152-2"></a>  mun_data <span class="sc">|&gt;</span> </span>
<span id="cb1152-3"><a href="#cb1152-3"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb1152-4"><a href="#cb1152-4"></a>renta_mun <span class="ot">&lt;-</span></span>
<span id="cb1152-5"><a href="#cb1152-5"></a>  renta_mun <span class="sc">|&gt;</span> </span>
<span id="cb1152-6"><a href="#cb1152-6"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;</p>
<p>Intenta responder a las preguntas planteadas en el <a href="https://javieralvarezliebana.quarto.pub/joins-import-export/#caso-pr%C3%A1ctico-ii-renta-municipios"><strong>workbook</strong></a></p>
</section>
<section id="caso-practico-17-2" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>Para este ejercicio usaremos la tabla de datos de satisfacci√≥n de pacientes en un hospital guardada en el archivo <code>.csv</code> llamada <code>SatisfaccionPacientes.csv</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1153-1"><a href="#cb1153-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1153-2"><a href="#cb1153-2"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb1153-3"><a href="#cb1153-3"></a>  <span class="fu">read_csv</span>(<span class="st">"./datos/SatisfaccionPacientes.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1153-4"><a href="#cb1153-4"></a>  <span class="co"># normalizaci√≥n de nombres de variables</span></span>
<span id="cb1153-5"><a href="#cb1153-5"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb1153-6"><a href="#cb1153-6"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 100 √ó 8
      id  edad genero    estado_civil tiempo_espera grado_satisfaccion
   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;                &lt;dbl&gt;              &lt;dbl&gt;
 1     1    60 Masculino Casado                  28                  8
 2     2    44 Femenino  Soltero                 22                  8
 3     3    43 Masculino Soltero                  8                  9
 4     4    32 Masculino Soltero                 21                  8
 5     5    66 Masculino Divorciado               7                 10
 6     6    43 Masculino Divorciado              20                  8
 7     7    54 Masculino Casado                  18                  6
 8     8    55 Masculino Soltero                 29                  6
 9     9    56 Masculino Viudo                   17                  9
10    10    34 Femenino  Casado                  34                  8
# ‚Ñπ 90 more rows
# ‚Ñπ 2 more variables: numero_visitas &lt;dbl&gt;, estado_salud &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Aplica el c√≥digo que sea necesario para determinar el tama√±o muestral, el n√∫mero de variables y el tipo de estas.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1155-1"><a href="#cb1155-1"></a><span class="co"># Tama√±o muestral / n√∫mero de observaciones</span></span>
<span id="cb1155-2"><a href="#cb1155-2"></a>n <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span>
<span id="cb1155-3"><a href="#cb1155-3"></a></span>
<span id="cb1155-4"><a href="#cb1155-4"></a><span class="co"># N√∫mero de variables</span></span>
<span id="cb1155-5"><a href="#cb1155-5"></a>p <span class="ot">&lt;-</span> datos <span class="sc">|&gt;</span> <span class="fu">ncol</span>()</span>
<span id="cb1155-6"><a href="#cb1155-6"></a></span>
<span id="cb1155-7"><a href="#cb1155-7"></a><span class="co"># Tipo de variables</span></span>
<span id="cb1155-8"><a href="#cb1155-8"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 100
Columns: 8
$ id                 &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, ‚Ä¶
$ edad               &lt;dbl&gt; 60, 44, 43, 32, 66, 43, 54, 55, 56, 34, 56, 57, 38,‚Ä¶
$ genero             &lt;chr&gt; "Masculino", "Femenino", "Masculino", "Masculino", ‚Ä¶
$ estado_civil       &lt;chr&gt; "Casado", "Soltero", "Soltero", "Soltero", "Divorci‚Ä¶
$ tiempo_espera      &lt;dbl&gt; 28, 22, 8, 21, 7, 20, 18, 29, 17, 34, 20, 29, 2, 31‚Ä¶
$ grado_satisfaccion &lt;dbl&gt; 8, 8, 9, 8, 10, 8, 6, 6, 9, 8, 9, 8, 8, 8, 9, 8, 10‚Ä¶
$ numero_visitas     &lt;dbl&gt; 10, 1, 2, 8, 3, 10, 7, 1, 2, 3, 3, 6, 10, 5, 4, 2, ‚Ä¶
$ estado_salud       &lt;chr&gt; "Regular", "Bueno", "Bueno", "Bueno", "Malo", "Buen‚Ä¶</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-1" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Usando tidyverse, obt√©n la tabla de frecuencias absolutas de la variable <code>genero</code>.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1157-1"><a href="#cb1157-1"></a>tabla_freq <span class="ot">&lt;-</span></span>
<span id="cb1157-2"><a href="#cb1157-2"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1157-3"><a href="#cb1157-3"></a>  <span class="fu">count</span>(genero)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-2" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Incorpora a la tabla anterior las frecuencias relativas. ¬øPodr√≠amos calcular las frecuencias acumuladas? ¬øPor qu√©?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1158"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1158-1"><a href="#cb1158-1"></a>tabla_freq <span class="ot">&lt;-</span></span>
<span id="cb1158-2"><a href="#cb1158-2"></a>  tabla_freq <span class="sc">|&gt;</span> </span>
<span id="cb1158-3"><a href="#cb1158-3"></a>  <span class="fu">rename</span>(<span class="at">frecuencia_abs =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb1158-4"><a href="#cb1158-4"></a>  <span class="fu">mutate</span>(<span class="at">frecuencia_rel =</span> frecuencia_abs<span class="sc">/</span><span class="fu">sum</span>(frecuencia_abs))</span>
<span id="cb1158-5"><a href="#cb1158-5"></a></span>
<span id="cb1158-6"><a href="#cb1158-6"></a><span class="co"># No podemos acumuladas ya que necesitamos una jerarqu√≠a de orden</span></span>
<span id="cb1158-7"><a href="#cb1158-7"></a><span class="co"># son cualis nominales, no ordinales</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Haciendo uso de la tabla, <strong>¬øqu√© % de pacientes son mujeres?</strong></p>
<div class="fragment">
<p>Haz lo mismo tu solo con la variable <code>estado_civil</code> y determina el n√∫mero de personas casadas (deber√≠an ser 26).</p>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-3" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>En <code>R</code> las <span class="hl-yellow"><strong>variables cualitativas pueden ser tratadas como tales</strong></span> convirtiendo una cadena de texto a lo que se conoce como <span class="hl-yellow"><strong>factor</strong></span>. Por ejemplo, supongamos que tenemos un vector de notas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1159-1"><a href="#cb1159-1"></a>notas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"suspenso"</span>, <span class="st">"notable"</span>, <span class="st">"suspenso"</span>, <span class="st">"aprobado"</span>, <span class="st">"notable"</span>, <span class="st">"suspenso"</span>)</span>
<span id="cb1159-2"><a href="#cb1159-2"></a>notas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "suspenso" "notable"  "suspenso" "aprobado" "notable"  "suspenso"</code></pre>
</div>
</div>
<div class="fragment">
<p>Para <span class="hl-yellow"><strong>convertir a factor nos basta con <code>factor()</code></strong></span>. ¬øQu√© notas diferente?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1161-1"><a href="#cb1161-1"></a>notas_fct <span class="ot">&lt;-</span> <span class="fu">factor</span>(notas)</span>
<span id="cb1161-2"><a href="#cb1161-2"></a>notas_fct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] suspenso notable  suspenso aprobado notable  suspenso
Levels: aprobado notable suspenso</code></pre>
</div>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-4" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1163-1"><a href="#cb1163-1"></a>notas_fct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] suspenso notable  suspenso aprobado notable  suspenso
Levels: aprobado notable suspenso</code></pre>
</div>
</div>
<p>Si te fijas ahora <span class="hl-yellow"><strong>tenemos disponibles unos niveles (levels)</strong></span>: son las posibles modalidades de nuestra variable cualitativa, el soporte, de manera que aunque borremos uno de ellos (vamos a borrar todos los aprobados), la opci√≥n sigue disponible si entrase un dato nuevo (algo as√≠ como un men√∫ de opciones permitidas)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1165-1"><a href="#cb1165-1"></a>notas_fct[notas_fct <span class="sc">!=</span> <span class="st">"aprobado"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] suspenso notable  suspenso notable  suspenso
Levels: aprobado notable suspenso</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-5" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>En el caso de las <span class="hl-yellow"><strong>cualitativas ordinales podemos incluso establecer una jerarqu√≠a</strong></span>, indicando expl√≠citamente los niveles y <code>ordered = TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1167-1"><a href="#cb1167-1"></a>notas_fct_ord <span class="ot">&lt;-</span> <span class="fu">factor</span>(notas, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"aprobado"</span>, <span class="st">"notable"</span>, <span class="st">"suspenso"</span>),</span>
<span id="cb1167-2"><a href="#cb1167-2"></a>                        <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1167-3"><a href="#cb1167-3"></a>notas_fct_ord</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] suspenso notable  suspenso aprobado notable  suspenso
Levels: aprobado &lt; notable &lt; suspenso</code></pre>
</div>
</div>
<p>F√≠jate que ahora tenemos una <span class="hl-yellow"><strong>jerarqu√≠a</strong></span> y aunque sea cualitativa podemos buscar <span class="hl-yellow"><strong>elementos &lt;= o &gt;= que otros</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1169-1"><a href="#cb1169-1"></a>notas_fct_ord[notas_fct_ord <span class="sc">&lt;=</span> <span class="st">"notable"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] notable  aprobado notable 
Levels: aprobado &lt; notable &lt; suspenso</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-6" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Haz que tu variable <code>estado_salud</code> sea una factor representando una cualitativa ordinal</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1171-1"><a href="#cb1171-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb1171-2"><a href="#cb1171-2"></a>  datos <span class="sc">|&gt;</span></span>
<span id="cb1171-3"><a href="#cb1171-3"></a>  <span class="fu">mutate</span>(<span class="at">estado_salud =</span></span>
<span id="cb1171-4"><a href="#cb1171-4"></a>           <span class="fu">factor</span>(estado_salud, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Malo"</span>, <span class="st">"Regular"</span>, <span class="st">"Bueno"</span>, <span class="st">"Excelente"</span>),</span>
<span id="cb1171-5"><a href="#cb1171-5"></a>                  <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-7" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Calcula la tabla de frecuencias para <code>estado_salud</code> incluyendo todo lo que puedas (¬øse puede ahora calcular las frecuencias acumuladas). ¬øCu√°ntos pacientes est√°n en un estado de salud regular o peor? (pisa: 59 personas).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1172"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1172-1"><a href="#cb1172-1"></a>tabla_freq <span class="ot">&lt;-</span> </span>
<span id="cb1172-2"><a href="#cb1172-2"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1172-3"><a href="#cb1172-3"></a>  <span class="fu">count</span>(estado_salud) <span class="sc">|&gt;</span> </span>
<span id="cb1172-4"><a href="#cb1172-4"></a>  <span class="fu">rename</span>(<span class="at">frecuencia_abs =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb1172-5"><a href="#cb1172-5"></a>  <span class="fu">mutate</span>(<span class="at">frecuencia_rel =</span> frecuencia_abs<span class="sc">/</span><span class="fu">sum</span>(frecuencia_abs),</span>
<span id="cb1172-6"><a href="#cb1172-6"></a>         <span class="at">frecuencia_acum_abs =</span> <span class="fu">cumsum</span>(frecuencia_abs),</span>
<span id="cb1172-7"><a href="#cb1172-7"></a>         <span class="at">frecuencia_acum_rel =</span> <span class="fu">cumsum</span>(frecuencia_rel))</span>
<span id="cb1172-8"><a href="#cb1172-8"></a></span>
<span id="cb1172-9"><a href="#cb1172-9"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb1172-10"><a href="#cb1172-10"></a>  <span class="fu">count</span>(estado_salud <span class="sc">&lt;=</span> <span class="st">"Regular"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-8" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Calcula la media, mediana, cuartiles y desviaci√≥n t√≠pica de edad y tiempo de espera. Guarda los resultados en <code>resumen</code> y exp√≥rtalo a un <code>resumen.csv</code></p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1173"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1173-1"><a href="#cb1173-1"></a>resumen <span class="ot">&lt;-</span></span>
<span id="cb1173-2"><a href="#cb1173-2"></a>  datos <span class="sc">|&gt;</span></span>
<span id="cb1173-3"><a href="#cb1173-3"></a>  <span class="fu">summarise</span>(<span class="at">media_edad =</span> <span class="fu">mean</span>(edad), <span class="at">sd_edad =</span> <span class="fu">sd</span>(edad),</span>
<span id="cb1173-4"><a href="#cb1173-4"></a>            <span class="at">mediana_edad =</span> <span class="fu">median</span>(edad),</span>
<span id="cb1173-5"><a href="#cb1173-5"></a>            <span class="at">Q1_edad =</span> <span class="fu">quantile</span>(edad, <span class="at">probs =</span> <span class="fl">0.25</span>),</span>
<span id="cb1173-6"><a href="#cb1173-6"></a>            <span class="at">Q3_edad =</span> <span class="fu">quantile</span>(edad, <span class="at">probs =</span> <span class="fl">0.75</span>),</span>
<span id="cb1173-7"><a href="#cb1173-7"></a>            <span class="co"># tiempo espera</span></span>
<span id="cb1173-8"><a href="#cb1173-8"></a>            <span class="at">media_tiempo_espera =</span> <span class="fu">mean</span>(tiempo_espera), </span>
<span id="cb1173-9"><a href="#cb1173-9"></a>            <span class="at">sd_tiempo_espera =</span> <span class="fu">sd</span>(tiempo_espera),</span>
<span id="cb1173-10"><a href="#cb1173-10"></a>            <span class="at">mediana_tiempo_espera =</span> <span class="fu">median</span>(tiempo_espera),</span>
<span id="cb1173-11"><a href="#cb1173-11"></a>            <span class="at">Q1_tiempo_espera =</span> <span class="fu">quantile</span>(tiempo_espera, <span class="at">probs =</span> <span class="fl">0.25</span>),</span>
<span id="cb1173-12"><a href="#cb1173-12"></a>            <span class="at">Q3_tiempo_espera =</span> <span class="fu">quantile</span>(tiempo_espera, <span class="at">probs =</span> <span class="fl">0.75</span>))</span>
<span id="cb1173-13"><a href="#cb1173-13"></a><span class="fu">write_csv</span>(resumen, <span class="at">file =</span> <span class="st">"./datos/resumen.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-9" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Haz una tabla de frecuencias (absolutas) cruzada entre <code>genero</code> y <code>estado_salud</code> con tidyverse para que quede como la tabla inferior</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1174"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1174-1"><a href="#cb1174-1"></a><span class="co"># Primero cuento de manera bidimensional con count(var1, var2)</span></span>
<span id="cb1174-2"><a href="#cb1174-2"></a>conteo_bidim <span class="ot">&lt;-</span></span>
<span id="cb1174-3"><a href="#cb1174-3"></a>  datos <span class="sc">|&gt;</span></span>
<span id="cb1174-4"><a href="#cb1174-4"></a>  <span class="fu">count</span>(genero, estado_salud)</span>
<span id="cb1174-5"><a href="#cb1174-5"></a>conteo_bidim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 √ó 3
  genero    estado_salud     n
  &lt;chr&gt;     &lt;ord&gt;        &lt;int&gt;
1 Femenino  Malo             5
2 Femenino  Regular         24
3 Femenino  Bueno           24
4 Masculino Malo            10
5 Masculino Regular         20
6 Masculino Bueno           16
7 Masculino Excelente        1</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-10" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Haciendo uso de la tabla anterior, ¬øqu√© debes hacer para obtener una tabla de frecuencias bidimensional como la de abajo? (la tabla de frecuencias en formato habitual)</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1176"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1176-1"><a href="#cb1176-1"></a><span class="co"># Despu√©s pivoto para que use la columna estado_salud</span></span>
<span id="cb1176-2"><a href="#cb1176-2"></a><span class="co"># como futuros nombres de variables (pivota de vertical a horizontal)</span></span>
<span id="cb1176-3"><a href="#cb1176-3"></a><span class="co">#   - names_from: de donde saldr√°n los futuros nombres de columnas</span></span>
<span id="cb1176-4"><a href="#cb1176-4"></a><span class="co">#   - values_from: de donde sacamos los valores num√©ricos (en este caso n)</span></span>
<span id="cb1176-5"><a href="#cb1176-5"></a><span class="co">#     para rellenar la tabla</span></span>
<span id="cb1176-6"><a href="#cb1176-6"></a>tabla_freq_abs <span class="ot">&lt;-</span></span>
<span id="cb1176-7"><a href="#cb1176-7"></a>  conteo_bidim <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> estado_salud, <span class="at">values_from =</span> n)</span>
<span id="cb1176-8"><a href="#cb1176-8"></a>tabla_freq_abs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 5
  genero     Malo Regular Bueno Excelente
  &lt;chr&gt;     &lt;int&gt;   &lt;int&gt; &lt;int&gt;     &lt;int&gt;
1 Femenino      5      24    24        NA
2 Masculino    10      20    16         1</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-11" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>Tambi√©n se puede hacer en <code>R base</code> con <code>table()</code> (que adem√°s de ser m√°s sencillo respeta la jerarqu√≠a de la ordinal). <span class="hl-yellow"><strong>Moraleja: a veces R base nos facilita la vida, no lo olvidemos porque lo vas a necesitar</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1178-1"><a href="#cb1178-1"></a>tabla_freq <span class="ot">&lt;-</span> <span class="fu">table</span>(datos<span class="sc">$</span>genero, datos<span class="sc">$</span>estado_salud)</span>
<span id="cb1178-2"><a href="#cb1178-2"></a>tabla_freq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           
            Malo Regular Bueno Excelente
  Femenino     5      24    24         0
  Masculino   10      20    16         1</code></pre>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-12" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>La tabla anterior se puede <span class="hl-yellow"><strong>calcular con frecuencias relativa por filas y por columnas</strong></span> (es decir,una que toda las filas sumen el total, 1, y otra que las columnas sumen 1) haciendo uso de <code>prop.table()</code> aplicada a la tabla anterior (si <code>margin = 1</code> normaliza por filas, si <code>margin = 2</code> por columnas).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1180-1"><a href="#cb1180-1"></a><span class="fu">prop.table</span>(tabla_freq, <span class="at">margin =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           
                  Malo    Regular      Bueno  Excelente
  Femenino  0.09433962 0.45283019 0.45283019 0.00000000
  Masculino 0.21276596 0.42553191 0.34042553 0.02127660</code></pre>
</div>
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1182-1"><a href="#cb1182-1"></a><span class="fu">prop.table</span>(tabla_freq, <span class="at">margin =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           
                 Malo   Regular     Bueno Excelente
  Femenino  0.3333333 0.5454545 0.6000000 0.0000000
  Masculino 0.6666667 0.4545455 0.4000000 1.0000000</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>Moraleja: tablas de frecuencia podemos hacerlas en tidyverse pero bidimensionales R base nos ayuda mejor. Deberemos viajar entre los dos mundos muchas veces</strong></span></p>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-13" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Haciendo uso de las tablas anteriores contesta a las siguientes preguntas:</p>
<ul>
<li><p>¬øQu√© porcentaje de entre las mujeres tiene un buen estado de salud?</p></li>
<li><p>¬øQu√© porcentaje de entre los hombres tiene un estado de salud regular?</p></li>
<li><p>¬øQu√© porcentaje de los que tienen estado de salud malo son mujeres?</p></li>
</ul>
<p><strong>Clicka debajo para ver la respuesta cuando lo tengas</strong></p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1184-1"><a href="#cb1184-1"></a><span class="co"># De entre las mujeres un 45.28% tiene un buen estado de salud</span></span>
<span id="cb1184-2"><a href="#cb1184-2"></a><span class="co"># De entre los hombres un 34.04% tiene un estado de salud regular</span></span>
<span id="cb1184-3"><a href="#cb1184-3"></a><span class="co"># Un 33.33% de los que tienen un estado de salud malo, son mujeres</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-14" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù <strong>Un poquito de reminder de inferencia</strong>. Haciendo uso de la tabla de frecuencias absolutas, ejecuta el c√≥digo que consideres para responder a la pregunta: ¬øest√°n estas dos variables (<code>estado_salud</code> y <code>genero</code>) asociadas? ¬øExiste alg√∫n tipo de dependencia entre ellas? Hazlo considerando <span class="math inline">\(\alpha = 0.05\)</span>.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1185"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1185-1"><a href="#cb1185-1"></a><span class="co"># Opci√≥n 1: prueba de chi-cuadrado que nos permite sacar conclusiones</span></span>
<span id="cb1185-2"><a href="#cb1185-2"></a><span class="co"># sobre la independencia de dos variables cualitativas</span></span>
<span id="cb1185-3"><a href="#cb1185-3"></a></span>
<span id="cb1185-4"><a href="#cb1185-4"></a><span class="co"># chisq.test() hace el contraste haciendo uso de la tabla de frec</span></span>
<span id="cb1185-5"><a href="#cb1185-5"></a><span class="fu">chisq.test</span>(tabla_freq)</span>
<span id="cb1185-6"><a href="#cb1185-6"></a></span>
<span id="cb1185-7"><a href="#cb1185-7"></a><span class="co"># Como el p-value = 0.2322 y alpha = 5%, no podemos rechazar la</span></span>
<span id="cb1185-8"><a href="#cb1185-8"></a><span class="co"># hip√≥tesis nula de independencia: no hay evidencias suficientes </span></span>
<span id="cb1185-9"><a href="#cb1185-9"></a><span class="co"># CON LA MUESTRA QUE TENEMOS para concluir que haya alguna asociaci√≥n</span></span>
<span id="cb1185-10"><a href="#cb1185-10"></a><span class="co"># entre g√©nero y estado de salud</span></span>
<span id="cb1185-11"><a href="#cb1185-11"></a></span>
<span id="cb1185-12"><a href="#cb1185-12"></a><span class="co"># Opci√≥n 2: test exacto de Fisher, especialmente √∫til cuando</span></span>
<span id="cb1185-13"><a href="#cb1185-13"></a><span class="co"># las frecuencias esperadas son bajas.</span></span>
<span id="cb1185-14"><a href="#cb1185-14"></a><span class="fu">fisher.test</span>(tabla_freq)</span>
<span id="cb1185-15"><a href="#cb1185-15"></a><span class="co"># Diferente p-valor pero misma conclusi√≥n</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-15" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>Las funciones <code>chisq.test()</code> y <code>fisher.test()</code> pueden tomar como argumento una tabla de frecuencias ya resumida o puede tomar [<strong>dos variables y la funci√≥n ya realiza el conteo</strong>]{.hl-yellow. Por ejemplo si hacemos <code>chisq.test(var1, var2)</code> obtenemos un objeto <code>htest</code> que dentro contiene el p-valor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1186-1"><a href="#cb1186-1"></a>test_chisq <span class="ot">&lt;-</span> <span class="fu">chisq.test</span>(datos<span class="sc">$</span>genero, datos<span class="sc">$</span>estado_salud)</span>
<span id="cb1186-2"><a href="#cb1186-2"></a><span class="fu">names</span>(test_chisq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "statistic" "parameter" "p.value"   "method"    "data.name" "observed" 
[7] "expected"  "residuals" "stdres"   </code></pre>
</div>
</div>
<div class="fragment">
<p>Por tanto si aplicamos la funci√≥n y hacemos despu√©s <code>$p.value</code> podemos obtener <strong>directamente el valor num√©rico que nos interesa</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1188-1"><a href="#cb1188-1"></a><span class="fu">chisq.test</span>(datos<span class="sc">$</span>genero, datos<span class="sc">$</span>estado_salud)<span class="sc">$</span>p.value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2322175</code></pre>
</div>
</div>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-16" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù ¬øC√≥mo usar tidyverse para tener en una tabla resumen ambos p-valores?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1190-1"><a href="#cb1190-1"></a>tabla_p_valores <span class="ot">&lt;-</span></span>
<span id="cb1190-2"><a href="#cb1190-2"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1190-3"><a href="#cb1190-3"></a>  <span class="fu">summarise</span>(<span class="st">"sig_chisq"</span> <span class="ot">=</span> <span class="fu">chisq.test</span>(genero, estado_salud)<span class="sc">$</span>p.value,</span>
<span id="cb1190-4"><a href="#cb1190-4"></a>            <span class="st">"sig_fisher"</span> <span class="ot">=</span> <span class="fu">fisher.test</span>(genero, estado_salud)<span class="sc">$</span>p.value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-17" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù C√°lcula la matriz correlaciones de Pearson entre las variables num√©ricas. ¬øExiste dependencia LINEAL entre la variable edad y el tiempo de espera? (recuerda: correlaci√≥n de Pearson solo mide asociaci√≥n lineal). Echa un vistazo al paquete <code>{corrr}</code></p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1191"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1191-1"><a href="#cb1191-1"></a><span class="co"># Opci√≥n 1</span></span>
<span id="cb1191-2"><a href="#cb1191-2"></a>mat_cor <span class="ot">&lt;-</span></span>
<span id="cb1191-3"><a href="#cb1191-3"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1191-4"><a href="#cb1191-4"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="cb1191-5"><a href="#cb1191-5"></a>  <span class="fu">cor</span>()</span>
<span id="cb1191-6"><a href="#cb1191-6"></a></span>
<span id="cb1191-7"><a href="#cb1191-7"></a><span class="co"># Opci√≥n 2</span></span>
<span id="cb1191-8"><a href="#cb1191-8"></a>mat_cor <span class="ot">&lt;-</span></span>
<span id="cb1191-9"><a href="#cb1191-9"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1191-10"><a href="#cb1191-10"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="cb1191-11"><a href="#cb1191-11"></a>  corrr<span class="sc">::</span><span class="fu">correlate</span>()</span>
<span id="cb1191-12"><a href="#cb1191-12"></a></span>
<span id="cb1191-13"><a href="#cb1191-13"></a><span class="co"># La correlaci√≥n es de 0.0669 por lo que no parezca exista relaci√≥n</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-18" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Calcula en una tabla resumen la correlaci√≥n y el p-valor derivado de un test de correlaciones (<code>cor.test()</code>) entre ambas variables</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1192-1"><a href="#cb1192-1"></a>cor_summary <span class="ot">&lt;-</span></span>
<span id="cb1192-2"><a href="#cb1192-2"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1192-3"><a href="#cb1192-3"></a>  <span class="fu">summarise</span>(<span class="st">"cor"</span> <span class="ot">=</span> <span class="fu">cor</span>(edad, tiempo_espera),</span>
<span id="cb1192-4"><a href="#cb1192-4"></a>            <span class="st">"sig_cor"</span> <span class="ot">=</span> <span class="fu">cor.test</span>(edad, tiempo_espera)<span class="sc">$</span>p.value)</span>
<span id="cb1192-5"><a href="#cb1192-5"></a><span class="co"># No parece existir evidencia significativa de dependencia lineal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-pr√°ctico-ii-encuesta-de-satisfacci√≥n-19" class="slide level2">
<h2>üê£ Caso pr√°ctico II: encuesta de satisfacci√≥n</h2>
<p>üìù Repite todo lo anterior con las variables tiempo de espera y grado de satisfacci√≥n</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb1193"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1193-1"><a href="#cb1193-1"></a>mat_cor <span class="ot">&lt;-</span> </span>
<span id="cb1193-2"><a href="#cb1193-2"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1193-3"><a href="#cb1193-3"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="cb1193-4"><a href="#cb1193-4"></a>  corrr<span class="sc">::</span><span class="fu">correlate</span>()</span>
<span id="cb1193-5"><a href="#cb1193-5"></a></span>
<span id="cb1193-6"><a href="#cb1193-6"></a>cor_summary <span class="ot">&lt;-</span></span>
<span id="cb1193-7"><a href="#cb1193-7"></a>  datos <span class="sc">|&gt;</span> </span>
<span id="cb1193-8"><a href="#cb1193-8"></a>  <span class="fu">summarise</span>(<span class="st">"cor"</span> <span class="ot">=</span> <span class="fu">cor</span>(grado_satisfaccion, tiempo_espera),</span>
<span id="cb1193-9"><a href="#cb1193-9"></a>            <span class="st">"sig_cor"</span> <span class="ot">=</span> <span class="fu">cor.test</span>(grado_satisfaccion, tiempo_espera)<span class="sc">$</span>p.value)</span>
<span id="cb1193-10"><a href="#cb1193-10"></a><span class="co"># S√≠ parece existir evidencia significativa de dependencia lineal</span></span>
<span id="cb1193-11"><a href="#cb1193-11"></a><span class="co"># concretamente negativa: a m√°s espera, menor satisfacci√≥n</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section>
<section>
<section id="clase-18" class="title-slide slide level1 center">
<h1>Clase 18: casos reales</h1>
<p><span style="color:#444442;"><strong>Repaso con casos reales</strong></span></p>
</section>
<section class="slide level2">

<ul>
<li><p>brexit</p></li>
<li><p>datos contaminaci√≥n</p></li>
<li><p>accidentes tr√°fico</p></li>
</ul>
</section></section>
<section>
<section id="clase-19" class="title-slide slide level1 center">
<h1>Clase 19: <span class="flow">entrega III</span></h1>
<p><span style="color:#444442;"><strong>Ponderaci√≥n: 25%</strong></span></p>
</section>
<section id="instrucciones-1" class="slide level2">
<h2>Instrucciones</h2>
<p>El d√≠a de la entrega tendr√°s subido una <span class="hl-yellow"><strong>plantilla de entrega</strong></span> en formato <code>.qmd</code> en el campus.</p>
<ul>
<li><p><strong>Descomprime la carpeta</strong> (¬°importante! si no descomprimes, aunque puedas editar el <code>.qmd</code>, no podr√°s generar el <code>.html</code>)</p></li>
<li><p><strong>Edita la cabecera</strong> con tu nombre y DNI</p></li>
<li><p>Deber√°s <strong>rellenar cada chunk</strong> con el c√≥digo que consideres (en algunos te he dejado pistas) y <strong>cambiar</strong> de <code>#| eval: false</code> a <code>#| eval: true</code> (si los quitas directamente, por defecto ya es true)</p></li>
<li><p>Deber√°s de <strong>comentar</strong> con texto normal lo que consideres para responder a las preguntas.</p></li>
<li><p>Ser√° <span class="hl-yellow"><strong>OBLIGATORIO</strong></span> subir el archivo <code>.html</code> generado (solo se corregir√° dicho archivo) as√≠ que ve renderizando seg√∫n rellenas el documento, no lo dejes para el final.</p></li>
</ul>
</section></section>
<section>
<section id="clase-20" class="title-slide slide level1 center">
<h1>Clase 20: intro a dataviz</h1>
<p><span style="color:#444442;"><strong>Empieza la fantas√≠a: visualizaci√≥n de datos</strong></span></p>
</section>
<section id="section" class="slide level2">
<h2>‚Ä¶</h2>
<div class="footer footer-default">
<p><a href="..."><strong>Javier √Ålvarez Li√©bana</strong></a> ‚Ä¢ Grado en Ciencia de Datos Aplicada (UCM)</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true,"width":"normal"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>